function Pj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in e)){const a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(e,o,a.get?a:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function oy(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}),r}var LC={exports:{}},ac={},NC={exports:{}},ut={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var x1=Object.getOwnPropertySymbols,Lj=Object.prototype.hasOwnProperty,Nj=Object.prototype.propertyIsEnumerable;function jj(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Aj(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(a){o[a]=a}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var ay=Aj()?Object.assign:function(e,t){for(var r,n=jj(e),o,a=1;a<arguments.length;a++){r=Object(arguments[a]);for(var l in r)Lj.call(r,l)&&(n[l]=r[l]);if(x1){o=x1(r);for(var u=0;u<o.length;u++)Nj.call(r,o[u])&&(n[o[u]]=r[o[u]])}}return n};const Mj=wt(ay);/** @license React v16.14.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sy=ay,Kn=typeof Symbol=="function"&&Symbol.for,sc=Kn?Symbol.for("react.element"):60103,Ij=Kn?Symbol.for("react.portal"):60106,Rj=Kn?Symbol.for("react.fragment"):60107,_j=Kn?Symbol.for("react.strict_mode"):60108,$j=Kn?Symbol.for("react.profiler"):60114,Dj=Kn?Symbol.for("react.provider"):60109,Fj=Kn?Symbol.for("react.context"):60110,zj=Kn?Symbol.for("react.forward_ref"):60112,Hj=Kn?Symbol.for("react.suspense"):60113,Bj=Kn?Symbol.for("react.memo"):60115,Wj=Kn?Symbol.for("react.lazy"):60116,S1=typeof Symbol=="function"&&Symbol.iterator;function lc(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},AC={};function Js(e,t,r){this.props=e,this.context=t,this.refs=AC,this.updater=r||jC}Js.prototype.isReactComponent={};Js.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(lc(85));this.updater.enqueueSetState(this,e,t,"setState")};Js.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function MC(){}MC.prototype=Js.prototype;function ly(e,t,r){this.props=e,this.context=t,this.refs=AC,this.updater=r||jC}var uy=ly.prototype=new MC;uy.constructor=ly;sy(uy,Js.prototype);uy.isPureReactComponent=!0;var cy={current:null},IC=Object.prototype.hasOwnProperty,RC={key:!0,ref:!0,__self:!0,__source:!0};function _C(e,t,r){var n,o={},a=null,l=null;if(t!=null)for(n in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)IC.call(t,n)&&!RC.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var d=Array(u),h=0;h<u;h++)d[h]=arguments[h+2];o.children=d}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)o[n]===void 0&&(o[n]=u[n]);return{$$typeof:sc,type:e,key:a,ref:l,props:o,_owner:cy.current}}function Uj(e,t){return{$$typeof:sc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fy(e){return typeof e=="object"&&e!==null&&e.$$typeof===sc}function Kj(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(r){return t[r]})}var $C=/\/+/g,pd=[];function DC(e,t,r,n){if(pd.length){var o=pd.pop();return o.result=e,o.keyPrefix=t,o.func=r,o.context=n,o.count=0,o}return{result:e,keyPrefix:t,func:r,context:n,count:0}}function FC(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>pd.length&&pd.push(e)}function bv(e,t,r,n){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case sc:case Ij:a=!0}}if(a)return r(n,e,t===""?"."+xg(e,0):t),1;if(a=0,t=t===""?".":t+":",Array.isArray(e))for(var l=0;l<e.length;l++){o=e[l];var u=t+xg(o,l);a+=bv(o,u,r,n)}else if(e===null||typeof e!="object"?u=null:(u=S1&&e[S1]||e["@@iterator"],u=typeof u=="function"?u:null),typeof u=="function")for(e=u.call(e),l=0;!(o=e.next()).done;)o=o.value,u=t+xg(o,l++),a+=bv(o,u,r,n);else if(o==="object")throw r=""+e,Error(lc(31,r==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return a}function xv(e,t,r){return e==null?0:bv(e,"",t,r)}function xg(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Kj(e.key):t.toString(36)}function Gj(e,t){e.func.call(e.context,t,e.count++)}function qj(e,t,r){var n=e.result,o=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?Sv(e,n,r,function(a){return a}):e!=null&&(fy(e)&&(e=Uj(e,o+(!e.key||t&&t.key===e.key?"":(""+e.key).replace($C,"$&/")+"/")+r)),n.push(e))}function Sv(e,t,r,n,o){var a="";r!=null&&(a=(""+r).replace($C,"$&/")+"/"),t=DC(t,a,n,o),xv(e,qj,t),FC(t)}var zC={current:null};function qi(){var e=zC.current;if(e===null)throw Error(lc(321));return e}var Vj={ReactCurrentDispatcher:zC,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:cy,IsSomeRendererActing:{current:!1},assign:sy};ut.Children={map:function(e,t,r){if(e==null)return e;var n=[];return Sv(e,n,null,t,r),n},forEach:function(e,t,r){if(e==null)return e;t=DC(null,null,t,r),xv(e,Gj,t),FC(t)},count:function(e){return xv(e,function(){return null},null)},toArray:function(e){var t=[];return Sv(e,t,null,function(r){return r}),t},only:function(e){if(!fy(e))throw Error(lc(143));return e}};ut.Component=Js;ut.Fragment=Rj;ut.Profiler=$j;ut.PureComponent=ly;ut.StrictMode=_j;ut.Suspense=Hj;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Vj;ut.cloneElement=function(e,t,r){if(e==null)throw Error(lc(267,e));var n=sy({},e.props),o=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=cy.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)IC.call(t,d)&&!RC.hasOwnProperty(d)&&(n[d]=t[d]===void 0&&u!==void 0?u[d]:t[d])}var d=arguments.length-2;if(d===1)n.children=r;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:sc,type:e.type,key:o,ref:a,props:n,_owner:l}};ut.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:Fj,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:Dj,_context:e},e.Consumer=e};ut.createElement=_C;ut.createFactory=function(e){var t=_C.bind(null,e);return t.type=e,t};ut.createRef=function(){return{current:null}};ut.forwardRef=function(e){return{$$typeof:zj,render:e}};ut.isValidElement=fy;ut.lazy=function(e){return{$$typeof:Wj,_ctor:e,_status:-1,_result:null}};ut.memo=function(e,t){return{$$typeof:Bj,type:e,compare:t===void 0?null:t}};ut.useCallback=function(e,t){return qi().useCallback(e,t)};ut.useContext=function(e,t){return qi().useContext(e,t)};ut.useDebugValue=function(){};ut.useEffect=function(e,t){return qi().useEffect(e,t)};ut.useImperativeHandle=function(e,t,r){return qi().useImperativeHandle(e,t,r)};ut.useLayoutEffect=function(e,t){return qi().useLayoutEffect(e,t)};ut.useMemo=function(e,t){return qi().useMemo(e,t)};ut.useReducer=function(e,t,r){return qi().useReducer(e,t,r)};ut.useRef=function(e){return qi().useRef(e)};ut.useState=function(e){return qi().useState(e)};ut.version="16.14.0";NC.exports=ut;var E=NC.exports;const _e=wt(E);/** @license React v16.14.0
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj=E,HC=60103;ac.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var E1=Symbol.for;HC=E1("react.element"),ac.Fragment=E1("react.fragment")}var Yj=Xj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qj=Object.prototype.hasOwnProperty,Jj={key:!0,ref:!0,__self:!0,__source:!0};function BC(e,t,r){var n,o={},a=null,l=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(n in t)Qj.call(t,n)&&!Jj.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:HC,type:e,key:a,ref:l,props:o,_owner:Yj.current}}ac.jsx=BC;ac.jsxs=BC;LC.exports=ac;var y=LC.exports,WC={exports:{}},Cn={},UC={exports:{}},KC={};/** @license React v0.19.1
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){var t,r,n,o,a;if(typeof window>"u"||typeof MessageChannel!="function"){var l=null,u=null,d=function(){if(l!==null)try{var Z=e.unstable_now();l(!0,Z),l=null}catch(ae){throw setTimeout(d,0),ae}},h=Date.now();e.unstable_now=function(){return Date.now()-h},t=function(Z){l!==null?setTimeout(t,0,Z):(l=Z,setTimeout(d,0))},r=function(Z,ae){u=setTimeout(Z,ae)},n=function(){clearTimeout(u)},o=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var g=window.performance,m=window.Date,w=window.setTimeout,x=window.clearTimeout;if(typeof console<"u"){var C=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),typeof C!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if(typeof g=="object"&&typeof g.now=="function")e.unstable_now=function(){return g.now()};else{var j=m.now();e.unstable_now=function(){return m.now()-j}}var T=!1,k=null,P=-1,A=5,L=0;o=function(){return e.unstable_now()>=L},a=function(){},e.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):A=0<Z?Math.floor(1e3/Z):5};var R=new MessageChannel,D=R.port2;R.port1.onmessage=function(){if(k!==null){var Z=e.unstable_now();L=Z+A;try{k(!0,Z)?D.postMessage(null):(T=!1,k=null)}catch(ae){throw D.postMessage(null),ae}}else T=!1},t=function(Z){k=Z,T||(T=!0,D.postMessage(null))},r=function(Z,ae){P=w(function(){Z(e.unstable_now())},ae)},n=function(){x(P),P=-1}}function $(Z,ae){var le=Z.length;Z.push(ae);e:for(;;){var ce=le-1>>>1,me=Z[ce];if(me!==void 0&&0<Y(me,ae))Z[ce]=ae,Z[le]=me,le=ce;else break e}}function B(Z){return Z=Z[0],Z===void 0?null:Z}function U(Z){var ae=Z[0];if(ae!==void 0){var le=Z.pop();if(le!==ae){Z[0]=le;e:for(var ce=0,me=Z.length;ce<me;){var Le=2*(ce+1)-1,Ne=Z[Le],Ee=Le+1,et=Z[Ee];if(Ne!==void 0&&0>Y(Ne,le))et!==void 0&&0>Y(et,Ne)?(Z[ce]=et,Z[Ee]=le,ce=Ee):(Z[ce]=Ne,Z[Le]=le,ce=Le);else if(et!==void 0&&0>Y(et,le))Z[ce]=et,Z[Ee]=le,ce=Ee;else break e}}return ae}return null}function Y(Z,ae){var le=Z.sortIndex-ae.sortIndex;return le!==0?le:Z.id-ae.id}var V=[],de=[],W=1,_=null,M=3,Q=!1,oe=!1,re=!1;function X(Z){for(var ae=B(de);ae!==null;){if(ae.callback===null)U(de);else if(ae.startTime<=Z)U(de),ae.sortIndex=ae.expirationTime,$(V,ae);else break;ae=B(de)}}function ie(Z){if(re=!1,X(Z),!oe)if(B(V)!==null)oe=!0,t(ue);else{var ae=B(de);ae!==null&&r(ie,ae.startTime-Z)}}function ue(Z,ae){oe=!1,re&&(re=!1,n()),Q=!0;var le=M;try{for(X(ae),_=B(V);_!==null&&(!(_.expirationTime>ae)||Z&&!o());){var ce=_.callback;if(ce!==null){_.callback=null,M=_.priorityLevel;var me=ce(_.expirationTime<=ae);ae=e.unstable_now(),typeof me=="function"?_.callback=me:_===B(V)&&U(V),X(ae)}else U(V);_=B(V)}if(_!==null)var Le=!0;else{var Ne=B(de);Ne!==null&&r(ie,Ne.startTime-ae),Le=!1}return Le}finally{_=null,M=le,Q=!1}}function he(Z){switch(Z){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var Se=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Z){Z.callback=null},e.unstable_continueExecution=function(){oe||Q||(oe=!0,t(ue))},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return B(V)},e.unstable_next=function(Z){switch(M){case 1:case 2:case 3:var ae=3;break;default:ae=M}var le=M;M=ae;try{return Z()}finally{M=le}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=Se,e.unstable_runWithPriority=function(Z,ae){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var le=M;M=Z;try{return ae()}finally{M=le}},e.unstable_scheduleCallback=function(Z,ae,le){var ce=e.unstable_now();if(typeof le=="object"&&le!==null){var me=le.delay;me=typeof me=="number"&&0<me?ce+me:ce,le=typeof le.timeout=="number"?le.timeout:he(Z)}else le=he(Z),me=ce;return le=me+le,Z={id:W++,callback:ae,priorityLevel:Z,startTime:me,expirationTime:le,sortIndex:-1},me>ce?(Z.sortIndex=me,$(de,Z),B(V)===null&&Z===B(de)&&(re?n():re=!0,r(ie,me-ce))):(Z.sortIndex=le,$(V,Z),oe||Q||(oe=!0,t(ue))),Z},e.unstable_shouldYield=function(){var Z=e.unstable_now();X(Z);var ae=B(V);return ae!==_&&_!==null&&ae!==null&&ae.callback!==null&&ae.startTime<=Z&&ae.expirationTime<_.expirationTime||o()},e.unstable_wrapCallback=function(Z){var ae=M;return function(){var le=M;M=ae;try{return Z.apply(this,arguments)}finally{M=le}}}})(KC);UC.exports=KC;var Zj=UC.exports;/** @license React v16.14.0
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dh=E,jr=ay,dr=Zj;function ve(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!dh)throw Error(ve(227));function eA(e,t,r,n,o,a,l,u,d){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(g){this.onError(g)}}var wu=!1,gd=null,vd=!1,Ev=null,tA={onError:function(e){wu=!0,gd=e}};function rA(e,t,r,n,o,a,l,u,d){wu=!1,gd=null,eA.apply(tA,arguments)}function nA(e,t,r,n,o,a,l,u,d){if(rA.apply(this,arguments),wu){if(wu){var h=gd;wu=!1,gd=null}else throw Error(ve(198));vd||(vd=!0,Ev=h)}}var dy=null,GC=null,qC=null;function C1(e,t,r){var n=e.type||"unknown-event";e.currentTarget=qC(r),nA(n,t,void 0,e),e.currentTarget=null}var md=null,ws={};function VC(){if(md)for(var e in ws){var t=ws[e],r=md.indexOf(e);if(!(-1<r))throw Error(ve(96,e));if(!yd[r]){if(!t.extractEvents)throw Error(ve(97,e));yd[r]=t,r=t.eventTypes;for(var n in r){var o=void 0,a=r[n],l=t,u=n;if(Cv.hasOwnProperty(u))throw Error(ve(99,u));Cv[u]=a;var d=a.phasedRegistrationNames;if(d){for(o in d)d.hasOwnProperty(o)&&k1(d[o],l,u);o=!0}else a.registrationName?(k1(a.registrationName,l,u),o=!0):o=!1;if(!o)throw Error(ve(98,n,e))}}}}function k1(e,t,r){if(_s[e])throw Error(ve(100,e));_s[e]=t,hy[e]=t.eventTypes[r].dependencies}var yd=[],Cv={},_s={},hy={};function XC(e){var t=!1,r;for(r in e)if(e.hasOwnProperty(r)){var n=e[r];if(!ws.hasOwnProperty(r)||ws[r]!==n){if(ws[r])throw Error(ve(102,r));ws[r]=n,t=!0}}t&&VC()}var Ro=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kv=null,Ps=null,Ls=null;function T1(e){if(e=GC(e)){if(typeof kv!="function")throw Error(ve(280));var t=e.stateNode;t&&(t=dy(t),kv(e.stateNode,e.type,t))}}function YC(e){Ps?Ls?Ls.push(e):Ls=[e]:Ps=e}function QC(){if(Ps){var e=Ps,t=Ls;if(Ls=Ps=null,T1(e),t)for(e=0;e<t.length;e++)T1(t[e])}}function py(e,t){return e(t)}function JC(e,t,r,n,o){return e(t,r,n,o)}function gy(){}var ZC=py,oa=!1,Sg=!1;function vy(){(Ps!==null||Ls!==null)&&(gy(),QC())}function ek(e,t,r){if(Sg)return e(t,r);Sg=!0;try{return ZC(e,t,r)}finally{Sg=!1,vy()}}var iA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1=Object.prototype.hasOwnProperty,P1={},L1={};function oA(e){return O1.call(L1,e)?!0:O1.call(P1,e)?!1:iA.test(e)?L1[e]=!0:(P1[e]=!0,!1)}function aA(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sA(e,t,r,n){if(t===null||typeof t>"u"||aA(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ar(e,t,r,n,o,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){hr[e]=new Ar(e,0,!1,e,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];hr[t]=new Ar(t,1,!1,e[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){hr[e]=new Ar(e,2,!1,e.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){hr[e]=new Ar(e,2,!1,e,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){hr[e]=new Ar(e,3,!1,e.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(e){hr[e]=new Ar(e,3,!0,e,null,!1)});["capture","download"].forEach(function(e){hr[e]=new Ar(e,4,!1,e,null,!1)});["cols","rows","size","span"].forEach(function(e){hr[e]=new Ar(e,6,!1,e,null,!1)});["rowSpan","start"].forEach(function(e){hr[e]=new Ar(e,5,!1,e.toLowerCase(),null,!1)});var my=/[\-:]([a-z])/g;function yy(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(my,yy);hr[t]=new Ar(t,1,!1,e,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(my,yy);hr[t]=new Ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(my,yy);hr[t]=new Ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(e){hr[e]=new Ar(e,1,!1,e.toLowerCase(),null,!1)});hr.xlinkHref=new Ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(e){hr[e]=new Ar(e,1,!1,e.toLowerCase(),null,!0)});var Wn=dh.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;Wn.hasOwnProperty("ReactCurrentDispatcher")||(Wn.ReactCurrentDispatcher={current:null});Wn.hasOwnProperty("ReactCurrentBatchConfig")||(Wn.ReactCurrentBatchConfig={suspense:null});function wy(e,t,r,n){var o=hr.hasOwnProperty(t)?hr[t]:null,a=o!==null?o.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(sA(t,r,o,n)&&(r=null),n||o===null?oA(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var lA=/^(.*)[\\\/]/,Kr=typeof Symbol=="function"&&Symbol.for,uf=Kr?Symbol.for("react.element"):60103,bs=Kr?Symbol.for("react.portal"):60106,na=Kr?Symbol.for("react.fragment"):60107,tk=Kr?Symbol.for("react.strict_mode"):60108,Kf=Kr?Symbol.for("react.profiler"):60114,rk=Kr?Symbol.for("react.provider"):60109,nk=Kr?Symbol.for("react.context"):60110,uA=Kr?Symbol.for("react.concurrent_mode"):60111,by=Kr?Symbol.for("react.forward_ref"):60112,Gf=Kr?Symbol.for("react.suspense"):60113,Tv=Kr?Symbol.for("react.suspense_list"):60120,xy=Kr?Symbol.for("react.memo"):60115,ik=Kr?Symbol.for("react.lazy"):60116,ok=Kr?Symbol.for("react.block"):60121,N1=typeof Symbol=="function"&&Symbol.iterator;function Gl(e){return e===null||typeof e!="object"?null:(e=N1&&e[N1]||e["@@iterator"],typeof e=="function"?e:null)}function cA(e){if(e._status===-1){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}}function Hi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case na:return"Fragment";case bs:return"Portal";case Kf:return"Profiler";case tk:return"StrictMode";case Gf:return"Suspense";case Tv:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case nk:return"Context.Consumer";case rk:return"Context.Provider";case by:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case xy:return Hi(e.type);case ok:return Hi(e.render);case ik:if(e=e._status===1?e._result:null)return Hi(e)}return null}function Sy(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var r="";break e;default:var n=e._debugOwner,o=e._debugSource,a=Hi(e.type);r=null,n&&(r=Hi(n.type)),n=a,a="",o?a=" (at "+o.fileName.replace(lA,"")+":"+o.lineNumber+")":r&&(a=" (created by "+r+")"),r="\n    in "+(n||"Unknown")+a}t+=r,e=e.return}while(e);return t}function Po(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ak(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function fA(e){var t=ak(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(l){n=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(l){n=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function cf(e){e._valueTracker||(e._valueTracker=fA(e))}function sk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ak(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ov(e,t){var r=t.checked;return jr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function j1(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Po(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function lk(e,t){t=t.checked,t!=null&&wy(e,"checked",t,!1)}function Pv(e,t){lk(e,t);var r=Po(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Lv(e,t.type,r):t.hasOwnProperty("defaultValue")&&Lv(e,t.type,Po(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function A1(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Lv(e,t,r){(t!=="number"||e.ownerDocument.activeElement!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function dA(e){var t="";return dh.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function Nv(e,t){return e=jr({children:void 0},t),(t=dA(t.children))&&(e.children=t),e}function Ns(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Po(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function jv(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ve(91));return jr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function M1(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ve(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(ve(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Po(r)}}function uk(e,t){var r=Po(t.value),n=Po(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function I1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var ck={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function fk(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Av(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?fk(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ff,dk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!==ck.svg||"innerHTML"in e)e.innerHTML=t;else{for(ff=ff||document.createElement("div"),ff.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ff.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Au(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}function df(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xs={animationend:df("Animation","AnimationEnd"),animationiteration:df("Animation","AnimationIteration"),animationstart:df("Animation","AnimationStart"),transitionend:df("Transition","TransitionEnd")},Eg={},hk={};Ro&&(hk=document.createElement("div").style,"AnimationEvent"in window||(delete xs.animationend.animation,delete xs.animationiteration.animation,delete xs.animationstart.animation),"TransitionEvent"in window||delete xs.transitionend.transition);function hh(e){if(Eg[e])return Eg[e];if(!xs[e])return e;var t=xs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hk)return Eg[e]=t[r];return e}var pk=hh("animationend"),gk=hh("animationiteration"),vk=hh("animationstart"),mk=hh("transitionend"),cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),R1=new(typeof WeakMap=="function"?WeakMap:Map);function Ey(e){var t=R1.get(e);return t===void 0&&(t=new Map,R1.set(e,t)),t}function Na(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.effectTag&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function yk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _1(e){if(Na(e)!==e)throw Error(ve(188))}function hA(e){var t=e.alternate;if(!t){if(t=Na(e),t===null)throw Error(ve(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var a=o.alternate;if(a===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===r)return _1(o),e;if(a===n)return _1(o),t;a=a.sibling}throw Error(ve(188))}if(r.return!==n.return)r=o,n=a;else{for(var l=!1,u=o.child;u;){if(u===r){l=!0,r=o,n=a;break}if(u===n){l=!0,n=o,r=a;break}u=u.sibling}if(!l){for(u=a.child;u;){if(u===r){l=!0,r=a,n=o;break}if(u===n){l=!0,n=a,r=o;break}u=u.sibling}if(!l)throw Error(ve(189))}}if(r.alternate!==n)throw Error(ve(190))}if(r.tag!==3)throw Error(ve(188));return r.stateNode.current===r?e:t}function wk(e){if(e=hA(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function $s(e,t){if(t==null)throw Error(ve(30));return e==null?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Cy(e,t,r){Array.isArray(e)?e.forEach(t,r):e&&t.call(r,e)}var ql=null;function pA(e){if(e){var t=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(t))for(var n=0;n<t.length&&!e.isPropagationStopped();n++)C1(e,t[n],r[n]);else t&&C1(e,t,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function ph(e){if(e!==null&&(ql=$s(ql,e)),e=ql,ql=null,e){if(Cy(e,pA),ql)throw Error(ve(95));if(vd)throw e=Ev,vd=!1,Ev=null,e}}function ky(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}function bk(e){if(!Ro)return!1;e="on"+e;var t=e in document;return t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t=typeof t[e]=="function"),t}var wd=[];function xk(e){e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>wd.length&&wd.push(e)}function Sk(e,t,r,n){if(wd.length){var o=wd.pop();return o.topLevelType=e,o.eventSystemFlags=n,o.nativeEvent=t,o.targetInst=r,o}return{topLevelType:e,eventSystemFlags:n,nativeEvent:t,targetInst:r,ancestors:[]}}function Ek(e){var t=e.targetInst,r=t;do{if(!r){e.ancestors.push(r);break}var n=r;if(n.tag===3)n=n.stateNode.containerInfo;else{for(;n.return;)n=n.return;n=n.tag!==3?null:n.stateNode.containerInfo}if(!n)break;t=r.tag,t!==5&&t!==6||e.ancestors.push(r),r=cc(n)}while(r);for(r=0;r<e.ancestors.length;r++){t=e.ancestors[r];var o=ky(e.nativeEvent);n=e.topLevelType;var a=e.nativeEvent,l=e.eventSystemFlags;r===0&&(l|=64);for(var u=null,d=0;d<yd.length;d++){var h=yd[d];h&&(h=h.extractEvents(n,t,a,o,l))&&(u=$s(u,h))}ph(u)}}function Mv(e,t,r){if(!r.has(e)){switch(e){case"scroll":fu(t,"scroll",!0);break;case"focus":case"blur":fu(t,"focus",!0),fu(t,"blur",!0),r.set("blur",null),r.set("focus",null);break;case"cancel":case"close":bk(e)&&fu(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:cu.indexOf(e)===-1&&Pt(e,t)}r.set(e,null)}}var Ck,Ty,kk,Iv=!1,ai=[],xo=null,So=null,Eo=null,Mu=new Map,Iu=new Map,Vl=[],Rv="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),gA="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function vA(e,t){var r=Ey(t);Rv.forEach(function(n){Mv(n,t,r)}),gA.forEach(function(n){Mv(n,t,r)})}function _v(e,t,r,n,o){return{blockedOn:e,topLevelType:t,eventSystemFlags:r|32,nativeEvent:o,container:n}}function $1(e,t){switch(e){case"focus":case"blur":xo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Eo=null;break;case"pointerover":case"pointerout":Mu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Iu.delete(t.pointerId)}}function Xl(e,t,r,n,o,a){return e===null||e.nativeEvent!==a?(e=_v(t,r,n,o,a),t!==null&&(t=fc(t),t!==null&&Ty(t)),e):(e.eventSystemFlags|=n,e)}function mA(e,t,r,n,o){switch(t){case"focus":return xo=Xl(xo,e,t,r,n,o),!0;case"dragenter":return So=Xl(So,e,t,r,n,o),!0;case"mouseover":return Eo=Xl(Eo,e,t,r,n,o),!0;case"pointerover":var a=o.pointerId;return Mu.set(a,Xl(Mu.get(a)||null,e,t,r,n,o)),!0;case"gotpointercapture":return a=o.pointerId,Iu.set(a,Xl(Iu.get(a)||null,e,t,r,n,o)),!0}return!1}function yA(e){var t=cc(e.target);if(t!==null){var r=Na(t);if(r!==null){if(t=r.tag,t===13){if(t=yk(r),t!==null){e.blockedOn=t,dr.unstable_runWithPriority(e.priority,function(){kk(r)});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qf(e){if(e.blockedOn!==null)return!1;var t=Ly(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);if(t!==null){var r=fc(t);return r!==null&&Ty(r),e.blockedOn=t,!1}return!0}function D1(e,t,r){qf(e)&&r.delete(t)}function wA(){for(Iv=!1;0<ai.length;){var e=ai[0];if(e.blockedOn!==null){e=fc(e.blockedOn),e!==null&&Ck(e);break}var t=Ly(e.topLevelType,e.eventSystemFlags,e.container,e.nativeEvent);t!==null?e.blockedOn=t:ai.shift()}xo!==null&&qf(xo)&&(xo=null),So!==null&&qf(So)&&(So=null),Eo!==null&&qf(Eo)&&(Eo=null),Mu.forEach(D1),Iu.forEach(D1)}function Yl(e,t){e.blockedOn===t&&(e.blockedOn=null,Iv||(Iv=!0,dr.unstable_scheduleCallback(dr.unstable_NormalPriority,wA)))}function Tk(e){function t(o){return Yl(o,e)}if(0<ai.length){Yl(ai[0],e);for(var r=1;r<ai.length;r++){var n=ai[r];n.blockedOn===e&&(n.blockedOn=null)}}for(xo!==null&&Yl(xo,e),So!==null&&Yl(So,e),Eo!==null&&Yl(Eo,e),Mu.forEach(t),Iu.forEach(t),r=0;r<Vl.length;r++)n=Vl[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Vl.length&&(r=Vl[0],r.blockedOn===null);)yA(r),r.blockedOn===null&&Vl.shift()}var Ok={},Pk=new Map,Oy=new Map,bA=["abort","abort",pk,"animationEnd",gk,"animationIteration",vk,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",mk,"transitionEnd","waiting","waiting"];function Py(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1],a="on"+(o[0].toUpperCase()+o.slice(1));a={phasedRegistrationNames:{bubbled:a,captured:a+"Capture"},dependencies:[n],eventPriority:t},Oy.set(n,t),Pk.set(n,a),Ok[o]=a}}Py("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Py("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Py(bA,2);for(var F1="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Cg=0;Cg<F1.length;Cg++)Oy.set(F1[Cg],0);var xA=dr.unstable_UserBlockingPriority,SA=dr.unstable_runWithPriority,Vf=!0;function Pt(e,t){fu(t,e,!1)}function fu(e,t,r){var n=Oy.get(t);switch(n===void 0?2:n){case 0:n=EA.bind(null,t,1,e);break;case 1:n=CA.bind(null,t,1,e);break;default:n=gh.bind(null,t,1,e)}r?e.addEventListener(t,n,!0):e.addEventListener(t,n,!1)}function EA(e,t,r,n){oa||gy();var o=gh,a=oa;oa=!0;try{JC(o,e,t,r,n)}finally{(oa=a)||vy()}}function CA(e,t,r,n){SA(xA,gh.bind(null,e,t,r,n))}function gh(e,t,r,n){if(Vf)if(0<ai.length&&-1<Rv.indexOf(e))e=_v(null,e,t,r,n),ai.push(e);else{var o=Ly(e,t,r,n);if(o===null)$1(e,n);else if(-1<Rv.indexOf(e))e=_v(o,e,t,r,n),ai.push(e);else if(!mA(o,e,t,r,n)){$1(e,n),e=Sk(e,n,null,t);try{ek(Ek,e)}finally{xk(e)}}}}function Ly(e,t,r,n){if(r=ky(n),r=cc(r),r!==null){var o=Na(r);if(o===null)r=null;else{var a=o.tag;if(a===13){if(r=yk(o),r!==null)return r;r=null}else if(a===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}e=Sk(e,n,r,t);try{ek(Ek,e)}finally{xk(e)}return null}var bu={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kA=["Webkit","ms","Moz","O"];Object.keys(bu).forEach(function(e){kA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bu[t]=bu[e]})});function Lk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bu.hasOwnProperty(e)&&bu[e]?(""+t).trim():t+"px"}function Nk(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Lk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var TA=jr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $v(e,t){if(t){if(TA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ve(137,e,""));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ve(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(ve(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ve(62,""))}}function Dv(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var z1=ck.html;function Ai(e,t){e=e.nodeType===9||e.nodeType===11?e:e.ownerDocument;var r=Ey(e);t=hy[t];for(var n=0;n<t.length;n++)Mv(t[n],e,r)}function bd(){}function Fv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function H1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function B1(e,t){var r=H1(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=H1(r)}}function jk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?jk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function W1(){for(var e=window,t=Fv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Fv(e.document)}return t}function zv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Ak="$",Mk="/$",Ny="$?",jy="$!",kg=null,Tg=null;function Ik(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Hv(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Og=typeof setTimeout=="function"?setTimeout:void 0,OA=typeof clearTimeout=="function"?clearTimeout:void 0;function js(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function U1(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r===Ak||r===jy||r===Ny){if(t===0)return e;t--}else r===Mk&&t++}e=e.previousSibling}return null}var Ay=Math.random().toString(36).slice(2),go="__reactInternalInstance$"+Ay,xd="__reactEventHandlers$"+Ay,uc="__reactContainere$"+Ay;function cc(e){var t=e[go];if(t)return t;for(var r=e.parentNode;r;){if(t=r[uc]||r[go]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=U1(e);e!==null;){if(r=e[go])return r;e=U1(e)}return t}e=r,r=e.parentNode}return null}function fc(e){return e=e[go]||e[uc],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ea(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ve(33))}function My(e){return e[xd]||null}function Mi(e){do e=e.return;while(e&&e.tag!==5);return e||null}function Rk(e,t){var r=e.stateNode;if(!r)return null;var n=dy(r);if(!n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ve(231,t,typeof r));return r}function K1(e,t,r){(t=Rk(e,r.dispatchConfig.phasedRegistrationNames[t]))&&(r._dispatchListeners=$s(r._dispatchListeners,t),r._dispatchInstances=$s(r._dispatchInstances,e))}function PA(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,r=[];t;)r.push(t),t=Mi(t);for(t=r.length;0<t--;)K1(r[t],"captured",e);for(t=0;t<r.length;t++)K1(r[t],"bubbled",e)}}function Bv(e,t,r){e&&r&&r.dispatchConfig.registrationName&&(t=Rk(e,r.dispatchConfig.registrationName))&&(r._dispatchListeners=$s(r._dispatchListeners,t),r._dispatchInstances=$s(r._dispatchInstances,e))}function LA(e){e&&e.dispatchConfig.registrationName&&Bv(e._targetInst,null,e)}function Ds(e){Cy(e,PA)}var vo=null,Iy=null,Xf=null;function _k(){if(Xf)return Xf;var e,t=Iy,r=t.length,n,o="value"in vo?vo.value:vo.textContent,a=o.length;for(e=0;e<r&&t[e]===o[e];e++);var l=r-e;for(n=1;n<=l&&t[r-n]===o[a-n];n++);return Xf=o.slice(e,1<n?1-n:void 0)}function Yf(){return!0}function Sd(){return!1}function ln(e,t,r,n){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=r,e=this.constructor.Interface;for(var o in e)e.hasOwnProperty(o)&&((t=e[o])?this[o]=t(r):o==="target"?this.target=n:this[o]=r[o]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Yf:Sd,this.isPropagationStopped=Sd,this}jr(ln.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Yf)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Yf)},persist:function(){this.isPersistent=Yf},isPersistent:Sd,destructor:function(){var e=this.constructor.Interface,t;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Sd,this._dispatchInstances=this._dispatchListeners=null}});ln.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};ln.extend=function(e){function t(){}function r(){return n.apply(this,arguments)}var n=this;t.prototype=n.prototype;var o=new t;return jr(o,r.prototype),r.prototype=o,r.prototype.constructor=r,r.Interface=jr({},n.Interface,e),r.extend=n.extend,$k(r),r};$k(ln);function NA(e,t,r,n){if(this.eventPool.length){var o=this.eventPool.pop();return this.call(o,e,t,r,n),o}return new this(e,t,r,n)}function jA(e){if(!(e instanceof this))throw Error(ve(279));e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function $k(e){e.eventPool=[],e.getPooled=NA,e.release=jA}var AA=ln.extend({data:null}),MA=ln.extend({data:null}),IA=[9,13,27,32],Ry=Ro&&"CompositionEvent"in window,xu=null;Ro&&"documentMode"in document&&(xu=document.documentMode);var RA=Ro&&"TextEvent"in window&&!xu,Dk=Ro&&(!Ry||xu&&8<xu&&11>=xu),G1=" ",Li={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},q1=!1;function Fk(e,t){switch(e){case"keyup":return IA.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function zk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ss=!1;function _A(e,t){switch(e){case"compositionend":return zk(t);case"keypress":return t.which!==32?null:(q1=!0,G1);case"textInput":return e=t.data,e===G1&&q1?null:e;default:return null}}function $A(e,t){if(Ss)return e==="compositionend"||!Ry&&Fk(e,t)?(e=_k(),Xf=Iy=vo=null,Ss=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dk&&t.locale!=="ko"?null:t.data;default:return null}}var DA={eventTypes:Li,extractEvents:function(e,t,r,n){var o;if(Ry)e:{switch(e){case"compositionstart":var a=Li.compositionStart;break e;case"compositionend":a=Li.compositionEnd;break e;case"compositionupdate":a=Li.compositionUpdate;break e}a=void 0}else Ss?Fk(e,r)&&(a=Li.compositionEnd):e==="keydown"&&r.keyCode===229&&(a=Li.compositionStart);return a?(Dk&&r.locale!=="ko"&&(Ss||a!==Li.compositionStart?a===Li.compositionEnd&&Ss&&(o=_k()):(vo=n,Iy="value"in vo?vo.value:vo.textContent,Ss=!0)),a=AA.getPooled(a,t,r,n),o?a.data=o:(o=zk(r),o!==null&&(a.data=o)),Ds(a),o=a):o=null,(e=RA?_A(e,r):$A(e,r))?(t=MA.getPooled(Li.beforeInput,t,r,n),t.data=e,Ds(t)):t=null,o===null?t:t===null?o:[o,t]}},FA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FA[e.type]:t==="textarea"}var Bk={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Wk(e,t,r){return e=ln.getPooled(Bk.change,e,t,r),e.type="change",YC(r),Ds(e),e}var Su=null,Ru=null;function zA(e){ph(e)}function vh(e){var t=Ea(e);if(sk(t))return e}function HA(e,t){if(e==="change")return t}var Wv=!1;Ro&&(Wv=bk("input")&&(!document.documentMode||9<document.documentMode));function V1(){Su&&(Su.detachEvent("onpropertychange",Uk),Ru=Su=null)}function Uk(e){if(e.propertyName==="value"&&vh(Ru))if(e=Wk(Ru,e,ky(e)),oa)ph(e);else{oa=!0;try{py(zA,e)}finally{oa=!1,vy()}}}function BA(e,t,r){e==="focus"?(V1(),Su=t,Ru=r,Su.attachEvent("onpropertychange",Uk)):e==="blur"&&V1()}function WA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vh(Ru)}function UA(e,t){if(e==="click")return vh(t)}function KA(e,t){if(e==="input"||e==="change")return vh(t)}var GA={eventTypes:Bk,_isInputEventSupported:Wv,extractEvents:function(e,t,r,n){var o=t?Ea(t):window,a=o.nodeName&&o.nodeName.toLowerCase();if(a==="select"||a==="input"&&o.type==="file")var l=HA;else if(Hk(o))if(Wv)l=KA;else{l=WA;var u=BA}else(a=o.nodeName)&&a.toLowerCase()==="input"&&(o.type==="checkbox"||o.type==="radio")&&(l=UA);if(l&&(l=l(e,t)))return Wk(l,r,n);u&&u(e,o,t),e==="blur"&&(e=o._wrapperState)&&e.controlled&&o.type==="number"&&Lv(o,"number",o.value)}},dc=ln.extend({view:null,detail:null}),qA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VA(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=qA[e])?!!t[e]:!1}function _y(){return VA}var X1=0,Y1=0,Q1=!1,J1=!1,hc=dc.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:_y,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=X1;return X1=e.screenX,Q1?e.type==="mousemove"?e.screenX-t:0:(Q1=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Y1;return Y1=e.screenY,J1?e.type==="mousemove"?e.screenY-t:0:(J1=!0,0)}}),Kk=hc.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Ql={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},XA={eventTypes:Ql,extractEvents:function(e,t,r,n,o){var a=e==="mouseover"||e==="pointerover",l=e==="mouseout"||e==="pointerout";if(a&&!(o&32)&&(r.relatedTarget||r.fromElement)||!l&&!a)return null;if(a=n.window===n?n:(a=n.ownerDocument)?a.defaultView||a.parentWindow:window,l){if(l=t,t=(t=r.relatedTarget||r.toElement)?cc(t):null,t!==null){var u=Na(t);(t!==u||t.tag!==5&&t.tag!==6)&&(t=null)}}else l=null;if(l===t)return null;if(e==="mouseout"||e==="mouseover")var d=hc,h=Ql.mouseLeave,g=Ql.mouseEnter,m="mouse";else(e==="pointerout"||e==="pointerover")&&(d=Kk,h=Ql.pointerLeave,g=Ql.pointerEnter,m="pointer");if(e=l==null?a:Ea(l),a=t==null?a:Ea(t),h=d.getPooled(h,l,r,n),h.type=m+"leave",h.target=e,h.relatedTarget=a,r=d.getPooled(g,t,r,n),r.type=m+"enter",r.target=a,r.relatedTarget=e,n=l,m=t,n&&m)e:{for(d=n,g=m,l=0,e=d;e;e=Mi(e))l++;for(e=0,t=g;t;t=Mi(t))e++;for(;0<l-e;)d=Mi(d),l--;for(;0<e-l;)g=Mi(g),e--;for(;l--;){if(d===g||d===g.alternate)break e;d=Mi(d),g=Mi(g)}d=null}else d=null;for(g=d,d=[];n&&n!==g&&(l=n.alternate,!(l!==null&&l===g));)d.push(n),n=Mi(n);for(n=[];m&&m!==g&&(l=m.alternate,!(l!==null&&l===g));)n.push(m),m=Mi(m);for(m=0;m<d.length;m++)Bv(d[m],"bubbled",h);for(m=n.length;0<m--;)Bv(n[m],"captured",r);return o&64?[h,r]:[h]}};function YA(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ca=typeof Object.is=="function"?Object.is:YA,QA=Object.prototype.hasOwnProperty;function _u(e,t){if(Ca(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!QA.call(t,r[n])||!Ca(e[r[n]],t[r[n]]))return!1;return!0}var JA=Ro&&"documentMode"in document&&11>=document.documentMode,Gk={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Es=null,Uv=null,Eu=null,Kv=!1;function Z1(e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;return Kv||Es==null||Es!==Fv(r)?null:(r=Es,"selectionStart"in r&&zv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Eu&&_u(Eu,r)?null:(Eu=r,e=ln.getPooled(Gk.select,Uv,e,t),e.type="select",e.target=Es,Ds(e),e))}var ZA={eventTypes:Gk,extractEvents:function(e,t,r,n,o,a){if(o=a||(n.window===n?n.document:n.nodeType===9?n:n.ownerDocument),!(a=!o)){e:{o=Ey(o),a=hy.onSelect;for(var l=0;l<a.length;l++)if(!o.has(a[l])){o=!1;break e}o=!0}a=!o}if(a)return null;switch(o=t?Ea(t):window,e){case"focus":(Hk(o)||o.contentEditable==="true")&&(Es=o,Uv=t,Eu=null);break;case"blur":Eu=Uv=Es=null;break;case"mousedown":Kv=!0;break;case"contextmenu":case"mouseup":case"dragend":return Kv=!1,Z1(r,n);case"selectionchange":if(JA)break;case"keydown":case"keyup":return Z1(r,n)}return null}},eM=ln.extend({animationName:null,elapsedTime:null,pseudoElement:null}),tM=ln.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),rM=dc.extend({relatedTarget:null});function Qf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}var nM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oM=dc.extend({key:function(e){if(e.key){var t=nM[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?iM[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:_y,charCode:function(e){return e.type==="keypress"?Qf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),aM=hc.extend({dataTransfer:null}),sM=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:_y}),lM=ln.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),uM=hc.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),cM={eventTypes:Ok,extractEvents:function(e,t,r,n){var o=Pk.get(e);if(!o)return null;switch(e){case"keypress":if(Qf(r)===0)return null;case"keydown":case"keyup":e=oM;break;case"blur":case"focus":e=rM;break;case"click":if(r.button===2)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=hc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=aM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=sM;break;case pk:case gk:case vk:e=eM;break;case mk:e=lM;break;case"scroll":e=dc;break;case"wheel":e=uM;break;case"copy":case"cut":case"paste":e=tM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=Kk;break;default:e=ln}return t=e.getPooled(o,t,r,n),Ds(t),t}};if(md)throw Error(ve(101));md=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));VC();var fM=fc;dy=My;GC=fM;qC=Ea;XC({SimpleEventPlugin:cM,EnterLeaveEventPlugin:XA,ChangeEventPlugin:GA,SelectEventPlugin:ZA,BeforeInputEventPlugin:DA});var Gv=[],Cs=-1;function Et(e){0>Cs||(e.current=Gv[Cs],Gv[Cs]=null,Cs--)}function _t(e,t){Cs++,Gv[Cs]=e.current,e.current=t}var Lo={},xr={current:Lo},zr={current:!1},ka=Lo;function Fs(e,t){var r=e.type.contextTypes;if(!r)return Lo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in r)o[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Hr(e){return e=e.childContextTypes,e!=null}function Ed(){Et(zr),Et(xr)}function ex(e,t,r){if(xr.current!==Lo)throw Error(ve(168));_t(xr,t),_t(zr,r)}function qk(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(ve(108,Hi(t)||"Unknown",o));return jr({},r,{},n)}function Jf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lo,ka=xr.current,_t(xr,e),_t(zr,zr.current),!0}function tx(e,t,r){var n=e.stateNode;if(!n)throw Error(ve(169));r?(e=qk(e,t,ka),n.__reactInternalMemoizedMergedChildContext=e,Et(zr),Et(xr),_t(xr,e)):Et(zr),_t(zr,r)}var dM=dr.unstable_runWithPriority,$y=dr.unstable_scheduleCallback,Vk=dr.unstable_cancelCallback,rx=dr.unstable_requestPaint,qv=dr.unstable_now,hM=dr.unstable_getCurrentPriorityLevel,mh=dr.unstable_ImmediatePriority,Xk=dr.unstable_UserBlockingPriority,Yk=dr.unstable_NormalPriority,Qk=dr.unstable_LowPriority,Jk=dr.unstable_IdlePriority,Zk={},pM=dr.unstable_shouldYield,gM=rx!==void 0?rx:function(){},Ii=null,Zf=null,Pg=!1,nx=qv(),gn=1e4>nx?qv:function(){return qv()-nx};function yh(){switch(hM()){case mh:return 99;case Xk:return 98;case Yk:return 97;case Qk:return 96;case Jk:return 95;default:throw Error(ve(332))}}function eT(e){switch(e){case 99:return mh;case 98:return Xk;case 97:return Yk;case 96:return Qk;case 95:return Jk;default:throw Error(ve(332))}}function No(e,t){return e=eT(e),dM(e,t)}function tT(e,t,r){return e=eT(e),$y(e,t,r)}function ix(e){return Ii===null?(Ii=[e],Zf=$y(mh,rT)):Ii.push(e),Zk}function gi(){if(Zf!==null){var e=Zf;Zf=null,Vk(e)}rT()}function rT(){if(!Pg&&Ii!==null){Pg=!0;var e=0;try{var t=Ii;No(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),Ii=null}catch(r){throw Ii!==null&&(Ii=Ii.slice(e+1)),$y(mh,gi),r}finally{Pg=!1}}}function ed(e,t,r){return r/=10,1073741821-(((1073741821-e+t/10)/r|0)+1)*r}function Fn(e,t){if(e&&e.defaultProps){t=jr({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r])}return t}var Cd={current:null},kd=null,ks=null,Td=null;function Dy(){Td=ks=kd=null}function Fy(e){var t=Cd.current;Et(Cd),e.type._context._currentValue=t}function nT(e,t){for(;e!==null;){var r=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,r!==null&&r.childExpirationTime<t&&(r.childExpirationTime=t);else if(r!==null&&r.childExpirationTime<t)r.childExpirationTime=t;else break;e=e.return}}function As(e,t){kd=e,Td=ks=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.expirationTime>=t&&(si=!0),e.firstContext=null)}function wn(e,t){if(Td!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(Td=e,t=1073741823),t={context:e,observedBits:t,next:null},ks===null){if(kd===null)throw Error(ve(308));ks=t,kd.dependencies={expirationTime:0,firstContext:t,responders:null}}else ks=ks.next=t;return e._currentValue}var po=!1;function zy(e){e.updateQueue={baseState:e.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Hy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,baseQueue:e.baseQueue,shared:e.shared,effects:e.effects})}function Co(e,t){return e={expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null},e.next=e}function ko(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ox(e,t){var r=e.alternate;r!==null&&Hy(r,e),e=e.updateQueue,r=e.baseQueue,r===null?(e.baseQueue=t.next=t,t.next=t):(t.next=r.next,r.next=t)}function $u(e,t,r,n){var o=e.updateQueue;po=!1;var a=o.baseQueue,l=o.shared.pending;if(l!==null){if(a!==null){var u=a.next;a.next=l.next,l.next=u}a=l,o.shared.pending=null,u=e.alternate,u!==null&&(u=u.updateQueue,u!==null&&(u.baseQueue=l))}if(a!==null){u=a.next;var d=o.baseState,h=0,g=null,m=null,w=null;if(u!==null){var x=u;do{if(l=x.expirationTime,l<n){var C={expirationTime:x.expirationTime,suspenseConfig:x.suspenseConfig,tag:x.tag,payload:x.payload,callback:x.callback,next:null};w===null?(m=w=C,g=d):w=w.next=C,l>h&&(h=l)}else{w!==null&&(w=w.next={expirationTime:1073741823,suspenseConfig:x.suspenseConfig,tag:x.tag,payload:x.payload,callback:x.callback,next:null}),MT(l,x.suspenseConfig);e:{var j=e,T=x;switch(l=t,C=r,T.tag){case 1:if(j=T.payload,typeof j=="function"){d=j.call(C,d,l);break e}d=j;break e;case 3:j.effectTag=j.effectTag&-4097|64;case 0:if(j=T.payload,l=typeof j=="function"?j.call(C,d,l):j,l==null)break e;d=jr({},d,l);break e;case 2:po=!0}}x.callback!==null&&(e.effectTag|=32,l=o.effects,l===null?o.effects=[x]:l.push(x))}if(x=x.next,x===null||x===u){if(l=o.shared.pending,l===null)break;x=a.next=l.next,l.next=u,o.baseQueue=a=l,o.shared.pending=null}}while(!0)}w===null?g=d:w.next=m,o.baseState=g,o.baseQueue=w,Eh(h),e.expirationTime=h,e.memoizedState=d}}function ax(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=o,o=r,typeof n!="function")throw Error(ve(191,n));n.call(o)}}}var Cu=Wn.ReactCurrentBatchConfig,iT=new dh.Component().refs;function Od(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:jr({},t,r),e.memoizedState=r,e.expirationTime===0&&(e.updateQueue.baseState=r)}var wh={isMounted:function(e){return(e=e._reactInternalFiber)?Na(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternalFiber;var n=fi(),o=Cu.suspense;n=ma(n,e,o),o=Co(n,o),o.payload=t,r!=null&&(o.callback=r),ko(e,o),Oo(e,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternalFiber;var n=fi(),o=Cu.suspense;n=ma(n,e,o),o=Co(n,o),o.tag=1,o.payload=t,r!=null&&(o.callback=r),ko(e,o),Oo(e,n)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var r=fi(),n=Cu.suspense;r=ma(r,e,n),n=Co(r,n),n.tag=2,t!=null&&(n.callback=t),ko(e,n),Oo(e,r)}};function sx(e,t,r,n,o,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,l):t.prototype&&t.prototype.isPureReactComponent?!_u(r,n)||!_u(o,a):!0}function oT(e,t,r){var n=!1,o=Lo,a=t.contextType;return typeof a=="object"&&a!==null?a=wn(a):(o=Hr(t)?ka:xr.current,n=t.contextTypes,a=(n=n!=null)?Fs(e,o):Lo),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wh,e.stateNode=t,t._reactInternalFiber=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function lx(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&wh.enqueueReplaceState(t,t.state,null)}function Vv(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=iT,zy(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=wn(a):(a=Hr(t)?ka:xr.current,o.context=Fs(e,a)),$u(e,r,o,n),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Od(e,t,a,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&wh.enqueueReplaceState(o,o.state,null),$u(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.effectTag|=4)}var hf=Array.isArray;function Jl(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ve(309));var n=r.stateNode}if(!n)throw Error(ve(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(a){var l=n.refs;l===iT&&(l=n.refs={}),a===null?delete l[o]:l[o]=a},t._stringRef=o,t)}if(typeof e!="string")throw Error(ve(284));if(!r._owner)throw Error(ve(290,e))}return e}function pf(e,t){if(e.type!=="textarea")throw Error(ve(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function aT(e){function t(T,k){if(e){var P=T.lastEffect;P!==null?(P.nextEffect=k,T.lastEffect=k):T.firstEffect=T.lastEffect=k,k.nextEffect=null,k.effectTag=8}}function r(T,k){if(!e)return null;for(;k!==null;)t(T,k),k=k.sibling;return null}function n(T,k){for(T=new Map;k!==null;)k.key!==null?T.set(k.key,k):T.set(k.index,k),k=k.sibling;return T}function o(T,k){return T=Ta(T,k),T.index=0,T.sibling=null,T}function a(T,k,P){return T.index=P,e?(P=T.alternate,P!==null?(P=P.index,P<k?(T.effectTag=2,k):P):(T.effectTag=2,k)):k}function l(T){return e&&T.alternate===null&&(T.effectTag=2),T}function u(T,k,P,A){return k===null||k.tag!==6?(k=Ig(P,T.mode,A),k.return=T,k):(k=o(k,P),k.return=T,k)}function d(T,k,P,A){return k!==null&&k.elementType===P.type?(A=o(k,P.props),A.ref=Jl(T,k,P),A.return=T,A):(A=id(P.type,P.key,P.props,null,T.mode,A),A.ref=Jl(T,k,P),A.return=T,A)}function h(T,k,P,A){return k===null||k.tag!==4||k.stateNode.containerInfo!==P.containerInfo||k.stateNode.implementation!==P.implementation?(k=Rg(P,T.mode,A),k.return=T,k):(k=o(k,P.children||[]),k.return=T,k)}function g(T,k,P,A,L){return k===null||k.tag!==7?(k=wo(P,T.mode,A,L),k.return=T,k):(k=o(k,P),k.return=T,k)}function m(T,k,P){if(typeof k=="string"||typeof k=="number")return k=Ig(""+k,T.mode,P),k.return=T,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case uf:return P=id(k.type,k.key,k.props,null,T.mode,P),P.ref=Jl(T,null,k),P.return=T,P;case bs:return k=Rg(k,T.mode,P),k.return=T,k}if(hf(k)||Gl(k))return k=wo(k,T.mode,P,null),k.return=T,k;pf(T,k)}return null}function w(T,k,P,A){var L=k!==null?k.key:null;if(typeof P=="string"||typeof P=="number")return L!==null?null:u(T,k,""+P,A);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case uf:return P.key===L?P.type===na?g(T,k,P.props.children,A,L):d(T,k,P,A):null;case bs:return P.key===L?h(T,k,P,A):null}if(hf(P)||Gl(P))return L!==null?null:g(T,k,P,A,null);pf(T,P)}return null}function x(T,k,P,A,L){if(typeof A=="string"||typeof A=="number")return T=T.get(P)||null,u(k,T,""+A,L);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case uf:return T=T.get(A.key===null?P:A.key)||null,A.type===na?g(k,T,A.props.children,L,A.key):d(k,T,A,L);case bs:return T=T.get(A.key===null?P:A.key)||null,h(k,T,A,L)}if(hf(A)||Gl(A))return T=T.get(P)||null,g(k,T,A,L,null);pf(k,A)}return null}function C(T,k,P,A){for(var L=null,R=null,D=k,$=k=0,B=null;D!==null&&$<P.length;$++){D.index>$?(B=D,D=null):B=D.sibling;var U=w(T,D,P[$],A);if(U===null){D===null&&(D=B);break}e&&D&&U.alternate===null&&t(T,D),k=a(U,k,$),R===null?L=U:R.sibling=U,R=U,D=B}if($===P.length)return r(T,D),L;if(D===null){for(;$<P.length;$++)D=m(T,P[$],A),D!==null&&(k=a(D,k,$),R===null?L=D:R.sibling=D,R=D);return L}for(D=n(T,D);$<P.length;$++)B=x(D,T,$,P[$],A),B!==null&&(e&&B.alternate!==null&&D.delete(B.key===null?$:B.key),k=a(B,k,$),R===null?L=B:R.sibling=B,R=B);return e&&D.forEach(function(Y){return t(T,Y)}),L}function j(T,k,P,A){var L=Gl(P);if(typeof L!="function")throw Error(ve(150));if(P=L.call(P),P==null)throw Error(ve(151));for(var R=L=null,D=k,$=k=0,B=null,U=P.next();D!==null&&!U.done;$++,U=P.next()){D.index>$?(B=D,D=null):B=D.sibling;var Y=w(T,D,U.value,A);if(Y===null){D===null&&(D=B);break}e&&D&&Y.alternate===null&&t(T,D),k=a(Y,k,$),R===null?L=Y:R.sibling=Y,R=Y,D=B}if(U.done)return r(T,D),L;if(D===null){for(;!U.done;$++,U=P.next())U=m(T,U.value,A),U!==null&&(k=a(U,k,$),R===null?L=U:R.sibling=U,R=U);return L}for(D=n(T,D);!U.done;$++,U=P.next())U=x(D,T,$,U.value,A),U!==null&&(e&&U.alternate!==null&&D.delete(U.key===null?$:U.key),k=a(U,k,$),R===null?L=U:R.sibling=U,R=U);return e&&D.forEach(function(V){return t(T,V)}),L}return function(T,k,P,A){var L=typeof P=="object"&&P!==null&&P.type===na&&P.key===null;L&&(P=P.props.children);var R=typeof P=="object"&&P!==null;if(R)switch(P.$$typeof){case uf:e:{for(R=P.key,L=k;L!==null;){if(L.key===R){switch(L.tag){case 7:if(P.type===na){r(T,L.sibling),k=o(L,P.props.children),k.return=T,T=k;break e}break;default:if(L.elementType===P.type){r(T,L.sibling),k=o(L,P.props),k.ref=Jl(T,L,P),k.return=T,T=k;break e}}r(T,L);break}else t(T,L);L=L.sibling}P.type===na?(k=wo(P.props.children,T.mode,A,P.key),k.return=T,T=k):(A=id(P.type,P.key,P.props,null,T.mode,A),A.ref=Jl(T,k,P),A.return=T,T=A)}return l(T);case bs:e:{for(L=P.key;k!==null;){if(k.key===L)if(k.tag===4&&k.stateNode.containerInfo===P.containerInfo&&k.stateNode.implementation===P.implementation){r(T,k.sibling),k=o(k,P.children||[]),k.return=T,T=k;break e}else{r(T,k);break}else t(T,k);k=k.sibling}k=Rg(P,T.mode,A),k.return=T,T=k}return l(T)}if(typeof P=="string"||typeof P=="number")return P=""+P,k!==null&&k.tag===6?(r(T,k.sibling),k=o(k,P),k.return=T,T=k):(r(T,k),k=Ig(P,T.mode,A),k.return=T,T=k),l(T);if(hf(P))return C(T,k,P,A);if(Gl(P))return j(T,k,P,A);if(R&&pf(T,P),typeof P>"u"&&!L)switch(T.tag){case 1:case 0:throw T=T.type,Error(ve(152,T.displayName||T.name||"Component"))}return r(T,k)}}var zs=aT(!0),By=aT(!1),pc={},ci={current:pc},Du={current:pc},Fu={current:pc};function aa(e){if(e===pc)throw Error(ve(174));return e}function Xv(e,t){switch(_t(Fu,t),_t(Du,e),_t(ci,pc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Av(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Av(t,e)}Et(ci),_t(ci,t)}function Hs(){Et(ci),Et(Du),Et(Fu)}function ux(e){aa(Fu.current);var t=aa(ci.current),r=Av(t,e.type);t!==r&&(_t(Du,e),_t(ci,r))}function Wy(e){Du.current===e&&(Et(ci),Et(Du))}var jt={current:0};function Pd(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data===Ny||r.data===jy))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.effectTag&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Uy(e,t){return{responder:e,props:t}}var td=Wn.ReactCurrentDispatcher,mn=Wn.ReactCurrentBatchConfig,mo=0,Jt=null,yr=null,wr=null,Ld=!1;function Xr(){throw Error(ve(321))}function Ky(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ca(e[r],t[r]))return!1;return!0}function Gy(e,t,r,n,o,a){if(mo=a,Jt=t,t.memoizedState=null,t.updateQueue=null,t.expirationTime=0,td.current=e===null||e.memoizedState===null?vM:mM,e=r(n,o),t.expirationTime===mo){a=0;do{if(t.expirationTime=0,!(25>a))throw Error(ve(301));a+=1,wr=yr=null,t.updateQueue=null,td.current=yM,e=r(n,o)}while(t.expirationTime===mo)}if(td.current=Ad,t=yr!==null&&yr.next!==null,mo=0,wr=yr=Jt=null,Ld=!1,t)throw Error(ve(300));return e}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wr===null?Jt.memoizedState=wr=e:wr=wr.next=e,wr}function Zs(){if(yr===null){var e=Jt.alternate;e=e!==null?e.memoizedState:null}else e=yr.next;var t=wr===null?Jt.memoizedState:wr.next;if(t!==null)wr=t,yr=e;else{if(e===null)throw Error(ve(310));yr=e,e={memoizedState:yr.memoizedState,baseState:yr.baseState,baseQueue:yr.baseQueue,queue:yr.queue,next:null},wr===null?Jt.memoizedState=wr=e:wr=wr.next=e}return wr}function pa(e,t){return typeof t=="function"?t(e):t}function gf(e){var t=Zs(),r=t.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=e;var n=yr,o=n.baseQueue,a=r.pending;if(a!==null){if(o!==null){var l=o.next;o.next=a.next,a.next=l}n.baseQueue=o=a,r.pending=null}if(o!==null){o=o.next,n=n.baseState;var u=l=a=null,d=o;do{var h=d.expirationTime;if(h<mo){var g={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null};u===null?(l=u=g,a=n):u=u.next=g,h>Jt.expirationTime&&(Jt.expirationTime=h,Eh(h))}else u!==null&&(u=u.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,action:d.action,eagerReducer:d.eagerReducer,eagerState:d.eagerState,next:null}),MT(h,d.suspenseConfig),n=d.eagerReducer===e?d.eagerState:e(n,d.action);d=d.next}while(d!==null&&d!==o);u===null?a=n:u.next=l,Ca(n,t.memoizedState)||(si=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function vf(e){var t=Zs(),r=t.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,a=t.memoizedState;if(o!==null){r.pending=null;var l=o=o.next;do a=e(a,l.action),l=l.next;while(l!==o);Ca(a,t.memoizedState)||(si=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Lg(e){var t=Ms();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e},e=e.dispatch=dT.bind(null,Jt,e),[t.memoizedState,e]}function Yv(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Jt.updateQueue,t===null?(t={lastEffect:null},Jt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function sT(){return Zs().memoizedState}function Qv(e,t,r,n){var o=Ms();Jt.effectTag|=e,o.memoizedState=Yv(1|t,r,void 0,n===void 0?null:n)}function qy(e,t,r,n){var o=Zs();n=n===void 0?null:n;var a=void 0;if(yr!==null){var l=yr.memoizedState;if(a=l.destroy,n!==null&&Ky(n,l.deps)){Yv(t,r,a,n);return}}Jt.effectTag|=e,o.memoizedState=Yv(1|t,r,a,n)}function cx(e,t){return Qv(516,4,e,t)}function Nd(e,t){return qy(516,4,e,t)}function lT(e,t){return qy(4,2,e,t)}function uT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cT(e,t,r){return r=r!=null?r.concat([e]):null,qy(4,2,uT.bind(null,t,e),r)}function Vy(){}function fx(e,t){return Ms().memoizedState=[e,t===void 0?null:t],e}function jd(e,t){var r=Zs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ky(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function fT(e,t){var r=Zs();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ky(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Xy(e,t,r){var n=yh();No(98>n?98:n,function(){e(!0)}),No(97<n?97:n,function(){var o=mn.suspense;mn.suspense=t===void 0?null:t;try{e(!1),r()}finally{mn.suspense=o}})}function dT(e,t,r){var n=fi(),o=Cu.suspense;n=ma(n,e,o),o={expirationTime:n,suspenseConfig:o,action:r,eagerReducer:null,eagerState:null,next:null};var a=t.pending;if(a===null?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===Jt||a!==null&&a===Jt)Ld=!0,o.expirationTime=mo,Jt.expirationTime=mo;else{if(e.expirationTime===0&&(a===null||a.expirationTime===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,u=a(l,r);if(o.eagerReducer=a,o.eagerState=u,Ca(u,l))return}catch{}finally{}Oo(e,n)}}var Ad={readContext:wn,useCallback:Xr,useContext:Xr,useEffect:Xr,useImperativeHandle:Xr,useLayoutEffect:Xr,useMemo:Xr,useReducer:Xr,useRef:Xr,useState:Xr,useDebugValue:Xr,useResponder:Xr,useDeferredValue:Xr,useTransition:Xr},vM={readContext:wn,useCallback:fx,useContext:wn,useEffect:cx,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Qv(4,2,uT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Qv(4,2,e,t)},useMemo:function(e,t){var r=Ms();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Ms();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=dT.bind(null,Jt,e),[n.memoizedState,e]},useRef:function(e){var t=Ms();return e={current:e},t.memoizedState=e},useState:Lg,useDebugValue:Vy,useResponder:Uy,useDeferredValue:function(e,t){var r=Lg(e),n=r[0],o=r[1];return cx(function(){var a=mn.suspense;mn.suspense=t===void 0?null:t;try{o(e)}finally{mn.suspense=a}},[e,t]),n},useTransition:function(e){var t=Lg(!1),r=t[0];return t=t[1],[fx(Xy.bind(null,t,e),[t,e]),r]}},mM={readContext:wn,useCallback:jd,useContext:wn,useEffect:Nd,useImperativeHandle:cT,useLayoutEffect:lT,useMemo:fT,useReducer:gf,useRef:sT,useState:function(){return gf(pa)},useDebugValue:Vy,useResponder:Uy,useDeferredValue:function(e,t){var r=gf(pa),n=r[0],o=r[1];return Nd(function(){var a=mn.suspense;mn.suspense=t===void 0?null:t;try{o(e)}finally{mn.suspense=a}},[e,t]),n},useTransition:function(e){var t=gf(pa),r=t[0];return t=t[1],[jd(Xy.bind(null,t,e),[t,e]),r]}},yM={readContext:wn,useCallback:jd,useContext:wn,useEffect:Nd,useImperativeHandle:cT,useLayoutEffect:lT,useMemo:fT,useReducer:vf,useRef:sT,useState:function(){return vf(pa)},useDebugValue:Vy,useResponder:Uy,useDeferredValue:function(e,t){var r=vf(pa),n=r[0],o=r[1];return Nd(function(){var a=mn.suspense;mn.suspense=t===void 0?null:t;try{o(e)}finally{mn.suspense=a}},[e,t]),n},useTransition:function(e){var t=vf(pa),r=t[0];return t=t[1],[jd(Xy.bind(null,t,e),[t,e]),r]}},_i=null,yo=null,ga=!1;function hT(e,t){var r=li(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.effectTag=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function dx(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function Jv(e){if(ga){var t=yo;if(t){var r=t;if(!dx(e,t)){if(t=js(r.nextSibling),!t||!dx(e,t)){e.effectTag=e.effectTag&-1025|2,ga=!1,_i=e;return}hT(_i,r)}_i=e,yo=js(t.firstChild)}else e.effectTag=e.effectTag&-1025|2,ga=!1,_i=e}}function hx(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;_i=e}function mf(e){if(e!==_i)return!1;if(!ga)return hx(e),ga=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Hv(t,e.memoizedProps))for(t=yo;t;)hT(e,t),t=js(t.nextSibling);if(hx(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ve(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r===Mk){if(t===0){yo=js(e.nextSibling);break e}t--}else r!==Ak&&r!==jy&&r!==Ny||t++}e=e.nextSibling}yo=null}}else yo=_i?js(e.stateNode.nextSibling):null;return!0}function Ng(){yo=_i=null,ga=!1}var wM=Wn.ReactCurrentOwner,si=!1;function Qr(e,t,r,n){t.child=e===null?By(t,null,r,n):zs(t,e.child,r,n)}function px(e,t,r,n,o){r=r.render;var a=t.ref;return As(t,o),n=Gy(e,t,r,n,a,o),e!==null&&!si?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),$i(e,t,o)):(t.effectTag|=1,Qr(e,t,n,o),t.child)}function gx(e,t,r,n,o,a){if(e===null){var l=r.type;return typeof l=="function"&&!e0(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,pT(e,t,l,n,o,a)):(e=id(r.type,null,n,null,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return l=e.child,o<a&&(o=l.memoizedProps,r=r.compare,r=r!==null?r:_u,r(o,n)&&e.ref===t.ref)?$i(e,t,a):(t.effectTag|=1,e=Ta(l,n),e.ref=t.ref,e.return=t,t.child=e)}function pT(e,t,r,n,o,a){return e!==null&&_u(e.memoizedProps,n)&&e.ref===t.ref&&(si=!1,o<a)?(t.expirationTime=e.expirationTime,$i(e,t,a)):Zv(e,t,r,n,a)}function gT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.effectTag|=128)}function Zv(e,t,r,n,o){var a=Hr(r)?ka:xr.current;return a=Fs(t,a),As(t,o),r=Gy(e,t,r,n,a,o),e!==null&&!si?(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=o&&(e.expirationTime=0),$i(e,t,o)):(t.effectTag|=1,Qr(e,t,r,o),t.child)}function vx(e,t,r,n,o){if(Hr(r)){var a=!0;Jf(t)}else a=!1;if(As(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),oT(t,r,n),Vv(t,r,n,o),n=!0;else if(e===null){var l=t.stateNode,u=t.memoizedProps;l.props=u;var d=l.context,h=r.contextType;typeof h=="object"&&h!==null?h=wn(h):(h=Hr(r)?ka:xr.current,h=Fs(t,h));var g=r.getDerivedStateFromProps,m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";m||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||d!==h)&&lx(t,l,n,h),po=!1;var w=t.memoizedState;l.state=w,$u(t,n,l,o),d=t.memoizedState,u!==n||w!==d||zr.current||po?(typeof g=="function"&&(Od(t,r,g,n),d=t.memoizedState),(u=po||sx(t,r,u,n,w,d,h))?(m||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.effectTag|=4)):(typeof l.componentDidMount=="function"&&(t.effectTag|=4),t.memoizedProps=n,t.memoizedState=d),l.props=n,l.state=d,l.context=h,n=u):(typeof l.componentDidMount=="function"&&(t.effectTag|=4),n=!1)}else l=t.stateNode,Hy(e,t),u=t.memoizedProps,l.props=t.type===t.elementType?u:Fn(t.type,u),d=l.context,h=r.contextType,typeof h=="object"&&h!==null?h=wn(h):(h=Hr(r)?ka:xr.current,h=Fs(t,h)),g=r.getDerivedStateFromProps,(m=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(u!==n||d!==h)&&lx(t,l,n,h),po=!1,d=t.memoizedState,l.state=d,$u(t,n,l,o),w=t.memoizedState,u!==n||d!==w||zr.current||po?(typeof g=="function"&&(Od(t,r,g,n),w=t.memoizedState),(g=po||sx(t,r,u,n,d,w,h))?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(n,w,h),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(n,w,h)),typeof l.componentDidUpdate=="function"&&(t.effectTag|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.effectTag|=256)):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=256),t.memoizedProps=n,t.memoizedState=w),l.props=n,l.state=w,l.context=h,n=g):(typeof l.componentDidUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=4),typeof l.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&d===e.memoizedState||(t.effectTag|=256),n=!1);return em(e,t,r,n,a,o)}function em(e,t,r,n,o,a){gT(e,t);var l=(t.effectTag&64)!==0;if(!n&&!l)return o&&tx(t,r,!1),$i(e,t,a);n=t.stateNode,wM.current=t;var u=l&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.effectTag|=1,e!==null&&l?(t.child=zs(t,e.child,null,a),t.child=zs(t,null,u,a)):Qr(e,t,u,a),t.memoizedState=n.state,o&&tx(t,r,!0),t.child}function mx(e){var t=e.stateNode;t.pendingContext?ex(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ex(e,t.context,!1),Xv(e,t.containerInfo)}var jg={dehydrated:null,retryTime:0};function yx(e,t,r){var n=t.mode,o=t.pendingProps,a=jt.current,l=!1,u;if((u=(t.effectTag&64)!==0)||(u=(a&2)!==0&&(e===null||e.memoizedState!==null)),u?(l=!0,t.effectTag&=-65):e!==null&&e.memoizedState===null||o.fallback===void 0||o.unstable_avoidThisFallback===!0||(a|=1),_t(jt,a&1),e===null){if(o.fallback!==void 0&&Jv(t),l){if(l=o.fallback,o=wo(null,n,0,null),o.return=t,!(t.mode&2))for(e=t.memoizedState!==null?t.child.child:t.child,o.child=e;e!==null;)e.return=o,e=e.sibling;return r=wo(l,n,r,null),r.return=t,o.sibling=r,t.memoizedState=jg,t.child=o,r}return n=o.children,t.memoizedState=null,t.child=By(t,null,n,r)}if(e.memoizedState!==null){if(e=e.child,n=e.sibling,l){if(o=o.fallback,r=Ta(e,e.pendingProps),r.return=t,!(t.mode&2)&&(l=t.memoizedState!==null?t.child.child:t.child,l!==e.child))for(r.child=l;l!==null;)l.return=r,l=l.sibling;return n=Ta(n,o),n.return=t,r.sibling=n,r.childExpirationTime=0,t.memoizedState=jg,t.child=r,n}return r=zs(t,e.child,o.children,r),t.memoizedState=null,t.child=r}if(e=e.child,l){if(l=o.fallback,o=wo(null,n,0,null),o.return=t,o.child=e,e!==null&&(e.return=o),!(t.mode&2))for(e=t.memoizedState!==null?t.child.child:t.child,o.child=e;e!==null;)e.return=o,e=e.sibling;return r=wo(l,n,r,null),r.return=t,o.sibling=r,r.effectTag|=2,o.childExpirationTime=0,t.memoizedState=jg,t.child=o,r}return t.memoizedState=null,t.child=zs(t,e,o.children,r)}function wx(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;r!==null&&r.expirationTime<t&&(r.expirationTime=t),nT(e.return,t)}function Ag(e,t,r,n,o,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailExpiration:0,tailMode:o,lastEffect:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailExpiration=0,l.tailMode=o,l.lastEffect=a)}function bx(e,t,r){var n=t.pendingProps,o=n.revealOrder,a=n.tail;if(Qr(e,t,n.children,r),n=jt.current,n&2)n=n&1|2,t.effectTag|=64;else{if(e!==null&&e.effectTag&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&wx(e,r);else if(e.tag===19)wx(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(_t(jt,n),!(t.mode&2))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&Pd(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Ag(t,!1,o,r,a,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Pd(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Ag(t,!0,r,null,a,t.lastEffect);break;case"together":Ag(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function $i(e,t,r){e!==null&&(t.dependencies=e.dependencies);var n=t.expirationTime;if(n!==0&&Eh(n),t.childExpirationTime<r)return null;if(e!==null&&t.child!==e.child)throw Error(ve(153));if(t.child!==null){for(e=t.child,r=Ta(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ta(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}var vT,tm,mT,yT;vT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};tm=function(){};mT=function(e,t,r,n,o){var a=e.memoizedProps;if(a!==n){var l=t.stateNode;switch(aa(ci.current),e=null,r){case"input":a=Ov(l,a),n=Ov(l,n),e=[];break;case"option":a=Nv(l,a),n=Nv(l,n),e=[];break;case"select":a=jr({},a,{value:void 0}),n=jr({},n,{value:void 0}),e=[];break;case"textarea":a=jv(l,a),n=jv(l,n),e=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(l.onclick=bd)}$v(r,n);var u,d;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style")for(d in l=a[u],l)l.hasOwnProperty(d)&&(r||(r={}),r[d]="");else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_s.hasOwnProperty(u)?e||(e=[]):(e=e||[]).push(u,null));for(u in n){var h=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&h!==l&&(h!=null||l!=null))if(u==="style")if(l){for(d in l)!l.hasOwnProperty(d)||h&&h.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in h)h.hasOwnProperty(d)&&l[d]!==h[d]&&(r||(r={}),r[d]=h[d])}else r||(e||(e=[]),e.push(u,r)),r=h;else u==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,l=l?l.__html:void 0,h!=null&&l!==h&&(e=e||[]).push(u,h)):u==="children"?l===h||typeof h!="string"&&typeof h!="number"||(e=e||[]).push(u,""+h):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_s.hasOwnProperty(u)?(h!=null&&Ai(o,u),e||l===h||(e=[])):(e=e||[]).push(u,h))}r&&(e=e||[]).push("style",r),o=e,(t.updateQueue=o)&&(t.effectTag|=4)}};yT=function(e,t,r,n){r!==n&&(t.effectTag|=4)};function yf(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function bM(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Hr(t.type)&&Ed(),null;case 3:return Hs(),Et(zr),Et(xr),r=t.stateNode,r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),e!==null&&e.child!==null||!mf(t)||(t.effectTag|=4),tm(t),null;case 5:Wy(t),r=aa(Fu.current);var o=t.type;if(e!==null&&t.stateNode!=null)mT(e,t,o,n,r),e.ref!==t.ref&&(t.effectTag|=128);else{if(!n){if(t.stateNode===null)throw Error(ve(166));return null}if(e=aa(ci.current),mf(t)){n=t.stateNode,o=t.type;var a=t.memoizedProps;switch(n[go]=t,n[xd]=a,o){case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(e=0;e<cu.length;e++)Pt(cu[e],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"form":Pt("reset",n),Pt("submit",n);break;case"details":Pt("toggle",n);break;case"input":j1(n,a),Pt("invalid",n),Ai(r,"onChange");break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Pt("invalid",n),Ai(r,"onChange");break;case"textarea":M1(n,a),Pt("invalid",n),Ai(r,"onChange")}$v(o,a),e=null;for(var l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="children"?typeof u=="string"?n.textContent!==u&&(e=["children",u]):typeof u=="number"&&n.textContent!==""+u&&(e=["children",""+u]):_s.hasOwnProperty(l)&&u!=null&&Ai(r,l)}switch(o){case"input":cf(n),A1(n,a,!0);break;case"textarea":cf(n),I1(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=bd)}r=e,t.updateQueue=r,r!==null&&(t.effectTag|=4)}else{switch(l=r.nodeType===9?r:r.ownerDocument,e===z1&&(e=fk(o)),e===z1?o==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=l.createElement(o,{is:n.is}):(e=l.createElement(o),o==="select"&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,o),e[go]=t,e[xd]=n,vT(e,t,!1,!1),t.stateNode=e,l=Dv(o,n),o){case"iframe":case"object":case"embed":Pt("load",e),u=n;break;case"video":case"audio":for(u=0;u<cu.length;u++)Pt(cu[u],e);u=n;break;case"source":Pt("error",e),u=n;break;case"img":case"image":case"link":Pt("error",e),Pt("load",e),u=n;break;case"form":Pt("reset",e),Pt("submit",e),u=n;break;case"details":Pt("toggle",e),u=n;break;case"input":j1(e,n),u=Ov(e,n),Pt("invalid",e),Ai(r,"onChange");break;case"option":u=Nv(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},u=jr({},n,{value:void 0}),Pt("invalid",e),Ai(r,"onChange");break;case"textarea":M1(e,n),u=jv(e,n),Pt("invalid",e),Ai(r,"onChange");break;default:u=n}$v(o,u);var d=u;for(a in d)if(d.hasOwnProperty(a)){var h=d[a];a==="style"?Nk(e,h):a==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&dk(e,h)):a==="children"?typeof h=="string"?(o!=="textarea"||h!=="")&&Au(e,h):typeof h=="number"&&Au(e,""+h):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(_s.hasOwnProperty(a)?h!=null&&Ai(r,a):h!=null&&wy(e,a,h,l))}switch(o){case"input":cf(e),A1(e,n,!1);break;case"textarea":cf(e),I1(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Po(n.value));break;case"select":e.multiple=!!n.multiple,r=n.value,r!=null?Ns(e,!!n.multiple,r,!1):n.defaultValue!=null&&Ns(e,!!n.multiple,n.defaultValue,!0);break;default:typeof u.onClick=="function"&&(e.onclick=bd)}Ik(o,n)&&(t.effectTag|=4)}t.ref!==null&&(t.effectTag|=128)}return null;case 6:if(e&&t.stateNode!=null)yT(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ve(166));r=aa(Fu.current),aa(ci.current),mf(t)?(r=t.stateNode,n=t.memoizedProps,r[go]=t,r.nodeValue!==n&&(t.effectTag|=4)):(r=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),r[go]=t,t.stateNode=r)}return null;case 13:return Et(jt),n=t.memoizedState,t.effectTag&64?(t.expirationTime=r,t):(r=n!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&mf(t):(o=e.memoizedState,n=o!==null,r||o===null||(o=e.child.sibling,o!==null&&(a=t.firstEffect,a!==null?(t.firstEffect=o,o.nextEffect=a):(t.firstEffect=t.lastEffect=o,o.nextEffect=null),o.effectTag=8))),r&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||jt.current&1?er===va&&(er=Rd):((er===va||er===Rd)&&(er=bh),Hu!==0&&tn!==null&&(ua(tn,Ur),DT(tn,Hu)))),(r||n)&&(t.effectTag|=4),null);case 4:return Hs(),tm(t),null;case 10:return Fy(t),null;case 17:return Hr(t.type)&&Ed(),null;case 19:if(Et(jt),n=t.memoizedState,n===null)return null;if(o=(t.effectTag&64)!==0,a=n.rendering,a===null){if(o)yf(n,!1);else if(er!==va||e!==null&&e.effectTag&64)for(a=t.child;a!==null;){if(e=Pd(a),e!==null){for(t.effectTag|=64,yf(n,!1),o=e.updateQueue,o!==null&&(t.updateQueue=o,t.effectTag|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=t.child;n!==null;)o=n,a=r,o.effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,e=o.alternate,e===null?(o.childExpirationTime=0,o.expirationTime=a,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=e.childExpirationTime,o.expirationTime=e.expirationTime,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,a=e.dependencies,o.dependencies=a===null?null:{expirationTime:a.expirationTime,firstContext:a.firstContext,responders:a.responders}),n=n.sibling;return _t(jt,jt.current&1|2),t.child}a=a.sibling}}else{if(!o)if(e=Pd(a),e!==null){if(t.effectTag|=64,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.effectTag|=4),yf(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*gn()-n.renderingStartTime>n.tailExpiration&&1<r&&(t.effectTag|=64,o=!0,yf(n,!1),t.expirationTime=t.childExpirationTime=r-1);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(n.tailExpiration===0&&(n.tailExpiration=gn()+500),r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=gn(),r.sibling=null,t=jt.current,_t(jt,o?t&1|2:t&1),r):null}throw Error(ve(156,t.tag))}function xM(e){switch(e.tag){case 1:Hr(e.type)&&Ed();var t=e.effectTag;return t&4096?(e.effectTag=t&-4097|64,e):null;case 3:if(Hs(),Et(zr),Et(xr),t=e.effectTag,t&64)throw Error(ve(285));return e.effectTag=t&-4097|64,e;case 5:return Wy(e),null;case 13:return Et(jt),t=e.effectTag,t&4096?(e.effectTag=t&-4097|64,e):null;case 19:return Et(jt),null;case 4:return Hs(),null;case 10:return Fy(e),null;default:return null}}function Yy(e,t){return{value:e,source:t,stack:Sy(t)}}var SM=typeof WeakSet=="function"?WeakSet:Set;function rm(e,t){var r=t.source,n=t.stack;n===null&&r!==null&&(n=Sy(r)),r!==null&&Hi(r.type),t=t.value,e!==null&&e.tag===1&&Hi(e.type);try{console.error(t)}catch(o){setTimeout(function(){throw o})}}function EM(e,t){try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(r){ya(e,r)}}function xx(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ya(e,r)}else t.current=null}function CM(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.effectTag&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Fn(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(ve(163))}function wT(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.destroy;r.destroy=void 0,n!==void 0&&n()}r=r.next}while(r!==t)}}function bT(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function kM(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:bT(3,r);return;case 1:if(e=r.stateNode,r.effectTag&4)if(t===null)e.componentDidMount();else{var n=r.elementType===r.type?t.memoizedProps:Fn(r.type,t.memoizedProps);e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate)}t=r.updateQueue,t!==null&&ax(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}ax(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.effectTag&4&&Ik(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&Tk(r))));return;case 19:case 17:case 20:case 21:return}throw Error(ve(163))}function Sx(e,t,r){switch(typeof cm=="function"&&cm(t),t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e.next;No(97<r?97:r,function(){var o=n;do{var a=o.destroy;if(a!==void 0){var l=t;try{a()}catch(u){ya(l,u)}}o=o.next}while(o!==n)})}break;case 1:xx(t),r=t.stateNode,typeof r.componentWillUnmount=="function"&&EM(t,r);break;case 5:xx(t);break;case 4:ST(e,t,r)}}function xT(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,e.memoizedProps=null,e.stateNode=null,t!==null&&xT(t)}function Ex(e){return e.tag===5||e.tag===3||e.tag===4}function Cx(e){e:{for(var t=e.return;t!==null;){if(Ex(t)){var r=t;break e}t=t.return}throw Error(ve(160))}switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(ve(161))}r.effectTag&16&&(Au(t,""),r.effectTag&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Ex(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.effectTag&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.effectTag&2)){r=r.stateNode;break e}}n?nm(e,r,t):im(e,r,t)}function nm(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=bd));else if(n!==4&&(e=e.child,e!==null))for(nm(e,t,r),e=e.sibling;e!==null;)nm(e,t,r),e=e.sibling}function im(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(im(e,t,r),e=e.sibling;e!==null;)im(e,t,r),e=e.sibling}function ST(e,t,r){for(var n=t,o=!1,a,l;;){if(!o){o=n.return;e:for(;;){if(o===null)throw Error(ve(160));switch(a=o.stateNode,o.tag){case 5:l=!1;break e;case 3:a=a.containerInfo,l=!0;break e;case 4:a=a.containerInfo,l=!0;break e}o=o.return}o=!0}if(n.tag===5||n.tag===6){e:for(var u=e,d=n,h=r,g=d;;)if(Sx(u,g,h),g.child!==null&&g.tag!==4)g.child.return=g,g=g.child;else{if(g===d)break e;for(;g.sibling===null;){if(g.return===null||g.return===d)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}l?(u=a,d=n.stateNode,u.nodeType===8?u.parentNode.removeChild(d):u.removeChild(d)):a.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){a=n.stateNode.containerInfo,l=!0,n.child.return=n,n=n.child;continue}}else if(Sx(e,n,r),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(o=!1)}n.sibling.return=n.return,n=n.sibling}}function Mg(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:wT(3,t);return;case 1:return;case 5:var r=t.stateNode;if(r!=null){var n=t.memoizedProps,o=e!==null?e.memoizedProps:n;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(r[xd]=n,e==="input"&&n.type==="radio"&&n.name!=null&&lk(r,n),Dv(e,o),t=Dv(e,n),o=0;o<a.length;o+=2){var l=a[o],u=a[o+1];l==="style"?Nk(r,u):l==="dangerouslySetInnerHTML"?dk(r,u):l==="children"?Au(r,u):wy(r,l,u,t)}switch(e){case"input":Pv(r,n);break;case"textarea":uk(r,n);break;case"select":t=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,e=n.value,e!=null?Ns(r,!!n.multiple,e,!1):t!==!!n.multiple&&(n.defaultValue!=null?Ns(r,!!n.multiple,n.defaultValue,!0):Ns(r,!!n.multiple,n.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(ve(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:t=t.stateNode,t.hydrate&&(t.hydrate=!1,Tk(t.containerInfo));return;case 12:return;case 13:if(r=t,t.memoizedState===null?n=!1:(n=!0,r=t.child,Zy=gn()),r!==null)e:for(e=r;;){if(e.tag===5)a=e.stateNode,n?(a=a.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(a=e.stateNode,o=e.memoizedProps.style,o=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=Lk("display",o));else if(e.tag===6)e.stateNode.nodeValue=n?"":e.memoizedProps;else if(e.tag===13&&e.memoizedState!==null&&e.memoizedState.dehydrated===null){a=e.child.sibling,a.return=e,e=a;continue}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break;for(;e.sibling===null;){if(e.return===null||e.return===r)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}kx(t);return;case 19:kx(t);return;case 17:return}throw Error(ve(163))}function kx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new SM),t.forEach(function(n){var o=RM.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}var TM=typeof WeakMap=="function"?WeakMap:Map;function ET(e,t,r){r=Co(r,null),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Dd||(Dd=!0,om=n),rm(e,t)},r}function CT(e,t,r){r=Co(r,null),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return rm(e,t),n(o)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(To===null?To=new Set([this]):To.add(this),rm(e,t));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),r}var OM=Math.ceil,Md=Wn.ReactCurrentDispatcher,kT=Wn.ReactCurrentOwner,rr=0,Qy=8,Un=16,hi=32,va=0,Id=1,TT=2,Rd=3,bh=4,Jy=5,Ke=rr,tn=null,Ye=null,Ur=0,er=va,xh=null,Ri=1073741823,zu=1073741823,_d=null,Hu=0,$d=!1,Zy=0,OT=500,Ae=null,Dd=!1,om=null,To=null,Fd=!1,ku=null,du=90,sa=null,Tu=0,am=null,rd=0;function fi(){return(Ke&(Un|hi))!==rr?1073741821-(gn()/10|0):rd!==0?rd:rd=1073741821-(gn()/10|0)}function ma(e,t,r){if(t=t.mode,!(t&2))return 1073741823;var n=yh();if(!(t&4))return n===99?1073741823:1073741822;if((Ke&Un)!==rr)return Ur;if(r!==null)e=ed(e,r.timeoutMs|0||5e3,250);else switch(n){case 99:e=1073741823;break;case 98:e=ed(e,150,100);break;case 97:case 96:e=ed(e,5e3,250);break;case 95:e=2;break;default:throw Error(ve(326))}return tn!==null&&e===Ur&&--e,e}function Oo(e,t){if(50<Tu)throw Tu=0,am=null,Error(ve(185));if(e=Sh(e,t),e!==null){var r=yh();t===1073741823?(Ke&Qy)!==rr&&(Ke&(Un|hi))===rr?sm(e):(rn(e),Ke===rr&&gi()):rn(e),(Ke&4)===rr||r!==98&&r!==99||(sa===null?sa=new Map([[e,t]]):(r=sa.get(e),(r===void 0||r>t)&&sa.set(e,t)))}}function Sh(e,t){e.expirationTime<t&&(e.expirationTime=t);var r=e.alternate;r!==null&&r.expirationTime<t&&(r.expirationTime=t);var n=e.return,o=null;if(n===null&&e.tag===3)o=e.stateNode;else for(;n!==null;){if(r=n.alternate,n.childExpirationTime<t&&(n.childExpirationTime=t),r!==null&&r.childExpirationTime<t&&(r.childExpirationTime=t),n.return===null&&n.tag===3){o=n.stateNode;break}n=n.return}return o!==null&&(tn===o&&(Eh(t),er===bh&&ua(o,Ur)),DT(o,t)),o}function nd(e){var t=e.lastExpiredTime;if(t!==0||(t=e.firstPendingTime,!$T(e,t)))return t;var r=e.lastPingedTime;return e=e.nextKnownPendingLevel,e=r>e?r:e,2>=e&&t!==e?0:e}function rn(e){if(e.lastExpiredTime!==0)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=ix(sm.bind(null,e));else{var t=nd(e),r=e.callbackNode;if(t===0)r!==null&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var n=fi();if(t===1073741823?n=99:t===1||t===2?n=95:(n=10*(1073741821-t)-10*(1073741821-n),n=0>=n?99:250>=n?98:5250>=n?97:95),r!==null){var o=e.callbackPriority;if(e.callbackExpirationTime===t&&o>=n)return;r!==Zk&&Vk(r)}e.callbackExpirationTime=t,e.callbackPriority=n,t=t===1073741823?ix(sm.bind(null,e)):tT(n,PT.bind(null,e),{timeout:10*(1073741821-t)-gn()}),e.callbackNode=t}}}function PT(e,t){if(rd=0,t)return t=fi(),fm(e,t),rn(e),null;var r=nd(e);if(r!==0){if(t=e.callbackNode,(Ke&(Un|hi))!==rr)throw Error(ve(327));if(el(),e===tn&&r===Ur||la(e,r),Ye!==null){var n=Ke;Ke|=Un;var o=AT();do try{NM();break}catch(u){jT(e,u)}while(!0);if(Dy(),Ke=n,Md.current=o,er===Id)throw t=xh,la(e,r),ua(e,r),rn(e),t;if(Ye===null)switch(o=e.finishedWork=e.current.alternate,e.finishedExpirationTime=r,n=er,tn=null,n){case va:case Id:throw Error(ve(345));case TT:fm(e,2<r?2:r);break;case Rd:if(ua(e,r),n=e.lastSuspendedTime,r===n&&(e.nextKnownPendingLevel=lm(o)),Ri===1073741823&&(o=Zy+OT-gn(),10<o)){if($d){var a=e.lastPingedTime;if(a===0||a>=r){e.lastPingedTime=r,la(e,r);break}}if(a=nd(e),a!==0&&a!==r)break;if(n!==0&&n!==r){e.lastPingedTime=n;break}e.timeoutHandle=Og(Zo.bind(null,e),o);break}Zo(e);break;case bh:if(ua(e,r),n=e.lastSuspendedTime,r===n&&(e.nextKnownPendingLevel=lm(o)),$d&&(o=e.lastPingedTime,o===0||o>=r)){e.lastPingedTime=r,la(e,r);break}if(o=nd(e),o!==0&&o!==r)break;if(n!==0&&n!==r){e.lastPingedTime=n;break}if(zu!==1073741823?n=10*(1073741821-zu)-gn():Ri===1073741823?n=0:(n=10*(1073741821-Ri)-5e3,o=gn(),r=10*(1073741821-r)-o,n=o-n,0>n&&(n=0),n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*OM(n/1960))-n,r<n&&(n=r)),10<n){e.timeoutHandle=Og(Zo.bind(null,e),n);break}Zo(e);break;case Jy:if(Ri!==1073741823&&_d!==null){a=Ri;var l=_d;if(n=l.busyMinDurationMs|0,0>=n?n=0:(o=l.busyDelayMs|0,a=gn()-(10*(1073741821-a)-(l.timeoutMs|0||5e3)),n=a<=o?0:o+n-a),10<n){ua(e,r),e.timeoutHandle=Og(Zo.bind(null,e),n);break}}Zo(e);break;default:throw Error(ve(329))}if(rn(e),e.callbackNode===t)return PT.bind(null,e)}}return null}function sm(e){var t=e.lastExpiredTime;if(t=t!==0?t:1073741823,(Ke&(Un|hi))!==rr)throw Error(ve(327));if(el(),e===tn&&t===Ur||la(e,t),Ye!==null){var r=Ke;Ke|=Un;var n=AT();do try{LM();break}catch(o){jT(e,o)}while(!0);if(Dy(),Ke=r,Md.current=n,er===Id)throw r=xh,la(e,t),ua(e,t),rn(e),r;if(Ye!==null)throw Error(ve(261));e.finishedWork=e.current.alternate,e.finishedExpirationTime=t,tn=null,Zo(e),rn(e)}return null}function PM(){if(sa!==null){var e=sa;sa=null,e.forEach(function(t,r){fm(r,t),rn(r)}),gi()}}function LT(e,t){var r=Ke;Ke|=1;try{return e(t)}finally{Ke=r,Ke===rr&&gi()}}function NT(e,t){var r=Ke;Ke&=-2,Ke|=Qy;try{return e(t)}finally{Ke=r,Ke===rr&&gi()}}function la(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,OA(r)),Ye!==null)for(r=Ye.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ed();break;case 3:Hs(),Et(zr),Et(xr);break;case 5:Wy(n);break;case 4:Hs();break;case 13:Et(jt);break;case 19:Et(jt);break;case 10:Fy(n)}r=r.return}tn=e,Ye=Ta(e.current,null),Ur=t,er=va,xh=null,zu=Ri=1073741823,_d=null,Hu=0,$d=!1}function jT(e,t){do{try{if(Dy(),td.current=Ad,Ld)for(var r=Jt.memoizedState;r!==null;){var n=r.queue;n!==null&&(n.pending=null),r=r.next}if(mo=0,wr=yr=Jt=null,Ld=!1,Ye===null||Ye.return===null)return er=Id,xh=t,Ye=null;e:{var o=e,a=Ye.return,l=Ye,u=t;if(t=Ur,l.effectTag|=2048,l.firstEffect=l.lastEffect=null,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u;if(!(l.mode&2)){var h=l.alternate;h?(l.updateQueue=h.updateQueue,l.memoizedState=h.memoizedState,l.expirationTime=h.expirationTime):(l.updateQueue=null,l.memoizedState=null)}var g=(jt.current&1)!==0,m=a;do{var w;if(w=m.tag===13){var x=m.memoizedState;if(x!==null)w=x.dehydrated!==null;else{var C=m.memoizedProps;w=C.fallback===void 0?!1:C.unstable_avoidThisFallback!==!0?!0:!g}}if(w){var j=m.updateQueue;if(j===null){var T=new Set;T.add(d),m.updateQueue=T}else j.add(d);if(!(m.mode&2)){if(m.effectTag|=64,l.effectTag&=-2981,l.tag===1)if(l.alternate===null)l.tag=17;else{var k=Co(1073741823,null);k.tag=2,ko(l,k)}l.expirationTime=1073741823;break e}u=void 0,l=t;var P=o.pingCache;if(P===null?(P=o.pingCache=new TM,u=new Set,P.set(d,u)):(u=P.get(d),u===void 0&&(u=new Set,P.set(d,u))),!u.has(l)){u.add(l);var A=IM.bind(null,o,d,l);d.then(A,A)}m.effectTag|=4096,m.expirationTime=t;break e}m=m.return}while(m!==null);u=Error((Hi(l.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Sy(l))}er!==Jy&&(er=TT),u=Yy(u,l),m=a;do{switch(m.tag){case 3:d=u,m.effectTag|=4096,m.expirationTime=t;var L=ET(m,d,t);ox(m,L);break e;case 1:d=u;var R=m.type,D=m.stateNode;if(!(m.effectTag&64)&&(typeof R.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(To===null||!To.has(D)))){m.effectTag|=4096,m.expirationTime=t;var $=CT(m,d,t);ox(m,$);break e}}m=m.return}while(m!==null)}Ye=RT(Ye)}catch(B){t=B;continue}break}while(!0)}function AT(){var e=Md.current;return Md.current=Ad,e===null?Ad:e}function MT(e,t){e<Ri&&2<e&&(Ri=e),t!==null&&e<zu&&2<e&&(zu=e,_d=t)}function Eh(e){e>Hu&&(Hu=e)}function LM(){for(;Ye!==null;)Ye=IT(Ye)}function NM(){for(;Ye!==null&&!pM();)Ye=IT(Ye)}function IT(e){var t=_T(e.alternate,e,Ur);return e.memoizedProps=e.pendingProps,t===null&&(t=RT(e)),kT.current=null,t}function RT(e){Ye=e;do{var t=Ye.alternate;if(e=Ye.return,Ye.effectTag&2048){if(t=xM(Ye),t!==null)return t.effectTag&=2047,t;e!==null&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}else{if(t=bM(t,Ye,Ur),Ur===1||Ye.childExpirationTime!==1){for(var r=0,n=Ye.child;n!==null;){var o=n.expirationTime,a=n.childExpirationTime;o>r&&(r=o),a>r&&(r=a),n=n.sibling}Ye.childExpirationTime=r}if(t!==null)return t;e!==null&&!(e.effectTag&2048)&&(e.firstEffect===null&&(e.firstEffect=Ye.firstEffect),Ye.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=Ye.firstEffect),e.lastEffect=Ye.lastEffect),1<Ye.effectTag&&(e.lastEffect!==null?e.lastEffect.nextEffect=Ye:e.firstEffect=Ye,e.lastEffect=Ye))}if(t=Ye.sibling,t!==null)return t;Ye=e}while(Ye!==null);return er===va&&(er=Jy),null}function lm(e){var t=e.expirationTime;return e=e.childExpirationTime,t>e?t:e}function Zo(e){var t=yh();return No(99,jM.bind(null,e,t)),null}function jM(e,t){do el();while(ku!==null);if((Ke&(Un|hi))!==rr)throw Error(ve(327));var r=e.finishedWork,n=e.finishedExpirationTime;if(r===null)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,r===e.current)throw Error(ve(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var o=lm(r);if(e.firstPendingTime=o,n<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:n<=e.firstSuspendedTime&&(e.firstSuspendedTime=n-1),n<=e.lastPingedTime&&(e.lastPingedTime=0),n<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===tn&&(Ye=tn=null,Ur=0),1<r.effectTag?r.lastEffect!==null?(r.lastEffect.nextEffect=r,o=r.firstEffect):o=r:o=r.firstEffect,o!==null){var a=Ke;Ke|=hi,kT.current=null,kg=Vf;var l=W1();if(zv(l)){if("selectionStart"in l)var u={start:l.selectionStart,end:l.selectionEnd};else e:{u=(u=l.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var h=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{u.nodeType,g.nodeType}catch{u=null;break e}var m=0,w=-1,x=-1,C=0,j=0,T=l,k=null;t:for(;;){for(var P;T!==u||h!==0&&T.nodeType!==3||(w=m+h),T!==g||d!==0&&T.nodeType!==3||(x=m+d),T.nodeType===3&&(m+=T.nodeValue.length),(P=T.firstChild)!==null;)k=T,T=P;for(;;){if(T===l)break t;if(k===u&&++C===h&&(w=m),k===g&&++j===d&&(x=m),(P=T.nextSibling)!==null)break;T=k,k=T.parentNode}T=P}u=w===-1||x===-1?null:{start:w,end:x}}else u=null}u=u||{start:0,end:0}}else u=null;Tg={activeElementDetached:null,focusedElem:l,selectionRange:u},Vf=!1,Ae=o;do try{AM()}catch(U){if(Ae===null)throw Error(ve(330));ya(Ae,U),Ae=Ae.nextEffect}while(Ae!==null);Ae=o;do try{for(l=e,u=t;Ae!==null;){var A=Ae.effectTag;if(A&16&&Au(Ae.stateNode,""),A&128){var L=Ae.alternate;if(L!==null){var R=L.ref;R!==null&&(typeof R=="function"?R(null):R.current=null)}}switch(A&1038){case 2:Cx(Ae),Ae.effectTag&=-3;break;case 6:Cx(Ae),Ae.effectTag&=-3,Mg(Ae.alternate,Ae);break;case 1024:Ae.effectTag&=-1025;break;case 1028:Ae.effectTag&=-1025,Mg(Ae.alternate,Ae);break;case 4:Mg(Ae.alternate,Ae);break;case 8:h=Ae,ST(l,h,u),xT(h)}Ae=Ae.nextEffect}}catch(U){if(Ae===null)throw Error(ve(330));ya(Ae,U),Ae=Ae.nextEffect}while(Ae!==null);if(R=Tg,L=W1(),A=R.focusedElem,u=R.selectionRange,L!==A&&A&&A.ownerDocument&&jk(A.ownerDocument.documentElement,A)){for(u!==null&&zv(A)&&(L=u.start,R=u.end,R===void 0&&(R=L),"selectionStart"in A?(A.selectionStart=L,A.selectionEnd=Math.min(R,A.value.length)):(R=(L=A.ownerDocument||document)&&L.defaultView||window,R.getSelection&&(R=R.getSelection(),h=A.textContent.length,l=Math.min(u.start,h),u=u.end===void 0?l:Math.min(u.end,h),!R.extend&&l>u&&(h=u,u=l,l=h),h=B1(A,l),g=B1(A,u),h&&g&&(R.rangeCount!==1||R.anchorNode!==h.node||R.anchorOffset!==h.offset||R.focusNode!==g.node||R.focusOffset!==g.offset)&&(L=L.createRange(),L.setStart(h.node,h.offset),R.removeAllRanges(),l>u?(R.addRange(L),R.extend(g.node,g.offset)):(L.setEnd(g.node,g.offset),R.addRange(L)))))),L=[],R=A;R=R.parentNode;)R.nodeType===1&&L.push({element:R,left:R.scrollLeft,top:R.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<L.length;A++)R=L[A],R.element.scrollLeft=R.left,R.element.scrollTop=R.top}Vf=!!kg,Tg=kg=null,e.current=r,Ae=o;do try{for(A=e;Ae!==null;){var D=Ae.effectTag;if(D&36&&kM(A,Ae.alternate,Ae),D&128){L=void 0;var $=Ae.ref;if($!==null){var B=Ae.stateNode;switch(Ae.tag){case 5:L=B;break;default:L=B}typeof $=="function"?$(L):$.current=L}}Ae=Ae.nextEffect}}catch(U){if(Ae===null)throw Error(ve(330));ya(Ae,U),Ae=Ae.nextEffect}while(Ae!==null);Ae=null,gM(),Ke=a}else e.current=r;if(Fd)Fd=!1,ku=e,du=t;else for(Ae=o;Ae!==null;)t=Ae.nextEffect,Ae.nextEffect=null,Ae=t;if(t=e.firstPendingTime,t===0&&(To=null),t===1073741823?e===am?Tu++:(Tu=0,am=e):Tu=0,typeof um=="function"&&um(r.stateNode,n),rn(e),Dd)throw Dd=!1,e=om,om=null,e;return(Ke&Qy)!==rr||gi(),null}function AM(){for(;Ae!==null;){var e=Ae.effectTag;e&256&&CM(Ae.alternate,Ae),!(e&512)||Fd||(Fd=!0,tT(97,function(){return el(),null})),Ae=Ae.nextEffect}}function el(){if(du!==90){var e=97<du?97:du;return du=90,No(e,MM)}}function MM(){if(ku===null)return!1;var e=ku;if(ku=null,(Ke&(Un|hi))!==rr)throw Error(ve(331));var t=Ke;for(Ke|=hi,e=e.current.firstEffect;e!==null;){try{var r=e;if(r.effectTag&512)switch(r.tag){case 0:case 11:case 15:case 22:wT(5,r),bT(5,r)}}catch(n){if(e===null)throw Error(ve(330));ya(e,n)}r=e.nextEffect,e.nextEffect=null,e=r}return Ke=t,gi(),!0}function Tx(e,t,r){t=Yy(r,t),t=ET(e,t,1073741823),ko(e,t),e=Sh(e,1073741823),e!==null&&rn(e)}function ya(e,t){if(e.tag===3)Tx(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Tx(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(To===null||!To.has(n))){e=Yy(t,e),e=CT(r,e,1073741823),ko(r,e),r=Sh(r,1073741823),r!==null&&rn(r);break}}r=r.return}}function IM(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),tn===e&&Ur===r?er===bh||er===Rd&&Ri===1073741823&&gn()-Zy<OT?la(e,Ur):$d=!0:$T(e,r)&&(t=e.lastPingedTime,t!==0&&t<r||(e.lastPingedTime=r,rn(e)))}function RM(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=fi(),t=ma(t,e,null)),e=Sh(e,t),e!==null&&rn(e)}var _T;_T=function(e,t,r){var n=t.expirationTime;if(e!==null){var o=t.pendingProps;if(e.memoizedProps!==o||zr.current)si=!0;else{if(n<r){switch(si=!1,t.tag){case 3:mx(t),Ng();break;case 5:if(ux(t),t.mode&4&&r!==1&&o.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:Hr(t.type)&&Jf(t);break;case 4:Xv(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value,o=t.type._context,_t(Cd,o._currentValue),o._currentValue=n;break;case 13:if(t.memoizedState!==null)return n=t.child.childExpirationTime,n!==0&&n>=r?yx(e,t,r):(_t(jt,jt.current&1),t=$i(e,t,r),t!==null?t.sibling:null);_t(jt,jt.current&1);break;case 19:if(n=t.childExpirationTime>=r,e.effectTag&64){if(n)return bx(e,t,r);t.effectTag|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null),_t(jt,jt.current),!n)return null}return $i(e,t,r)}si=!1}}else si=!1;switch(t.expirationTime=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,o=Fs(t,xr.current),As(t,r),o=Gy(null,t,n,e,o,r),t.effectTag|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hr(n)){var a=!0;Jf(t)}else a=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,zy(t);var l=n.getDerivedStateFromProps;typeof l=="function"&&Od(t,n,l,e),o.updater=wh,t.stateNode=o,o._reactInternalFiber=t,Vv(t,n,e,r),t=em(null,t,n,!0,a,r)}else t.tag=0,Qr(null,t,o,r),t=t.child;return t;case 16:e:{if(o=t.elementType,e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,cA(o),o._status!==1)throw o._result;switch(o=o._result,t.type=o,a=t.tag=DM(o),e=Fn(o,e),a){case 0:t=Zv(null,t,o,e,r);break e;case 1:t=vx(null,t,o,e,r);break e;case 11:t=px(null,t,o,e,r);break e;case 14:t=gx(null,t,o,Fn(o.type,e),n,r);break e}throw Error(ve(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fn(n,o),Zv(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fn(n,o),vx(e,t,n,o,r);case 3:if(mx(t),n=t.updateQueue,e===null||n===null)throw Error(ve(282));if(n=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,Hy(e,t),$u(t,n,null,r),n=t.memoizedState.element,n===o)Ng(),t=$i(e,t,r);else{if((o=t.stateNode.hydrate)&&(yo=js(t.stateNode.containerInfo.firstChild),_i=t,o=ga=!0),o)for(r=By(t,null,n,r),t.child=r;r;)r.effectTag=r.effectTag&-3|1024,r=r.sibling;else Qr(e,t,n,r),Ng();t=t.child}return t;case 5:return ux(t),e===null&&Jv(t),n=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,l=o.children,Hv(n,o)?l=null:a!==null&&Hv(n,a)&&(t.effectTag|=16),gT(e,t),t.mode&4&&r!==1&&o.hidden?(t.expirationTime=t.childExpirationTime=1,t=null):(Qr(e,t,l,r),t=t.child),t;case 6:return e===null&&Jv(t),null;case 13:return yx(e,t,r);case 4:return Xv(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=zs(t,null,n,r):Qr(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fn(n,o),px(e,t,n,o,r);case 7:return Qr(e,t,t.pendingProps,r),t.child;case 8:return Qr(e,t,t.pendingProps.children,r),t.child;case 12:return Qr(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value;var u=t.type._context;if(_t(Cd,u._currentValue),u._currentValue=a,l!==null)if(u=l.value,a=Ca(u,a)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(u,a):1073741823)|0,a===0){if(l.children===o.children&&!zr.current){t=$i(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var d=u.dependencies;if(d!==null){l=u.child;for(var h=d.firstContext;h!==null;){if(h.context===n&&h.observedBits&a){u.tag===1&&(h=Co(r,null),h.tag=2,ko(u,h)),u.expirationTime<r&&(u.expirationTime=r),h=u.alternate,h!==null&&h.expirationTime<r&&(h.expirationTime=r),nT(u.return,r),d.expirationTime<r&&(d.expirationTime=r);break}h=h.next}}else l=u.tag===10&&u.type===t.type?null:u.child;if(l!==null)l.return=u;else for(l=u;l!==null;){if(l===t){l=null;break}if(u=l.sibling,u!==null){u.return=l.return,l=u;break}l=l.return}u=l}Qr(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,a=t.pendingProps,n=a.children,As(t,r),o=wn(o,a.unstable_observedBits),n=n(o),t.effectTag|=1,Qr(e,t,n,r),t.child;case 14:return o=t.type,a=Fn(o,t.pendingProps),a=Fn(o.type,a),gx(e,t,o,a,n,r);case 15:return pT(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Fn(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,Hr(n)?(e=!0,Jf(t)):e=!1,As(t,r),oT(t,n,o),Vv(t,n,o,r),em(null,t,n,!0,e,r);case 19:return bx(e,t,r)}throw Error(ve(156,t.tag))};var um=null,cm=null;function _M(e){if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var r=t.inject(e);um=function(n){try{t.onCommitFiberRoot(r,n,void 0,(n.current.effectTag&64)===64)}catch{}},cm=function(n){try{t.onCommitFiberUnmount(r,n)}catch{}}}catch{}return!0}function $M(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function li(e,t,r,n){return new $M(e,t,r,n)}function e0(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DM(e){if(typeof e=="function")return e0(e)?1:0;if(e!=null){if(e=e.$$typeof,e===by)return 11;if(e===xy)return 14}return 2}function Ta(e,t){var r=e.alternate;return r===null?(r=li(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childExpirationTime=e.childExpirationTime,r.expirationTime=e.expirationTime,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function id(e,t,r,n,o,a){var l=2;if(n=e,typeof e=="function")e0(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case na:return wo(r.children,o,a,t);case uA:l=8,o|=7;break;case tk:l=8,o|=1;break;case Kf:return e=li(12,r,t,o|8),e.elementType=Kf,e.type=Kf,e.expirationTime=a,e;case Gf:return e=li(13,r,t,o),e.type=Gf,e.elementType=Gf,e.expirationTime=a,e;case Tv:return e=li(19,r,t,o),e.elementType=Tv,e.expirationTime=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case rk:l=10;break e;case nk:l=9;break e;case by:l=11;break e;case xy:l=14;break e;case ik:l=16,n=null;break e;case ok:l=22;break e}throw Error(ve(130,e==null?e:typeof e,""))}return t=li(l,r,t,o),t.elementType=e,t.type=n,t.expirationTime=a,t}function wo(e,t,r,n){return e=li(7,e,n,t),e.expirationTime=r,e}function Ig(e,t,r){return e=li(6,e,null,t),e.expirationTime=r,e}function Rg(e,t,r){return t=li(4,e.children!==null?e.children:[],e.key,t),t.expirationTime=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function FM(e,t,r){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function $T(e,t){var r=e.firstSuspendedTime;return e=e.lastSuspendedTime,r!==0&&r>=t&&e<=t}function ua(e,t){var r=e.firstSuspendedTime,n=e.lastSuspendedTime;r<t&&(e.firstSuspendedTime=t),(n>t||r===0)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function DT(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var r=e.firstSuspendedTime;r!==0&&(t>=r?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function fm(e,t){var r=e.lastExpiredTime;(r===0||r>t)&&(e.lastExpiredTime=t)}function zd(e,t,r,n){var o=t.current,a=fi(),l=Cu.suspense;a=ma(a,o,l);e:if(r){r=r._reactInternalFiber;t:{if(Na(r)!==r||r.tag!==1)throw Error(ve(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Hr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(ve(171))}if(r.tag===1){var d=r.type;if(Hr(d)){r=qk(r,d,u);break e}}r=u}else r=Lo;return t.context===null?t.context=r:t.pendingContext=r,t=Co(a,l),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),ko(o,t),Oo(o,a),a}function _g(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ox(e,t){e=e.memoizedState,e!==null&&e.dehydrated!==null&&e.retryTime<t&&(e.retryTime=t)}function t0(e,t){Ox(e,t),(e=e.alternate)&&Ox(e,t)}function r0(e,t,r){r=r!=null&&r.hydrate===!0;var n=new FM(e,t,r),o=li(3,null,null,t===2?7:t===1?3:0);n.current=o,o.stateNode=n,zy(o),e[uc]=n.current,r&&t!==0&&vA(e,e.nodeType===9?e:e.ownerDocument),this._internalRoot=n}r0.prototype.render=function(e){zd(e,this._internalRoot,null,null)};r0.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;zd(null,e,null,function(){t[uc]=null})};function gc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function zM(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new r0(e,0,t?{hydrate:!0}:void 0)}function Ch(e,t,r,n,o){var a=r._reactRootContainer;if(a){var l=a._internalRoot;if(typeof o=="function"){var u=o;o=function(){var h=_g(l);u.call(h)}}zd(t,l,e,o)}else{if(a=r._reactRootContainer=zM(r,n),l=a._internalRoot,typeof o=="function"){var d=o;o=function(){var h=_g(l);d.call(h)}}NT(function(){zd(t,l,e,o)})}return _g(l)}function HM(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}Ck=function(e){if(e.tag===13){var t=ed(fi(),150,100);Oo(e,t),t0(e,t)}};Ty=function(e){e.tag===13&&(Oo(e,3),t0(e,3))};kk=function(e){if(e.tag===13){var t=fi();t=ma(t,e,null),Oo(e,t),t0(e,t)}};kv=function(e,t,r){switch(t){case"input":if(Pv(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=My(n);if(!o)throw Error(ve(90));sk(n),Pv(n,o)}}}break;case"textarea":uk(e,r);break;case"select":t=r.value,t!=null&&Ns(e,!!r.multiple,t,!1)}};py=LT;JC=function(e,t,r,n,o){var a=Ke;Ke|=4;try{return No(98,e.bind(null,t,r,n,o))}finally{Ke=a,Ke===rr&&gi()}};gy=function(){(Ke&(1|Un|hi))===rr&&(PM(),el())};ZC=function(e,t){var r=Ke;Ke|=2;try{return e(t)}finally{Ke=r,Ke===rr&&gi()}};function FT(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gc(t))throw Error(ve(200));return HM(e,t,null,r)}var BM={Events:[fc,Ea,My,XC,Cv,Ds,function(e){Cy(e,LA)},YC,QC,gh,ph,el,{current:!1}]};(function(e){var t=e.findFiberByHostInstance;return _M(jr({},e,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wn.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=wk(r),r===null?null:r.stateNode},findFiberByHostInstance:function(r){return t?t(r):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:cc,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"});Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BM;Cn.createPortal=FT;Cn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternalFiber;if(t===void 0)throw typeof e.render=="function"?Error(ve(188)):Error(ve(268,Object.keys(e)));return e=wk(t),e=e===null?null:e.stateNode,e};Cn.flushSync=function(e,t){if((Ke&(Un|hi))!==rr)throw Error(ve(187));var r=Ke;Ke|=1;try{return No(99,e.bind(null,t))}finally{Ke=r,gi()}};Cn.hydrate=function(e,t,r){if(!gc(t))throw Error(ve(200));return Ch(null,e,t,!0,r)};Cn.render=function(e,t,r){if(!gc(t))throw Error(ve(200));return Ch(null,e,t,!1,r)};Cn.unmountComponentAtNode=function(e){if(!gc(e))throw Error(ve(40));return e._reactRootContainer?(NT(function(){Ch(null,null,e,!1,function(){e._reactRootContainer=null,e[uc]=null})}),!0):!1};Cn.unstable_batchedUpdates=LT;Cn.unstable_createPortal=function(e,t){return FT(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Cn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!gc(r))throw Error(ve(200));if(e==null||e._reactInternalFiber===void 0)throw Error(ve(38));return Ch(e,t,r,!1,n)};Cn.version="16.14.0";function zT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zT)}catch(e){console.error(e)}}zT(),WC.exports=Cn;var tl=WC.exports;const wf=wt(tl);function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Me.apply(this,arguments)}function De(e,t){if(e==null)return{};var r,n,o=function(l,u){if(l==null)return{};var d,h,g={},m=Object.keys(l);for(h=0;h<m.length;h++)d=m[h],u.indexOf(d)>=0||(g[d]=l[d]);return g}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var WM=["size","color","stroke"];function UM(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,WM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-alert-octagon",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M8.7 3h6.6c.3 0 .5 .1 .7 .3l4.7 4.7c.2 .2 .3 .4 .3 .7v6.6c0 .3 -.1 .5 -.3 .7l-4.7 4.7c-.2 .2 -.4 .3 -.7 .3h-6.6c-.3 0 -.5 -.1 -.7 -.3l-4.7 -4.7c-.2 -.2 -.3 -.4 -.3 -.7v-6.6c0 -.3 .1 -.5 .3 -.7l4.7 -4.7c.2 -.2 .4 -.3 .7 -.3z"}),E.createElement("line",{x1:12,y1:8,x2:12,y2:12}),E.createElement("line",{x1:12,y1:16,x2:12.01,y2:16}))}var KM=["size","color","stroke"];function GM(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,KM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-alert-triangle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M12 9v2m0 4v.01"}),E.createElement("path",{d:"M5 19h14a2 2 0 0 0 1.84 -2.75l-7.1 -12.25a2 2 0 0 0 -3.5 0l-7.1 12.25a2 2 0 0 0 1.75 2.75"}))}var qM=["size","color","stroke"];function HT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,qM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-back",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1"}))}var VM=["size","color","stroke"];function XM(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,VM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-bar-to-right",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:14,y1:12,x2:4,y2:12}),E.createElement("line",{x1:14,y1:12,x2:10,y2:16}),E.createElement("line",{x1:14,y1:12,x2:10,y2:8}),E.createElement("line",{x1:20,y1:4,x2:20,y2:20}))}var YM=["size","color","stroke"];function BT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,YM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-forward",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M15 11l4 4l-4 4m4 -4h-11a4 4 0 0 1 0 -8h1"}))}var QM=["size","color","stroke"];function JM(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,QM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-left",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:5,y1:12,x2:19,y2:12}),E.createElement("line",{x1:5,y1:12,x2:11,y2:18}),E.createElement("line",{x1:5,y1:12,x2:11,y2:6}))}var ZM=["size","color","stroke"];function eI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,ZM);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrow-right",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:5,y1:12,x2:19,y2:12}),E.createElement("line",{x1:13,y1:18,x2:19,y2:12}),E.createElement("line",{x1:13,y1:6,x2:19,y2:12}))}var tI=["size","color","stroke"];function rI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,tI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrows-diagonal-minimize",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M6 10h4v-4"}),E.createElement("path",{d:"M4 4l6 6"}),E.createElement("path",{d:"M18 14h-4v4"}),E.createElement("path",{d:"M14 14l6 6"}))}var nI=["size","color","stroke"];function iI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,nI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrows-diagonal",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("polyline",{points:"16 4 20 4 20 8"}),E.createElement("line",{x1:14,y1:10,x2:20,y2:4}),E.createElement("polyline",{points:"8 20 4 20 4 16"}),E.createElement("line",{x1:4,y1:20,x2:10,y2:14}))}var oI=["size","color","stroke"];function aI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,oI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-arrows-sort",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M3 9l4 -4l4 4m-4 -4v14"}),E.createElement("path",{d:"M21 15l-4 4l-4 -4m4 4v-14"}))}var sI=["size","color","stroke"];function lI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,sI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-award",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:12,cy:9,r:6}),E.createElement("path",{d:"M12.002 15.003l3.4 5.89l1.598 -3.233l3.598 .232l-3.4 -5.889"}),E.createElement("path",{d:"M6.802 12.003l-3.4 5.89l3.598 -.233l1.598 3.232l3.4 -5.889"}))}var uI=["size","color","stroke"];function cI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,uI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-braces",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M7 4a2 2 0 0 0 -2 2v3a2 3 0 0 1 -2 3a2 3 0 0 1 2 3v3a2 2 0 0 0 2 2"}),E.createElement("path",{d:"M17 4a2 2 0 0 1 2 2v3a2 3 0 0 0 2 3a2 3 0 0 0 -2 3v3a2 2 0 0 1 -2 2"}))}var fI=["size","color","stroke"];function dI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,fI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-bug",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M9 9v-1a3 3 0 0 1 6 0v1"}),E.createElement("path",{d:"M8 9h8a6 6 0 0 1 1 3v3a5 5 0 0 1 -10 0v-3a6 6 0 0 1 1 -3"}),E.createElement("line",{x1:3,y1:13,x2:7,y2:13}),E.createElement("line",{x1:17,y1:13,x2:21,y2:13}),E.createElement("line",{x1:12,y1:20,x2:12,y2:14}),E.createElement("line",{x1:4,y1:19,x2:7.35,y2:17}),E.createElement("line",{x1:20,y1:19,x2:16.65,y2:17}),E.createElement("line",{x1:4,y1:7,x2:7.75,y2:9.4}),E.createElement("line",{x1:20,y1:7,x2:16.25,y2:9.4}))}var hI=["size","color","stroke"];function n0(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,hI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-check",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M5 12l5 5l10 -10"}))}var pI=["size","color","stroke"];function WT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,pI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-chevron-down",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("polyline",{points:"6 9 12 15 18 9"}))}var gI=["size","color","stroke"];function vI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,gI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-chevron-up",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("polyline",{points:"6 15 12 9 18 15"}))}var mI=["size","color","stroke"];function yI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,mI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-chevrons-right",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("polyline",{points:"7 7 12 12 7 17"}),E.createElement("polyline",{points:"13 7 18 12 13 17"}))}var wI=["size","color","stroke"];function bI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,wI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-circle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:12,cy:12,r:9}))}var xI=["size","color","stroke"];function SI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,xI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-code",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("polyline",{points:"7 8 3 12 7 16"}),E.createElement("polyline",{points:"17 8 21 12 17 16"}),E.createElement("line",{x1:14,y1:4,x2:10,y2:20}))}var EI=["size","color","stroke"];function CI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,EI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-copy",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("rect",{x:8,y:8,width:12,height:12,rx:2}),E.createElement("path",{d:"M16 8v-2a2 2 0 0 0 -2 -2h-8a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h2"}))}var kI=["size","color","stroke"];function Px(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,kI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-device-floppy",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2"}),E.createElement("circle",{cx:12,cy:14,r:2}),E.createElement("polyline",{points:"14 4 14 8 8 8 8 4"}))}var TI=["size","color","stroke"];function UT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,TI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-edit",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1"}),E.createElement("path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z"}),E.createElement("path",{d:"M16 5l3 3"}))}var OI=["size","color","stroke"];function PI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,OI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-eyeglass",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M8 4h-2l-3 10"}),E.createElement("path",{d:"M16 4h2l3 10"}),E.createElement("line",{x1:10,y1:16,x2:14,y2:16}),E.createElement("path",{d:"M21 16.5a3.5 3.5 0 0 1 -7 0v-2.5h7v2.5"}),E.createElement("path",{d:"M10 16.5a3.5 3.5 0 0 1 -7 0v-2.5h7v2.5"}))}var LI=["size","color","stroke"];function NI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,LI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-code",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),E.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),E.createElement("path",{d:"M10 13l-1 2l1 2"}),E.createElement("path",{d:"M14 13l1 2l-1 2"}))}var jI=["size","color","stroke"];function KT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,jI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-import",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),E.createElement("path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3"}))}var AI=["size","color","stroke"];function MI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,AI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-file-text",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),E.createElement("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),E.createElement("line",{x1:9,y1:9,x2:10,y2:9}),E.createElement("line",{x1:9,y1:13,x2:15,y2:13}),E.createElement("line",{x1:9,y1:17,x2:15,y2:17}))}var II=["size","color","stroke"];function RI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,II);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-filter",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M5.5 5h13a1 1 0 0 1 .5 1.5l-5 5.5l0 7l-4 -3l0 -4l-5 -5.5a1 1 0 0 1 .5 -1.5"}))}var _I=["size","color","stroke"];function $I(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,_I);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-focus-2",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:12,cy:12,r:.5,fill:"currentColor"}),E.createElement("circle",{cx:12,cy:12,r:7}),E.createElement("line",{x1:12,y1:3,x2:12,y2:5}),E.createElement("line",{x1:3,y1:12,x2:5,y2:12}),E.createElement("line",{x1:12,y1:19,x2:12,y2:21}),E.createElement("line",{x1:19,y1:12,x2:21,y2:12}))}var DI=["size","color","stroke"];function FI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,DI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-grid-dots",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:5,cy:5,r:1}),E.createElement("circle",{cx:12,cy:5,r:1}),E.createElement("circle",{cx:19,cy:5,r:1}),E.createElement("circle",{cx:5,cy:12,r:1}),E.createElement("circle",{cx:12,cy:12,r:1}),E.createElement("circle",{cx:19,cy:12,r:1}),E.createElement("circle",{cx:5,cy:19,r:1}),E.createElement("circle",{cx:12,cy:19,r:1}),E.createElement("circle",{cx:19,cy:19,r:1}))}var zI=["size","color","stroke"];function HI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,zI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-hash",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:5,y1:9,x2:19,y2:9}),E.createElement("line",{x1:5,y1:15,x2:19,y2:15}),E.createElement("line",{x1:11,y1:4,x2:7,y2:20}),E.createElement("line",{x1:17,y1:4,x2:13,y2:20}))}var BI=["size","color","stroke"];function GT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,BI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-heart",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428m0 0a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"}))}var WI=["size","color","stroke"];function qT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,WI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-help",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:12,cy:12,r:9}),E.createElement("line",{x1:12,y1:17,x2:12,y2:17.01}),E.createElement("path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4"}))}var UI=["size","color","stroke"];function KI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,UI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-indent-decrease",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:20,y1:6,x2:13,y2:6}),E.createElement("line",{x1:20,y1:12,x2:11,y2:12}),E.createElement("line",{x1:20,y1:18,x2:13,y2:18}),E.createElement("path",{d:"M8 8l-4 4l4 4"}))}var GI=["size","color","stroke"];function qI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,GI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-indent-increase",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:20,y1:6,x2:9,y2:6}),E.createElement("line",{x1:20,y1:12,x2:13,y2:12}),E.createElement("line",{x1:20,y1:18,x2:9,y2:18}),E.createElement("path",{d:"M4 8l4 4l-4 4"}))}var VI=["size","color","stroke"];function dm(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,VI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-info-circle",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:12,cy:12,r:9}),E.createElement("line",{x1:12,y1:8,x2:12.01,y2:8}),E.createElement("polyline",{points:"11 12 12 12 12 16 13 16"}))}var XI=["size","color","stroke"];function YI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,XI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-layout-grid",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("rect",{x:4,y:4,width:6,height:6,rx:1}),E.createElement("rect",{x:14,y:4,width:6,height:6,rx:1}),E.createElement("rect",{x:4,y:14,width:6,height:6,rx:1}),E.createElement("rect",{x:14,y:14,width:6,height:6,rx:1}))}var QI=["size","color","stroke"];function JI(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,QI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-marquee",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M4 6a2 2 0 0 1 2 -2m3 0h1.5m3 0h1.5m3 0a2 2 0 0 1 2 2m0 3v1.5m0 3v1.5m0 3a2 2 0 0 1 -2 2m-3 0h-1.5m-3 0h-1.5m-3 0a2 2 0 0 1 -2 -2m0 -3v-1.5m0 -3v-1.5m0 -3"}))}var ZI=["size","color","stroke"];function eR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,ZI);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-mood-smile",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:12,cy:12,r:9}),E.createElement("line",{x1:9,y1:10,x2:9.01,y2:10}),E.createElement("line",{x1:15,y1:10,x2:15.01,y2:10}),E.createElement("path",{d:"M9.5 15a3.5 3.5 0 0 0 5 0"}))}var tR=["size","color","stroke"];function rR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,tR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-package",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("polyline",{points:"12 3 20 7.5 20 16.5 12 21 4 16.5 4 7.5 12 3"}),E.createElement("line",{x1:12,y1:12,x2:20,y2:7.5}),E.createElement("line",{x1:12,y1:12,x2:12,y2:21}),E.createElement("line",{x1:12,y1:12,x2:4,y2:7.5}),E.createElement("line",{x1:16,y1:5.25,x2:8,y2:9.75}))}var nR=["size","color","stroke"];function iR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,nR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-player-play",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M7 4v16l13 -8z"}))}var oR=["size","color","stroke"];function Bs(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,oR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-plus",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:12,y1:5,x2:12,y2:19}),E.createElement("line",{x1:5,y1:12,x2:19,y2:12}))}var aR=["size","color","stroke"];function sR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,aR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-replace",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("rect",{x:3,y:3,width:6,height:6,rx:1}),E.createElement("rect",{x:15,y:15,width:6,height:6,rx:1}),E.createElement("path",{d:"M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3"}),E.createElement("path",{d:"M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3"}))}var lR=["size","color","stroke"];function uR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,lR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-resize",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M4 11v8a1 1 0 0 0 1 1h8m-9 -14v-1a1 1 0 0 1 1 -1h1m5 0h2m5 0h1a1 1 0 0 1 1 1v1m0 5v2m0 5v1a1 1 0 0 1 -1 1h-1"}),E.createElement("path",{d:"M4 12h7a1 1 0 0 1 1 1v7"}))}var cR=["size","color","stroke"];function fR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,cR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-rocket",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"}),E.createElement("path",{d:"M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"}),E.createElement("circle",{cx:15,cy:9,r:1}))}var dR=["size","color","stroke"];function hR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,dR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-search",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:10,cy:10,r:7}),E.createElement("line",{x1:21,y1:21,x2:15,y2:15}))}var pR=["size","color","stroke"];function gR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,pR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-settings",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),E.createElement("circle",{cx:12,cy:12,r:3}))}var vR=["size","color","stroke"];function Lx(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,vR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-space",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M4 10v3a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-3"}))}var mR=["size","color","stroke"];function yR(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,mR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square-check",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("rect",{x:4,y:4,width:16,height:16,rx:2}),E.createElement("path",{d:"M9 12l2 2l4 -4"}))}var wR=["size","color","stroke"];function VT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,wR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-square",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("rect",{x:4,y:4,width:16,height:16,rx:2}))}var bR=["size","color","stroke"];function Nx(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,bR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-star",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"}))}var xR=["size","color","stroke"];function XT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,xR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-tag",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("circle",{cx:8.5,cy:8.5,r:1,fill:"currentColor"}),E.createElement("path",{d:"M4 7v3.859c0 .537 .213 1.052 .593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834 -4.834a2.025 2.025 0 0 0 0 -2.864l-8.117 -8.116a2.025 2.025 0 0 0 -1.431 -.593h-3.859a3 3 0 0 0 -3 3z"}))}var SR=["size","color","stroke"];function YT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,SR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-tags",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M7.859 6h-2.834a2.025 2.025 0 0 0 -2.025 2.025v2.834c0 .537 .213 1.052 .593 1.432l6.116 6.116a2.025 2.025 0 0 0 2.864 0l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-6.117 -6.116a2.025 2.025 0 0 0 -1.431 -.593z"}),E.createElement("path",{d:"M17.573 18.407l2.834 -2.834a2.025 2.025 0 0 0 0 -2.864l-7.117 -7.116"}),E.createElement("path",{d:"M6 9h-.01"}))}var ER=["size","color","stroke"];function QT(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,ER);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-tool",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M7 10h3v-3l-3.5 -3.5a6 6 0 0 1 8 8l6 6a2 2 0 0 1 -3 3l-6 -6a6 6 0 0 1 -8 -8l3.5 3.5"}))}var CR=["size","color","stroke"];function Hd(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,CR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-trash",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:4,y1:7,x2:20,y2:7}),E.createElement("line",{x1:10,y1:11,x2:10,y2:17}),E.createElement("line",{x1:14,y1:11,x2:14,y2:17}),E.createElement("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),E.createElement("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"}))}var kR=["size","color","stroke"];function vc(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,kR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-writing",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("path",{d:"M20 17v-12c0 -1.121 -.879 -2 -2 -2s-2 .879 -2 2v12l2 2l2 -2z"}),E.createElement("path",{d:"M16 7h4"}),E.createElement("path",{d:"M18 19h-13a2 2 0 1 1 0 -4h4a2 2 0 1 0 0 -4h-3"}))}var TR=["size","color","stroke"];function zn(e){var t=e.size,r=t===void 0?24:t,n=e.color,o=n===void 0?"currentColor":n,a=e.stroke,l=a===void 0?2:a,u=De(e,TR);return E.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-x",width:r,height:r,viewBox:"0 0 24 24",strokeWidth:l,stroke:o,fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},u),E.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),E.createElement("line",{x1:18,y1:6,x2:6,y2:18}),E.createElement("line",{x1:6,y1:6,x2:18,y2:18}))}const _o=({children:e})=>y.jsxs("div",{className:"error-message",children:[y.jsx(UM,{}),y.jsx("div",{className:"message",children:e})]});var OR=function(e){var t,r;function n(a){var l;return(l=e.call(this,a)||this).state={hasError:!1,error:null},l}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.getDerivedStateFromError=function(a){return{hasError:!0,error:a}};var o=n.prototype;return o.componentDidCatch=function(a,l){return this.props.onDidCatch(a,l)},o.render=function(){var a=this.state,l=this.props,u=l.render,d=l.children,h=l.renderError;return a.hasError?h?h({error:a.error}):null:u?u():d||null},n}(E.PureComponent),PR=function(e,t){switch(t.type){case"catch":return{didCatch:!0,error:t.error};case"reset":return{didCatch:!1,error:null};default:return e}};function kh(e){var t=E.useReducer(PR,{didCatch:!1,error:null}),r=t[0],n=t[1],o=E.useRef(null);function a(){return d=function(h,g){n({type:"catch",error:h})},function(h){return _e.createElement(OR,{onDidCatch:d,children:h.children,render:h.render,renderError:h.renderError})};var d}var l,u=E.useCallback(function(){o.current=a(),n({type:"reset"})},[]);return{ErrorBoundary:(l=o.current,l!==null?l:(o.current=a(),o.current)),didCatch:r.didCatch,error:r.error,reset:u}}const LR=({children:e})=>{const{ErrorBoundary:t,didCatch:r,error:n}=kh();return r?y.jsx("div",{className:"global-error-boundary",children:y.jsxs("div",{children:[y.jsxs(_o,{children:[y.jsx("p",{children:"Something went wrong and Twine cant continue."}),y.jsx("p",{children:"Please try restarting Twine or reloading the page."}),y.jsxs("p",{children:["If you see this message repeatedly, please"," ",y.jsx("a",{href:"https://twinery.org/2bugs",rel:"noreferrer",target:"_blank",children:"report a bug"}),"."]})]}),y.jsx("p",{children:"Details:"}),y.jsx("pre",{children:n.stack})]})}):y.jsx(t,{children:e})};function ja(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Bn(e){"@babel/helpers - typeof";return Bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bn(e)}function NR(e,t){if(Bn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function JT(e){var t=NR(e,"string");return Bn(t)=="symbol"?t:t+""}function i0(e,t,r){return(t=JT(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jx(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,JT(n.key),n)}}function mi(e,t,r){return t&&jx(e.prototype,t),r&&jx(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var jR=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,AR={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},MR=function(t){return AR[t]},IR=function(t){return t.replace(jR,MR)};function Ax(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Mx(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ax(Object(r),!0).forEach(function(n){i0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ax(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var hm={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:IR},ZT,RR=E.createContext();function _R(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};hm=Mx(Mx({},hm),e)}function $R(){return hm}var DR=function(){function e(){vi(this,e),this.usedNamespaces={}}return mi(e,[{key:"addUsedNamespaces",value:function(r){var n=this;r.forEach(function(o){n.usedNamespaces[o]||(n.usedNamespaces[o]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),e}();function FR(e){ZT=e}function zR(){return ZT}var HR={type:"3rdParty",init:function(t){_R(t.options.react),FR(t)}};function BR(){if(console&&console.warn){for(var e,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];typeof r[0]=="string"&&(r[0]="react-i18next:: ".concat(r[0])),(e=console).warn.apply(e,r)}}var Ix={};function pm(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&Ix[t[0]]||(typeof t[0]=="string"&&(Ix[t[0]]=new Date),BR.apply(void 0,t))}function Rx(e,t,r){e.loadNamespaces(t,function(){if(e.isInitialized)r();else{var n=function o(){setTimeout(function(){e.off("initialized",o)},0),r()};e.on("initialized",n)}})}function WR(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=t.languages[0],o=t.options?t.options.fallbackLng:!1,a=t.languages[t.languages.length-1];if(n.toLowerCase()==="cimode")return!0;var l=function(d,h){var g=t.services.backendConnector.state["".concat(d,"|").concat(h)];return g===-1||g===2};return r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!l(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(n,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||l(n,e)&&(!o||l(a,e)))}function UR(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t.languages||!t.languages.length)return pm("i18n.languages were undefined or empty",t.languages),!0;var n=t.options.ignoreJSONStructure!==void 0;return n?t.hasLoadedNamespace(e,{precheck:function(a,l){if(r.bindI18n&&r.bindI18n.indexOf("languageChanging")>-1&&a.services.backendConnector.backend&&a.isLanguageChangingTo&&!l(a.isLanguageChangingTo,e))return!1}}):WR(e,t,r)}function KR(e){if(Array.isArray(e))return e}function GR(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,a,l,u=[],d=!0,h=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(d=(n=a.call(r)).done)&&(u.push(n.value),u.length!==t);d=!0);}catch(g){h=!0,o=g}finally{try{if(!d&&r.return!=null&&(l=r.return(),Object(l)!==l))return}finally{if(h)throw o}}return u}}function _x(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function qR(e,t){if(e){if(typeof e=="string")return _x(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_x(e,t):void 0}}function VR(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function XR(e,t){return KR(e)||GR(e,t)||qR(e,t)||VR()}function $x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function $g(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$x(Object(r),!0).forEach(function(n){i0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$x(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}var YR=function(t,r){var n=E.useRef();return E.useEffect(function(){n.current=t},[t,r]),n.current};function Ce(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.i18n,n=E.useContext(RR)||{},o=n.i18n,a=n.defaultNS,l=r||o||zR();if(l&&!l.reportNamespaces&&(l.reportNamespaces=new DR),!l){pm("You will need to pass in an i18next instance by using initReactI18next");var u=function(U){return Array.isArray(U)?U[U.length-1]:U},d=[u,{},!1];return d.t=u,d.i18n={},d.ready=!1,d}l.options.react&&l.options.react.wait!==void 0&&pm("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var h=$g($g($g({},$R()),l.options.react),t),g=h.useSuspense,m=h.keyPrefix,w=e||a||l.options&&l.options.defaultNS;w=typeof w=="string"?[w]:w||["translation"],l.reportNamespaces.addUsedNamespaces&&l.reportNamespaces.addUsedNamespaces(w);var x=(l.isInitialized||l.initializedStoreOnce)&&w.every(function(B){return UR(B,l,h)});function C(){return l.getFixedT(null,h.nsMode==="fallback"?w:w[0],m)}var j=E.useState(C),T=XR(j,2),k=T[0],P=T[1],A=w.join(),L=YR(A),R=E.useRef(!0);E.useEffect(function(){var B=h.bindI18n,U=h.bindI18nStore;R.current=!0,!x&&!g&&Rx(l,w,function(){R.current&&P(C)}),x&&L&&L!==A&&R.current&&P(C);function Y(){R.current&&P(C)}return B&&l&&l.on(B,Y),U&&l&&l.store.on(U,Y),function(){R.current=!1,B&&l&&B.split(" ").forEach(function(V){return l.off(V,Y)}),U&&l&&U.split(" ").forEach(function(V){return l.store.off(V,Y)})}},[l,A]);var D=E.useRef(!0);E.useEffect(function(){R.current&&!D.current&&P(C),D.current=!1},[l,m]);var $=[k,l,x];if($.t=k,$.i18n=l,$.ready=x,x||!x&&!g)return $;throw new Promise(function(B){Rx(l,w,function(){B()})})}var gm={exports:{}};(function(e,t){(function(r,n){var o="0.7.38",a="",l="?",u="function",d="undefined",h="object",g="string",m="major",w="model",x="name",C="type",j="vendor",T="version",k="architecture",P="console",A="mobile",L="tablet",R="smarttv",D="wearable",$="embedded",B=500,U="Amazon",Y="Apple",V="ASUS",de="BlackBerry",W="Browser",_="Chrome",M="Edge",Q="Firefox",oe="Google",re="Huawei",X="LG",ie="Microsoft",ue="Motorola",he="Opera",Se="Samsung",Z="Sharp",ae="Sony",le="Xiaomi",ce="Zebra",me="Facebook",Le="Chromium OS",Ne="Mac OS",Ee=function(ke,He){var Fe={};for(var rt in ke)He[rt]&&He[rt].length%2===0?Fe[rt]=He[rt].concat(ke[rt]):Fe[rt]=ke[rt];return Fe},et=function(ke){for(var He={},Fe=0;Fe<ke.length;Fe++)He[ke[Fe].toUpperCase()]=ke[Fe];return He},Lt=function(ke,He){return typeof ke===g?ft(He).indexOf(ft(ke))!==-1:!1},ft=function(ke){return ke.toLowerCase()},Dt=function(ke){return typeof ke===g?ke.replace(/[^\d\.]/g,a).split(".")[0]:n},Ge=function(ke,He){if(typeof ke===g)return ke=ke.replace(/^\s\s*/,a),typeof He===d?ke:ke.substring(0,B)},qe=function(ke,He){for(var Fe=0,rt,Ut,nt,Qe,$e,Kt;Fe<He.length&&!$e;){var On=He[Fe],Pn=He[Fe+1];for(rt=Ut=0;rt<On.length&&!$e&&On[rt];)if($e=On[rt++].exec(ke),$e)for(nt=0;nt<Pn.length;nt++)Kt=$e[++Ut],Qe=Pn[nt],typeof Qe===h&&Qe.length>0?Qe.length===2?typeof Qe[1]==u?this[Qe[0]]=Qe[1].call(this,Kt):this[Qe[0]]=Qe[1]:Qe.length===3?typeof Qe[1]===u&&!(Qe[1].exec&&Qe[1].test)?this[Qe[0]]=Kt?Qe[1].call(this,Kt,Qe[2]):n:this[Qe[0]]=Kt?Kt.replace(Qe[1],Qe[2]):n:Qe.length===4&&(this[Qe[0]]=Kt?Qe[3].call(this,Kt.replace(Qe[1],Qe[2])):n):this[Qe]=Kt||n;Fe+=2}},tt=function(ke,He){for(var Fe in He)if(typeof He[Fe]===h&&He[Fe].length>0){for(var rt=0;rt<He[Fe].length;rt++)if(Lt(He[Fe][rt],ke))return Fe===l?n:Fe}else if(Lt(He[Fe],ke))return Fe===l?n:Fe;return ke},Ft={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},ze={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ze={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[T,[x,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[T,[x,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[x,T],[/opios[\/ ]+([\w\.]+)/i],[T,[x,he+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[T,[x,he+" GX"]],[/\bopr\/([\w\.]+)/i],[T,[x,he]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[T,[x,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[x,T],[/\bddg\/([\w\.]+)/i],[T,[x,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[T,[x,"UC"+W]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[T,[x,"WeChat"]],[/konqueror\/([\w\.]+)/i],[T,[x,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[T,[x,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[T,[x,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[T,[x,"Smart Lenovo "+W]],[/(avast|avg)\/([\w\.]+)/i],[[x,/(.+)/,"$1 Secure "+W],T],[/\bfocus\/([\w\.]+)/i],[T,[x,Q+" Focus"]],[/\bopt\/([\w\.]+)/i],[T,[x,he+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[T,[x,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[T,[x,"Dolphin"]],[/coast\/([\w\.]+)/i],[T,[x,he+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[T,[x,"MIUI "+W]],[/fxios\/([-\w\.]+)/i],[T,[x,Q]],[/\bqihu|(qi?ho?o?|360)browser/i],[[x,"360 "+W]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[x,/(.+)/,"$1 "+W],T],[/samsungbrowser\/([\w\.]+)/i],[T,[x,Se+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[x,/_/g," "],T],[/metasr[\/ ]?([\d\.]+)/i],[T,[x,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[x,"Sogou Mobile"],T],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[x,T],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[x],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[x,me],T],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[x,T],[/\bgsa\/([\w\.]+) .*safari\//i],[T,[x,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[T,[x,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[T,[x,_+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[x,_+" WebView"],T],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[T,[x,"Android "+W]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[x,T],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[T,[x,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[T,x],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[x,[T,tt,Ft]],[/(webkit|khtml)\/([\w\.]+)/i],[x,T],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[x,"Netscape"],T],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[T,[x,Q+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[x,T],[/(cobalt)\/([\w\.]+)/i],[x,[T,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[k,"amd64"]],[/(ia32(?=;))/i],[[k,ft]],[/((?:i[346]|x)86)[;\)]/i],[[k,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[k,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[k,"armhf"]],[/windows (ce|mobile); ppc;/i],[[k,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[k,/ower/,a,ft]],[/(sun4\w)[;\)]/i],[[k,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[k,ft]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[j,Se],[C,L]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[w,[j,Se],[C,A]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[w,[j,Y],[C,A]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[j,Y],[C,L]],[/(macintosh);/i],[w,[j,Y]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[j,Z],[C,A]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[j,re],[C,L]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[w,[j,re],[C,A]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[w,/_/g," "],[j,le],[C,A]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[j,le],[C,L]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[j,"OPPO"],[C,A]],[/\b(opd2\d{3}a?) bui/i],[w,[j,"OPPO"],[C,L]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[j,"Vivo"],[C,A]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[w,[j,"Realme"],[C,A]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[j,ue],[C,A]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[j,ue],[C,L]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[j,X],[C,L]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[j,X],[C,A]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[j,"Lenovo"],[C,L]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[j,"Nokia"],[C,A]],[/(pixel c)\b/i],[w,[j,oe],[C,L]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[j,oe],[C,A]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[j,ae],[C,A]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[j,ae],[C,L]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[j,"OnePlus"],[C,A]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[j,U],[C,L]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[j,U],[C,A]],[/(playbook);[-\w\),; ]+(rim)/i],[w,j,[C,L]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[j,de],[C,A]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[j,V],[C,L]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[j,V],[C,A]],[/(nexus 9)/i],[w,[j,"HTC"],[C,L]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[j,[w,/_/g," "],[C,A]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[j,"Acer"],[C,L]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[j,"Meizu"],[C,A]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[w,[j,"Ulefone"],[C,A]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[j,w,[C,A]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[j,w,[C,L]],[/(surface duo)/i],[w,[j,ie],[C,L]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[j,"Fairphone"],[C,A]],[/(u304aa)/i],[w,[j,"AT&T"],[C,A]],[/\bsie-(\w*)/i],[w,[j,"Siemens"],[C,A]],[/\b(rct\w+) b/i],[w,[j,"RCA"],[C,L]],[/\b(venue[\d ]{2,7}) b/i],[w,[j,"Dell"],[C,L]],[/\b(q(?:mv|ta)\w+) b/i],[w,[j,"Verizon"],[C,L]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[w,[j,"Barnes & Noble"],[C,L]],[/\b(tm\d{3}\w+) b/i],[w,[j,"NuVision"],[C,L]],[/\b(k88) b/i],[w,[j,"ZTE"],[C,L]],[/\b(nx\d{3}j) b/i],[w,[j,"ZTE"],[C,A]],[/\b(gen\d{3}) b.+49h/i],[w,[j,"Swiss"],[C,A]],[/\b(zur\d{3}) b/i],[w,[j,"Swiss"],[C,L]],[/\b((zeki)?tb.*\b) b/i],[w,[j,"Zeki"],[C,L]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[j,"Dragon Touch"],w,[C,L]],[/\b(ns-?\w{0,9}) b/i],[w,[j,"Insignia"],[C,L]],[/\b((nxa|next)-?\w{0,9}) b/i],[w,[j,"NextBook"],[C,L]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[j,"Voice"],w,[C,A]],[/\b(lvtel\-)?(v1[12]) b/i],[[j,"LvTel"],w,[C,A]],[/\b(ph-1) /i],[w,[j,"Essential"],[C,A]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[w,[j,"Envizen"],[C,L]],[/\b(trio[-\w\. ]+) b/i],[w,[j,"MachSpeed"],[C,L]],[/\btu_(1491) b/i],[w,[j,"Rotor"],[C,L]],[/(shield[\w ]+) b/i],[w,[j,"Nvidia"],[C,L]],[/(sprint) (\w+)/i],[j,w,[C,A]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[j,ie],[C,A]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[j,ce],[C,L]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[j,ce],[C,A]],[/smart-tv.+(samsung)/i],[j,[C,R]],[/hbbtv.+maple;(\d+)/i],[[w,/^/,"SmartTV"],[j,Se],[C,R]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[j,X],[C,R]],[/(apple) ?tv/i],[j,[w,Y+" TV"],[C,R]],[/crkey/i],[[w,_+"cast"],[j,oe],[C,R]],[/droid.+aft(\w+)( bui|\))/i],[w,[j,U],[C,R]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[w,[j,Z],[C,R]],[/(bravia[\w ]+)( bui|\))/i],[w,[j,ae],[C,R]],[/(mitv-\w{5}) bui/i],[w,[j,le],[C,R]],[/Hbbtv.*(technisat) (.*);/i],[j,w,[C,R]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[j,Ge],[w,Ge],[C,R]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[C,R]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[j,w,[C,P]],[/droid.+; (shield) bui/i],[w,[j,"Nvidia"],[C,P]],[/(playstation [345portablevi]+)/i],[w,[j,ae],[C,P]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[w,[j,ie],[C,P]],[/((pebble))app/i],[j,w,[C,D]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[w,[j,Y],[C,D]],[/droid.+; (glass) \d/i],[w,[j,oe],[C,D]],[/droid.+; (wt63?0{2,3})\)/i],[w,[j,ce],[C,D]],[/(quest( \d| pro)?)/i],[w,[j,me],[C,D]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[j,[C,$]],[/(aeobc)\b/i],[w,[j,U],[C,$]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[w,[C,A]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[C,L]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[C,L]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[C,A]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[j,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[T,[x,M+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[T,[x,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[x,T],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[T,x]],os:[[/microsoft (windows) (vista|xp)/i],[x,T],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[x,[T,tt,ze]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[T,tt,ze],[x,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[T,/_/g,"."],[x,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[x,Ne],[T,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[T,x],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[x,T],[/\(bb(10);/i],[T,[x,de]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[T,[x,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[T,[x,Q+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[T,[x,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[T,[x,"watchOS"]],[/crkey\/([\d\.]+)/i],[T,[x,_+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[x,Le],T],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[x,T],[/(sunos) ?([\w\.\d]*)/i],[[x,"Solaris"],T],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[x,T]]},q=function(ke,He){if(typeof ke===h&&(He=ke,ke=n),!(this instanceof q))return new q(ke,He).getResult();var Fe=typeof r!==d&&r.navigator?r.navigator:n,rt=ke||(Fe&&Fe.userAgent?Fe.userAgent:a),Ut=Fe&&Fe.userAgentData?Fe.userAgentData:n,nt=He?Ee(Ze,He):Ze,Qe=Fe&&Fe.userAgent==rt;return this.getBrowser=function(){var $e={};return $e[x]=n,$e[T]=n,qe.call($e,rt,nt.browser),$e[m]=Dt($e[T]),Qe&&Fe&&Fe.brave&&typeof Fe.brave.isBrave==u&&($e[x]="Brave"),$e},this.getCPU=function(){var $e={};return $e[k]=n,qe.call($e,rt,nt.cpu),$e},this.getDevice=function(){var $e={};return $e[j]=n,$e[w]=n,$e[C]=n,qe.call($e,rt,nt.device),Qe&&!$e[C]&&Ut&&Ut.mobile&&($e[C]=A),Qe&&$e[w]=="Macintosh"&&Fe&&typeof Fe.standalone!==d&&Fe.maxTouchPoints&&Fe.maxTouchPoints>2&&($e[w]="iPad",$e[C]=L),$e},this.getEngine=function(){var $e={};return $e[x]=n,$e[T]=n,qe.call($e,rt,nt.engine),$e},this.getOS=function(){var $e={};return $e[x]=n,$e[T]=n,qe.call($e,rt,nt.os),Qe&&!$e[x]&&Ut&&Ut.platform&&Ut.platform!="Unknown"&&($e[x]=Ut.platform.replace(/chrome os/i,Le).replace(/macos/i,Ne)),$e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return rt},this.setUA=function($e){return rt=typeof $e===g&&$e.length>B?Ge($e,B):$e,this},this.setUA(rt),this};q.VERSION=o,q.BROWSER=et([x,T,m]),q.CPU=et([k]),q.DEVICE=et([w,j,C,P,A,R,L,D,$]),q.ENGINE=q.OS=et([x,T]),e.exports&&(t=e.exports=q),t.UAParser=q;var fe=typeof r!==d&&(r.jQuery||r.Zepto);if(fe&&!fe.ua){var ee=new q;fe.ua=ee.getResult(),fe.ua.get=function(){return ee.getUA()},fe.ua.set=function(ke){ee.setUA(ke);var He=ee.getResult();for(var Fe in He)fe.ua[Fe]=He[Fe]}}})(typeof window=="object"?window:tr)})(gm,gm.exports);var QR=gm.exports;const JR=wt(QR);var e2={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a="",l=0;l<arguments.length;l++){var u=arguments[l];u&&(a=o(a,n(u)))}return a}function n(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var l="";for(var u in a)t.call(a,u)&&a[u]&&(l=o(l,u));return l}function o(a,l){return l?a?a+" "+l:a+l:a}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(e2);var ZR=e2.exports;const Wt=wt(ZR),At=e=>{var t;return y.jsx("div",{className:Wt("button-bar","orientation-".concat((t=e.orientation)!=null?t:"horizontal")),children:e.children})},e_=()=>y.jsx("div",{className:"button-bar-separator"}),$o=e=>{const{children:t,floating:r,highlighted:n}=e,o=Wt("card",{floating:r,highlighted:n});return y.jsx("div",{className:o,children:t})},fr=({children:e})=>y.jsx("div",{className:"card-content",children:e}),Bu=e=>{const{href:t,icon:r,label:n,target:o,variant:a}=e,l=Wt("icon-link","variant-".concat(a));return y.jsxs("a",{href:t,className:l,target:o!=null?o:"_blank",children:[y.jsx("span",{className:"icon",children:r}),n]})},t_=()=>{const{t:e}=Ce(),t=new JR().getBrowser();if(t.name!=="Safari")return null;if(t.version){const o=parseInt(t.version.replace(/\..*/,""));if(Number.isFinite(o)&&o<13)return null}const r=window.navigator;if(r.standalone)return null;const n=r.standalone!==void 0;return y.jsx("div",{className:"safari-warning-card",children:y.jsxs($o,{children:[y.jsxs(_o,{children:[y.jsx("p",{children:e("components.safariWarningCard.message")}),n&&y.jsx("p",{children:e("components.safariWarningCard.addToHomeScreen")}),y.jsx("p",{children:e("components.safariWarningCard.archiveAndUseAnotherBrowser")})]}),y.jsxs(At,{children:[y.jsx(Bu,{href:"https://twinery.org/2ioslocalstorage",icon:y.jsx(dm,{}),label:e("components.safariWarningCard.learnMore"),variant:"primary"}),n&&y.jsx(Bu,{href:"https://twinery.org/2ioshomescreen",icon:y.jsx(dm,{}),label:e("components.safariWarningCard.howToAddToHomeScreen")})]})]})})},Dx=()=>y.jsx("svg",{viewBox:"0 0 24 24",width:"24",height:"24",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"}),t2=()=>y.jsx("span",{className:"icon-loading",children:y.jsx(bI,{})}),r_=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[y.jsx("path",{d:"M14 3v4a1 1 0 0 0 1 1h4"}),y.jsx("path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z"}),y.jsx("circle",{cx:"10",cy:"12",r:"0.5"}),y.jsx("circle",{cx:"14",cy:"12",r:"0.5"}),y.jsx("circle",{cx:"10",cy:"16",r:"0.5"}),y.jsx("circle",{cx:"14",cy:"16",r:"0.5"})]}),n_=()=>y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 1200 1200",width:"1200",height:"1200",children:[y.jsxs("defs",{children:[y.jsxs("linearGradient",{id:"b",children:[y.jsx("stop",{offset:"0",stopColor:"#127aee"}),y.jsx("stop",{offset:"1",stopColor:"#117aef",stopOpacity:".251"})]}),y.jsxs("linearGradient",{id:"a",children:[y.jsx("stop",{offset:"0",stopColor:"#10f05e",stopOpacity:".251"}),y.jsx("stop",{offset:"1",stopColor:"#10f05e"})]}),y.jsx("linearGradient",{xlinkHref:"#a",id:"d",x1:"52",y1:"604.362",x2:"972",y2:"604.362",gradientUnits:"userSpaceOnUse"}),y.jsx("linearGradient",{xlinkHref:"#b",id:"c",x1:"256",y1:"0",x2:"231.987",y2:"725.548",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(0 28.362)"})]}),y.jsx("path",{fill:"url(#c)",d:"M64 28.362h384v1024H64z",transform:"translate(88 59.638)"}),y.jsx("path",{d:"M64 860.362c0-704 896-704 896-704v384s-512 0-512 320v192H64z",fill:"url(#d)",transform:"translate(88 59.638)"})]}),r2=()=>y.jsx("div",{className:"loading-curtain",children:y.jsx(t2,{})});function Ht(e,t){return{type:"update",name:e,value:t}}const Ws=()=>({appTheme:"system",codeEditorFontFamily:"var(--font-monospaced)",codeEditorFontScale:1,dialogWidth:600,disabledStoryFormatEditorExtensions:[],donateShown:!1,editorCursorBlinks:!0,firstRunTime:new Date().getTime(),lastUpdateSeen:"",lastUpdateCheckTime:new Date().getTime(),locale:window.navigator.userLanguage||window.navigator.language||window.navigator.browserLanguage||window.navigator.systemLanguage||"en-us",passageEditorFontFamily:"var(--font-system)",passageEditorFontScale:1,proofingFormat:{name:"Paperthin",version:"1.0.0"},storyFormat:{name:"Harlowe",version:"3.3.9"},storyFormatListFilter:"current",storyListSort:"name",storyListTagFilter:[],storyTagColors:{},useCodeMirror:!0,welcomeSeen:!1});function o0(e,t,r){return e.disabledStoryFormatEditorExtensions.some(n=>n.name===t&&n.version===r)}async function i_(){const{twineElectron:e}=window,t={},r=Object.keys(Ws());if(!e)throw new Error("Electron bridge is not present on window.");const n=await e.loadPrefs();if(n&&typeof n=="object")for(const o in n)r.includes(o)&&(t[o]=n[o]);return t}function n2(e,t){const{twineElectron:r}=window;if(!r)throw new Error("Electron bridge is not present on window.");r.saveJson(e,t)}function o_(e,t){(t.type==="repair"||t.type==="update")&&n2("prefs.json",e)}var ca=256,od=[],bf;for(;ca--;)od[ca]=(ca+256).toString(16).substring(1);function yt(){var e=0,t,r="";if(!bf||ca+16>256){for(bf=Array(e=256);e--;)bf[e]=256*Math.random()|0;e=ca=0}for(;e<16;e++)t=bf[ca+e],e==6?r+=od[t&15|64]:e==8?r+=od[t&63|128]:r+=od[t],e&1&&e>1&&e<11&&(r+="-");return ca++,r}function a_(e){return e}var Th=a_;function s_(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var l_=s_,u_=l_,Fx=Math.max;function c_(e,t,r){return t=Fx(t===void 0?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Fx(n.length-t,0),l=Array(a);++o<a;)l[o]=n[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=n[o];return u[t]=r(l),u_(e,this,u)}}var f_=c_;function d_(e){return function(){return e}}var h_=d_,p_=typeof tr=="object"&&tr&&tr.Object===Object&&tr,i2=p_,g_=i2,v_=typeof self=="object"&&self&&self.Object===Object&&self,m_=g_||v_||Function("return this")(),yi=m_,y_=yi,w_=y_.Symbol,mc=w_,zx=mc,o2=Object.prototype,b_=o2.hasOwnProperty,x_=o2.toString,Zl=zx?zx.toStringTag:void 0;function S_(e){var t=b_.call(e,Zl),r=e[Zl];try{e[Zl]=void 0;var n=!0}catch{}var o=x_.call(e);return n&&(t?e[Zl]=r:delete e[Zl]),o}var E_=S_,C_=Object.prototype,k_=C_.toString;function T_(e){return k_.call(e)}var O_=T_,Hx=mc,P_=E_,L_=O_,N_="[object Null]",j_="[object Undefined]",Bx=Hx?Hx.toStringTag:void 0;function A_(e){return e==null?e===void 0?j_:N_:Bx&&Bx in Object(e)?P_(e):L_(e)}var yc=A_;function M_(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Aa=M_,I_=yc,R_=Aa,__="[object AsyncFunction]",$_="[object Function]",D_="[object GeneratorFunction]",F_="[object Proxy]";function z_(e){if(!R_(e))return!1;var t=I_(e);return t==$_||t==D_||t==__||t==F_}var a2=z_,H_=yi,B_=H_["__core-js_shared__"],W_=B_,Dg=W_,Wx=function(){var e=/[^.]+$/.exec(Dg&&Dg.keys&&Dg.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function U_(e){return!!Wx&&Wx in e}var K_=U_,G_=Function.prototype,q_=G_.toString;function V_(e){if(e!=null){try{return q_.call(e)}catch{}try{return e+""}catch{}}return""}var s2=V_,X_=a2,Y_=K_,Q_=Aa,J_=s2,Z_=/[\\^$.*+?()[\]{}|]/g,e$=/^\[object .+?Constructor\]$/,t$=Function.prototype,r$=Object.prototype,n$=t$.toString,i$=r$.hasOwnProperty,o$=RegExp("^"+n$.call(i$).replace(Z_,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function a$(e){if(!Q_(e)||Y_(e))return!1;var t=X_(e)?o$:e$;return t.test(J_(e))}var s$=a$;function l$(e,t){return e==null?void 0:e[t]}var u$=l$,c$=s$,f$=u$;function d$(e,t){var r=f$(e,t);return c$(r)?r:void 0}var Ma=d$,h$=Ma,p$=function(){try{var e=h$(Object,"defineProperty");return e({},"",{}),e}catch{}}(),g$=p$,v$=h_,Ux=g$,m$=Th,y$=Ux?function(e,t){return Ux(e,"toString",{configurable:!0,enumerable:!1,value:v$(t),writable:!0})}:m$,w$=y$,b$=800,x$=16,S$=Date.now;function E$(e){var t=0,r=0;return function(){var n=S$(),o=x$-(n-r);if(r=n,o>0){if(++t>=b$)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var C$=E$,k$=w$,T$=C$,O$=T$(k$),P$=O$,L$=Th,N$=f_,j$=P$;function A$(e,t){return j$(N$(e,t,L$),e+"")}var l2=A$;function M$(e,t){return e===t||e!==e&&t!==t}var Oh=M$,I$=9007199254740991;function R$(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=I$}var a0=R$,_$=a2,$$=a0;function D$(e){return e!=null&&$$(e.length)&&!_$(e)}var wc=D$,F$=9007199254740991,z$=/^(?:0|[1-9]\d*)$/;function H$(e,t){var r=typeof e;return t=t==null?F$:t,!!t&&(r=="number"||r!="symbol"&&z$.test(e))&&e>-1&&e%1==0&&e<t}var s0=H$,B$=Oh,W$=wc,U$=s0,K$=Aa;function G$(e,t,r){if(!K$(r))return!1;var n=typeof t;return(n=="number"?W$(r)&&U$(t,r.length):n=="string"&&t in r)?B$(r[t],e):!1}var u2=G$;function q$(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var V$=q$;function X$(e){return e!=null&&typeof e=="object"}var bc=X$,Y$=yc,Q$=bc,J$="[object Arguments]";function Z$(e){return Q$(e)&&Y$(e)==J$}var eD=Z$,Kx=eD,tD=bc,c2=Object.prototype,rD=c2.hasOwnProperty,nD=c2.propertyIsEnumerable,iD=Kx(function(){return arguments}())?Kx:function(e){return tD(e)&&rD.call(e,"callee")&&!nD.call(e,"callee")},l0=iD,oD=Array.isArray,Gn=oD,Bd={exports:{}};function aD(){return!1}var sD=aD;Bd.exports;(function(e,t){var r=yi,n=sD,o=t&&!t.nodeType&&t,a=o&&!0&&e&&!e.nodeType&&e,l=a&&a.exports===o,u=l?r.Buffer:void 0,d=u?u.isBuffer:void 0,h=d||n;e.exports=h})(Bd,Bd.exports);var f2=Bd.exports,lD=yc,uD=a0,cD=bc,fD="[object Arguments]",dD="[object Array]",hD="[object Boolean]",pD="[object Date]",gD="[object Error]",vD="[object Function]",mD="[object Map]",yD="[object Number]",wD="[object Object]",bD="[object RegExp]",xD="[object Set]",SD="[object String]",ED="[object WeakMap]",CD="[object ArrayBuffer]",kD="[object DataView]",TD="[object Float32Array]",OD="[object Float64Array]",PD="[object Int8Array]",LD="[object Int16Array]",ND="[object Int32Array]",jD="[object Uint8Array]",AD="[object Uint8ClampedArray]",MD="[object Uint16Array]",ID="[object Uint32Array]",mt={};mt[TD]=mt[OD]=mt[PD]=mt[LD]=mt[ND]=mt[jD]=mt[AD]=mt[MD]=mt[ID]=!0;mt[fD]=mt[dD]=mt[CD]=mt[hD]=mt[kD]=mt[pD]=mt[gD]=mt[vD]=mt[mD]=mt[yD]=mt[wD]=mt[bD]=mt[xD]=mt[SD]=mt[ED]=!1;function RD(e){return cD(e)&&uD(e.length)&&!!mt[lD(e)]}var _D=RD;function $D(e){return function(t){return e(t)}}var d2=$D,Wd={exports:{}};Wd.exports;(function(e,t){var r=i2,n=t&&!t.nodeType&&t,o=n&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===n,l=a&&r.process,u=function(){try{var d=o&&o.require&&o.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();e.exports=u})(Wd,Wd.exports);var DD=Wd.exports,FD=_D,zD=d2,Gx=DD,qx=Gx&&Gx.isTypedArray,HD=qx?zD(qx):FD,h2=HD,BD=V$,WD=l0,UD=Gn,KD=f2,GD=s0,qD=h2,VD=Object.prototype,XD=VD.hasOwnProperty;function YD(e,t){var r=UD(e),n=!r&&WD(e),o=!r&&!n&&KD(e),a=!r&&!n&&!o&&qD(e),l=r||n||o||a,u=l?BD(e.length,String):[],d=u.length;for(var h in e)(t||XD.call(e,h))&&!(l&&(h=="length"||o&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||GD(h,d)))&&u.push(h);return u}var p2=YD,QD=Object.prototype;function JD(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||QD;return e===r}var g2=JD;function ZD(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var eF=ZD,tF=Aa,rF=g2,nF=eF,iF=Object.prototype,oF=iF.hasOwnProperty;function aF(e){if(!tF(e))return nF(e);var t=rF(e),r=[];for(var n in e)n=="constructor"&&(t||!oF.call(e,n))||r.push(n);return r}var sF=aF,lF=p2,uF=sF,cF=wc;function fF(e){return cF(e)?lF(e,!0):uF(e)}var dF=fF,hF=l2,pF=Oh,gF=u2,vF=dF,v2=Object.prototype,mF=v2.hasOwnProperty,yF=hF(function(e,t){e=Object(e);var r=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&gF(t[0],t[1],o)&&(n=1);++r<n;)for(var a=t[r],l=vF(a),u=-1,d=l.length;++u<d;){var h=l[u],g=e[h];(g===void 0||pF(g,v2[h])&&!mF.call(e,h))&&(e[h]=a[h])}return e}),wF=yF;const Vx=wt(wF);function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?Object(arguments[t]):{},n=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&n.push.apply(n,Object.getOwnPropertySymbols(r).filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.forEach(function(o){i0(e,o,r[o])})}return e}function jo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wu(e,t){if(t&&(Bn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jo(e)}function Us(e){return Us=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Us(e)}function Ud(e,t){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ud(e,t)}function Ph(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ud(e,t)}var bF={type:"logger",log:function(t){this.output("log",t)},warn:function(t){this.output("warn",t)},error:function(t){this.output("error",t)},output:function(t,r){console&&console[t]&&console[t].apply(console,r)}},xF=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vi(this,e),this.init(t,r)}return mi(e,[{key:"init",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=r||bF,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(r){this.debug=r}},{key:"log",value:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(r,n,o,a){return a&&!this.debug?null:(typeof r[0]=="string"&&(r[0]="".concat(o).concat(this.prefix," ").concat(r[0])),this.logger[n](r))}},{key:"create",value:function(r){return new e(this.logger,br({},{prefix:"".concat(this.prefix,":").concat(r,":")},this.options))}}]),e}(),Di=new xF,Ao=function(){function e(){vi(this,e),this.observers={}}return mi(e,[{key:"on",value:function(r,n){var o=this;return r.split(" ").forEach(function(a){o.observers[a]=o.observers[a]||[],o.observers[a].push(n)}),this}},{key:"off",value:function(r,n){if(this.observers[r]){if(!n){delete this.observers[r];return}this.observers[r]=this.observers[r].filter(function(o){return o!==n})}}},{key:"emit",value:function(r){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];if(this.observers[r]){var l=[].concat(this.observers[r]);l.forEach(function(d){d.apply(void 0,o)})}if(this.observers["*"]){var u=[].concat(this.observers["*"]);u.forEach(function(d){d.apply(d,[r].concat(o))})}}}]),e}();function eu(){var e,t,r=new Promise(function(n,o){e=n,t=o});return r.resolve=e,r.reject=t,r}function Xx(e){return e==null?"":""+e}function SF(e,t,r){e.forEach(function(n){t[n]&&(r[n]=t[n])})}function u0(e,t,r){function n(u){return u&&u.indexOf("###")>-1?u.replace(/###/g,"."):u}function o(){return!e||typeof e=="string"}for(var a=typeof t!="string"?[].concat(t):t.split(".");a.length>1;){if(o())return{};var l=n(a.shift());!e[l]&&r&&(e[l]=new r),Object.prototype.hasOwnProperty.call(e,l)?e=e[l]:e={}}return o()?{}:{obj:e,k:n(a.shift())}}function Yx(e,t,r){var n=u0(e,t,Object),o=n.obj,a=n.k;o[a]=r}function EF(e,t,r,n){var o=u0(e,t,Object),a=o.obj,l=o.k;a[l]=a[l]||[],a[l].push(r)}function Kd(e,t){var r=u0(e,t),n=r.obj,o=r.k;if(n)return n[o]}function Qx(e,t,r){var n=Kd(e,r);return n!==void 0?n:Kd(t,r)}function m2(e,t,r){for(var n in t)n!=="__proto__"&&n!=="constructor"&&(n in e?typeof e[n]=="string"||e[n]instanceof String||typeof t[n]=="string"||t[n]instanceof String?r&&(e[n]=t[n]):m2(e[n],t[n],r):e[n]=t[n]);return e}function fs(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var CF={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function kF(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,function(t){return CF[t]}):e}var Lh=typeof window<"u"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,TF=function(e){Ph(t,e);function t(r){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return vi(this,t),n=Wu(this,Us(t).call(this)),Lh&&Ao.call(jo(n)),n.data=r||{},n.options=o,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n}return mi(t,[{key:"addNamespaces",value:function(n){this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}},{key:"removeNamespaces",value:function(n){var o=this.options.ns.indexOf(n);o>-1&&this.options.ns.splice(o,1)}},{key:"getResource",value:function(n,o,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,d=[n,o];return a&&typeof a!="string"&&(d=d.concat(a)),a&&typeof a=="string"&&(d=d.concat(u?a.split(u):a)),n.indexOf(".")>-1&&(d=n.split(".")),Kd(this.data,d)}},{key:"addResource",value:function(n,o,a,l){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},d=this.options.keySeparator;d===void 0&&(d=".");var h=[n,o];a&&(h=h.concat(d?a.split(d):a)),n.indexOf(".")>-1&&(h=n.split("."),l=o,o=h[1]),this.addNamespaces(o),Yx(this.data,h,l),u.silent||this.emit("added",n,o,a,l)}},{key:"addResources",value:function(n,o,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in a)(typeof a[u]=="string"||Object.prototype.toString.apply(a[u])==="[object Array]")&&this.addResource(n,o,u,a[u],{silent:!0});l.silent||this.emit("added",n,o,a)}},{key:"addResourceBundle",value:function(n,o,a,l,u){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},h=[n,o];n.indexOf(".")>-1&&(h=n.split("."),l=a,a=o,o=h[1]),this.addNamespaces(o);var g=Kd(this.data,h)||{};l?m2(g,a,u):g=br({},g,a),Yx(this.data,h,g),d.silent||this.emit("added",n,o,a)}},{key:"removeResourceBundle",value:function(n,o){this.hasResourceBundle(n,o)&&delete this.data[n][o],this.removeNamespaces(o),this.emit("removed",n,o)}},{key:"hasResourceBundle",value:function(n,o){return this.getResource(n,o)!==void 0}},{key:"getResourceBundle",value:function(n,o){return o||(o=this.options.defaultNS),this.options.compatibilityAPI==="v1"?br({},{},this.getResource(n,o)):this.getResource(n,o)}},{key:"getDataByLanguage",value:function(n){return this.data[n]}},{key:"toJSON",value:function(){return this.data}}]),t}(Ao),y2={processors:{},addPostProcessor:function(t){this.processors[t.name]=t},handle:function(t,r,n,o,a){var l=this;return t.forEach(function(u){l.processors[u]&&(r=l.processors[u].process(r,n,o,a))}),r}},Jx={},Zx=function(e){Ph(t,e);function t(r){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return vi(this,t),n=Wu(this,Us(t).call(this)),Lh&&Ao.call(jo(n)),SF(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,jo(n)),n.options=o,n.options.keySeparator===void 0&&(n.options.keySeparator="."),n.logger=Di.create("translator"),n}return mi(t,[{key:"changeLanguage",value:function(n){n&&(this.language=n)}},{key:"exists",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},a=this.resolve(n,o);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(n,o){var a=o.nsSeparator!==void 0?o.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var l=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,u=o.ns||this.options.defaultNS;if(a&&n.indexOf(a)>-1){var d=n.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:n,namespaces:u};var h=n.split(a);(a!==l||a===l&&this.options.ns.indexOf(h[0])>-1)&&(u=h.shift()),n=h.join(l)}return typeof u=="string"&&(u=[u]),{key:n,namespaces:u}}},{key:"translate",value:function(n,o,a){var l=this;if(Bn(o)!=="object"&&this.options.overloadTranslationOptionHandler&&(o=this.options.overloadTranslationOptionHandler(arguments)),o||(o={}),n==null)return"";Array.isArray(n)||(n=[String(n)]);var u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,d=this.extractFromKey(n[n.length-1],o),h=d.key,g=d.namespaces,m=g[g.length-1],w=o.lng||this.language,x=o.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(w&&w.toLowerCase()==="cimode"){if(x){var C=o.nsSeparator||this.options.nsSeparator;return m+C+h}return h}var j=this.resolve(n,o),T=j&&j.res,k=j&&j.usedKey||h,P=j&&j.exactUsedKey||h,A=Object.prototype.toString.apply(T),L=["[object Number]","[object Function]","[object RegExp]"],R=o.joinArrays!==void 0?o.joinArrays:this.options.joinArrays,D=!this.i18nFormat||this.i18nFormat.handleAsObject,$=typeof T!="string"&&typeof T!="boolean"&&typeof T!="number";if(D&&T&&$&&L.indexOf(A)<0&&!(typeof R=="string"&&A==="[object Array]")){if(!o.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(k,T,o):"key '".concat(h," (").concat(this.language,")' returned an object instead of string.");if(u){var B=A==="[object Array]",U=B?[]:{},Y=B?P:k;for(var V in T)if(Object.prototype.hasOwnProperty.call(T,V)){var de="".concat(Y).concat(u).concat(V);U[V]=this.translate(de,br({},o,{joinArrays:!1,ns:g})),U[V]===de&&(U[V]=T[V])}T=U}}else if(D&&typeof R=="string"&&A==="[object Array]")T=T.join(R),T&&(T=this.extendTranslation(T,n,o,a));else{var W=!1,_=!1,M=o.count!==void 0&&typeof o.count!="string",Q=t.hasDefaultValue(o),oe=M?this.pluralResolver.getSuffix(w,o.count):"",re=o["defaultValue".concat(oe)]||o.defaultValue;!this.isValidLookup(T)&&Q&&(W=!0,T=re),this.isValidLookup(T)||(_=!0,T=h);var X=Q&&re!==T&&this.options.updateMissing;if(_||W||X){if(this.logger.log(X?"updateKey":"missingKey",w,m,h,X?re:T),u){var ie=this.resolve(h,br({},o,{keySeparator:!1}));ie&&ie.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var ue=[],he=this.languageUtils.getFallbackCodes(this.options.fallbackLng,o.lng||this.language);if(this.options.saveMissingTo==="fallback"&&he&&he[0])for(var Se=0;Se<he.length;Se++)ue.push(he[Se]);else this.options.saveMissingTo==="all"?ue=this.languageUtils.toResolveHierarchy(o.lng||this.language):ue.push(o.lng||this.language);var Z=function(le,ce,me){l.options.missingKeyHandler?l.options.missingKeyHandler(le,m,ce,X?me:T,X,o):l.backendConnector&&l.backendConnector.saveMissing&&l.backendConnector.saveMissing(le,m,ce,X?me:T,X,o),l.emit("missingKey",le,m,ce,T)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?ue.forEach(function(ae){l.pluralResolver.getSuffixes(ae).forEach(function(le){Z([ae],h+le,o["defaultValue".concat(le)]||re)})}):Z(ue,h,re))}T=this.extendTranslation(T,n,o,j,a),_&&T===h&&this.options.appendNamespaceToMissingKey&&(T="".concat(m,":").concat(h)),_&&this.options.parseMissingKeyHandler&&(T=this.options.parseMissingKeyHandler(T))}return T}},{key:"extendTranslation",value:function(n,o,a,l,u){var d=this;if(this.i18nFormat&&this.i18nFormat.parse)n=this.i18nFormat.parse(n,a,l.usedLng,l.usedNS,l.usedKey,{resolved:l});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(br({},a,{interpolation:br({},this.options.interpolation,a.interpolation)}));var h=a.interpolation&&a.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,g;if(h){var m=n.match(this.interpolator.nestingRegexp);g=m&&m.length}var w=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(w=br({},this.options.interpolation.defaultVariables,w)),n=this.interpolator.interpolate(n,w,a.lng||this.language,a),h){var x=n.match(this.interpolator.nestingRegexp),C=x&&x.length;g<C&&(a.nest=!1)}a.nest!==!1&&(n=this.interpolator.nest(n,function(){for(var k=arguments.length,P=new Array(k),A=0;A<k;A++)P[A]=arguments[A];return u&&u[0]===P[0]&&!a.context?(d.logger.warn("It seems you are nesting recursively key: ".concat(P[0]," in key: ").concat(o[0])),null):d.translate.apply(d,P.concat([o]))},a)),a.interpolation&&this.interpolator.reset()}var j=a.postProcess||this.options.postProcess,T=typeof j=="string"?[j]:j;return n!=null&&T&&T.length&&a.applyPostProcessor!==!1&&(n=y2.handle(T,n,o,this.options&&this.options.postProcessPassResolved?br({i18nResolved:l},a):a,this)),n}},{key:"resolve",value:function(n){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l,u,d,h,g;return typeof n=="string"&&(n=[n]),n.forEach(function(m){if(!o.isValidLookup(l)){var w=o.extractFromKey(m,a),x=w.key;u=x;var C=w.namespaces;o.options.fallbackNS&&(C=C.concat(o.options.fallbackNS));var j=a.count!==void 0&&typeof a.count!="string",T=a.context!==void 0&&typeof a.context=="string"&&a.context!=="",k=a.lngs?a.lngs:o.languageUtils.toResolveHierarchy(a.lng||o.language,a.fallbackLng);C.forEach(function(P){o.isValidLookup(l)||(g=P,!Jx["".concat(k[0],"-").concat(P)]&&o.utils&&o.utils.hasLoadedNamespace&&!o.utils.hasLoadedNamespace(g)&&(Jx["".concat(k[0],"-").concat(P)]=!0,o.logger.warn('key "'.concat(u,'" for languages "').concat(k.join(", "),'" won\'t get resolved as namespace "').concat(g,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),k.forEach(function(A){if(!o.isValidLookup(l)){h=A;var L=x,R=[L];if(o.i18nFormat&&o.i18nFormat.addLookupKeys)o.i18nFormat.addLookupKeys(R,x,A,P,a);else{var D;j&&(D=o.pluralResolver.getSuffix(A,a.count)),j&&T&&R.push(L+D),T&&R.push(L+="".concat(o.options.contextSeparator).concat(a.context)),j&&R.push(L+=D)}for(var $;$=R.pop();)o.isValidLookup(l)||(d=$,l=o.getResource(A,P,$,a))}}))})}}),{res:l,usedKey:u,exactUsedKey:d,usedLng:h,usedNS:g}}},{key:"isValidLookup",value:function(n){return n!==void 0&&!(!this.options.returnNull&&n===null)&&!(!this.options.returnEmptyString&&n==="")}},{key:"getResource",value:function(n,o,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(n,o,a,l):this.resourceStore.getResource(n,o,a,l)}}],[{key:"hasDefaultValue",value:function(n){var o="defaultValue";for(var a in n)if(Object.prototype.hasOwnProperty.call(n,a)&&o===a.substring(0,o.length)&&n[a]!==void 0)return!0;return!1}}]),t}(Ao);function Fg(e){return e.charAt(0).toUpperCase()+e.slice(1)}var OF=function(){function e(t){vi(this,e),this.options=t,this.whitelist=this.options.supportedLngs||!1,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Di.create("languageUtils")}return mi(e,[{key:"getScriptPartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return null;var n=r.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(r){if(!r||r.indexOf("-")<0)return r;var n=r.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(r){if(typeof r=="string"&&r.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],o=r.split("-");return this.options.lowerCaseLng?o=o.map(function(a){return a.toLowerCase()}):o.length===2?(o[0]=o[0].toLowerCase(),o[1]=o[1].toUpperCase(),n.indexOf(o[1].toLowerCase())>-1&&(o[1]=Fg(o[1].toLowerCase()))):o.length===3&&(o[0]=o[0].toLowerCase(),o[1].length===2&&(o[1]=o[1].toUpperCase()),o[0]!=="sgn"&&o[2].length===2&&(o[2]=o[2].toUpperCase()),n.indexOf(o[1].toLowerCase())>-1&&(o[1]=Fg(o[1].toLowerCase())),n.indexOf(o[2].toLowerCase())>-1&&(o[2]=Fg(o[2].toLowerCase()))),o.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?r.toLowerCase():r}},{key:"isWhitelisted",value:function(r){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(r)}},{key:"isSupportedCode",value:function(r){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(r=this.getLanguagePartFromCode(r)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(r)>-1}},{key:"getBestMatchFromCodes",value:function(r){var n=this;if(!r)return null;var o;return r.forEach(function(a){if(!o){var l=n.formatLanguageCode(a);(!n.options.supportedLngs||n.isSupportedCode(l))&&(o=l)}}),!o&&this.options.supportedLngs&&r.forEach(function(a){if(!o){var l=n.getLanguagePartFromCode(a);if(n.isSupportedCode(l))return o=l;o=n.options.supportedLngs.find(function(u){if(u.indexOf(l)===0)return u})}}),o||(o=this.getFallbackCodes(this.options.fallbackLng)[0]),o}},{key:"getFallbackCodes",value:function(r,n){if(!r)return[];if(typeof r=="function"&&(r=r(n)),typeof r=="string"&&(r=[r]),Object.prototype.toString.apply(r)==="[object Array]")return r;if(!n)return r.default||[];var o=r[n];return o||(o=r[this.getScriptPartFromCode(n)]),o||(o=r[this.formatLanguageCode(n)]),o||(o=r[this.getLanguagePartFromCode(n)]),o||(o=r.default),o||[]}},{key:"toResolveHierarchy",value:function(r,n){var o=this,a=this.getFallbackCodes(n||this.options.fallbackLng||[],r),l=[],u=function(h){h&&(o.isSupportedCode(h)?l.push(h):o.logger.warn("rejecting language code not found in supportedLngs: ".concat(h)))};return typeof r=="string"&&r.indexOf("-")>-1?(this.options.load!=="languageOnly"&&u(this.formatLanguageCode(r)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&u(this.getScriptPartFromCode(r)),this.options.load!=="currentOnly"&&u(this.getLanguagePartFromCode(r))):typeof r=="string"&&u(this.formatLanguageCode(r)),a.forEach(function(d){l.indexOf(d)<0&&u(o.formatLanguageCode(d))}),l}}]),e}(),PF=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],LF={1:function(t){return+(t>1)},2:function(t){return+(t!=1)},3:function(t){return 0},4:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},5:function(t){return t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5},6:function(t){return t==1?0:t>=2&&t<=4?1:2},7:function(t){return t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2},8:function(t){return t==1?0:t==2?1:t!=8&&t!=11?2:3},9:function(t){return+(t>=2)},10:function(t){return t==1?0:t==2?1:t<7?2:t<11?3:4},11:function(t){return t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3},12:function(t){return+(t%10!=1||t%100==11)},13:function(t){return+(t!==0)},14:function(t){return t==1?0:t==2?1:t==3?2:3},15:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2},16:function(t){return t%10==1&&t%100!=11?0:t!==0?1:2},17:function(t){return t==1||t%10==1&&t%100!=11?0:1},18:function(t){return t==0?0:t==1?1:2},19:function(t){return t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3},20:function(t){return t==1?0:t==0||t%100>0&&t%100<20?1:2},21:function(t){return t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0},22:function(t){return t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3}};function NF(){var e={};return PF.forEach(function(t){t.lngs.forEach(function(r){e[r]={numbers:t.nr,plurals:LF[t.fc]}})}),e}var jF=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};vi(this,e),this.languageUtils=t,this.options=r,this.logger=Di.create("pluralResolver"),this.rules=NF()}return mi(e,[{key:"addRule",value:function(r,n){this.rules[r]=n}},{key:"getRule",value:function(r){return this.rules[r]||this.rules[this.languageUtils.getLanguagePartFromCode(r)]}},{key:"needsPlural",value:function(r){var n=this.getRule(r);return n&&n.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(r,n){return this.getSuffixes(r).map(function(o){return n+o})}},{key:"getSuffixes",value:function(r){var n=this,o=this.getRule(r);return o?o.numbers.map(function(a){return n.getSuffix(r,a)}):[]}},{key:"getSuffix",value:function(r,n){var o=this,a=this.getRule(r);if(a){var l=a.noAbs?a.plurals(n):a.plurals(Math.abs(n)),u=a.numbers[l];this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1&&(u===2?u="plural":u===1&&(u=""));var d=function(){return o.options.prepend&&u.toString()?o.options.prepend+u.toString():u.toString()};return this.options.compatibilityJSON==="v1"?u===1?"":typeof u=="number"?"_plural_".concat(u.toString()):d():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&a.numbers.length===2&&a.numbers[0]===1?d():this.options.prepend&&l.toString()?this.options.prepend+l.toString():l.toString()}return this.logger.warn("no plural rule found for: ".concat(r)),""}}]),e}(),AF=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};vi(this,e),this.logger=Di.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||function(r){return r},this.init(t)}return mi(e,[{key:"init",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};r.interpolation||(r.interpolation={escapeValue:!0});var n=r.interpolation;this.escape=n.escape!==void 0?n.escape:kF,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?fs(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?fs(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?fs(n.nestingPrefix):n.nestingPrefixEscaped||fs("$t("),this.nestingSuffix=n.nestingSuffix?fs(n.nestingSuffix):n.nestingSuffixEscaped||fs(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var r="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(r,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var o="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(o,"g")}},{key:"interpolate",value:function(r,n,o,a){var l=this,u,d,h,g=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function m(T){return T.replace(/\$/g,"$$$$")}var w=function(k){if(k.indexOf(l.formatSeparator)<0){var P=Qx(n,g,k);return l.alwaysFormat?l.format(P,void 0,o):P}var A=k.split(l.formatSeparator),L=A.shift().trim(),R=A.join(l.formatSeparator).trim();return l.format(Qx(n,g,L),R,o,a)};this.resetRegExp();var x=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,C=a&&a.interpolation&&a.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,j=[{regex:this.regexpUnescape,safeValue:function(k){return m(k)}},{regex:this.regexp,safeValue:function(k){return l.escapeValue?m(l.escape(k)):m(k)}}];return j.forEach(function(T){for(h=0;u=T.regex.exec(r);){if(d=w(u[1].trim()),d===void 0)if(typeof x=="function"){var k=x(r,u,a);d=typeof k=="string"?k:""}else if(C){d=u[0];continue}else l.logger.warn("missed to pass in variable ".concat(u[1]," for interpolating ").concat(r)),d="";else typeof d!="string"&&!l.useRawValueToEscape&&(d=Xx(d));if(r=r.replace(u[0],T.safeValue(d)),T.regex.lastIndex=0,h++,h>=l.maxReplaces)break}}),r}},{key:"nest",value:function(r,n){var o=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l,u,d=br({},a);d.applyPostProcessor=!1,delete d.defaultValue;function h(x,C){var j=this.nestingOptionsSeparator;if(x.indexOf(j)<0)return x;var T=x.split(new RegExp("".concat(j,"[ ]*{"))),k="{".concat(T[1]);x=T[0],k=this.interpolate(k,d),k=k.replace(/'/g,'"');try{d=JSON.parse(k),C&&(d=br({},C,d))}catch(P){return this.logger.warn("failed parsing options string in nesting for key ".concat(x),P),"".concat(x).concat(j).concat(k)}return delete d.defaultValue,x}for(;l=this.nestingRegexp.exec(r);){var g=[],m=!1;if(l[0].includes(this.formatSeparator)&&!/{.*}/.test(l[1])){var w=l[1].split(this.formatSeparator).map(function(x){return x.trim()});l[1]=w.shift(),g=w,m=!0}if(u=n(h.call(this,l[1].trim(),d),d),u&&l[0]===r&&typeof u!="string")return u;typeof u!="string"&&(u=Xx(u)),u||(this.logger.warn("missed to resolve ".concat(l[1]," for nesting ").concat(r)),u=""),m&&(u=g.reduce(function(x,C){return o.format(x,C,a.lng,a)},u.trim())),r=r.replace(l[0],u),this.regexp.lastIndex=0}return r}}]),e}();function MF(e,t){for(var r=e.indexOf(t);r!==-1;)e.splice(r,1),r=e.indexOf(t)}var IF=function(e){Ph(t,e);function t(r,n,o){var a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return vi(this,t),a=Wu(this,Us(t).call(this)),Lh&&Ao.call(jo(a)),a.backend=r,a.store=n,a.services=o,a.languageUtils=o.languageUtils,a.options=l,a.logger=Di.create("backendConnector"),a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(o,l.backend,l),a}return mi(t,[{key:"queueLoad",value:function(n,o,a,l){var u=this,d=[],h=[],g=[],m=[];return n.forEach(function(w){var x=!0;o.forEach(function(C){var j="".concat(w,"|").concat(C);!a.reload&&u.store.hasResourceBundle(w,C)?u.state[j]=2:u.state[j]<0||(u.state[j]===1?h.indexOf(j)<0&&h.push(j):(u.state[j]=1,x=!1,h.indexOf(j)<0&&h.push(j),d.indexOf(j)<0&&d.push(j),m.indexOf(C)<0&&m.push(C)))}),x||g.push(w)}),(d.length||h.length)&&this.queue.push({pending:h,loaded:{},errors:[],callback:l}),{toLoad:d,pending:h,toLoadLanguages:g,toLoadNamespaces:m}}},{key:"loaded",value:function(n,o,a){var l=n.split("|"),u=l[0],d=l[1];o&&this.emit("failedLoading",u,d,o),a&&this.store.addResourceBundle(u,d,a),this.state[n]=o?-1:2;var h={};this.queue.forEach(function(g){EF(g.loaded,[u],d),MF(g.pending,n),o&&g.errors.push(o),g.pending.length===0&&!g.done&&(Object.keys(g.loaded).forEach(function(m){h[m]||(h[m]=[]),g.loaded[m].length&&g.loaded[m].forEach(function(w){h[m].indexOf(w)<0&&h[m].push(w)})}),g.done=!0,g.errors.length?g.callback(g.errors):g.callback())}),this.emit("loaded",h),this.queue=this.queue.filter(function(g){return!g.done})}},{key:"read",value:function(n,o,a){var l=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:350,h=arguments.length>5?arguments[5]:void 0;return n.length?this.backend[a](n,o,function(g,m){if(g&&m&&u<5){setTimeout(function(){l.read.call(l,n,o,a,u+1,d*2,h)},d);return}h(g,m)}):h(null,{})}},{key:"prepareLoading",value:function(n,o){var a=this,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof n=="string"&&(n=this.languageUtils.toResolveHierarchy(n)),typeof o=="string"&&(o=[o]);var d=this.queueLoad(n,o,l,u);if(!d.toLoad.length)return d.pending.length||u(),null;d.toLoad.forEach(function(h){a.loadOne(h)})}},{key:"load",value:function(n,o,a){this.prepareLoading(n,o,{},a)}},{key:"reload",value:function(n,o,a){this.prepareLoading(n,o,{reload:!0},a)}},{key:"loadOne",value:function(n){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=n.split("|"),u=l[0],d=l[1];this.read(u,d,"read",void 0,void 0,function(h,g){h&&o.logger.warn("".concat(a,"loading namespace ").concat(d," for language ").concat(u," failed"),h),!h&&g&&o.logger.log("".concat(a,"loaded namespace ").concat(d," for language ").concat(u),g),o.loaded(n,h,g)})}},{key:"saveMissing",value:function(n,o,a,l,u){var d=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(o)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(o,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}a==null||a===""||(this.backend&&this.backend.create&&this.backend.create(n,o,a,l,null,br({},d,{isUpdate:u})),!(!n||!n[0])&&this.store.addResource(n[0],o,a,l))}}]),t}(Ao);function RF(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){var r={};if(Bn(t[1])==="object"&&(r=t[1]),typeof t[1]=="string"&&(r.defaultValue=t[1]),typeof t[2]=="string"&&(r.tDescription=t[2]),Bn(t[2])==="object"||Bn(t[3])==="object"){var n=t[3]||t[2];Object.keys(n).forEach(function(o){r[o]=n[o]})}return r},interpolation:{escapeValue:!0,format:function(t,r,n,o){return t},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function eS(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.whitelist&&(e.whitelist&&e.whitelist.indexOf("cimode")<0&&(e.whitelist=e.whitelist.concat(["cimode"])),e.supportedLngs=e.whitelist),e.nonExplicitWhitelist&&(e.nonExplicitSupportedLngs=e.nonExplicitWhitelist),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function xf(){}var _F=function(e){Ph(t,e);function t(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(vi(this,t),r=Wu(this,Us(t).call(this)),Lh&&Ao.call(jo(r)),r.options=eS(n),r.services={},r.logger=Di,r.modules={external:[]},o&&!r.isInitialized&&!n.isClone){if(!r.options.initImmediate)return r.init(n,o),Wu(r,jo(r));setTimeout(function(){r.init(n,o)},0)}return r}return mi(t,[{key:"init",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof o=="function"&&(a=o,o={}),o.whitelist&&!o.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),o.nonExplicitWhitelist&&!o.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=br({},RF(),this.options,eS(o)),this.format=this.options.interpolation.format,a||(a=xf);function l(C){return C?typeof C=="function"?new C:C:null}if(!this.options.isClone){this.modules.logger?Di.init(l(this.modules.logger),this.options):Di.init(null,this.options);var u=new OF(this.options);this.store=new TF(this.options.resources,this.options);var d=this.services;d.logger=Di,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new jF(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d.interpolator=new AF(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new IF(l(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",function(C){for(var j=arguments.length,T=new Array(j>1?j-1:0),k=1;k<j;k++)T[k-1]=arguments[k];n.emit.apply(n,[C].concat(T))}),this.modules.languageDetector&&(d.languageDetector=l(this.modules.languageDetector),d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=l(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new Zx(this.services,this.options),this.translator.on("*",function(C){for(var j=arguments.length,T=new Array(j>1?j-1:0),k=1;k<j;k++)T[k-1]=arguments[k];n.emit.apply(n,[C].concat(T))}),this.modules.external.forEach(function(C){C.init&&C.init(n)})}if(this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&h[0]!=="dev"&&(this.options.lng=h[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var g=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];g.forEach(function(C){n[C]=function(){var j;return(j=n.store)[C].apply(j,arguments)}});var m=["addResource","addResources","addResourceBundle","removeResourceBundle"];m.forEach(function(C){n[C]=function(){var j;return(j=n.store)[C].apply(j,arguments),n}});var w=eu(),x=function(){var j=function(k,P){n.isInitialized&&n.logger.warn("init: i18next is already initialized. You should call init just once!"),n.isInitialized=!0,n.options.isClone||n.logger.log("initialized",n.options),n.emit("initialized",n.options),w.resolve(P),a(k,P)};if(n.languages&&n.options.compatibilityAPI!=="v1"&&!n.isInitialized)return j(null,n.t.bind(n));n.changeLanguage(n.options.lng,j)};return this.options.resources||!this.options.initImmediate?x():setTimeout(x,0),w}},{key:"loadResources",value:function(n){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xf,l=a,u=typeof n=="string"?n:this.language;if(typeof n=="function"&&(l=n),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return l();var d=[],h=function(w){if(w){var x=o.services.languageUtils.toResolveHierarchy(w);x.forEach(function(C){d.indexOf(C)<0&&d.push(C)})}};if(u)h(u);else{var g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.forEach(function(m){return h(m)})}this.options.preload&&this.options.preload.forEach(function(m){return h(m)}),this.services.backendConnector.load(d,this.options.ns,l)}else l(null)}},{key:"reloadResources",value:function(n,o,a){var l=eu();return n||(n=this.languages),o||(o=this.options.ns),a||(a=xf),this.services.backendConnector.reload(n,o,function(u){l.resolve(),a(u)}),l}},{key:"use",value:function(n){if(!n)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!n.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return n.type==="backend"&&(this.modules.backend=n),(n.type==="logger"||n.log&&n.warn&&n.error)&&(this.modules.logger=n),n.type==="languageDetector"&&(this.modules.languageDetector=n),n.type==="i18nFormat"&&(this.modules.i18nFormat=n),n.type==="postProcessor"&&y2.addPostProcessor(n),n.type==="3rdParty"&&this.modules.external.push(n),this}},{key:"changeLanguage",value:function(n,o){var a=this;this.isLanguageChangingTo=n;var l=eu();this.emit("languageChanging",n);var u=function(g,m){m?(a.language=m,a.languages=a.services.languageUtils.toResolveHierarchy(m),a.translator.changeLanguage(m),a.isLanguageChangingTo=void 0,a.emit("languageChanged",m),a.logger.log("languageChanged",m)):a.isLanguageChangingTo=void 0,l.resolve(function(){return a.t.apply(a,arguments)}),o&&o(g,function(){return a.t.apply(a,arguments)})},d=function(g){var m=typeof g=="string"?g:a.services.languageUtils.getBestMatchFromCodes(g);m&&(a.language||(a.language=m,a.languages=a.services.languageUtils.toResolveHierarchy(m)),a.translator.language||a.translator.changeLanguage(m),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage(m)),a.loadResources(m,function(w){u(w,m)})};return!n&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!n&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(d):d(n),l}},{key:"getFixedT",value:function(n,o){var a=this,l=function u(d,h){var g;if(Bn(h)!=="object"){for(var m=arguments.length,w=new Array(m>2?m-2:0),x=2;x<m;x++)w[x-2]=arguments[x];g=a.options.overloadTranslationOptionHandler([d,h].concat(w))}else g=br({},h);return g.lng=g.lng||u.lng,g.lngs=g.lngs||u.lngs,g.ns=g.ns||u.ns,a.t(d,g)};return typeof n=="string"?l.lng=n:l.lngs=n,l.ns=o,l}},{key:"t",value:function(){var n;return this.translator&&(n=this.translator).translate.apply(n,arguments)}},{key:"exists",value:function(){var n;return this.translator&&(n=this.translator).exists.apply(n,arguments)}},{key:"setDefaultNamespace",value:function(n){this.options.defaultNS=n}},{key:"hasLoadedNamespace",value:function(n){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var l=this.languages[0],u=this.options?this.options.fallbackLng:!1,d=this.languages[this.languages.length-1];if(l.toLowerCase()==="cimode")return!0;var h=function(w,x){var C=o.services.backendConnector.state["".concat(w,"|").concat(x)];return C===-1||C===2};if(a.precheck){var g=a.precheck(this,h);if(g!==void 0)return g}return!!(this.hasResourceBundle(l,n)||!this.services.backendConnector.backend||h(l,n)&&(!u||h(d,n)))}},{key:"loadNamespaces",value:function(n,o){var a=this,l=eu();return this.options.ns?(typeof n=="string"&&(n=[n]),n.forEach(function(u){a.options.ns.indexOf(u)<0&&a.options.ns.push(u)}),this.loadResources(function(u){l.resolve(),o&&o(u)}),l):(o&&o(),Promise.resolve())}},{key:"loadLanguages",value:function(n,o){var a=eu();typeof n=="string"&&(n=[n]);var l=this.options.preload||[],u=n.filter(function(d){return l.indexOf(d)<0});return u.length?(this.options.preload=l.concat(u),this.loadResources(function(d){a.resolve(),o&&o(d)}),a):(o&&o(),Promise.resolve())}},{key:"dir",value:function(n){if(n||(n=this.languages&&this.languages.length>0?this.languages[0]:this.language),!n)return"rtl";var o=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return o.indexOf(this.services.languageUtils.getLanguagePartFromCode(n))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;return new t(n,o)}},{key:"cloneInstance",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:xf,l=br({},this.options,o,{isClone:!0}),u=new t(l),d=["store","services","language"];return d.forEach(function(h){u[h]=n[h]}),u.services=br({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new Zx(u.services,u.options),u.translator.on("*",function(h){for(var g=arguments.length,m=new Array(g>1?g-1:0),w=1;w<g;w++)m[w-1]=arguments[w];u.emit.apply(u,[h].concat(m))}),u.init(l,a),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}}]),t}(Ao),$F=new _F;function vm(e){"@babel/helpers - typeof";return vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vm(e)}var w2=[],DF=w2.forEach,FF=w2.slice;function mm(e){return DF.call(FF.call(arguments,1),function(t){if(t)for(var r in t)e[r]===void 0&&(e[r]=t[r])}),e}function b2(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":vm(XMLHttpRequest))==="object"}function zF(e){return!!e&&typeof e.then=="function"}function HF(e){return zF(e)?e:Promise.resolve(e)}const nn=globalThis||void 0||self;function BF(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ym={exports:{}},Sf={exports:{}},tS;function WF(){return tS||(tS=1,function(e,t){var r=typeof self<"u"?self:tr,n=function(){function a(){this.fetch=!1,this.DOMException=r.DOMException}return a.prototype=r,new a}();(function(a){(function(l){var u={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function d(_){return _&&DataView.prototype.isPrototypeOf(_)}if(u.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],g=ArrayBuffer.isView||function(_){return _&&h.indexOf(Object.prototype.toString.call(_))>-1};function m(_){if(typeof _!="string"&&(_=String(_)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(_))throw new TypeError("Invalid character in header field name");return _.toLowerCase()}function w(_){return typeof _!="string"&&(_=String(_)),_}function x(_){var M={next:function(){var Q=_.shift();return{done:Q===void 0,value:Q}}};return u.iterable&&(M[Symbol.iterator]=function(){return M}),M}function C(_){this.map={},_ instanceof C?_.forEach(function(M,Q){this.append(Q,M)},this):Array.isArray(_)?_.forEach(function(M){this.append(M[0],M[1])},this):_&&Object.getOwnPropertyNames(_).forEach(function(M){this.append(M,_[M])},this)}C.prototype.append=function(_,M){_=m(_),M=w(M);var Q=this.map[_];this.map[_]=Q?Q+", "+M:M},C.prototype.delete=function(_){delete this.map[m(_)]},C.prototype.get=function(_){return _=m(_),this.has(_)?this.map[_]:null},C.prototype.has=function(_){return this.map.hasOwnProperty(m(_))},C.prototype.set=function(_,M){this.map[m(_)]=w(M)},C.prototype.forEach=function(_,M){for(var Q in this.map)this.map.hasOwnProperty(Q)&&_.call(M,this.map[Q],Q,this)},C.prototype.keys=function(){var _=[];return this.forEach(function(M,Q){_.push(Q)}),x(_)},C.prototype.values=function(){var _=[];return this.forEach(function(M){_.push(M)}),x(_)},C.prototype.entries=function(){var _=[];return this.forEach(function(M,Q){_.push([Q,M])}),x(_)},u.iterable&&(C.prototype[Symbol.iterator]=C.prototype.entries);function j(_){if(_.bodyUsed)return Promise.reject(new TypeError("Already read"));_.bodyUsed=!0}function T(_){return new Promise(function(M,Q){_.onload=function(){M(_.result)},_.onerror=function(){Q(_.error)}})}function k(_){var M=new FileReader,Q=T(M);return M.readAsArrayBuffer(_),Q}function P(_){var M=new FileReader,Q=T(M);return M.readAsText(_),Q}function A(_){for(var M=new Uint8Array(_),Q=new Array(M.length),oe=0;oe<M.length;oe++)Q[oe]=String.fromCharCode(M[oe]);return Q.join("")}function L(_){if(_.slice)return _.slice(0);var M=new Uint8Array(_.byteLength);return M.set(new Uint8Array(_)),M.buffer}function R(){return this.bodyUsed=!1,this._initBody=function(_){this._bodyInit=_,_?typeof _=="string"?this._bodyText=_:u.blob&&Blob.prototype.isPrototypeOf(_)?this._bodyBlob=_:u.formData&&FormData.prototype.isPrototypeOf(_)?this._bodyFormData=_:u.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)?this._bodyText=_.toString():u.arrayBuffer&&u.blob&&d(_)?(this._bodyArrayBuffer=L(_.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):u.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(_)||g(_))?this._bodyArrayBuffer=L(_):this._bodyText=_=Object.prototype.toString.call(_):this._bodyText="",this.headers.get("content-type")||(typeof _=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):u.searchParams&&URLSearchParams.prototype.isPrototypeOf(_)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},u.blob&&(this.blob=function(){var _=j(this);if(_)return _;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?j(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(k)}),this.text=function(){var _=j(this);if(_)return _;if(this._bodyBlob)return P(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},u.formData&&(this.formData=function(){return this.text().then(U)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function $(_){var M=_.toUpperCase();return D.indexOf(M)>-1?M:_}function B(_,M){M=M||{};var Q=M.body;if(_ instanceof B){if(_.bodyUsed)throw new TypeError("Already read");this.url=_.url,this.credentials=_.credentials,M.headers||(this.headers=new C(_.headers)),this.method=_.method,this.mode=_.mode,this.signal=_.signal,!Q&&_._bodyInit!=null&&(Q=_._bodyInit,_.bodyUsed=!0)}else this.url=String(_);if(this.credentials=M.credentials||this.credentials||"same-origin",(M.headers||!this.headers)&&(this.headers=new C(M.headers)),this.method=$(M.method||this.method||"GET"),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&Q)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(Q)}B.prototype.clone=function(){return new B(this,{body:this._bodyInit})};function U(_){var M=new FormData;return _.trim().split("&").forEach(function(Q){if(Q){var oe=Q.split("="),re=oe.shift().replace(/\+/g," "),X=oe.join("=").replace(/\+/g," ");M.append(decodeURIComponent(re),decodeURIComponent(X))}}),M}function Y(_){var M=new C,Q=_.replace(/\r?\n[\t ]+/g," ");return Q.split(/\r?\n/).forEach(function(oe){var re=oe.split(":"),X=re.shift().trim();if(X){var ie=re.join(":").trim();M.append(X,ie)}}),M}R.call(B.prototype);function V(_,M){M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new C(M.headers),this.url=M.url||"",this._initBody(_)}R.call(V.prototype),V.prototype.clone=function(){return new V(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new C(this.headers),url:this.url})},V.error=function(){var _=new V(null,{status:0,statusText:""});return _.type="error",_};var de=[301,302,303,307,308];V.redirect=function(_,M){if(de.indexOf(M)===-1)throw new RangeError("Invalid status code");return new V(null,{status:M,headers:{location:_}})},l.DOMException=a.DOMException;try{new l.DOMException}catch{l.DOMException=function(M,Q){this.message=M,this.name=Q;var oe=Error(M);this.stack=oe.stack},l.DOMException.prototype=Object.create(Error.prototype),l.DOMException.prototype.constructor=l.DOMException}function W(_,M){return new Promise(function(Q,oe){var re=new B(_,M);if(re.signal&&re.signal.aborted)return oe(new l.DOMException("Aborted","AbortError"));var X=new XMLHttpRequest;function ie(){X.abort()}X.onload=function(){var ue={status:X.status,statusText:X.statusText,headers:Y(X.getAllResponseHeaders()||"")};ue.url="responseURL"in X?X.responseURL:ue.headers.get("X-Request-URL");var he="response"in X?X.response:X.responseText;Q(new V(he,ue))},X.onerror=function(){oe(new TypeError("Network request failed"))},X.ontimeout=function(){oe(new TypeError("Network request failed"))},X.onabort=function(){oe(new l.DOMException("Aborted","AbortError"))},X.open(re.method,re.url,!0),re.credentials==="include"?X.withCredentials=!0:re.credentials==="omit"&&(X.withCredentials=!1),"responseType"in X&&u.blob&&(X.responseType="blob"),re.headers.forEach(function(ue,he){X.setRequestHeader(he,ue)}),re.signal&&(re.signal.addEventListener("abort",ie),X.onreadystatechange=function(){X.readyState===4&&re.signal.removeEventListener("abort",ie)}),X.send(typeof re._bodyInit>"u"?null:re._bodyInit)})}return W.polyfill=!0,a.fetch||(a.fetch=W,a.Headers=C,a.Request=B,a.Response=V),l.Headers=C,l.Request=B,l.Response=V,l.fetch=W,Object.defineProperty(l,"__esModule",{value:!0}),l})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;t=o.fetch,t.default=o.fetch,t.fetch=o.fetch,t.Headers=o.Headers,t.Request=o.Request,t.Response=o.Response,e.exports=t}(Sf,Sf.exports)),Sf.exports}(function(e,t){var r;if(typeof fetch=="function"&&(typeof tr<"u"&&tr.fetch?r=tr.fetch:typeof window<"u"&&window.fetch?r=window.fetch:r=fetch),typeof BF<"u"&&(typeof window>"u"||typeof window.document>"u")){var n=r||WF();n.default&&(n=n.default),t.default=n,e.exports=t.default}})(ym,ym.exports);var x2=ym.exports;const S2=wt(x2),rS=Pj({__proto__:null,default:S2},[x2]);function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}var Bi;typeof fetch=="function"&&(typeof nn<"u"&&nn.fetch?Bi=nn.fetch:typeof window<"u"&&window.fetch?Bi=window.fetch:Bi=fetch);var Uu;b2()&&(typeof nn<"u"&&nn.XMLHttpRequest?Uu=nn.XMLHttpRequest:typeof window<"u"&&window.XMLHttpRequest&&(Uu=window.XMLHttpRequest));var qd;typeof ActiveXObject=="function"&&(typeof nn<"u"&&nn.ActiveXObject?qd=nn.ActiveXObject:typeof window<"u"&&window.ActiveXObject&&(qd=window.ActiveXObject));!Bi&&rS&&!Uu&&!qd&&(Bi=S2||rS);typeof Bi!="function"&&(Bi=void 0);var wm=function(t,r){if(r&&Gd(r)==="object"){var n="";for(var o in r)n+="&"+encodeURIComponent(o)+"="+encodeURIComponent(r[o]);if(!n)return t;t=t+(t.indexOf("?")!==-1?"&":"?")+n.slice(1)}return t},nS=function(t,r,n){Bi(t,r).then(function(o){if(!o.ok)return n(o.statusText||"Error",{status:o.status});o.text().then(function(a){n(null,{status:o.status,data:a})}).catch(n)}).catch(n)},iS=!1,UF=function(t,r,n,o){t.queryStringParams&&(r=wm(r,t.queryStringParams));var a=mm({},typeof t.customHeaders=="function"?t.customHeaders():t.customHeaders);n&&(a["Content-Type"]="application/json");var l=typeof t.requestOptions=="function"?t.requestOptions(n):t.requestOptions,u=mm({method:n?"POST":"GET",body:n?t.stringify(n):void 0,headers:a},iS?{}:l);try{nS(r,u,o)}catch(d){if(!l||Object.keys(l).length===0||!d.message||d.message.indexOf("not implemented")<0)return o(d);try{Object.keys(l).forEach(function(h){delete u[h]}),nS(r,u,o),iS=!0}catch(h){o(h)}}},KF=function(t,r,n,o){n&&Gd(n)==="object"&&(n=wm("",n).slice(1)),t.queryStringParams&&(r=wm(r,t.queryStringParams));try{var a;Uu?a=new Uu:a=new qd("MSXML2.XMLHTTP.3.0"),a.open(n?"POST":"GET",r,1),t.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!t.withCredentials,n&&a.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var l=t.customHeaders;if(l=typeof l=="function"?l():l,l)for(var u in l)a.setRequestHeader(u,l[u]);a.onreadystatechange=function(){a.readyState>3&&o(a.status>=400?a.statusText:null,{status:a.status,data:a.responseText})},a.send(n)}catch(d){console&&console.log(d)}},GF=function(t,r,n,o){if(typeof n=="function"&&(o=n,n=void 0),o=o||function(){},Bi)return UF(t,r,n,o);if(b2()||typeof ActiveXObject=="function")return KF(t,r,n,o);o(new Error("No fetch and no xhr implementation found!"))};function qF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function VF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function XF(e,t,r){return t&&VF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var QF=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(r){return JSON.parse(r)},stringify:JSON.stringify,parsePayload:function(r,n,o){return YF({},n,o||"")},request:GF,reloadInterval:typeof window<"u"?!1:60*60*1e3,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}},E2=function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};qF(this,e),this.services=t,this.options=r,this.allOptions=n,this.type="backend",this.init(t,r,n)}return XF(e,[{key:"init",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=r,this.options=mm(o,this.options||{},QF()),this.allOptions=a,this.services&&this.options.reloadInterval&&setInterval(function(){return n.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(r,n,o){this._readAny(r,r,n,n,o)}},{key:"read",value:function(r,n,o){this._readAny([r],r,[n],n,o)}},{key:"_readAny",value:function(r,n,o,a,l){var u=this,d=this.options.loadPath;typeof this.options.loadPath=="function"&&(d=this.options.loadPath(r,o)),d=HF(d),d.then(function(h){if(!h)return l(null,{});var g=u.services.interpolator.interpolate(h,{lng:r.join("+"),ns:o.join("+")});u.loadUrl(g,l,n,a)})}},{key:"loadUrl",value:function(r,n,o,a){var l=this;this.options.request(this.options,r,void 0,function(u,d){if(d&&(d.status>=500&&d.status<600||!d.status))return n("failed loading "+r+"; status code: "+d.status,!0);if(d&&d.status>=400&&d.status<500)return n("failed loading "+r+"; status code: "+d.status,!1);if(!d&&u&&u.message&&u.message.indexOf("Failed to fetch")>-1)return n("failed loading "+r+": "+u.message,!0);if(u)return n(u,!1);var h,g;try{typeof d.data=="string"?h=l.options.parse(d.data,o,a):h=d.data}catch{g="failed parsing "+r+" to json"}if(g)return n(g,!1);n(null,h)})}},{key:"create",value:function(r,n,o,a,l){var u=this;if(this.options.addPath){typeof r=="string"&&(r=[r]);var d=this.options.parsePayload(n,o,a),h=0,g=[],m=[];r.forEach(function(w){var x=u.options.addPath;typeof u.options.addPath=="function"&&(x=u.options.addPath(w,n));var C=u.services.interpolator.interpolate(x,{lng:w,ns:n});u.options.request(u.options,C,d,function(j,T){h+=1,g.push(j),m.push(T),h===r.length&&l&&l(g,m)})})}}},{key:"reload",value:function(){var r=this,n=this.services,o=n.backendConnector,a=n.languageUtils,l=n.logger,u=o.language;if(!(u&&u.toLowerCase()==="cimode")){var d=[],h=function(m){var w=a.toResolveHierarchy(m);w.forEach(function(x){d.indexOf(x)<0&&d.push(x)})};h(u),this.allOptions.preload&&this.allOptions.preload.forEach(function(g){return h(g)}),d.forEach(function(g){r.allOptions.ns.forEach(function(m){o.read(g,m,"read",null,null,function(w,x){w&&l.warn("loading namespace ".concat(m," for language ").concat(g," failed"),w),!w&&x&&l.log("loaded namespace ".concat(m," for language ").concat(g),x),o.loaded("".concat(g,"|").concat(m),w,x)})})})}}}]),e}();E2.type="backend";const xc=$F.createInstance();xc.use(E2).use(HR).init({debug:!1,backend:{loadPath:"./locales/{{lng}}.json"},fallbackLng:"en-us",interpolation:{escapeValue:!1},load:"currentOnly"});const Do=()=>({height:100,highlighted:!1,left:0,name:xc.t("store.passageDefaults.name"),selected:!1,tags:[],text:"",top:0,width:100}),rl=()=>({ifid:"",lastUpdate:new Date,passages:[],name:xc.t("store.storyDefaults.name"),script:"",selected:!1,snapToGrid:!0,startPassage:"",storyFormat:"",storyFormatVersion:"",stylesheet:"",tags:[],tagColors:{},zoom:1});function oS(e){return e*e}function zg(e,t){return oS(e[0]-t[0])+oS(e[1]-t[1])}function JF(e,t,r){const n=zg(t,r);if(n===0)return zg(e,t);let o=((e[0]-t[0])*(r[0]-t[0])+(e[1]-t[1])*(r[1]-t[1]))/n;return o=Math.max(0,Math.min(1,o)),zg(e,[t[0]+o*(r[0]-t[0]),t[1]+o*(r[1]-t[1])])}function Ef(e,t,r){return Math.sqrt(JF(e,t,r))<1}const aS=0,C2=1,ZF=2;function e3(e,t,r,n,o){let a=t[0],l=t[1],u=r[0],d=r[1],h=n[0],g=n[1],m=o[0],w=o[1],x,C,j,T,k,P,A,L,R,D,$,B,U;return x=d-l,j=a-u,k=u*l-a*d,R=x*h+j*g+k,D=x*m+j*w+k,R!==0&&D!==0&&(R>=0&&D>=0||R<0&&D<0)||(C=w-g,T=h-m,P=m*g-h*w,A=C*a+T*l+P,L=C*u+T*d+P,A!==0&&L!==0&&(A>=0&&L>=0||A<0&&L<0))?aS:($=x*T-C*j,$===0?ZF:(B=j*P-T*k,U=C*k-x*P,e[0]=(B<0,B/$),e[1]=(U<0,U/$),C2))}function Cf(e,t,r,n,o){const a=e3(e,t,r,n,o);return a===C2?a:Ef(t,n,o)?(e[0]=t[0],e[1]=t[1],!0):Ef(r,n,o)?(e[0]=r[0],e[1]=r[1],!0):Ef(n,t,r)?(e[0]=n[0],e[1]=n[1],!0):Ef(o,t,r)?(e[0]=o[0],e[1]=o[1],!0):!1}function t3(e,t){return Math.atan2(t.top-e.top,t.left-e.left)*180/Math.PI}function r3(e,t){return Math.hypot(e.left-t.left,e.top-t.top)}function sS(e){return{left:e.left+e.width/2,top:e.top+e.height/2}}function Hg(e,t){const r={height:0,left:0,top:0,width:0};return e.left<t.left?(r.left=e.left,r.width=t.left-e.left):(r.left=t.left,r.width=e.left-t.left),e.top<t.top?(r.top=e.top,r.height=t.top-e.top):(r.top=t.top,r.height=e.top-t.top),r}function Nh(e,t){return!(t.left>e.left+e.width||t.left+t.width<e.left||t.top>e.top+e.height||t.top+t.height<e.top)}function lS(e,t,r){const n=[NaN,NaN];return Cf(n,[e.left,e.top],[e.left,e.top+e.height],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:Cf(n,[e.left+e.width,e.top],[e.left+e.width,e.top+e.height],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:Cf(n,[e.left,e.top],[e.left+e.width,e.top],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:Cf(n,[e.left,e.top+e.height],[e.left+e.width,e.top+e.height],[t.left,t.top],[r.left,r.top])?{left:n[0],top:n[1]}:null}function n3(e){if(e.length===0)throw new Error("Can't calculate bounding rect for 0 rects");let t=e[0].left,r=e[0].left+e[0].width,n=e[0].top,o=e[0].top+e[0].height;for(let a=1;a<e.length;a++){const l=e[a].left+e[a].width,u=e[a].top+e[a].height;e[a].left<t&&(t=e[a].left),e[a].top<n&&(n=e[a].top),l>r&&(r=l),u>o&&(o=u)}return{left:t,top:n,height:o-n,width:r-t}}var i3=Ma,o3=i3(Object,"create"),jh=o3,uS=jh;function a3(){this.__data__=uS?uS(null):{},this.size=0}var s3=a3;function l3(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var u3=l3,c3=jh,f3="__lodash_hash_undefined__",d3=Object.prototype,h3=d3.hasOwnProperty;function p3(e){var t=this.__data__;if(c3){var r=t[e];return r===f3?void 0:r}return h3.call(t,e)?t[e]:void 0}var g3=p3,v3=jh,m3=Object.prototype,y3=m3.hasOwnProperty;function w3(e){var t=this.__data__;return v3?t[e]!==void 0:y3.call(t,e)}var b3=w3,x3=jh,S3="__lodash_hash_undefined__";function E3(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=x3&&t===void 0?S3:t,this}var C3=E3,k3=s3,T3=u3,O3=g3,P3=b3,L3=C3;function nl(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}nl.prototype.clear=k3;nl.prototype.delete=T3;nl.prototype.get=O3;nl.prototype.has=P3;nl.prototype.set=L3;var N3=nl;function j3(){this.__data__=[],this.size=0}var A3=j3,M3=Oh;function I3(e,t){for(var r=e.length;r--;)if(M3(e[r][0],t))return r;return-1}var Ah=I3,R3=Ah,_3=Array.prototype,$3=_3.splice;function D3(e){var t=this.__data__,r=R3(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():$3.call(t,r,1),--this.size,!0}var F3=D3,z3=Ah;function H3(e){var t=this.__data__,r=z3(t,e);return r<0?void 0:t[r][1]}var B3=H3,W3=Ah;function U3(e){return W3(this.__data__,e)>-1}var K3=U3,G3=Ah;function q3(e,t){var r=this.__data__,n=G3(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var V3=q3,X3=A3,Y3=F3,Q3=B3,J3=K3,Z3=V3;function il(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}il.prototype.clear=X3;il.prototype.delete=Y3;il.prototype.get=Q3;il.prototype.has=J3;il.prototype.set=Z3;var Mh=il,e4=Ma,t4=yi,r4=e4(t4,"Map"),c0=r4,cS=N3,n4=Mh,i4=c0;function o4(){this.size=0,this.__data__={hash:new cS,map:new(i4||n4),string:new cS}}var a4=o4;function s4(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var l4=s4,u4=l4;function c4(e,t){var r=e.__data__;return u4(t)?r[typeof t=="string"?"string":"hash"]:r.map}var Ih=c4,f4=Ih;function d4(e){var t=f4(this,e).delete(e);return this.size-=t?1:0,t}var h4=d4,p4=Ih;function g4(e){return p4(this,e).get(e)}var v4=g4,m4=Ih;function y4(e){return m4(this,e).has(e)}var w4=y4,b4=Ih;function x4(e,t){var r=b4(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var S4=x4,E4=a4,C4=h4,k4=v4,T4=w4,O4=S4;function ol(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ol.prototype.clear=E4;ol.prototype.delete=C4;ol.prototype.get=k4;ol.prototype.has=T4;ol.prototype.set=O4;var f0=ol,P4="__lodash_hash_undefined__";function L4(e){return this.__data__.set(e,P4),this}var N4=L4;function j4(e){return this.__data__.has(e)}var A4=j4,M4=f0,I4=N4,R4=A4;function Vd(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new M4;++t<r;)this.add(e[t])}Vd.prototype.add=Vd.prototype.push=I4;Vd.prototype.has=R4;var k2=Vd;function _4(e,t,r,n){for(var o=e.length,a=r+(n?1:-1);n?a--:++a<o;)if(t(e[a],a,e))return a;return-1}var $4=_4;function D4(e){return e!==e}var F4=D4;function z4(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}var H4=z4,B4=$4,W4=F4,U4=H4;function K4(e,t,r){return t===t?U4(e,t,r):B4(e,W4,r)}var G4=K4,q4=G4;function V4(e,t){var r=e==null?0:e.length;return!!r&&q4(e,t,0)>-1}var X4=V4;function Y4(e,t,r){for(var n=-1,o=e==null?0:e.length;++n<o;)if(r(t,e[n]))return!0;return!1}var Q4=Y4;function J4(e,t){return e.has(t)}var T2=J4,Z4=Ma,ez=yi,tz=Z4(ez,"Set"),O2=tz;function rz(){}var nz=rz;function iz(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var d0=iz,Bg=O2,oz=nz,az=d0,sz=1/0,lz=Bg&&1/az(new Bg([,-0]))[1]==sz?function(e){return new Bg(e)}:oz,uz=lz,cz=k2,fz=X4,dz=Q4,hz=T2,pz=uz,gz=d0,vz=200;function mz(e,t,r){var n=-1,o=fz,a=e.length,l=!0,u=[],d=u;if(r)l=!1,o=dz;else if(a>=vz){var h=t?null:pz(e);if(h)return gz(h);l=!1,o=hz,d=new cz}else d=t?[]:u;e:for(;++n<a;){var g=e[n],m=t?t(g):g;if(g=r||g!==0?g:0,l&&m===m){for(var w=d.length;w--;)if(d[w]===m)continue e;t&&d.push(m),u.push(g)}else o(d,m,r)||(d!==u&&d.push(m),u.push(g))}return u}var yz=mz,wz=yz;function bz(e){return e&&e.length?wz(e):[]}var xz=bz;const P2=wt(xz),Sz=e=>e.match(/\[\[.*?\]\]/g)||[],Ez=e=>!/^\w+:\/\/\/?\w/i.test(e),Cz=e=>e!=="",kz=e=>{const t=ad(e,"][",0);return t!=null?t:e},Tz=e=>e.substr(2,e.length-4),ad=(e,t,r)=>{const n=e.split(t);if(n.length!==1)return r<0?n[n.length+r]:n[r]},Oz=e=>ad(e,"->",-1)||ad(e,"<-",0)||ad(e,"|",-1)||e;function wa(e,t){let r=P2(Sz(e).map(Tz).map(kz).map(Oz).filter(Cz));return t&&(r=r.filter(Ez)),r}function Pz(e,t,r,n){if(!e.passages.some(o=>o.id===t.id))throw new Error("This passage does not belong to this story.");return o=>{const a=wa(n),l=wa(r).filter(x=>!a.includes(x)&&!e.passages.some(C=>C.name===x));if(l.length===0)return;const u=Do(),d=25;let h=t.top+t.height+d;const g=l.length*u.width+(l.length-1)*d;let m=t.left+(t.width-g)/2;const w=()=>e.passages.some(x=>Nh(x,{left:m,top:h,height:u.height,width:g}));for(;w()&&(m+=u.width+d,!(!w()||(m-=2*(u.width+d),!w())));)m+=u.width+d,h+=u.height+d;o({type:"createPassages",storyId:e.id,props:l.map(x=>{const C={left:m,name:x,top:h};return m+=u.width+d,C})})}}function Lz(e,t,r){const n=yt();if(r.name.trim()==="")throw new Error("Story name cannot be empty");if(e.some(o=>o.name.toLowerCase()===r.name.toLowerCase()))throw new Error('There is already a story named "'.concat(r.name,'"'));return o=>(o({type:"createStory",props:{id:n,storyFormat:t.storyFormat.name,storyFormatVersion:t.storyFormat.version,...r}}),n)}function Ku(e,t){if(t.includes(e)){let r=1;for(;t.includes("".concat(e," ").concat(r));)r++;return"".concat(e," ").concat(r)}return e}function L2(e,t,r){if(!Number.isFinite(t)||!Number.isFinite(r))throw new Error("Center must be a finite coordinate pair");const n=Do(),o=Ku(n.name,e.passages.map(d=>d.name)),a=25,l={height:n.height,left:Math.max(t-n.width/2,0),top:Math.max(r-n.height/2,0),width:n.width};e.snapToGrid&&(l.left=Math.round(l.left/a)*a,l.top=Math.round(l.top/a)*a);const u=()=>e.passages.some(d=>Nh(d,l));for(;u()&&(l.left+=l.width+a,!(!u()||(l.left-=l.width+a,l.top+=l.height+a,!u())));){if(l.left>=l.width+a){if(l.left-=l.width+a,!u())break;l.left+=l.width+a}l.top+=l.height+a}return{type:"createPassage",storyId:e.id,props:{...l,story:e.id,name:o}}}function Nz(e,t){return{type:"deletePassages",storyId:e.id,passageIds:t.map(r=>r.id)}}function jz(e){return{type:"deleteStory",storyId:e.id}}function Az(e,t){const r=yt();return{type:"createStory",props:{...e,id:r,ifid:yt(),name:Ku(e.name,t.map(n=>n.name)),passages:e.passages.map(n=>({...n,id:yt(),story:r}))}}}function Mz(e,t){for(var r=-1,n=e==null?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var N2=Mz,Iz=yc,Rz=bc,_z="[object Symbol]";function $z(e){return typeof e=="symbol"||Rz(e)&&Iz(e)==_z}var Sc=$z,fS=mc,Dz=N2,Fz=Gn,zz=Sc,Hz=1/0,dS=fS?fS.prototype:void 0,hS=dS?dS.toString:void 0;function j2(e){if(typeof e=="string")return e;if(Fz(e))return Dz(e,j2)+"";if(zz(e))return hS?hS.call(e):"";var t=e+"";return t=="0"&&1/e==-Hz?"-0":t}var Bz=j2,Wz=Bz;function Uz(e){return e==null?"":Wz(e)}var h0=Uz,Kz=h0,A2=/[\\^$.*+?()[\]{}|]/g,Gz=RegExp(A2.source);function qz(e){return e=Kz(e),e&&Gz.test(e)?e.replace(A2,"\\$&"):e}var Vz=qz;const M2=wt(Vz);function I2(e,t){return new RegExp(t.useRegexes?e:M2(e),t.matchCase?"g":"gi")}function Xz(e){return e.replace(/\$/g,"$$$$")}function Ki(e){return Array.isArray?Array.isArray(e):$2(e)==="[object Array]"}const Yz=1/0;function Qz(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-Yz?"-0":t}function Jz(e){return e==null?"":Qz(e)}function ui(e){return typeof e=="string"}function R2(e){return typeof e=="number"}function Zz(e){return e===!0||e===!1||eH(e)&&$2(e)=="[object Boolean]"}function _2(e){return typeof e=="object"}function eH(e){return _2(e)&&e!==null}function Jr(e){return e!=null}function Wg(e){return!e.trim().length}function $2(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const tH="Incorrect 'index' type",rH=e=>"Invalid value for key ".concat(e),nH=e=>"Pattern length exceeds max of ".concat(e,"."),iH=e=>"Missing ".concat(e," property in key"),oH=e=>"Property 'weight' in key '".concat(e,"' must be a positive integer"),pS=Object.prototype.hasOwnProperty;class aH{constructor(t){this._keys=[],this._keyMap={};let r=0;t.forEach(n=>{let o=D2(n);r+=o.weight,this._keys.push(o),this._keyMap[o.id]=o,r+=o.weight}),this._keys.forEach(n=>{n.weight/=r})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function D2(e){let t=null,r=null,n=null,o=1,a=null;if(ui(e)||Ki(e))n=e,t=gS(e),r=bm(e);else{if(!pS.call(e,"name"))throw new Error(iH("name"));const l=e.name;if(n=l,pS.call(e,"weight")&&(o=e.weight,o<=0))throw new Error(oH(l));t=gS(l),r=bm(l),a=e.getFn}return{path:t,id:r,weight:o,src:n,getFn:a}}function gS(e){return Ki(e)?e:e.split(".")}function bm(e){return Ki(e)?e.join("."):e}function sH(e,t){let r=[],n=!1;const o=(a,l,u)=>{if(Jr(a))if(!l[u])r.push(a);else{let d=l[u];const h=a[d];if(!Jr(h))return;if(u===l.length-1&&(ui(h)||R2(h)||Zz(h)))r.push(Jz(h));else if(Ki(h)){n=!0;for(let g=0,m=h.length;g<m;g+=1)o(h[g],l,u+1)}else l.length&&o(h,l,u+1)}};return o(e,ui(t)?t.split("."):t,0),n?r:r[0]}const lH={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},uH={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},cH={location:0,threshold:.6,distance:100},fH={useExtendedSearch:!1,getFn:sH,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Ue={...uH,...lH,...cH,...fH};const dH=/[^ ]+/g;function hH(e=1,t=3){const r=new Map,n=Math.pow(10,t);return{get(o){const a=o.match(dH).length;if(r.has(a))return r.get(a);const l=1/Math.pow(a,.5*e),u=parseFloat(Math.round(l*n)/n);return r.set(a,u),u},clear(){r.clear()}}}class p0{constructor({getFn:t=Ue.getFn,fieldNormWeight:r=Ue.fieldNormWeight}={}){this.norm=hH(r,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((r,n)=>{this._keysMap[r.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,ui(this.docs[0])?this.docs.forEach((t,r)=>{this._addString(t,r)}):this.docs.forEach((t,r)=>{this._addObject(t,r)}),this.norm.clear())}add(t){const r=this.size();ui(t)?this._addString(t,r):this._addObject(t,r)}removeAt(t){this.records.splice(t,1);for(let r=t,n=this.size();r<n;r+=1)this.records[r].i-=1}getValueForItemAtKeyId(t,r){return t[this._keysMap[r]]}size(){return this.records.length}_addString(t,r){if(!Jr(t)||Wg(t))return;let n={v:t,i:r,n:this.norm.get(t)};this.records.push(n)}_addObject(t,r){let n={i:r,$:{}};this.keys.forEach((o,a)=>{let l=o.getFn?o.getFn(t):this.getFn(t,o.path);if(Jr(l)){if(Ki(l)){let u=[];const d=[{nestedArrIndex:-1,value:l}];for(;d.length;){const{nestedArrIndex:h,value:g}=d.pop();if(Jr(g))if(ui(g)&&!Wg(g)){let m={v:g,i:h,n:this.norm.get(g)};u.push(m)}else Ki(g)&&g.forEach((m,w)=>{d.push({nestedArrIndex:w,value:m})})}n.$[a]=u}else if(ui(l)&&!Wg(l)){let u={v:l,n:this.norm.get(l)};n.$[a]=u}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function F2(e,t,{getFn:r=Ue.getFn,fieldNormWeight:n=Ue.fieldNormWeight}={}){const o=new p0({getFn:r,fieldNormWeight:n});return o.setKeys(e.map(D2)),o.setSources(t),o.create(),o}function pH(e,{getFn:t=Ue.getFn,fieldNormWeight:r=Ue.fieldNormWeight}={}){const{keys:n,records:o}=e,a=new p0({getFn:t,fieldNormWeight:r});return a.setKeys(n),a.setIndexRecords(o),a}function kf(e,{errors:t=0,currentLocation:r=0,expectedLocation:n=0,distance:o=Ue.distance,ignoreLocation:a=Ue.ignoreLocation}={}){const l=t/e.length;if(a)return l;const u=Math.abs(n-r);return o?l+u/o:u?1:l}function gH(e=[],t=Ue.minMatchCharLength){let r=[],n=-1,o=-1,a=0;for(let l=e.length;a<l;a+=1){let u=e[a];u&&n===-1?n=a:!u&&n!==-1&&(o=a-1,o-n+1>=t&&r.push([n,o]),n=-1)}return e[a-1]&&a-n>=t&&r.push([n,a-1]),r}const ia=32;function vH(e,t,r,{location:n=Ue.location,distance:o=Ue.distance,threshold:a=Ue.threshold,findAllMatches:l=Ue.findAllMatches,minMatchCharLength:u=Ue.minMatchCharLength,includeMatches:d=Ue.includeMatches,ignoreLocation:h=Ue.ignoreLocation}={}){if(t.length>ia)throw new Error(nH(ia));const g=t.length,m=e.length,w=Math.max(0,Math.min(n,m));let x=a,C=w;const j=u>1||d,T=j?Array(m):[];let k;for(;(k=e.indexOf(t,C))>-1;){let $=kf(t,{currentLocation:k,expectedLocation:w,distance:o,ignoreLocation:h});if(x=Math.min($,x),C=k+g,j){let B=0;for(;B<g;)T[k+B]=1,B+=1}}C=-1;let P=[],A=1,L=g+m;const R=1<<g-1;for(let $=0;$<g;$+=1){let B=0,U=L;for(;B<U;)kf(t,{errors:$,currentLocation:w+U,expectedLocation:w,distance:o,ignoreLocation:h})<=x?B=U:L=U,U=Math.floor((L-B)/2+B);L=U;let Y=Math.max(1,w-U+1),V=l?m:Math.min(w+U,m)+g,de=Array(V+2);de[V+1]=(1<<$)-1;for(let _=V;_>=Y;_-=1){let M=_-1,Q=r[e.charAt(M)];if(j&&(T[M]=+!!Q),de[_]=(de[_+1]<<1|1)&Q,$&&(de[_]|=(P[_+1]|P[_])<<1|1|P[_+1]),de[_]&R&&(A=kf(t,{errors:$,currentLocation:M,expectedLocation:w,distance:o,ignoreLocation:h}),A<=x)){if(x=A,C=M,C<=w)break;Y=Math.max(1,2*w-C)}}if(kf(t,{errors:$+1,currentLocation:w,expectedLocation:w,distance:o,ignoreLocation:h})>x)break;P=de}const D={isMatch:C>=0,score:Math.max(.001,A)};if(j){const $=gH(T,u);$.length?d&&(D.indices=$):D.isMatch=!1}return D}function mH(e){let t={};for(let r=0,n=e.length;r<n;r+=1){const o=e.charAt(r);t[o]=(t[o]||0)|1<<n-r-1}return t}class z2{constructor(t,{location:r=Ue.location,threshold:n=Ue.threshold,distance:o=Ue.distance,includeMatches:a=Ue.includeMatches,findAllMatches:l=Ue.findAllMatches,minMatchCharLength:u=Ue.minMatchCharLength,isCaseSensitive:d=Ue.isCaseSensitive,ignoreLocation:h=Ue.ignoreLocation}={}){if(this.options={location:r,threshold:n,distance:o,includeMatches:a,findAllMatches:l,minMatchCharLength:u,isCaseSensitive:d,ignoreLocation:h},this.pattern=d?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const g=(w,x)=>{this.chunks.push({pattern:w,alphabet:mH(w),startIndex:x})},m=this.pattern.length;if(m>ia){let w=0;const x=m%ia,C=m-x;for(;w<C;)g(this.pattern.substr(w,ia),w),w+=ia;if(x){const j=m-ia;g(this.pattern.substr(j),j)}}else g(this.pattern,0)}searchIn(t){const{isCaseSensitive:r,includeMatches:n}=this.options;if(r||(t=t.toLowerCase()),this.pattern===t){let C={isMatch:!0,score:0};return n&&(C.indices=[[0,t.length-1]]),C}const{location:o,distance:a,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let g=[],m=0,w=!1;this.chunks.forEach(({pattern:C,alphabet:j,startIndex:T})=>{const{isMatch:k,score:P,indices:A}=vH(t,C,j,{location:o+T,distance:a,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:n,ignoreLocation:h});k&&(w=!0),m+=P,k&&A&&(g=[...g,...A])});let x={isMatch:w,score:w?m/this.chunks.length:1};return w&&n&&(x.indices=g),x}}class Fo{constructor(t){this.pattern=t}static isMultiMatch(t){return vS(t,this.multiRegex)}static isSingleMatch(t){return vS(t,this.singleRegex)}search(){}}function vS(e,t){const r=e.match(t);return r?r[1]:null}class yH extends Fo{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const r=t===this.pattern;return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class wH extends Fo{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class bH extends Fo{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const r=t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,this.pattern.length-1]}}}class xH extends Fo{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const r=!t.startsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class SH extends Fo{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const r=t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class EH extends Fo{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const r=!t.endsWith(this.pattern);return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class H2 extends Fo{constructor(t,{location:r=Ue.location,threshold:n=Ue.threshold,distance:o=Ue.distance,includeMatches:a=Ue.includeMatches,findAllMatches:l=Ue.findAllMatches,minMatchCharLength:u=Ue.minMatchCharLength,isCaseSensitive:d=Ue.isCaseSensitive,ignoreLocation:h=Ue.ignoreLocation}={}){super(t),this._bitapSearch=new z2(t,{location:r,threshold:n,distance:o,includeMatches:a,findAllMatches:l,minMatchCharLength:u,isCaseSensitive:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class B2 extends Fo{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let r=0,n;const o=[],a=this.pattern.length;for(;(n=t.indexOf(this.pattern,r))>-1;)r=n+a,o.push([n,r-1]);const l=!!o.length;return{isMatch:l,score:l?0:1,indices:o}}}const xm=[yH,B2,bH,xH,EH,SH,wH,H2],mS=xm.length,CH=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,kH="|";function TH(e,t={}){return e.split(kH).map(r=>{let n=r.trim().split(CH).filter(a=>a&&!!a.trim()),o=[];for(let a=0,l=n.length;a<l;a+=1){const u=n[a];let d=!1,h=-1;for(;!d&&++h<mS;){const g=xm[h];let m=g.isMultiMatch(u);m&&(o.push(new g(m,t)),d=!0)}if(!d)for(h=-1;++h<mS;){const g=xm[h];let m=g.isSingleMatch(u);if(m){o.push(new g(m,t));break}}}return o})}const OH=new Set([H2.type,B2.type]);class PH{constructor(t,{isCaseSensitive:r=Ue.isCaseSensitive,includeMatches:n=Ue.includeMatches,minMatchCharLength:o=Ue.minMatchCharLength,ignoreLocation:a=Ue.ignoreLocation,findAllMatches:l=Ue.findAllMatches,location:u=Ue.location,threshold:d=Ue.threshold,distance:h=Ue.distance}={}){this.query=null,this.options={isCaseSensitive:r,includeMatches:n,minMatchCharLength:o,findAllMatches:l,ignoreLocation:a,location:u,threshold:d,distance:h},this.pattern=r?t:t.toLowerCase(),this.query=TH(this.pattern,this.options)}static condition(t,r){return r.useExtendedSearch}searchIn(t){const r=this.query;if(!r)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:o}=this.options;t=o?t:t.toLowerCase();let a=0,l=[],u=0;for(let d=0,h=r.length;d<h;d+=1){const g=r[d];l.length=0,a=0;for(let m=0,w=g.length;m<w;m+=1){const x=g[m],{isMatch:C,indices:j,score:T}=x.search(t);if(C){if(a+=1,u+=T,n){const k=x.constructor.type;OH.has(k)?l=[...l,...j]:l.push(j)}}else{u=0,a=0,l.length=0;break}}if(a){let m={isMatch:!0,score:u/a};return n&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const Sm=[];function LH(...e){Sm.push(...e)}function Em(e,t){for(let r=0,n=Sm.length;r<n;r+=1){let o=Sm[r];if(o.condition(e,t))return new o(e,t)}return new z2(e,t)}const Xd={AND:"$and",OR:"$or"},Cm={PATH:"$path",PATTERN:"$val"},km=e=>!!(e[Xd.AND]||e[Xd.OR]),NH=e=>!!e[Cm.PATH],jH=e=>!Ki(e)&&_2(e)&&!km(e),yS=e=>({[Xd.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function W2(e,t,{auto:r=!0}={}){const n=o=>{let a=Object.keys(o);const l=NH(o);if(!l&&a.length>1&&!km(o))return n(yS(o));if(jH(o)){const d=l?o[Cm.PATH]:a[0],h=l?o[Cm.PATTERN]:o[d];if(!ui(h))throw new Error(rH(d));const g={keyId:bm(d),pattern:h};return r&&(g.searcher=Em(h,t)),g}let u={children:[],operator:a[0]};return a.forEach(d=>{const h=o[d];Ki(h)&&h.forEach(g=>{u.children.push(n(g))})}),u};return km(e)||(e=yS(e)),n(e)}function AH(e,{ignoreFieldNorm:t=Ue.ignoreFieldNorm}){e.forEach(r=>{let n=1;r.matches.forEach(({key:o,norm:a,score:l})=>{const u=o?o.weight:null;n*=Math.pow(l===0&&u?Number.EPSILON:l,(u||1)*(t?1:a))}),r.score=n})}function MH(e,t){const r=e.matches;t.matches=[],Jr(r)&&r.forEach(n=>{if(!Jr(n.indices)||!n.indices.length)return;const{indices:o,value:a}=n;let l={indices:o,value:a};n.key&&(l.key=n.key.src),n.idx>-1&&(l.refIndex=n.idx),t.matches.push(l)})}function IH(e,t){t.score=e.score}function RH(e,t,{includeMatches:r=Ue.includeMatches,includeScore:n=Ue.includeScore}={}){const o=[];return r&&o.push(MH),n&&o.push(IH),e.map(a=>{const{idx:l}=a,u={item:t[l],refIndex:l};return o.length&&o.forEach(d=>{d(a,u)}),u})}class al{constructor(t,r={},n){this.options={...Ue,...r},this.options.useExtendedSearch,this._keyStore=new aH(this.options.keys),this.setCollection(t,n)}setCollection(t,r){if(this._docs=t,r&&!(r instanceof p0))throw new Error(tH);this._myIndex=r||F2(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Jr(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const r=[];for(let n=0,o=this._docs.length;n<o;n+=1){const a=this._docs[n];t(a,n)&&(this.removeAt(n),n-=1,o-=1,r.push(a))}return r}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:r=-1}={}){const{includeMatches:n,includeScore:o,shouldSort:a,sortFn:l,ignoreFieldNorm:u}=this.options;let d=ui(t)?ui(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return AH(d,{ignoreFieldNorm:u}),a&&d.sort(l),R2(r)&&r>-1&&(d=d.slice(0,r)),RH(d,this._docs,{includeMatches:n,includeScore:o})}_searchStringList(t){const r=Em(t,this.options),{records:n}=this._myIndex,o=[];return n.forEach(({v:a,i:l,n:u})=>{if(!Jr(a))return;const{isMatch:d,score:h,indices:g}=r.searchIn(a);d&&o.push({item:a,idx:l,matches:[{score:h,value:a,norm:u,indices:g}]})}),o}_searchLogical(t){const r=W2(t,this.options),n=(u,d,h)=>{if(!u.children){const{keyId:m,searcher:w}=u,x=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(d,m),searcher:w});return x&&x.length?[{idx:h,item:d,matches:x}]:[]}const g=[];for(let m=0,w=u.children.length;m<w;m+=1){const x=u.children[m],C=n(x,d,h);if(C.length)g.push(...C);else if(u.operator===Xd.AND)return[]}return g},o=this._myIndex.records,a={},l=[];return o.forEach(({$:u,i:d})=>{if(Jr(u)){let h=n(r,u,d);h.length&&(a[d]||(a[d]={idx:d,item:u,matches:[]},l.push(a[d])),h.forEach(({matches:g})=>{a[d].matches.push(...g)}))}}),l}_searchObjectList(t){const r=Em(t,this.options),{keys:n,records:o}=this._myIndex,a=[];return o.forEach(({$:l,i:u})=>{if(!Jr(l))return;let d=[];n.forEach((h,g)=>{d.push(...this._findMatches({key:h,value:l[g],searcher:r}))}),d.length&&a.push({idx:u,item:l,matches:d})}),a}_findMatches({key:t,value:r,searcher:n}){if(!Jr(r))return[];let o=[];if(Ki(r))r.forEach(({v:a,i:l,n:u})=>{if(!Jr(a))return;const{isMatch:d,score:h,indices:g}=n.searchIn(a);d&&o.push({score:h,key:t,value:a,idx:l,norm:u,indices:g})});else{const{v:a,n:l}=r,{isMatch:u,score:d,indices:h}=n.searchIn(a);u&&o.push({score:d,key:t,value:a,norm:l,indices:h})}return o}}al.version="6.6.2";al.createIndex=F2;al.parseIndex=pH;al.config=Ue;al.parseQuery=W2;LH(PH);function Fi(e,t,r){const o=st(e,t).passages.find(a=>a.id===r);if(o)return o;throw new Error('There is no passage with ID "'.concat(r,'" in a story with ID "').concat(t,'".'))}function Yd(e,t,r){const o=st(e,t).passages.find(a=>a.name===r);if(o)return o;throw new Error('There is no passage with name "'.concat(r,'" in a story with ID "').concat(t,'".'))}function wS(e,t){const r=t!=null?t:a=>wa(a,!0),n=new Map(e.map(a=>[a.name,a])),o={draggable:{broken:new Set,connections:new Map,self:new Set},fixed:{broken:new Set,connections:new Map,self:new Set}};return e.forEach(a=>r(a.text).forEach(l=>{if(l===a.name)(a.selected?o.draggable:o.fixed).self.add(a);else{const u=n.get(l);if(u){const d=a.selected||u.selected?o.draggable:o.fixed;d.connections.has(a)?d.connections.get(a).add(u):d.connections.set(a,new Set([u]))}else(a.selected?o.draggable:o.fixed).broken.add(a)}})),o}function _H(e,t,r=5){return t.trim()===""?[]:new al(e,{ignoreLocation:!0,keys:[{name:"name",weight:.6},{name:"text",weight:.4}]}).search(t,{limit:r}).map(({item:o})=>o)}function $H(e,t,r){if(t==="")return[];const{includePassageNames:n,matchCase:o,useRegexes:a}=r;let l;try{l=I2(t,{matchCase:o,useRegexes:a})}catch{return[]}return e.reduce((u,d)=>l.test(d.text)||n&&l.test(d.name)?[...u,d]:u,[])}function U2(e){return Array.from(e.passages.reduce((t,r)=>(r.tags&&r.tags.forEach(n=>t.add(n)),t),new Set)).sort()}function DH(e){const t=e.passages.reduce((n,o)=>[...n,...wa(o.text).filter(a=>n.indexOf(a)===-1)],[]);return{brokenLinks:P2(t).filter(n=>!e.passages.some(o=>o.name===n)),links:t,characters:e.passages.reduce((n,o)=>n+o.text.length,0),passages:e.passages.length,words:e.passages.reduce((n,o)=>n+o.text.split(/\s+/).length,0)}}function g0(e){return Array.from(e.reduce((t,r)=>(r.tags&&r.tags.forEach(n=>t.add(n)),t),new Set)).sort()}function st(e,t){const r=e.find(n=>n.id===t);if(r)return r;throw new Error('There is no story with ID "'.concat(t,'".'))}function K2(e,t){const r=e.find(n=>n.name===t);if(r)return r;throw new Error('There is no story with name "'.concat(t,'".'))}function G2(e){return e.text===""&&e.tags.length===0&&e.width===100&&e.height===100}function FH(e,t,r,n){if(!e.passages.some(o=>o.id===t.id))throw new Error("This passage does not belong to this story.");return o=>{const a=wa(n),l=wa(r),d=a.filter(h=>!l.includes(h)).reduce((h,g)=>{const m=e.passages.find(w=>w.name===g);return!m||!G2(m)||e.startPassage===m.id||e.passages.some(w=>w.id!==t.id&&wa(w.text).includes(g))?h:[...h,m.id]},[]);d.length>0&&o({type:"deletePassages",passageIds:d,storyId:e.id})}}function Mo(e,t,r,n={}){if(!e.passages.some(o=>o.id===t.id))throw new Error("This passage does not belong to this story.");if("name"in r&&e.passages.filter(o=>o.name===r.name).some(o=>o.id!==t.id))throw new Error('There is already a passage named "'.concat(r.name,'".'));return(o,a)=>{const l=t.name,u=t.text;if(o({props:r,type:"updatePassage",passageId:t.id,storyId:e.id}),!n.dontUpdateOthers&&r.text){o(FH(e,t,r.text,u));const d=st(a(),e.id);o(Pz(d,t,r.text,u))}if(r.name){const d=M2(l),h=r.name.replace(/\$/g,"$$$$"),g=new RegExp("\\[\\["+d+"(\\]\\[.*?)?\\]\\]","g"),m=new RegExp("\\[\\[(.*?)(\\||->)"+d+"(\\]\\[.*?)?\\]\\]","g"),w=new RegExp("\\[\\["+d+"(<-.*?)(\\]\\[.*?)?\\]\\]","g");e.passages.forEach(x=>{if(g.test(x.text)||m.test(x.text)||w.test(x.text)){let C=x.text;C=C.replace(g,"[["+h+"$1]]"),C=C.replace(m,"[[$1$2"+h+"$3]]"),C=C.replace(w,"[["+h+"$1$2]]"),Mo(e,x,{text:C},n)(o,a)}})}}}function Qd(e,t,r,n){const{matchCase:o,useRegexes:a}=n,l=I2(t,{matchCase:o,useRegexes:a}),u=a?r:Xz(r);return e.replace(l,u)}function zH(e,t,r,n,o){return(a,l)=>{if(r==="")throw new Error("Can't replace an empty string");if(t.story!==e.id)throw new Error("Passage does not belong to story");const{includePassageNames:u}=o,d={},h=Qd(t.text,r,n,o);if(h!==t.text&&(d.text=h),u){const g=Qd(t.name,r,n,o);g!==t.name&&(d.name=g)}Object.keys(d).length>0&&Mo(e,t,d)(a,l)}}function HH(e,t,r,n){return(o,a)=>{if(t==="")throw new Error("Can't replace an empty string");if(n.includePassageNames){for(const l of e.passages){const u=Qd(l.name,t,r,n);u!==l.name&&Mo(e,l,{name:u})(o,a)}for(const l of e.passages){const u=Qd(l.text,t,r,n);u!==l.text&&Mo(e,l,{text:u})(o,a)}}else for(const l of e.passages)zH(e,l,t,r,n)(o,a)}}function bS(e,t){return r=>{const n={};for(const o of e.passages){const a=o.highlighted,l=t.includes(o.id);l!==a&&(n[o.id]={highlighted:l})}Object.keys(n).length>0&&r({passageUpdates:n,type:"updatePassages",storyId:e.id})}}function Fr(e,t=".html"){return e.name.replace(/[^\w. -]/g,"_")+t}function BH(e,t){return e.forEach(r=>{if(e.some(n=>n!==r&&Fr(n)===Fr(r)))throw new Error('Stories to import cannot have the same name: "'.concat(r.name,'"'))}),r=>{e.forEach(n=>{const o={...n};delete o.id;const a=t.find(l=>Fr(l)===Fr(n));a?(o.passages&&(o.passages=o.passages.map(l=>({...l,story:a.id}))),r({props:o,type:"updateStory",storyId:a.id})):r({props:o,type:"createStory"})})}}function WH(e,t,r,n){const o={};if(!Number.isFinite(r)||!Number.isFinite(n))throw new Error("Offset must be a finite number.");return t.forEach(a=>{const l=e.passages.find(h=>h.id===a);if(!l)throw new Error('There is no passage in this story with ID "'.concat(a,'".'));let u=Math.max(l.left+r,0),d=Math.max(l.top+n,0);e.snapToGrid&&(u=Math.round(u/25)*25,d=Math.round(d/25)*25),o[l.id]={left:u,top:d}}),{type:"updatePassages",passageUpdates:o,storyId:e.id}}function sl(e){return e.length>0&&!/\s/.test(e)}function UH(e,t,r){if(!sl(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));return n=>{const o={};if(e.passages.forEach(a=>{a.tags.includes(t)&&(o[a.id]={tags:a.tags.map(l=>l===t?r:l)})}),Object.keys(o).length>0){n({type:"updatePassages",passageUpdates:o,storyId:e.id});const a={...e.tagColors};delete a[t],a[r]=e.tagColors[t],n({type:"updateStory",props:{tagColors:a},storyId:e.id})}}}function KH(e,t,r){if(!sl(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));return n=>{e.forEach(o=>{o.tags.includes(t)&&n({type:"updateStory",storyId:o.id,props:{tags:o.tags.map(a=>a===t?r:a)}})})}}function GH(e,t){if(t.story!==e.id)throw new Error("This passage does not belong to this story");return r=>{t.selected&&r({type:"updatePassage",passageId:t.id,props:{selected:!1},storyId:e.id})}}function qH(e){return t=>{const r={};e.passages.forEach(n=>{n.selected||(r[n.id]={selected:!0})}),Object.keys(r).length>0&&t({passageUpdates:r,type:"updatePassages",storyId:e.id})}}function q2(e,t,r){if(t.story!==e.id)throw new Error("This passage does not belong to this story");return n=>{const o={};t.selected||(o[t.id]={selected:!0}),r&&e.passages.forEach(a=>{a.id!==t.id&&a.selected&&(o[a.id]={selected:!1})}),Object.keys(o).length>0&&n({type:"updatePassages",passageUpdates:o,storyId:e.id})}}function VH(e,t,r=[]){return n=>{const o={};e.passages.forEach(a=>{if(r.find(u=>u===a.id))return;const l=Nh(t,a);a.selected!==l&&(o[a.id]={selected:l})}),Object.keys(o).length>0&&n({type:"updatePassages",passageUpdates:o,storyId:e.id})}}function XH(e){return t=>{e.selected||t({type:"updateStory",storyId:e.id,props:{selected:!1}})}}function YH(){return(e,t)=>{for(const r of t())r.selected&&e({type:"updateStory",storyId:r.id,props:{selected:!1}})}}function QH(e,t){return(r,n)=>{e.selected||r({type:"updateStory",storyId:e.id,props:{selected:!0}});for(const o of n())o.id!==e.id&&o.selected&&r({type:"updateStory",storyId:o.id,props:{selected:!1}})}}function V2(e,t,r){if(!sl(t))throw new Error('"'.concat(t,'" is not a valid tag name.'));return n=>{if(r==="none"){if(t in e.tagColors){const o={...e.tagColors};delete o[t],n({type:"updateStory",props:{tagColors:o},storyId:e.id})}}else n({type:"updateStory",props:{tagColors:{...e.tagColors,[t]:r}},storyId:e.id})}}function JH(e,t,r){if(t.story!==e.id)throw new Error("This passage does not belong to this story.");if(!sl(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));if(t.tags.includes(r))throw new Error('This passage already has the tag "'.concat(r,'".'));return{type:"updatePassage",passageId:t.id,storyId:e.id,props:{tags:[...t.tags,r]}}}function ZH(e,t,r){if(t.story!==e.id)throw new Error("This passage does not belong to this story.");if(!sl(r))throw new Error('"'.concat(r,'" is not a valid tag name.'));if(!t.tags.includes(r))throw new Error('This passage does not have the tag "'.concat(r,'".'));return{type:"updatePassage",passageId:t.id,storyId:e.id,props:{tags:t.tags.filter(n=>n!==r)}}}function Nr(e,t,r){if(r.name&&e.filter(n=>Fr(n)===Fr({...n,...r})).some(n=>n.id!==t.id))throw new Error('There is already a story named "'.concat(r.name,'".'));return{props:r,storyId:t.id,type:"updateStory"}}var X2={exports:{}};(function(e,t){(function(n,o){e.exports=o(E)})(typeof self<"u"?self:tr,function(r){return function(n){var o={};function a(l){if(o[l])return o[l].exports;var u=o[l]={i:l,l:!1,exports:{}};return n[l].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=n,a.c=o,a.d=function(l,u,d){a.o(l,u)||Object.defineProperty(l,u,{enumerable:!0,get:d})},a.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},a.t=function(l,u){if(u&1&&(l=a(l)),u&8||u&4&&typeof l=="object"&&l&&l.__esModule)return l;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:l}),u&2&&typeof l!="string")for(var h in l)a.d(d,h,(function(g){return l[g]}).bind(null,h));return d},a.n=function(l){var u=l&&l.__esModule?function(){return l.default}:function(){return l};return a.d(u,"a",u),u},a.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},a.p="/dist/",a(a.s="./src/thunk-reducer.js")}({"./src/thunk-reducer.js":function(n,o,a){a.r(o),a.d(o,"useThunkReducer",function(){return m});var l=a("react");function u(w,x){return g(w)||h(w,x)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function h(w,x){if(Symbol.iterator in Object(w)||Object.prototype.toString.call(w)==="[object Arguments]"){var C=[],j=!0,T=!1,k=void 0;try{for(var P=w[Symbol.iterator](),A;!(j=(A=P.next()).done)&&(C.push(A.value),!(x&&C.length===x));j=!0);}catch(L){T=!0,k=L}finally{try{!j&&P.return!=null&&P.return()}finally{if(T)throw k}}return C}}function g(w){if(Array.isArray(w))return w}function m(w,x){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(B){return B},j=Object(l.useState)(C(x)),T=u(j,2),k=T[0],P=T[1],A=Object(l.useRef)(k),L=Object(l.useCallback)(function(){return A.current},[A]),R=Object(l.useCallback)(function(B){A.current=B,P(B)},[A,P]),D=Object(l.useCallback)(function(B){return w(L(),B)},[w,L]),$=Object(l.useCallback)(function(B){return typeof B=="function"?B($,L):R(D(B))},[L,R,D]);return[k,$]}o.default=m},react:function(n,o){n.exports=r}})})})(X2);var eB=X2.exports;const v0=wt(eB);function Y2(e,t,r){let n=!1,o=!1;const a=e.map(l=>{if(l.id!==t)return l;if(n=!0,l.passages.some(h=>h.id===r.id))return console.warn('There is already a passage in this story with ID "'.concat(r.id,'", taking no action')),l;if("name"in r&&l.passages.some(h=>h.name===r.name))return console.warn('There is already a passage in this story with name "'.concat(r.name,'", taking no action')),l;const u={...Do(),id:yt(),...r,story:l.id},d={...l,lastUpdate:new Date,passages:[...l.passages,u]};return d.passages.length===1&&(d.startPassage=u.id),o=!0,d});return n?o?a:e:(console.warn('No story in state with ID "'.concat(t,'", taking no action')),e)}function tB(e,t,r){return r.reduce((n,o)=>Y2(n,t,o),e)}function rB(e,t){if("id"in t&&e.some(n=>n.id===t.id))return console.warn('There is already a story in state with ID "'.concat(t.id,'", taking no action')),e;if("name"in t&&e.some(n=>n.name===t.name))return console.warn('There is already a story in state with name "'.concat(t.name,'", taking no action')),e;const r={id:yt(),...rl(),ifid:yt().toUpperCase(),lastUpdate:new Date,passages:[],tags:[],tagColors:{},...t};return r.passages=r.passages.map(n=>({...Do,...n,story:r.id})),[...e,r]}function Q2(e,t,r){let n=!1,o=!1;const a=e.map(l=>{if(l.id!==t)return l;n=!0;const u={...l,passages:l.passages.filter(d=>d.id===r?(o=!0,!1):!0)};return o?(u.lastUpdate=new Date,u):l});return n?o?a:(console.warn('Asked to delete a passage with ID "'.concat(r,'", but it does not exist in story ID ').concat(t,", taking no action")),e):(console.warn('No story in state with ID "'.concat(t,'", taking no action')),e)}function nB(e,t,r){return r.reduce((n,o)=>Q2(n,t,o),e)}function iB(e,t){let r=!1;const n=e.filter(o=>o.id===t?(r=!0,!1):!0);return r?n:(console.warn('Asked to delete a story with ID "'.concat(t,'", but it does not exist in state')),e)}function oB(e,t){return[...t]}var Tm={exports:{}};const aB="2.0.0",J2=256,sB=Number.MAX_SAFE_INTEGER||9007199254740991,lB=16,uB=J2-6,cB=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Rh={MAX_LENGTH:J2,MAX_SAFE_COMPONENT_LENGTH:lB,MAX_SAFE_BUILD_LENGTH:uB,MAX_SAFE_INTEGER:sB,RELEASE_TYPES:cB,SEMVER_SPEC_VERSION:aB,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};function fB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Z2={exports:{}},$t=Z2.exports={},ni,ii;function Om(){throw new Error("setTimeout has not been defined")}function Pm(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ni=setTimeout:ni=Om}catch{ni=Om}try{typeof clearTimeout=="function"?ii=clearTimeout:ii=Pm}catch{ii=Pm}})();function eO(e){if(ni===setTimeout)return setTimeout(e,0);if((ni===Om||!ni)&&setTimeout)return ni=setTimeout,setTimeout(e,0);try{return ni(e,0)}catch{try{return ni.call(null,e,0)}catch{return ni.call(this,e,0)}}}function dB(e){if(ii===clearTimeout)return clearTimeout(e);if((ii===Pm||!ii)&&clearTimeout)return ii=clearTimeout,clearTimeout(e);try{return ii(e)}catch{try{return ii.call(null,e)}catch{return ii.call(this,e)}}}var zi=[],Is=!1,fa,sd=-1;function hB(){!Is||!fa||(Is=!1,fa.length?zi=fa.concat(zi):sd=-1,zi.length&&tO())}function tO(){if(!Is){var e=eO(hB);Is=!0;for(var t=zi.length;t;){for(fa=zi,zi=[];++sd<t;)fa&&fa[sd].run();sd=-1,t=zi.length}fa=null,Is=!1,dB(e)}}$t.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];zi.push(new rO(e,t)),zi.length===1&&!Is&&eO(tO)};function rO(e,t){this.fun=e,this.array=t}rO.prototype.run=function(){this.fun.apply(null,this.array)};$t.title="browser";$t.browser=!0;$t.env={};$t.argv=[];$t.version="";$t.versions={};function Vi(){}$t.on=Vi;$t.addListener=Vi;$t.once=Vi;$t.off=Vi;$t.removeListener=Vi;$t.removeAllListeners=Vi;$t.emit=Vi;$t.prependListener=Vi;$t.prependOnceListener=Vi;$t.listeners=function(e){return[]};$t.binding=function(e){throw new Error("process.binding is not supported")};$t.cwd=function(){return"/"};$t.chdir=function(e){throw new Error("process.chdir is not supported")};$t.umask=function(){return 0};var pB=Z2.exports;const Lm=fB(pB);var Ug={};const gB=typeof Lm=="object"&&Ug&&Ug.NODE_DEBUG&&/\bsemver\b/i.test(Ug.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var _h=gB;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=Rh,a=_h;t=e.exports={};const l=t.re=[],u=t.safeRe=[],d=t.src=[],h=t.t={};let g=0;const m="[a-zA-Z0-9-]",w=[["\\s",1],["\\d",o],[m,n]],x=j=>{for(const[T,k]of w)j=j.split("".concat(T,"*")).join("".concat(T,"{0,").concat(k,"}")).split("".concat(T,"+")).join("".concat(T,"{1,").concat(k,"}"));return j},C=(j,T,k)=>{const P=x(T),A=g++;a(j,A,T),h[j]=A,d[A]=T,l[A]=new RegExp(T,k?"g":void 0),u[A]=new RegExp(P,k?"g":void 0)};C("NUMERICIDENTIFIER","0|[1-9]\\d*"),C("NUMERICIDENTIFIERLOOSE","\\d+"),C("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-]".concat(m,"*")),C("MAINVERSION","(".concat(d[h.NUMERICIDENTIFIER],")\\.")+"(".concat(d[h.NUMERICIDENTIFIER],")\\.")+"(".concat(d[h.NUMERICIDENTIFIER],")")),C("MAINVERSIONLOOSE","(".concat(d[h.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(d[h.NUMERICIDENTIFIERLOOSE],")\\.")+"(".concat(d[h.NUMERICIDENTIFIERLOOSE],")")),C("PRERELEASEIDENTIFIER","(?:".concat(d[h.NUMERICIDENTIFIER],"|").concat(d[h.NONNUMERICIDENTIFIER],")")),C("PRERELEASEIDENTIFIERLOOSE","(?:".concat(d[h.NUMERICIDENTIFIERLOOSE],"|").concat(d[h.NONNUMERICIDENTIFIER],")")),C("PRERELEASE","(?:-(".concat(d[h.PRERELEASEIDENTIFIER],"(?:\\.").concat(d[h.PRERELEASEIDENTIFIER],")*))")),C("PRERELEASELOOSE","(?:-?(".concat(d[h.PRERELEASEIDENTIFIERLOOSE],"(?:\\.").concat(d[h.PRERELEASEIDENTIFIERLOOSE],")*))")),C("BUILDIDENTIFIER","".concat(m,"+")),C("BUILD","(?:\\+(".concat(d[h.BUILDIDENTIFIER],"(?:\\.").concat(d[h.BUILDIDENTIFIER],")*))")),C("FULLPLAIN","v?".concat(d[h.MAINVERSION]).concat(d[h.PRERELEASE],"?").concat(d[h.BUILD],"?")),C("FULL","^".concat(d[h.FULLPLAIN],"$")),C("LOOSEPLAIN","[v=\\s]*".concat(d[h.MAINVERSIONLOOSE]).concat(d[h.PRERELEASELOOSE],"?").concat(d[h.BUILD],"?")),C("LOOSE","^".concat(d[h.LOOSEPLAIN],"$")),C("GTLT","((?:<|>)?=?)"),C("XRANGEIDENTIFIERLOOSE","".concat(d[h.NUMERICIDENTIFIERLOOSE],"|x|X|\\*")),C("XRANGEIDENTIFIER","".concat(d[h.NUMERICIDENTIFIER],"|x|X|\\*")),C("XRANGEPLAIN","[v=\\s]*(".concat(d[h.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(d[h.XRANGEIDENTIFIER],")")+"(?:\\.(".concat(d[h.XRANGEIDENTIFIER],")")+"(?:".concat(d[h.PRERELEASE],")?").concat(d[h.BUILD],"?")+")?)?"),C("XRANGEPLAINLOOSE","[v=\\s]*(".concat(d[h.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(d[h.XRANGEIDENTIFIERLOOSE],")")+"(?:\\.(".concat(d[h.XRANGEIDENTIFIERLOOSE],")")+"(?:".concat(d[h.PRERELEASELOOSE],")?").concat(d[h.BUILD],"?")+")?)?"),C("XRANGE","^".concat(d[h.GTLT],"\\s*").concat(d[h.XRANGEPLAIN],"$")),C("XRANGELOOSE","^".concat(d[h.GTLT],"\\s*").concat(d[h.XRANGEPLAINLOOSE],"$")),C("COERCEPLAIN","(^|[^\\d])(\\d{1,".concat(r,"})")+"(?:\\.(\\d{1,".concat(r,"}))?")+"(?:\\.(\\d{1,".concat(r,"}))?")),C("COERCE","".concat(d[h.COERCEPLAIN],"(?:$|[^\\d])")),C("COERCEFULL",d[h.COERCEPLAIN]+"(?:".concat(d[h.PRERELEASE],")?")+"(?:".concat(d[h.BUILD],")?")+"(?:$|[^\\d])"),C("COERCERTL",d[h.COERCE],!0),C("COERCERTLFULL",d[h.COERCEFULL],!0),C("LONETILDE","(?:~>?)"),C("TILDETRIM","(\\s*)".concat(d[h.LONETILDE],"\\s+"),!0),t.tildeTrimReplace="$1~",C("TILDE","^".concat(d[h.LONETILDE]).concat(d[h.XRANGEPLAIN],"$")),C("TILDELOOSE","^".concat(d[h.LONETILDE]).concat(d[h.XRANGEPLAINLOOSE],"$")),C("LONECARET","(?:\\^)"),C("CARETTRIM","(\\s*)".concat(d[h.LONECARET],"\\s+"),!0),t.caretTrimReplace="$1^",C("CARET","^".concat(d[h.LONECARET]).concat(d[h.XRANGEPLAIN],"$")),C("CARETLOOSE","^".concat(d[h.LONECARET]).concat(d[h.XRANGEPLAINLOOSE],"$")),C("COMPARATORLOOSE","^".concat(d[h.GTLT],"\\s*(").concat(d[h.LOOSEPLAIN],")$|^$")),C("COMPARATOR","^".concat(d[h.GTLT],"\\s*(").concat(d[h.FULLPLAIN],")$|^$")),C("COMPARATORTRIM","(\\s*)".concat(d[h.GTLT],"\\s*(").concat(d[h.LOOSEPLAIN],"|").concat(d[h.XRANGEPLAIN],")"),!0),t.comparatorTrimReplace="$1$2$3",C("HYPHENRANGE","^\\s*(".concat(d[h.XRANGEPLAIN],")")+"\\s+-\\s+"+"(".concat(d[h.XRANGEPLAIN],")")+"\\s*$"),C("HYPHENRANGELOOSE","^\\s*(".concat(d[h.XRANGEPLAINLOOSE],")")+"\\s+-\\s+"+"(".concat(d[h.XRANGEPLAINLOOSE],")")+"\\s*$"),C("STAR","(<|>)?=?\\s*\\*"),C("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),C("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Tm,Tm.exports);var Ec=Tm.exports;const vB=Object.freeze({loose:!0}),mB=Object.freeze({}),yB=e=>e?typeof e!="object"?vB:e:mB;var m0=yB;const xS=/^[0-9]+$/,nO=(e,t)=>{const r=xS.test(e),n=xS.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},wB=(e,t)=>nO(t,e);var iO={compareIdentifiers:nO,rcompareIdentifiers:wB};const Tf=_h,{MAX_LENGTH:SS,MAX_SAFE_INTEGER:Of}=Rh,{safeRe:ES,t:CS}=Ec,bB=m0,{compareIdentifiers:ds}=iO;let xB=class ri{constructor(t,r){if(r=bB(r),t instanceof ri){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError('Invalid version. Must be a string. Got type "'.concat(typeof t,'".'));if(t.length>SS)throw new TypeError("version is longer than ".concat(SS," characters"));Tf("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;const n=t.trim().match(r.loose?ES[CS.LOOSE]:ES[CS.FULL]);if(!n)throw new TypeError("Invalid Version: ".concat(t));if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Of||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Of||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Of||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const a=+o;if(a>=0&&a<Of)return a}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version="".concat(this.major,".").concat(this.minor,".").concat(this.patch),this.prerelease.length&&(this.version+="-".concat(this.prerelease.join("."))),this.version}toString(){return this.version}compare(t){if(Tf("SemVer.compare",this.version,this.options,t),!(t instanceof ri)){if(typeof t=="string"&&t===this.version)return 0;t=new ri(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ri||(t=new ri(t,this.options)),ds(this.major,t.major)||ds(this.minor,t.minor)||ds(this.patch,t.patch)}comparePre(t){if(t instanceof ri||(t=new ri(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(Tf("prerelease compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return ds(n,o)}while(++r)}compareBuild(t){t instanceof ri||(t=new ri(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(Tf("build compare",r,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return ds(n,o)}while(++r)}inc(t,r,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(n)?1:0;if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let a=this.prerelease.length;for(;--a>=0;)typeof this.prerelease[a]=="number"&&(this.prerelease[a]++,a=-2);if(a===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(r){let a=[r,o];n===!1&&(a=[r]),ds(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=a):this.prerelease=a}break}default:throw new Error("invalid increment argument: ".concat(t))}return this.raw=this.format(),this.build.length&&(this.raw+="+".concat(this.build.join("."))),this}};var Mr=xB;const kS=Mr,SB=(e,t,r=!1)=>{if(e instanceof kS)return e;try{return new kS(e,t)}catch(n){if(!r)return null;throw n}};var ll=SB;const EB=ll,CB=(e,t)=>{const r=EB(e,t);return r?r.version:null};var kB=CB;const TB=ll,OB=(e,t)=>{const r=TB(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var PB=OB;const TS=Mr,LB=(e,t,r,n,o)=>{typeof r=="string"&&(o=n,n=r,r=void 0);try{return new TS(e instanceof TS?e.version:e,r).inc(t,n,o).version}catch{return null}};var NB=LB;const OS=ll,jB=(e,t)=>{const r=OS(e,null,!0),n=OS(t,null,!0),o=r.compare(n);if(o===0)return null;const a=o>0,l=a?r:n,u=a?n:r,d=!!l.prerelease.length;if(!!u.prerelease.length&&!d)return!u.patch&&!u.minor?"major":l.patch?"patch":l.minor?"minor":"major";const g=d?"pre":"";return r.major!==n.major?g+"major":r.minor!==n.minor?g+"minor":r.patch!==n.patch?g+"patch":"prerelease"};var AB=jB;const MB=Mr,IB=(e,t)=>new MB(e,t).major;var RB=IB;const _B=Mr,$B=(e,t)=>new _B(e,t).minor;var DB=$B;const FB=Mr,zB=(e,t)=>new FB(e,t).patch;var HB=zB;const BB=ll,WB=(e,t)=>{const r=BB(e,t);return r&&r.prerelease.length?r.prerelease:null};var UB=WB;const PS=Mr,KB=(e,t,r)=>new PS(e,r).compare(new PS(t,r));var qn=KB;const GB=qn,qB=(e,t,r)=>GB(t,e,r);var VB=qB;const XB=qn,YB=(e,t)=>XB(e,t,!0);var QB=YB;const LS=Mr,JB=(e,t,r)=>{const n=new LS(e,r),o=new LS(t,r);return n.compare(o)||n.compareBuild(o)};var y0=JB;const ZB=y0,e6=(e,t)=>e.sort((r,n)=>ZB(r,n,t));var t6=e6;const r6=y0,n6=(e,t)=>e.sort((r,n)=>r6(n,r,t));var i6=n6;const o6=qn,a6=(e,t,r)=>o6(e,t,r)>0;var $h=a6;const s6=qn,l6=(e,t,r)=>s6(e,t,r)<0;var Dh=l6;const oO=wt(Dh),u6=qn,c6=(e,t,r)=>u6(e,t,r)===0;var aO=c6;const f6=qn,d6=(e,t,r)=>f6(e,t,r)!==0;var sO=d6;const h6=qn,p6=(e,t,r)=>h6(e,t,r)>=0;var w0=p6;const g6=qn,v6=(e,t,r)=>g6(e,t,r)<=0;var b0=v6;const m6=aO,y6=sO,w6=$h,b6=w0,x6=Dh,S6=b0,E6=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return m6(e,r,n);case"!=":return y6(e,r,n);case">":return w6(e,r,n);case">=":return b6(e,r,n);case"<":return x6(e,r,n);case"<=":return S6(e,r,n);default:throw new TypeError("Invalid operator: ".concat(t))}};var lO=E6;const C6=Mr,k6=ll,{safeRe:Pf,t:Lf}=Ec,T6=(e,t)=>{if(e instanceof C6)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?Pf[Lf.COERCEFULL]:Pf[Lf.COERCE]);else{const d=t.includePrerelease?Pf[Lf.COERCERTLFULL]:Pf[Lf.COERCERTL];let h;for(;(h=d.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||h.index+h[0].length!==r.index+r[0].length)&&(r=h),d.lastIndex=h.index+h[1].length+h[2].length;d.lastIndex=-1}if(r===null)return null;const n=r[2],o=r[3]||"0",a=r[4]||"0",l=t.includePrerelease&&r[5]?"-".concat(r[5]):"",u=t.includePrerelease&&r[6]?"+".concat(r[6]):"";return k6("".concat(n,".").concat(o,".").concat(a).concat(l).concat(u),t)};var O6=T6;class P6{constructor(){this.max=1e3,this.map=new Map}get(t){const r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(t,r)}return this}}var L6=P6,Kg,NS;function Vn(){if(NS)return Kg;NS=1;class e{constructor(_,M){if(M=n(M),_ instanceof e)return _.loose===!!M.loose&&_.includePrerelease===!!M.includePrerelease?_:new e(_.raw,M);if(_ instanceof o)return this.raw=_.value,this.set=[[_]],this.format(),this;if(this.options=M,this.loose=!!M.loose,this.includePrerelease=!!M.includePrerelease,this.raw=_.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(Q=>this.parseRange(Q.trim())).filter(Q=>Q.length),!this.set.length)throw new TypeError("Invalid SemVer Range: ".concat(this.raw));if(this.set.length>1){const Q=this.set[0];if(this.set=this.set.filter(oe=>!C(oe[0])),this.set.length===0)this.set=[Q];else if(this.set.length>1){for(const oe of this.set)if(oe.length===1&&j(oe[0])){this.set=[oe];break}}}this.format()}format(){return this.range=this.set.map(_=>_.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(_){const Q=((this.options.includePrerelease&&w)|(this.options.loose&&x))+":"+_,oe=r.get(Q);if(oe)return oe;const re=this.options.loose,X=re?u[d.HYPHENRANGELOOSE]:u[d.HYPHENRANGE];_=_.replace(X,V(this.options.includePrerelease)),a("hyphen replace",_),_=_.replace(u[d.COMPARATORTRIM],h),a("comparator trim",_),_=_.replace(u[d.TILDETRIM],g),a("tilde trim",_),_=_.replace(u[d.CARETTRIM],m),a("caret trim",_);let ie=_.split(" ").map(Z=>k(Z,this.options)).join(" ").split(/\s+/).map(Z=>Y(Z,this.options));re&&(ie=ie.filter(Z=>(a("loose invalid filter",Z,this.options),!!Z.match(u[d.COMPARATORLOOSE])))),a("range list",ie);const ue=new Map,he=ie.map(Z=>new o(Z,this.options));for(const Z of he){if(C(Z))return[Z];ue.set(Z.value,Z)}ue.size>1&&ue.has("")&&ue.delete("");const Se=[...ue.values()];return r.set(Q,Se),Se}intersects(_,M){if(!(_ instanceof e))throw new TypeError("a Range is required");return this.set.some(Q=>T(Q,M)&&_.set.some(oe=>T(oe,M)&&Q.every(re=>oe.every(X=>re.intersects(X,M)))))}test(_){if(!_)return!1;if(typeof _=="string")try{_=new l(_,this.options)}catch{return!1}for(let M=0;M<this.set.length;M++)if(de(this.set[M],_,this.options))return!0;return!1}}Kg=e;const t=L6,r=new t,n=m0,o=Fh(),a=_h,l=Mr,{safeRe:u,t:d,comparatorTrimReplace:h,tildeTrimReplace:g,caretTrimReplace:m}=Ec,{FLAG_INCLUDE_PRERELEASE:w,FLAG_LOOSE:x}=Rh,C=W=>W.value==="<0.0.0-0",j=W=>W.value==="",T=(W,_)=>{let M=!0;const Q=W.slice();let oe=Q.pop();for(;M&&Q.length;)M=Q.every(re=>oe.intersects(re,_)),oe=Q.pop();return M},k=(W,_)=>(a("comp",W,_),W=R(W,_),a("caret",W),W=A(W,_),a("tildes",W),W=$(W,_),a("xrange",W),W=U(W,_),a("stars",W),W),P=W=>!W||W.toLowerCase()==="x"||W==="*",A=(W,_)=>W.trim().split(/\s+/).map(M=>L(M,_)).join(" "),L=(W,_)=>{const M=_.loose?u[d.TILDELOOSE]:u[d.TILDE];return W.replace(M,(Q,oe,re,X,ie)=>{a("tilde",W,Q,oe,re,X,ie);let ue;return P(oe)?ue="":P(re)?ue=">=".concat(oe,".0.0 <").concat(+oe+1,".0.0-0"):P(X)?ue=">=".concat(oe,".").concat(re,".0 <").concat(oe,".").concat(+re+1,".0-0"):ie?(a("replaceTilde pr",ie),ue=">=".concat(oe,".").concat(re,".").concat(X,"-").concat(ie," <").concat(oe,".").concat(+re+1,".0-0")):ue=">=".concat(oe,".").concat(re,".").concat(X," <").concat(oe,".").concat(+re+1,".0-0"),a("tilde return",ue),ue})},R=(W,_)=>W.trim().split(/\s+/).map(M=>D(M,_)).join(" "),D=(W,_)=>{a("caret",W,_);const M=_.loose?u[d.CARETLOOSE]:u[d.CARET],Q=_.includePrerelease?"-0":"";return W.replace(M,(oe,re,X,ie,ue)=>{a("caret",W,oe,re,X,ie,ue);let he;return P(re)?he="":P(X)?he=">=".concat(re,".0.0").concat(Q," <").concat(+re+1,".0.0-0"):P(ie)?re==="0"?he=">=".concat(re,".").concat(X,".0").concat(Q," <").concat(re,".").concat(+X+1,".0-0"):he=">=".concat(re,".").concat(X,".0").concat(Q," <").concat(+re+1,".0.0-0"):ue?(a("replaceCaret pr",ue),re==="0"?X==="0"?he=">=".concat(re,".").concat(X,".").concat(ie,"-").concat(ue," <").concat(re,".").concat(X,".").concat(+ie+1,"-0"):he=">=".concat(re,".").concat(X,".").concat(ie,"-").concat(ue," <").concat(re,".").concat(+X+1,".0-0"):he=">=".concat(re,".").concat(X,".").concat(ie,"-").concat(ue," <").concat(+re+1,".0.0-0")):(a("no pr"),re==="0"?X==="0"?he=">=".concat(re,".").concat(X,".").concat(ie).concat(Q," <").concat(re,".").concat(X,".").concat(+ie+1,"-0"):he=">=".concat(re,".").concat(X,".").concat(ie).concat(Q," <").concat(re,".").concat(+X+1,".0-0"):he=">=".concat(re,".").concat(X,".").concat(ie," <").concat(+re+1,".0.0-0")),a("caret return",he),he})},$=(W,_)=>(a("replaceXRanges",W,_),W.split(/\s+/).map(M=>B(M,_)).join(" ")),B=(W,_)=>{W=W.trim();const M=_.loose?u[d.XRANGELOOSE]:u[d.XRANGE];return W.replace(M,(Q,oe,re,X,ie,ue)=>{a("xRange",W,Q,oe,re,X,ie,ue);const he=P(re),Se=he||P(X),Z=Se||P(ie),ae=Z;return oe==="="&&ae&&(oe=""),ue=_.includePrerelease?"-0":"",he?oe===">"||oe==="<"?Q="<0.0.0-0":Q="*":oe&&ae?(Se&&(X=0),ie=0,oe===">"?(oe=">=",Se?(re=+re+1,X=0,ie=0):(X=+X+1,ie=0)):oe==="<="&&(oe="<",Se?re=+re+1:X=+X+1),oe==="<"&&(ue="-0"),Q="".concat(oe+re,".").concat(X,".").concat(ie).concat(ue)):Se?Q=">=".concat(re,".0.0").concat(ue," <").concat(+re+1,".0.0-0"):Z&&(Q=">=".concat(re,".").concat(X,".0").concat(ue," <").concat(re,".").concat(+X+1,".0-0")),a("xRange return",Q),Q})},U=(W,_)=>(a("replaceStars",W,_),W.trim().replace(u[d.STAR],"")),Y=(W,_)=>(a("replaceGTE0",W,_),W.trim().replace(u[_.includePrerelease?d.GTE0PRE:d.GTE0],"")),V=W=>(_,M,Q,oe,re,X,ie,ue,he,Se,Z,ae)=>(P(Q)?M="":P(oe)?M=">=".concat(Q,".0.0").concat(W?"-0":""):P(re)?M=">=".concat(Q,".").concat(oe,".0").concat(W?"-0":""):X?M=">=".concat(M):M=">=".concat(M).concat(W?"-0":""),P(he)?ue="":P(Se)?ue="<".concat(+he+1,".0.0-0"):P(Z)?ue="<".concat(he,".").concat(+Se+1,".0-0"):ae?ue="<=".concat(he,".").concat(Se,".").concat(Z,"-").concat(ae):W?ue="<".concat(he,".").concat(Se,".").concat(+Z+1,"-0"):ue="<=".concat(ue),"".concat(M," ").concat(ue).trim()),de=(W,_,M)=>{for(let Q=0;Q<W.length;Q++)if(!W[Q].test(_))return!1;if(_.prerelease.length&&!M.includePrerelease){for(let Q=0;Q<W.length;Q++)if(a(W[Q].semver),W[Q].semver!==o.ANY&&W[Q].semver.prerelease.length>0){const oe=W[Q].semver;if(oe.major===_.major&&oe.minor===_.minor&&oe.patch===_.patch)return!0}return!1}return!0};return Kg}var Gg,jS;function Fh(){if(jS)return Gg;jS=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(g,m){if(m=r(m),g instanceof t){if(g.loose===!!m.loose)return g;g=g.value}g=g.trim().split(/\s+/).join(" "),l("comparator",g,m),this.options=m,this.loose=!!m.loose,this.parse(g),this.semver===e?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(g){const m=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],w=g.match(m);if(!w)throw new TypeError("Invalid comparator: ".concat(g));this.operator=w[1]!==void 0?w[1]:"",this.operator==="="&&(this.operator=""),w[2]?this.semver=new u(w[2],this.options.loose):this.semver=e}toString(){return this.value}test(g){if(l("Comparator.test",g,this.options.loose),this.semver===e||g===e)return!0;if(typeof g=="string")try{g=new u(g,this.options)}catch{return!1}return a(g,this.operator,this.semver,this.options)}intersects(g,m){if(!(g instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new d(g.value,m).test(this.value):g.operator===""?g.value===""?!0:new d(this.value,m).test(g.semver):(m=r(m),m.includePrerelease&&(this.value==="<0.0.0-0"||g.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||g.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&g.operator.startsWith(">")||this.operator.startsWith("<")&&g.operator.startsWith("<")||this.semver.version===g.semver.version&&this.operator.includes("=")&&g.operator.includes("=")||a(this.semver,"<",g.semver,m)&&this.operator.startsWith(">")&&g.operator.startsWith("<")||a(this.semver,">",g.semver,m)&&this.operator.startsWith("<")&&g.operator.startsWith(">")))}}Gg=t;const r=m0,{safeRe:n,t:o}=Ec,a=lO,l=_h,u=Mr,d=Vn();return Gg}const N6=Vn(),j6=(e,t,r)=>{try{t=new N6(t,r)}catch{return!1}return t.test(e)};var zh=j6;const A6=Vn(),M6=(e,t)=>new A6(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));var I6=M6;const R6=Mr,_6=Vn(),$6=(e,t,r)=>{let n=null,o=null,a=null;try{a=new _6(t,r)}catch{return null}return e.forEach(l=>{a.test(l)&&(!n||o.compare(l)===-1)&&(n=l,o=new R6(n,r))}),n};var D6=$6;const F6=Mr,z6=Vn(),H6=(e,t,r)=>{let n=null,o=null,a=null;try{a=new z6(t,r)}catch{return null}return e.forEach(l=>{a.test(l)&&(!n||o.compare(l)===1)&&(n=l,o=new F6(n,r))}),n};var B6=H6;const qg=Mr,W6=Vn(),AS=$h,U6=(e,t)=>{e=new W6(e,t);let r=new qg("0.0.0");if(e.test(r)||(r=new qg("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){const o=e.set[n];let a=null;o.forEach(l=>{const u=new qg(l.semver.version);switch(l.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!a||AS(u,a))&&(a=u);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: ".concat(l.operator))}}),a&&(!r||AS(r,a))&&(r=a)}return r&&e.test(r)?r:null};var K6=U6;const G6=Vn(),q6=(e,t)=>{try{return new G6(e,t).range||"*"}catch{return null}};var V6=q6;const X6=Mr,uO=Fh(),{ANY:Y6}=uO,Q6=Vn(),J6=zh,MS=$h,IS=Dh,Z6=b0,e5=w0,t5=(e,t,r,n)=>{e=new X6(e,n),t=new Q6(t,n);let o,a,l,u,d;switch(r){case">":o=MS,a=Z6,l=IS,u=">",d=">=";break;case"<":o=IS,a=e5,l=MS,u="<",d="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(J6(e,t,n))return!1;for(let h=0;h<t.set.length;++h){const g=t.set[h];let m=null,w=null;if(g.forEach(x=>{x.semver===Y6&&(x=new uO(">=0.0.0")),m=m||x,w=w||x,o(x.semver,m.semver,n)?m=x:l(x.semver,w.semver,n)&&(w=x)}),m.operator===u||m.operator===d||(!w.operator||w.operator===u)&&a(e,w.semver))return!1;if(w.operator===d&&l(e,w.semver))return!1}return!0};var x0=t5;const r5=x0,n5=(e,t,r)=>r5(e,t,">",r);var i5=n5;const o5=x0,a5=(e,t,r)=>o5(e,t,"<",r);var s5=a5;const RS=Vn(),l5=(e,t,r)=>(e=new RS(e,r),t=new RS(t,r),e.intersects(t,r));var u5=l5;const c5=zh,f5=qn;var d5=(e,t,r)=>{const n=[];let o=null,a=null;const l=e.sort((g,m)=>f5(g,m,r));for(const g of l)c5(g,t,r)?(a=g,o||(o=g)):(a&&n.push([o,a]),a=null,o=null);o&&n.push([o,null]);const u=[];for(const[g,m]of n)g===m?u.push(g):!m&&g===l[0]?u.push("*"):m?g===l[0]?u.push("<=".concat(m)):u.push("".concat(g," - ").concat(m)):u.push(">=".concat(g));const d=u.join(" || "),h=typeof t.raw=="string"?t.raw:String(t);return d.length<h.length?d:t};const _S=Vn(),S0=Fh(),{ANY:Vg}=S0,tu=zh,E0=qn,h5=(e,t,r={})=>{if(e===t)return!0;e=new _S(e,r),t=new _S(t,r);let n=!1;e:for(const o of e.set){for(const a of t.set){const l=g5(o,a,r);if(n=n||l!==null,l)continue e}if(n)return!1}return!0},p5=[new S0(">=0.0.0-0")],$S=[new S0(">=0.0.0")],g5=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Vg){if(t.length===1&&t[0].semver===Vg)return!0;r.includePrerelease?e=p5:e=$S}if(t.length===1&&t[0].semver===Vg){if(r.includePrerelease)return!0;t=$S}const n=new Set;let o,a;for(const x of e)x.operator===">"||x.operator===">="?o=DS(o,x,r):x.operator==="<"||x.operator==="<="?a=FS(a,x,r):n.add(x.semver);if(n.size>1)return null;let l;if(o&&a){if(l=E0(o.semver,a.semver,r),l>0)return null;if(l===0&&(o.operator!==">="||a.operator!=="<="))return null}for(const x of n){if(o&&!tu(x,String(o),r)||a&&!tu(x,String(a),r))return null;for(const C of t)if(!tu(x,String(C),r))return!1;return!0}let u,d,h,g,m=a&&!r.includePrerelease&&a.semver.prerelease.length?a.semver:!1,w=o&&!r.includePrerelease&&o.semver.prerelease.length?o.semver:!1;m&&m.prerelease.length===1&&a.operator==="<"&&m.prerelease[0]===0&&(m=!1);for(const x of t){if(g=g||x.operator===">"||x.operator===">=",h=h||x.operator==="<"||x.operator==="<=",o){if(w&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===w.major&&x.semver.minor===w.minor&&x.semver.patch===w.patch&&(w=!1),x.operator===">"||x.operator===">="){if(u=DS(o,x,r),u===x&&u!==o)return!1}else if(o.operator===">="&&!tu(o.semver,String(x),r))return!1}if(a){if(m&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===m.major&&x.semver.minor===m.minor&&x.semver.patch===m.patch&&(m=!1),x.operator==="<"||x.operator==="<="){if(d=FS(a,x,r),d===x&&d!==a)return!1}else if(a.operator==="<="&&!tu(a.semver,String(x),r))return!1}if(!x.operator&&(a||o)&&l!==0)return!1}return!(o&&h&&!a&&l!==0||a&&g&&!o&&l!==0||w||m)},DS=(e,t,r)=>{if(!e)return t;const n=E0(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},FS=(e,t,r)=>{if(!e)return t;const n=E0(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};var v5=h5;const Xg=Ec,zS=Rh,m5=Mr,HS=iO,y5=ll,w5=kB,b5=PB,x5=NB,S5=AB,E5=RB,C5=DB,k5=HB,T5=UB,O5=qn,P5=VB,L5=QB,N5=y0,j5=t6,A5=i6,M5=$h,I5=Dh,R5=aO,_5=sO,$5=w0,D5=b0,F5=lO,z5=O6,H5=Fh(),B5=Vn(),W5=zh,U5=I6,K5=D6,G5=B6,q5=K6,V5=V6,X5=x0,Y5=i5,Q5=s5,J5=u5,Z5=d5,eW=v5;var C0={parse:y5,valid:w5,clean:b5,inc:x5,diff:S5,major:E5,minor:C5,patch:k5,prerelease:T5,compare:O5,rcompare:P5,compareLoose:L5,compareBuild:N5,sort:j5,rsort:A5,gt:M5,lt:I5,eq:R5,neq:_5,gte:$5,lte:D5,cmp:F5,coerce:z5,Comparator:H5,Range:B5,satisfies:W5,toComparators:U5,maxSatisfying:K5,minSatisfying:G5,minVersion:q5,validRange:V5,outside:X5,gtr:Y5,ltr:Q5,intersects:J5,simplifyRange:Z5,subset:eW,SemVer:m5,re:Xg.re,src:Xg.src,tokens:Xg.t,SEMVER_SPEC_VERSION:zS.SEMVER_SPEC_VERSION,RELEASE_TYPES:zS.RELEASE_TYPES,compareIdentifiers:HS.compareIdentifiers,rcompareIdentifiers:HS.rcompareIdentifiers};function hs(e,t,r,n){let o='Repairing passage (name: "'.concat(e.name,'", id: ').concat(e.id,"): setting ").concat(t," to ").concat(r,", was ").concat(e[t]);n&&(o+=" (".concat(n,")")),console.info(o)}function tW(e,t){const r=Do(),n={};if(typeof e.id!="string"||e.id===""){const o=yt();hs(e,"id",o,"was undefined or empty string"),n.id=o}for(const o in r){const a=r[o],l=o;(typeof a=="number"&&!Number.isFinite(e[l])||typeof a!=typeof e[l])&&(hs(e,l,r[l]),n[l]=r[l])}for(const o of["left","top"]){const a=o;typeof e[a]=="number"&&e[a]<0&&(hs(e,a,0,"was negative"),n[a]=0)}for(const o of["height","width"]){const a=o;typeof e[a]=="number"&&e[a]<5&&(hs(e,a,0,"was less than 5"),n[a]=5)}if(e.story!==t.id&&(hs(e,"story",t.id,"didn't match parent story"),n.story=t.id),t.passages.some(o=>o===e?!1:o.id===e.id)){const o=yt();hs(e,"id",o,"conflicted with another passage in the story"),n.id=o}return Object.keys(n).length>0?{...e,...n}:e}function ti(e,t,r,n){let o='Repairing story (name: "'.concat(e.name,'", id: ').concat(e.id,") by setting ").concat(t," to ").concat(r,", was ").concat(e[t]);n&&(o+=" (".concat(n,")")),console.info(o)}function rW(e,t,r,n){const o=rl(),a={};if(typeof e.id!="string"||e.id===""){const d=yt();ti(e,"id",d,"was bad type or empty string"),a.id=d}if(typeof e.ifid!="string"||e.id===""){const d=yt();ti(e,"ifid",d,"was bad type or empty string"),a.ifid=d}for(const d in o){const h=d,g=o[h];(typeof g=="number"&&!Number.isFinite(e[h])||typeof g!=typeof e[h])&&(ti(e,h,o[h]),a[h]=o[h])}if(typeof e.storyFormat!="string"||e.storyFormat===""||typeof e.storyFormatVersion!="string"||e.storyFormatVersion==="")ti(e,"storyFormat",n.name,"was bad type or unset"),ti(e,"storyFormatVersion",n.version,"was bad type or unset"),a.storyFormat=n.name,a.storyFormatVersion=n.version;else if(!r.some(d=>d.name===e.storyFormat&&d.version===e.storyFormatVersion)){const d=r.find(h=>h.name===e.storyFormat&&C0.satisfies(h.version,"^"+e.storyFormatVersion));d?(ti(e,"storyFormat",d.name,"no match in existing formats but found one that satisfies semver"),ti(e,"storyFormatVersion",d.version,"no match in existing formats but found one that satisfies semver"),a.storyFormat=d.name,a.storyFormatVersion=d.version):(ti(e,"storyFormat",n.name,"no match in existing formats and could not find one that satisfies semver"),ti(e,"storyFormatVersion",n.version,"no match in existing formats and could not find one that satisfies semver"),a.storyFormat=n.name,a.storyFormatVersion=n.version)}if(t.some(d=>d===e?!1:d.id===e.id)){const d=yt();ti(e,"id",d,"conflicted with another story's ID"),a.id=d}let l=!1;const u=e.passages.map(d=>{const h=tW(d,{...e,...a});return h!==d?(l=!0,h):d});return l&&(a.passages=u),Object.keys(a).length>0?{...e,...a}:e}function nW(e,t,r){return e.map(n=>rW(n,e,t,r))}const iW=["highlighted","selected"],oW=["lastUpdate","selected"],aW=["loadError","loadState","properties","selected"];function Gu(e){return Object.keys(e).some(t=>!iW.includes(t))}function cO(e){return Object.keys(e).some(t=>!oW.includes(t))}function fO(e){return Object.keys(e).some(t=>!aW.includes(t))}function dO(e,t,r,n){let o=!1,a=!1;const l=e.map(u=>{if(u.id!==t)return u;if(o=!0,"name"in n&&u.passages.some(h=>h.name===n.name&&h.id!==r))return console.warn('There is already a passage in this story with name "'.concat(n.name,'", taking no action')),u;const d={...u,passages:u.passages.map(h=>h.id!==r?h:(a=!0,{...h,...n}))};return a?(Gu(n)&&(d.lastUpdate=new Date),d):(console.warn('Asked to update a passage with ID "'.concat(r,'", but it does not exist in story ID ').concat(t,", taking no action")),u)});return o?a?l:e:(console.warn('No story in state with ID "'.concat(t,'", taking no action')),e)}function sW(e,t,r){return Object.keys(r).reduce((n,o)=>dO(n,t,o,r[o]),e)}function lW(e,t,r){if("name"in r&&e.some(a=>a.name===r.name&&a.id!==t))return console.warn('There is another story in state with name "'.concat(r.name,'", taking no action')),e;let n=!1;const o=e.map(a=>{if(a.id!==t)return a;n=!0;const l={...a,...r};return cO(r)&&(l.lastUpdate=new Date),l});return n?o:(console.warn('Asked to update a story with ID "'.concat(t,'", but it does not exist in state')),e)}const uW=(e,t)=>{switch(t.type){case"createPassage":return Y2(e,t.storyId,t.props);case"createPassages":return tB(e,t.storyId,t.props);case"createStory":return rB(e,t.props);case"deletePassage":return Q2(e,t.storyId,t.passageId);case"deletePassages":return nB(e,t.storyId,t.passageIds);case"deleteStory":return iB(e,t.storyId);case"init":return oB(e,t.state);case"repair":return nW(e,t.allFormats,t.defaultFormat);case"updatePassage":return dO(e,t.storyId,t.passageId,t.props);case"updatePassages":return sW(e,t.storyId,t.passageUpdates);case"updateStory":return lW(e,t.storyId,t.props);default:console.warn("".concat(t.type," not implemented yet"))}return e};var Nm={exports:{}},jm={exports:{}},qu=1e3,Vu=qu*60,Xu=Vu*60,Yu=Xu*24,cW=Yu*365.25,fW=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return dW(e);if(r==="number"&&isNaN(e)===!1)return t.long?pW(e):hW(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function dW(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*cW;case"days":case"day":case"d":return r*Yu;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Xu;case"minutes":case"minute":case"mins":case"min":case"m":return r*Vu;case"seconds":case"second":case"secs":case"sec":case"s":return r*qu;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function hW(e){return e>=Yu?Math.round(e/Yu)+"d":e>=Xu?Math.round(e/Xu)+"h":e>=Vu?Math.round(e/Vu)+"m":e>=qu?Math.round(e/qu)+"s":e+"ms"}function pW(e){return Nf(e,Yu,"day")||Nf(e,Xu,"hour")||Nf(e,Vu,"minute")||Nf(e,qu,"second")||e+" ms"}function Nf(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=o.debug=o.default=o,t.coerce=d,t.disable=l,t.enable=a,t.enabled=u,t.humanize=fW,t.names=[],t.skips=[],t.formatters={};var r;function n(h){var g=0,m;for(m in h)g=(g<<5)-g+h.charCodeAt(m),g|=0;return t.colors[Math.abs(g)%t.colors.length]}function o(h){function g(){if(g.enabled){var m=g,w=+new Date,x=w-(r||w);m.diff=x,m.prev=r,m.curr=w,r=w;for(var C=new Array(arguments.length),j=0;j<C.length;j++)C[j]=arguments[j];C[0]=t.coerce(C[0]),typeof C[0]!="string"&&C.unshift("%O");var T=0;C[0]=C[0].replace(/%([a-zA-Z%])/g,function(P,A){if(P==="%%")return P;T++;var L=t.formatters[A];if(typeof L=="function"){var R=C[T];P=L.call(m,R),C.splice(T,1),T--}return P}),t.formatArgs.call(m,C);var k=g.log||t.log||console.log.bind(console);k.apply(m,C)}}return g.namespace=h,g.enabled=t.enabled(h),g.useColors=t.useColors(),g.color=n(h),typeof t.init=="function"&&t.init(g),g}function a(h){t.save(h),t.names=[],t.skips=[];for(var g=(typeof h=="string"?h:"").split(/[\s,]+/),m=g.length,w=0;w<m;w++)g[w]&&(h=g[w].replace(/\*/g,".*?"),h[0]==="-"?t.skips.push(new RegExp("^"+h.substr(1)+"$")):t.names.push(new RegExp("^"+h+"$")))}function l(){t.enable("")}function u(h){var g,m;for(g=0,m=t.skips.length;g<m;g++)if(t.skips[g].test(h))return!1;for(g=0,m=t.names.length;g<m;g++)if(t.names[g].test(h))return!0;return!1}function d(h){return h instanceof Error?h.stack||h.message:h}})(jm,jm.exports);var gW=jm.exports;(function(e,t){var r={};t=e.exports=gW,t.log=a,t.formatArgs=o,t.save=l,t.load=u,t.useColors=n,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:d(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function n(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(h){try{return JSON.stringify(h)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}};function o(h){var g=this.useColors;if(h[0]=(g?"%c":"")+this.namespace+(g?" %c":" ")+h[0]+(g?"%c ":" ")+"+"+t.humanize(this.diff),!!g){var m="color: "+this.color;h.splice(1,0,m,"color: inherit");var w=0,x=0;h[0].replace(/%[a-zA-Z%]/g,function(C){C!=="%%"&&(w++,C==="%c"&&(x=w))}),h.splice(x,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function l(h){try{h==null?t.storage.removeItem("debug"):t.storage.debug=h}catch{}}function u(){var h;try{h=t.storage.debug}catch{}return!h&&typeof Lm<"u"&&"env"in Lm&&(h=r.DEBUG),h}t.enable(u());function d(){try{return window.localStorage}catch{}}})(Nm,Nm.exports);var vW=Nm.exports,BS=vW("jsonp"),mW=bW,yW=0;function wW(){}function bW(e,t,r){typeof t=="function"&&(r=t,t={}),t||(t={});var n=t.prefix||"__jp",o=t.name||n+yW++,a=t.param||"callback",l=t.timeout!=null?t.timeout:6e4,u=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head,h,g;l&&(g=setTimeout(function(){m(),r&&r(new Error("Timeout"))},l));function m(){h.parentNode&&h.parentNode.removeChild(h),window[o]=wW,g&&clearTimeout(g)}function w(){window[o]&&m()}return window[o]=function(x){BS("jsonp got",x),m(),r&&r(null,x)},e+=(~e.indexOf("?")?"&":"?")+a+"="+u(o),e=e.replace("?&","?"),BS('jsonp req "%s"',e),h=document.createElement("script"),h.src=e,d.parentNode.insertBefore(h,d),w}const xW=wt(mW);let WS=Promise.resolve();async function Jd(e,t=2e3){return new Promise((r,n)=>WS=WS.then(()=>new Promise(o=>{xW(e,{timeout:t,name:"storyFormat"},(a,l)=>{a?n(a):r(l),o()})})))}function SW(e,t){if(!t.name||!t.version)throw new Error("Missing required properties for a new story format");return{type:"create",props:{url:e,name:t.name,userAdded:!0,version:t.version}}}function EW(e){return{type:"delete",id:e.id}}async function hO(e,t){t({type:"update",id:e.id,props:{loadState:"loading"}});try{let r=await Jd(e.url);if(r.hydrate)try{const n={};new Function(r.hydrate).call(n),r={...n,...r}}catch(n){console.error("Format ".concat(e.id," has a hydrate property but it threw an error when called"),n)}return t({type:"update",id:e.id,props:{properties:r,loadState:"loaded"}}),r}catch(r){t({type:"update",id:e.id,props:{loadError:r,loadState:"error"}})}}function CW(e){const t=e.filter(r=>r.loadState!=="loaded"&&r.loadState!=="loading");return t?async r=>{await Promise.allSettled(t.map(n=>hO(n,r)))}:()=>{}}function Qu(e){return e.loadState==="loaded"?()=>e.properties:async t=>await hO(e,t)}const pO=()=>[{name:"Chapbook",url:"story-formats/chapbook-1.2.3/format.js",version:"1.2.3"},{name:"Chapbook",url:"story-formats/chapbook-2.3.0/format.js",version:"2.3.0"},{name:"Harlowe",url:"story-formats/harlowe-1.2.4/format.js",version:"1.2.4"},{name:"Harlowe",url:"story-formats/harlowe-2.1.0/format.js",version:"2.1.0"},{name:"Harlowe",url:"story-formats/harlowe-3.3.9/format.js",version:"3.3.9"},{name:"Paperthin",url:"story-formats/paperthin-1.0.0/format.js",version:"1.0.0"},{name:"Snowman",url:"story-formats/snowman-1.4.0/format.js",version:"1.4.0"},{name:"Snowman",url:"story-formats/snowman-2.0.2/format.js",version:"2.0.2",userAdded:!1},{name:"SugarCube",url:"story-formats/sugarcube-1.0.35/format.js",version:"1.0.35"},{name:"SugarCube",url:"story-formats/sugarcube-2.37.3/format.js",version:"2.37.3"}];var kW=e=>{if(typeof e!="string")throw new TypeError("Expected a `string`, got `".concat(typeof e,"`"));return/^[a-zA-Z]:\\/.test(e)?!1:/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e)};const TW=wt(kW);function OW(e,t){switch(t){case"all":return e;case"current":return Object.values(e.reduce((r,n)=>!r[n.name]||oO(r[n.name].version,n.version)?{...r,[n.name]:n}:r,{}));case"user":return e.filter(r=>r.userAdded)}}function PW(e){if(e.loadState!=="loaded"||!e.properties.image)throw new Error("Format has no image property");return TW(e.properties.image)?e.properties.image:e.url.replace(/\/[^/]*?$/,"/")+e.properties.image}function LW(e,t){const r=e.find(n=>n.id===t);if(r)return r;throw new Error('There is no story format with ID "'.concat(t,'".'))}function bn(e,t,r){const n=e.find(o=>o.name===t&&o.version===r);if(n)return n;throw new Error('There is no story format with name "'.concat(t,'" and version "').concat(r,'".'))}function US(e,t){return e.reduce((r,n)=>n.name!==t?r:!r||C0.gt(n.version,r.version)?n:r,void 0)}function gO(e){return e.sort((t,r)=>t.name<r.name?-1:t.name>r.name?1:t.version===r.version?0:oO(r.version,t.version)?-1:1)}const Ia=()=>window.navigator.userAgent.indexOf("Electron")!==-1;function k0(){const{t:e,ready:t}=Ce("",{useSuspense:!1});return{reportError(r,n){console.error("Twine store error",r),t?window.alert(e(n,{error:r.message})+" "+e("store.errors.".concat(Ia()?"electron":"web","Remediation"))):window.alert("An error occurred while saving (".concat(r.message,"). Reloading or restarting the application may help."))}}}const NW=(e,t)=>{switch(t.type){case"init":return[...t.state];case"repair":{const r=pO(),n=e.filter(o=>{const a=o.userAdded||r.some(l=>l.name===o.name&&l.version===o.version);return a||console.info("Repairing story formats by removing ".concat(o.name," ").concat(o.version," (outdated version of built-in format)")),a});for(const o of r)n.some(a=>a.name===o.name&&a.version===o.version)||(console.info("Repairing story formats by adding built-in ".concat(o.name," ").concat(o.version)),n.push({...o,id:yt(),loadState:"unloaded",userAdded:!1}));return n}case"create":return e.some(r=>r.name===t.props.name&&r.version===t.props.version)?e:[...e,{...t.props,id:yt(),loadState:"unloaded"}];case"delete":return e.filter(r=>r.id!==t.id);case"update":return e.some(r=>r.id!==t.id&&r.name===t.props.name&&r.version===t.props.version)?e:e.map(r=>r.id!==t.id?r:{...r,...t.props})}return e},jW=pO().map(e=>({...e,id:yt(),loadState:"unloaded",selected:!1,userAdded:!1})),T0=E.createContext({dispatch:()=>{},formats:[]});T0.displayName="StoryFormats";const kn=()=>E.useContext(T0),AW=e=>{const{storyFormats:t}=Bh(),{reportError:r}=k0(),n=E.useCallback((l,u)=>{const d=NW(l,u);try{t.saveMiddleware(d,u)}catch(h){r(h,"store.errors.cantPersistStoryFormats")}return d},[r,t]),[o,a]=v0(n,jW);return y.jsx(T0.Provider,{value:{dispatch:a,formats:o},children:e.children})},O0=E.createContext({dispatch:()=>{},stories:[]});O0.displayName="Stories";const gt=()=>E.useContext(O0),MW=e=>{const{stories:t}=Bh(),{formats:r}=kn(),{reportError:n}=k0(),o=E.useMemo(()=>(u,d)=>{const h=uW(u,d);try{t.saveMiddleware(h,d,r)}catch(g){n(g,"store.errors.cantPersistStories")}return h},[r,n,t]),[a,l]=v0(o,[]);return y.jsx(O0.Provider,{value:{dispatch:l,stories:a},children:e.children})},hu={passage:"tw-passage",story:"tw-story",script:"[role=script]",stylesheet:"[role=stylesheet]",storyData:"tw-storydata",tagColors:"tw-tag",passageData:"tw-passagedata"};function jf(e){return parseFloat(e)}function pu(e,t){return Array.from(e.querySelectorAll(t))}function KS(e){if(typeof e!="string")return;const t=e.split(",");if(t.length===2)return[t[0],t[1]]}function IW(e){var o,a,l,u,d;const t=e.getAttribute("startnode");let r;const n={ifid:(o=e.getAttribute("ifid"))!=null?o:yt().toUpperCase(),id:yt(),lastUpdate:void 0,name:(a=e.getAttribute("name"))!=null?a:void 0,storyFormat:(l=e.getAttribute("format"))!=null?l:void 0,storyFormatVersion:(u=e.getAttribute("format-version"))!=null?u:void 0,script:pu(e,hu.script).map(h=>h.textContent).join("\n"),stylesheet:pu(e,hu.stylesheet).map(h=>h.textContent).join("\n"),tags:e.getAttribute("tags")?e.getAttribute("tags").split(/\s+/):[],zoom:parseFloat((d=e.getAttribute("zoom"))!=null?d:"1"),tagColors:pu(e,hu.tagColors).reduce((h,g)=>{const m=g.getAttribute("name");return typeof m!="string"?h:{...h,[m]:g.getAttribute("color")}},{}),passages:pu(e,hu.passageData).map(h=>{var x,C;const g=yt(),m=KS(h.getAttribute("position")),w=KS(h.getAttribute("size"));return h.getAttribute("pid")===t&&(r=g),{id:g,left:m?jf(m[0]):void 0,top:m?jf(m[1]):void 0,width:w?jf(w[0]):void 0,height:w?jf(w[1]):void 0,tags:h.getAttribute("tags")?h.getAttribute("tags").split(/\s+/):[],name:(x=h.getAttribute("name"))!=null?x:void 0,text:(C=h.textContent)!=null?C:void 0}})};return n.startPassage=r,n}function vO(e,t){const r=document.createElement("div");return r.innerHTML=e,pu(r,hu.storyData).map(n=>{const o=IW(n),a=Vx(o,{id:yt()},rl());return t&&(a.lastUpdate=t),a.passages=a.passages.map(l=>Vx(l,Do(),{story:a.id})),a})}async function RW(){const{twineElectron:e}=window;if(!e)throw new Error("Electron bridge is not present on window.");const t=await e.loadStories();return t&&Array.isArray(t)?t.reduce((r,n)=>{const o=vO(n.htmlSource,n.mtime);return o[0]?[...r,o[0]]:(console.warn("Could not hydrate story: ",n.htmlSource),r)},[]):(console.warn("No stories to hydrate in Electron bridge"),[])}function _W(e){return function(t){return e==null?void 0:e[t]}}var $W=_W,DW=$W,FW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zW=DW(FW),HW=zW,BW=HW,WW=h0,mO=/[&<>"']/g,UW=RegExp(mO.source);function KW(e){return e=WW(e),e&&UW.test(e)?e.replace(mO,BW):e}var GW=KW;const mr=wt(GW);function qW(){const e=new Date().toLocaleString().replace(/[/:\\]/g,".");return xc.t("store.archiveFilename",{timestamp:e})}function yO(e,t){return e.reduce((r,n)=>r+Hh(n,t,{startOptional:!0})+"\n\n","")}function VW(e,t){return'<tw-passagedata pid="'.concat(mr(t.toString()),'" name="').concat(mr(e.name),'" tags="').concat(mr(e.tags.join(" ")),'" position="').concat(e.left,",").concat(e.top,'" size="').concat(e.width,",").concat(e.height,'">').concat(mr(e.text),"</tw-passagedata>")}function Hh(e,t,{formatOptions:r,startId:n,startOptional:o}={}){if(n=n!=null?n:e.startPassage,!o){if(!n)throw new Error("There is no starting point set for this story and none was set manually.");if(!e.passages.find(d=>d.id===n))throw new Error("The passage set as starting point for this story does not exist.")}let a,l="";e.passages.forEach((d,h)=>{l+=VW(d,h+1),d.id===n&&(a=h+1)});const u=Object.keys(e.tagColors).reduce((d,h)=>d+'<tw-tag name="'.concat(mr(h),'" color="').concat(mr(e.tagColors[h]),'"></tw-tag>'),"");return'<tw-storydata name="'.concat(mr(e.name),'" startnode="').concat(a||"",'" creator="').concat(mr(t.name),'" creator-version="').concat(mr(t.version),'" format="').concat(mr(e.storyFormat),'" format-version="').concat(mr(e.storyFormatVersion),'" ifid="').concat(mr(e.ifid),'" options="').concat(mr(r),'" tags="').concat(mr(e.tags.join(" ")),'" zoom="').concat(mr(e.zoom.toString()),'" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">')+e.stylesheet+'</style><script role="script" id="twine-user-script" type="text/twine-javascript">'+e.script+"<\/script>"+u+l+"</tw-storydata>"}function Zd(e,t,r,{formatOptions:n,startId:o}={}){if(!t)throw new Error("Story format source cannot be empty.");let a=t;return a=a.replace(/{{STORY_NAME}}/g,()=>mr(e.name)),a=a.replace(/{{STORY_DATA}}/g,()=>Hh(e,r,{formatOptions:n,startId:o})),a}function vn(){return{name:"Twine",version:"2.10.0"}}async function ps(e,t){const{twineElectron:r}=window;if(!r)throw new Error("Electron bridge is not present on window.");try{const n=bn(t,e.storyFormat,e.storyFormatVersion);if(n.loadState==="loaded")r.saveStoryHtml(e,Zd(e,n.properties.source,vn(),{startOptional:!0}));else{const{source:o}=await Jd(n.url);r.saveStoryHtml(e,Zd(e,o,vn(),{startOptional:!0}))}}catch(n){console.warn("Could not save full story (".concat(n.message,"). Trying to save story data only.")),r.saveStoryHtml(e,Hh(e,vn(),{startOptional:!0}))}}let Yg;function XW(e,t,r){const{twineElectron:n}=window;if(!n)throw new Error("Electron bridge is not present on window.");switch(t.type){case"init":case"repair":break;case"createStory":if(!t.props.name)throw new Error("Passage was created but with no name specified");ps(K2(e,t.props.name),r);break;case"deleteStory":{n.deleteStory(st(Yg,t.storyId));break}case"updateStory":if(cO(t.props))if(t.props.name){const o=st(Yg,t.storyId),a=st(e,t.storyId);n.onceStoryRenamed(()=>ps(a,r)),n.renameStory(o,a)}else ps(st(e,t.storyId),r);break;case"createPassage":case"createPassages":case"deletePassage":case"deletePassages":ps(st(e,t.storyId),r);break;case"updatePassage":Gu(t.props)&&ps(st(e,t.storyId),r);break;case"updatePassages":Object.keys(t.passageUpdates).some(o=>Gu(t.passageUpdates[o]))&&ps(st(e,t.storyId),r);break;default:console.warn("Story action ".concat(t.type," has no Electron persistence handler"))}Yg=[...e]}async function YW(){const{twineElectron:e}=window;if(!e)throw new Error("Electron bridge is not present on window.");const t=await e.loadStoryFormats();return!t||!Array.isArray(t)?[]:t.map(r=>({id:yt(),loadState:"unloaded",name:r.name,version:r.version,url:r.url,userAdded:r.userAdded}))}function QW(e,t){(t.type==="create"||t.type==="delete"||t.type==="repair"||t.type==="update"&&fO(t.props))&&n2("story-formats.json",e.map(n=>({id:n.id,name:n.name,selected:void 0,version:n.version,url:n.url,userAdded:n.userAdded})))}function JW(){return E.useMemo(()=>({prefs:{load:i_,saveMiddleware:o_},stories:{load:RW,saveMiddleware:XW},storyFormats:{load:YW,saveMiddleware:QW}}),[])}async function ZW(){const e=window.localStorage.getItem("twine-prefs"),t={};return e?(e.split(",").forEach(r=>{try{const n=window.localStorage.getItem("twine-prefs-".concat(r));if(!n){console.warn("No preference stored at twine-prefs-".concat(r));return}const o=JSON.parse(n);t[o.name]=o.value}catch(n){console.warn("Preference ".concat(r," had corrupt serialized value, skipping"),window.localStorage.getItem("twine-prefs-".concat(r)),n)}}),t):{}}function eU(e){const t=window.localStorage.getItem("twine-prefs");t&&t.split(",").forEach(n=>{window.localStorage.removeItem("twine-prefs-".concat(n))});const r=[];for(const n in e){const o=yt();r.push(o),window.localStorage.setItem("twine-prefs-".concat(o),JSON.stringify({id:o,name:n,value:e[n]}))}window.localStorage.setItem("twine-prefs",r.join(","))}function tU(e,t){(t.type==="repair"||t.type==="update")&&eU(e)}async function rU(){const e={},t=window.localStorage.getItem("twine-stories");if(!t)return[];t.split(",").forEach(n=>{const o=window.localStorage.getItem("twine-stories-".concat(n));if(!o){console.warn("Story list contained ID ".concat(n,", but twine-stories-").concat(n," does not exist, skipping"));return}try{const a=JSON.parse(o);if(!a.id){console.warn("Story in local storage had no ID, skipping",a);return}e[a.id]={...rl(),...a,lastUpdate:a.lastUpdate?new Date(Date.parse(a.lastUpdate)):new Date,passages:[]}}catch{console.warn("Could not parse story as JSON, skipping: ".concat(o))}});const r=window.localStorage.getItem("twine-passages");return r&&r.split(",").forEach(n=>{const o=window.localStorage.getItem("twine-passages-".concat(n));if(!o){console.warn("Passage list contained ID ".concat(n,", but twine-passages-").concat(n," does not exist, skipping"));return}try{const a=JSON.parse(o);if(!a||!a.story){console.warn("Passage ".concat(n," did not have parent story ID, skipping"),a);return}if(!e[a.story]){console.warn("Passage ".concat(n," is orphaned (looking for story ID ").concat(a.story,"), skipping"));return}e[a.story].passages.push({...Do,...a,tags:a.tags?a.tags.filter(l=>l.trim()!==""):[]})}catch{console.warn("Could not parse passage as JSON, skipping: ".concat(o))}}),Object.values(e)}function nU(e,t){return new RegExp("\\b"+t+"\\b").test(e)}function wO(e,t){return e===""?t:nU(e,t)?e:e+","+t}function bO(e,t){return e=e.replace(new RegExp(",?"+t),""),e[0]===","?e.substring(1):e}function Ni(e){var r,n;const t={passageIds:(r=window.localStorage.getItem("twine-passages"))!=null?r:"",storyIds:(n=window.localStorage.getItem("twine-stories"))!=null?n:""};e(t),window.localStorage.setItem("twine-stories",t.storyIds),window.localStorage.setItem("twine-passages",t.passageIds)}function uo(e,t){if(!t.id)throw new Error("Story has no ID");e.storyIds=wO(e.storyIds,t.id),window.localStorage.setItem("twine-stories-".concat(t.id),JSON.stringify({...t,passages:void 0}))}function iU(e,t){if(!t.id)throw new Error("Story has no ID");e.storyIds=bO(e.storyIds,t.id),window.localStorage.removeItem("twine-stories-".concat(t.id))}function gs(e,t){if(!t.id)throw new Error("Passage has no ID");e.passageIds=wO(e.passageIds,t.id),window.localStorage.setItem("twine-passages-".concat(t.id),JSON.stringify(t))}function Af(e,t){e.passageIds=bO(e.passageIds,t),window.localStorage.removeItem("twine-passages-".concat(t))}let Qg;function oU(e,t){switch(t.type){case"init":case"repair":break;case"createPassage":{if(!t.props.name)throw new Error("Passage was created but with no name specified");const r=st(e,t.storyId),n=Yd(e,r.id,t.props.name);Ni(o=>{uo(o,r),gs(o,n)});break}case"createPassages":{const r=st(e,t.storyId);Ni(n=>{uo(n,r);for(const o of t.props){if(!o.name)throw new Error("Passage was created but with no name specified");gs(n,Yd(e,r.id,o.name))}});break}case"createStory":{if(!t.props.name)throw new Error("Story was created but with no name specified");const r=K2(e,t.props.name);Ni(n=>{uo(n,r);for(const o of r.passages)gs(n,o)});break}case"deletePassage":{const r=st(e,t.storyId);Ni(n=>{uo(n,r),Af(n,t.passageId)});break}case"deletePassages":{const r=st(e,t.storyId);Ni(n=>{uo(n,r);for(const o of t.passageIds)Af(n,o)});break}case"deleteStory":{const r=st(Qg,t.storyId);Ni(n=>{for(const o of r.passages)Af(n,o.id);iU(n,r)});break}case"updatePassage":if(Gu(t.props)){const r=st(e,t.storyId),n=Fi(e,t.storyId,t.passageId);Ni(o=>{uo(o,r),gs(o,n)});break}break;case"updatePassages":{const r=st(e,t.storyId);Ni(n=>{uo(n,r);const o=Object.keys(t.passageUpdates).filter(a=>Gu(t.passageUpdates[a]));for(const a of o)gs(n,Fi(e,t.storyId,a))});break}case"updateStory":{const r=st(e,t.storyId);Ni(n=>{if(uo(n,r),t.props.passages){const o=st(Qg,t.storyId);for(const a of o.passages)t.props.passages.some(({id:l})=>l===a.id)||Af(n,a.id)}r.passages.forEach(o=>gs(n,o))});break}default:console.warn("Story action ".concat(t.type," has no local storage persistence handler"))}Qg=e}async function aU(){const e=[],t=window.localStorage.getItem("twine-storyformats");return t?(t.split(",").forEach(r=>{try{const n=window.localStorage.getItem("twine-storyformats-".concat(r));if(!n){console.warn("No story format stored at twine-storyformats-".concat(r,", skipping"));return}e.push({...JSON.parse(n),loadState:"unloaded"})}catch{console.warn("Story format ".concat(r," had corrupt serialized value, skipping"),window.localStorage.getItem("twine-storyformats-".concat(r)))}}),e):[]}function GS(e){const t=window.localStorage.getItem("twine-storyformats");t&&t.split(",").forEach(n=>{window.localStorage.removeItem("twine-storyformats-".concat(n))});const r=[];for(const n of e){const o=yt();r.push(o),window.localStorage.setItem("twine-storyformats-".concat(o),JSON.stringify({...n,loadError:void 0,loadState:void 0,properties:void 0,selected:void 0}))}window.localStorage.setItem("twine-storyformats",r.join(","))}function sU(e,t){switch(t.type){case"create":case"delete":case"repair":GS(e);break;case"update":fO(t.props)&&GS(e);break}}function lU(){return E.useMemo(()=>({prefs:{load:ZW,saveMiddleware:tU},stories:{load:rU,saveMiddleware:oU},storyFormats:{load:aU,saveMiddleware:sU}}),[])}function Bh(){const e=JW(),t=lU();return E.useMemo(()=>Ia()?e:t,[e,t])}const uU=(e,t)=>{switch(t.type){case"init":return{...e,...t.state};case"repair":{const r=Ws(),n=Object.entries(r).reduce((u,[d,h])=>{const g=d;return typeof h=="number"&&!Number.isFinite(e[g])||typeof h!=typeof e[g]?(console.info('Repairing preference "'.concat(d,'" by setting it to ').concat(h,", was ").concat(e[g]," (bad type)")),{...u,[g]:h}):u},{}),{proofingFormat:o,storyFormat:a}=e,{allFormats:l}=t;try{bn(l,o.name,o.version)}catch{const u=US(l,o.name);u?(console.info("Repairing proofing format preference (version doesn't exist) by setting to ".concat(u.name," ").concat(u.version,", was ").concat(o.name," ").concat(o.version)),n.proofingFormat={name:u.name,version:u.version}):(console.info("Repairing proofing format preference (format doesn't exist at all) by setting to default ".concat(r.proofingFormat.name," ").concat(r.proofingFormat.version,", was ").concat(o.name," ").concat(o.version)),n.proofingFormat={name:r.proofingFormat.name,version:r.proofingFormat.version})}try{bn(l,a.name,a.version)}catch{const u=US(l,a.name);u?(console.info("Repairing story format preference (version doesn't exist) by setting to ".concat(u.name," ").concat(u.version,", was ").concat(a.name," ").concat(a.version)),n.storyFormat={name:u.name,version:u.version}):(console.info("Repairing story format preference (format doesn't exist at all) by setting to default ".concat(r.storyFormat.name," ").concat(r.storyFormat.version,", was ").concat(a.name," ").concat(o.version)),n.storyFormat={name:r.storyFormat.name,version:r.storyFormat.version})}return{...e,...n}}case"update":return{...e,[t.name]:t.value}}},P0=E.createContext({dispatch:()=>{},prefs:Ws()});P0.displayName="Prefs";const lt=()=>E.useContext(P0),cU=e=>{const{prefs:t}=Bh(),{reportError:r}=k0(),n=E.useCallback((l,u)=>{const d=uU(l,u);try{t.saveMiddleware(d,u)}catch(h){r(h,"store.errors.cantPersistPrefs")}return d},[t,r]),[o,a]=E.useReducer(n,Ws());return y.jsx(P0.Provider,{value:{dispatch:a,prefs:o},children:e.children})},fU=()=>{const{prefs:e}=lt();return E.useEffect(()=>{xc.changeLanguage(e.locale)},[e.locale]),null};function an(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Ud(e,t)}var xO={exports:{}},dU="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hU=dU,pU=hU;function SO(){}function EO(){}EO.resetWarningCache=SO;var gU=function(){function e(n,o,a,l,u,d){if(d!==pU){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:EO,resetWarningCache:SO};return r.PropTypes=r,r};xO.exports=gU();var Wh=xO.exports;const pt=wt(Wh);function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nr.apply(null,arguments)}function Mf(e){return e.charAt(0)==="/"}function Jg(e,t){for(var r=t,n=r+1,o=e.length;n<o;r+=1,n+=1)e[r]=e[n];e.pop()}function CO(e,t){t===void 0&&(t="");var r=e&&e.split("/")||[],n=t&&t.split("/")||[],o=e&&Mf(e),a=t&&Mf(t),l=o||a;if(e&&Mf(e)?n=r:r.length&&(n.pop(),n=n.concat(r)),!n.length)return"/";var u;if(n.length){var d=n[n.length-1];u=d==="."||d===".."||d===""}else u=!1;for(var h=0,g=n.length;g>=0;g--){var m=n[g];m==="."?Jg(n,g):m===".."?(Jg(n,g),h++):h&&(Jg(n,g),h--)}if(!l)for(;h--;h)n.unshift("..");l&&n[0]!==""&&(!n[0]||!Mf(n[0]))&&n.unshift("");var w=n.join("/");return u&&w.substr(-1)!=="/"&&(w+="/"),w}var vU="Invariant failed";function Ra(e,t){throw new Error(vU)}function mU(e){var t=e||"/",r="",n="",o=t.indexOf("#");o!==-1&&(n=t.substr(o),t=t.substr(0,o));var a=t.indexOf("?");return a!==-1&&(r=t.substr(a),t=t.substr(0,a)),{pathname:t,search:r==="?"?"":r,hash:n==="#"?"":n}}function kO(e){var t=e.pathname,r=e.search,n=e.hash,o=t||"/";return r&&r!=="?"&&(o+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(o+=n.charAt(0)==="#"?n:"#"+n),o}function Ts(e,t,r,n){var o;typeof e=="string"?(o=mU(e),o.state=t):(o=nr({},e),o.pathname===void 0&&(o.pathname=""),o.search?o.search.charAt(0)!=="?"&&(o.search="?"+o.search):o.search="",o.hash?o.hash.charAt(0)!=="#"&&(o.hash="#"+o.hash):o.hash="",t!==void 0&&o.state===void 0&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return r&&(o.key=r),n?o.pathname?o.pathname.charAt(0)!=="/"&&(o.pathname=CO(o.pathname,n.pathname)):o.pathname=n.pathname:o.pathname||(o.pathname="/"),o}function yU(){var e=null;function t(l){return e=l,function(){e===l&&(e=null)}}function r(l,u,d,h){if(e!=null){var g=typeof e=="function"?e(l,u):e;typeof g=="string"?typeof d=="function"?d(g,h):h(!0):h(g!==!1)}else h(!0)}var n=[];function o(l){var u=!0;function d(){u&&l.apply(void 0,arguments)}return n.push(d),function(){u=!1,n=n.filter(function(h){return h!==d})}}function a(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];n.forEach(function(h){return h.apply(void 0,u)})}return{setPrompt:t,confirmTransitionTo:r,appendListener:o,notifyListeners:a}}function qS(e,t,r){return Math.min(Math.max(e,t),r)}function wU(e){e===void 0&&(e={});var t=e,r=t.getUserConfirmation,n=t.initialEntries,o=n===void 0?["/"]:n,a=t.initialIndex,l=a===void 0?0:a,u=t.keyLength,d=u===void 0?6:u,h=yU();function g(B){nr($,B),$.length=$.entries.length,h.notifyListeners($.location,$.action)}function m(){return Math.random().toString(36).substr(2,d)}var w=qS(l,0,o.length-1),x=o.map(function(B){return typeof B=="string"?Ts(B,void 0,m()):Ts(B,void 0,B.key||m())}),C=kO;function j(B,U){var Y="PUSH",V=Ts(B,U,m(),$.location);h.confirmTransitionTo(V,Y,r,function(de){if(de){var W=$.index,_=W+1,M=$.entries.slice(0);M.length>_?M.splice(_,M.length-_,V):M.push(V),g({action:Y,location:V,index:_,entries:M})}})}function T(B,U){var Y="REPLACE",V=Ts(B,U,m(),$.location);h.confirmTransitionTo(V,Y,r,function(de){de&&($.entries[$.index]=V,g({action:Y,location:V}))})}function k(B){var U=qS($.index+B,0,$.entries.length-1),Y="POP",V=$.entries[U];h.confirmTransitionTo(V,Y,r,function(de){de?g({action:Y,location:V,index:U}):g()})}function P(){k(-1)}function A(){k(1)}function L(B){var U=$.index+B;return U>=0&&U<$.entries.length}function R(B){return B===void 0&&(B=!1),h.setPrompt(B)}function D(B){return h.appendListener(B)}var $={length:x.length,action:"POP",location:x[w],index:w,entries:x,createHref:C,push:j,replace:T,go:k,goBack:P,goForward:A,canGo:L,block:R,listen:D};return $}var ul={exports:{}},bU=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},eh=bU;ul.exports=PO;ul.exports.parse=L0;ul.exports.compile=SU;ul.exports.tokensToFunction=TO;ul.exports.tokensToRegExp=OO;var xU=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function L0(e,t){for(var r=[],n=0,o=0,a="",l=t&&t.delimiter||"/",u;(u=xU.exec(e))!=null;){var d=u[0],h=u[1],g=u.index;if(a+=e.slice(o,g),o=g+d.length,h){a+=h[1];continue}var m=e[o],w=u[2],x=u[3],C=u[4],j=u[5],T=u[6],k=u[7];a&&(r.push(a),a="");var P=w!=null&&m!=null&&m!==w,A=T==="+"||T==="*",L=T==="?"||T==="*",R=u[2]||l,D=C||j;r.push({name:x||n++,prefix:w||"",delimiter:R,optional:L,repeat:A,partial:P,asterisk:!!k,pattern:D?kU(D):k?".*":"[^"+ld(R)+"]+?"})}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function SU(e,t){return TO(L0(e,t),t)}function EU(e){return encodeURI(e).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function CU(e){return encodeURI(e).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function TO(e,t){for(var r=new Array(e.length),n=0;n<e.length;n++)typeof e[n]=="object"&&(r[n]=new RegExp("^(?:"+e[n].pattern+")$",j0(t)));return function(o,a){for(var l="",u=o||{},d=a||{},h=d.pretty?EU:encodeURIComponent,g=0;g<e.length;g++){var m=e[g];if(typeof m=="string"){l+=m;continue}var w=u[m.name],x;if(w==null)if(m.optional){m.partial&&(l+=m.prefix);continue}else throw new TypeError('Expected "'+m.name+'" to be defined');if(eh(w)){if(!m.repeat)throw new TypeError('Expected "'+m.name+'" to not repeat, but received `'+JSON.stringify(w)+"`");if(w.length===0){if(m.optional)continue;throw new TypeError('Expected "'+m.name+'" to not be empty')}for(var C=0;C<w.length;C++){if(x=h(w[C]),!r[g].test(x))throw new TypeError('Expected all "'+m.name+'" to match "'+m.pattern+'", but received `'+JSON.stringify(x)+"`");l+=(C===0?m.prefix:m.delimiter)+x}continue}if(x=m.asterisk?CU(w):h(w),!r[g].test(x))throw new TypeError('Expected "'+m.name+'" to match "'+m.pattern+'", but received "'+x+'"');l+=m.prefix+x}return l}}function ld(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function kU(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function N0(e,t){return e.keys=t,e}function j0(e){return e&&e.sensitive?"":"i"}function TU(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return N0(e,t)}function OU(e,t,r){for(var n=[],o=0;o<e.length;o++)n.push(PO(e[o],t,r).source);var a=new RegExp("(?:"+n.join("|")+")",j0(r));return N0(a,t)}function PU(e,t,r){return OO(L0(e,r),t,r)}function OO(e,t,r){eh(t)||(r=t||r,t=[]),r=r||{};for(var n=r.strict,o=r.end!==!1,a="",l=0;l<e.length;l++){var u=e[l];if(typeof u=="string")a+=ld(u);else{var d=ld(u.prefix),h="(?:"+u.pattern+")";t.push(u),u.repeat&&(h+="(?:"+d+h+")*"),u.optional?u.partial?h=d+"("+h+")?":h="(?:"+d+"("+h+"))?":h=d+"("+h+")",a+=h}}var g=ld(r.delimiter||"/"),m=a.slice(-g.length)===g;return n||(a=(m?a.slice(0,-g.length):a)+"(?:"+g+"(?=$))?"),o?a+="$":a+=n&&m?"":"(?="+g+"|$)",N0(new RegExp("^"+a,j0(r)),t)}function PO(e,t,r){return eh(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?TU(e,t):eh(e)?OU(e,t,r):PU(e,t,r)}var LU=ul.exports;const NU=wt(LU);var ht={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ir=typeof Symbol=="function"&&Symbol.for,A0=ir?Symbol.for("react.element"):60103,M0=ir?Symbol.for("react.portal"):60106,Uh=ir?Symbol.for("react.fragment"):60107,Kh=ir?Symbol.for("react.strict_mode"):60108,Gh=ir?Symbol.for("react.profiler"):60114,qh=ir?Symbol.for("react.provider"):60109,Vh=ir?Symbol.for("react.context"):60110,I0=ir?Symbol.for("react.async_mode"):60111,Xh=ir?Symbol.for("react.concurrent_mode"):60111,Yh=ir?Symbol.for("react.forward_ref"):60112,Qh=ir?Symbol.for("react.suspense"):60113,jU=ir?Symbol.for("react.suspense_list"):60120,Jh=ir?Symbol.for("react.memo"):60115,Zh=ir?Symbol.for("react.lazy"):60116,AU=ir?Symbol.for("react.block"):60121,MU=ir?Symbol.for("react.fundamental"):60117,IU=ir?Symbol.for("react.responder"):60118,RU=ir?Symbol.for("react.scope"):60119;function un(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case A0:switch(e=e.type,e){case I0:case Xh:case Uh:case Gh:case Kh:case Qh:return e;default:switch(e=e&&e.$$typeof,e){case Vh:case Yh:case Zh:case Jh:case qh:return e;default:return t}}case M0:return t}}}function LO(e){return un(e)===Xh}ht.AsyncMode=I0;ht.ConcurrentMode=Xh;ht.ContextConsumer=Vh;ht.ContextProvider=qh;ht.Element=A0;ht.ForwardRef=Yh;ht.Fragment=Uh;ht.Lazy=Zh;ht.Memo=Jh;ht.Portal=M0;ht.Profiler=Gh;ht.StrictMode=Kh;ht.Suspense=Qh;ht.isAsyncMode=function(e){return LO(e)||un(e)===I0};ht.isConcurrentMode=LO;ht.isContextConsumer=function(e){return un(e)===Vh};ht.isContextProvider=function(e){return un(e)===qh};ht.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===A0};ht.isForwardRef=function(e){return un(e)===Yh};ht.isFragment=function(e){return un(e)===Uh};ht.isLazy=function(e){return un(e)===Zh};ht.isMemo=function(e){return un(e)===Jh};ht.isPortal=function(e){return un(e)===M0};ht.isProfiler=function(e){return un(e)===Gh};ht.isStrictMode=function(e){return un(e)===Kh};ht.isSuspense=function(e){return un(e)===Qh};ht.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uh||e===Xh||e===Gh||e===Kh||e===Qh||e===jU||typeof e=="object"&&e!==null&&(e.$$typeof===Zh||e.$$typeof===Jh||e.$$typeof===qh||e.$$typeof===Vh||e.$$typeof===Yh||e.$$typeof===MU||e.$$typeof===IU||e.$$typeof===RU||e.$$typeof===AU)};ht.typeOf=un;var NO={exports:{}},ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var or=typeof Symbol=="function"&&Symbol.for,R0=or?Symbol.for("react.element"):60103,_0=or?Symbol.for("react.portal"):60106,ep=or?Symbol.for("react.fragment"):60107,tp=or?Symbol.for("react.strict_mode"):60108,rp=or?Symbol.for("react.profiler"):60114,np=or?Symbol.for("react.provider"):60109,ip=or?Symbol.for("react.context"):60110,$0=or?Symbol.for("react.async_mode"):60111,op=or?Symbol.for("react.concurrent_mode"):60111,ap=or?Symbol.for("react.forward_ref"):60112,sp=or?Symbol.for("react.suspense"):60113,_U=or?Symbol.for("react.suspense_list"):60120,lp=or?Symbol.for("react.memo"):60115,up=or?Symbol.for("react.lazy"):60116,$U=or?Symbol.for("react.block"):60121,DU=or?Symbol.for("react.fundamental"):60117,FU=or?Symbol.for("react.responder"):60118,zU=or?Symbol.for("react.scope"):60119;function cn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case R0:switch(e=e.type,e){case $0:case op:case ep:case rp:case tp:case sp:return e;default:switch(e=e&&e.$$typeof,e){case ip:case ap:case up:case lp:case np:return e;default:return t}}case _0:return t}}}function jO(e){return cn(e)===op}ct.AsyncMode=$0;ct.ConcurrentMode=op;ct.ContextConsumer=ip;ct.ContextProvider=np;ct.Element=R0;ct.ForwardRef=ap;ct.Fragment=ep;ct.Lazy=up;ct.Memo=lp;ct.Portal=_0;ct.Profiler=rp;ct.StrictMode=tp;ct.Suspense=sp;ct.isAsyncMode=function(e){return jO(e)||cn(e)===$0};ct.isConcurrentMode=jO;ct.isContextConsumer=function(e){return cn(e)===ip};ct.isContextProvider=function(e){return cn(e)===np};ct.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===R0};ct.isForwardRef=function(e){return cn(e)===ap};ct.isFragment=function(e){return cn(e)===ep};ct.isLazy=function(e){return cn(e)===up};ct.isMemo=function(e){return cn(e)===lp};ct.isPortal=function(e){return cn(e)===_0};ct.isProfiler=function(e){return cn(e)===rp};ct.isStrictMode=function(e){return cn(e)===tp};ct.isSuspense=function(e){return cn(e)===sp};ct.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ep||e===op||e===rp||e===tp||e===sp||e===_U||typeof e=="object"&&e!==null&&(e.$$typeof===up||e.$$typeof===lp||e.$$typeof===np||e.$$typeof===ip||e.$$typeof===ap||e.$$typeof===DU||e.$$typeof===FU||e.$$typeof===zU||e.$$typeof===$U)};ct.typeOf=cn;NO.exports=ct;var HU=NO.exports,AO=HU,BU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},WU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},MO={};MO[AO.ForwardRef]=BU;MO[AO.Memo]=WU;var Zg=1073741823,VS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof nn<"u"?nn:{};function UU(){var e="__global_unique_id__";return VS[e]=(VS[e]||0)+1}function KU(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function GU(e){var t=[];return{on:function(n){t.push(n)},off:function(n){t=t.filter(function(o){return o!==n})},get:function(){return e},set:function(n,o){e=n,t.forEach(function(a){return a(e,o)})}}}function qU(e){return Array.isArray(e)?e[0]:e}function VU(e,t){var r,n,o="__create-react-context-"+UU()+"__",a=function(u){an(d,u);function d(){for(var g,m=arguments.length,w=new Array(m),x=0;x<m;x++)w[x]=arguments[x];return g=u.call.apply(u,[this].concat(w))||this,g.emitter=GU(g.props.value),g}var h=d.prototype;return h.getChildContext=function(){var m;return m={},m[o]=this.emitter,m},h.componentWillReceiveProps=function(m){if(this.props.value!==m.value){var w=this.props.value,x=m.value,C;KU(w,x)?C=0:(C=typeof t=="function"?t(w,x):Zg,C|=0,C!==0&&this.emitter.set(m.value,C))}},h.render=function(){return this.props.children},d}(_e.Component);a.childContextTypes=(r={},r[o]=pt.object.isRequired,r);var l=function(u){an(d,u);function d(){for(var g,m=arguments.length,w=new Array(m),x=0;x<m;x++)w[x]=arguments[x];return g=u.call.apply(u,[this].concat(w))||this,g.observedBits=void 0,g.state={value:g.getValue()},g.onUpdate=function(C,j){var T=g.observedBits|0;T&j&&g.setState({value:g.getValue()})},g}var h=d.prototype;return h.componentWillReceiveProps=function(m){var w=m.observedBits;this.observedBits=w==null?Zg:w},h.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var m=this.props.observedBits;this.observedBits=m==null?Zg:m},h.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},h.getValue=function(){return this.context[o]?this.context[o].get():e},h.render=function(){return qU(this.props.children)(this.state.value)},d}(_e.Component);return l.contextTypes=(n={},n[o]=pt.object,n),{Provider:a,Consumer:l}}var XU=_e.createContext||VU,IO=function(t){var r=XU();return r.displayName=t,r},RO=IO("Router-History"),Oa=IO("Router"),cp=function(e){an(t,e),t.computeRootMatch=function(o){return{path:"/",url:"/",params:{},isExact:o==="/"}};function t(n){var o;return o=e.call(this,n)||this,o.state={location:n.history.location},o._isMounted=!1,o._pendingLocation=null,n.staticContext||(o.unlisten=n.history.listen(function(a){o._pendingLocation=a})),o}var r=t.prototype;return r.componentDidMount=function(){var o=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(a){o._isMounted&&o.setState({location:a})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},r.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},r.render=function(){return _e.createElement(Oa.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},_e.createElement(RO.Provider,{children:this.props.children||null,value:this.props.history}))},t}(_e.Component);_e.Component;_e.Component;var XS={},YU=1e4,YS=0;function QU(e,t){var r=""+t.end+t.strict+t.sensitive,n=XS[r]||(XS[r]={});if(n[e])return n[e];var o=[],a=NU(e,o,t),l={regexp:a,keys:o};return YS<YU&&(n[e]=l,YS++),l}function D0(e,t){t===void 0&&(t={}),(typeof t=="string"||Array.isArray(t))&&(t={path:t});var r=t,n=r.path,o=r.exact,a=o===void 0?!1:o,l=r.strict,u=l===void 0?!1:l,d=r.sensitive,h=d===void 0?!1:d,g=[].concat(n);return g.reduce(function(m,w){if(!w&&w!=="")return null;if(m)return m;var x=QU(w,{end:a,strict:u,sensitive:h}),C=x.regexp,j=x.keys,T=C.exec(e);if(!T)return null;var k=T[0],P=T.slice(1),A=e===k;return a&&!A?null:{path:w,url:w==="/"&&k===""?"/":k,isExact:A,params:j.reduce(function(L,R,D){return L[R.name]=P[D],L},{})}},null)}function JU(e){return _e.Children.count(e)===0}var co=function(e){an(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this;return _e.createElement(Oa.Consumer,null,function(a){a||Ra();var l=o.props.location||a.location,u=o.props.computedMatch?o.props.computedMatch:o.props.path?D0(l.pathname,o.props):a.match,d=nr({},a,{location:l,match:u}),h=o.props,g=h.children,m=h.component,w=h.render;return Array.isArray(g)&&JU(g)&&(g=null),_e.createElement(Oa.Provider,{value:d},d.match?g?typeof g=="function"?g(d):g:m?_e.createElement(m,d):w?w(d):null:typeof g=="function"?g(d):null)})},t}(_e.Component);function F0(e){return e.charAt(0)==="/"?e:"/"+e}function ZU(e,t){return e?nr({},t,{pathname:F0(e)+t.pathname}):t}function e8(e,t){if(!e)return t;var r=F0(e);return t.pathname.indexOf(r)!==0?t:nr({},t,{pathname:t.pathname.substr(r.length)})}function QS(e){return typeof e=="string"?e:kO(e)}function ev(e){return function(){Ra()}}function JS(){}_e.Component;var t8=function(e){an(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this;return _e.createElement(Oa.Consumer,null,function(a){a||Ra();var l=o.props.location||a.location,u,d;return _e.Children.forEach(o.props.children,function(h){if(d==null&&_e.isValidElement(h)){u=h;var g=h.props.path||h.props.from;d=g?D0(l.pathname,nr({},h.props,{path:g})):a.match}}),d?_e.cloneElement(u,{location:l,computedMatch:d}):null})},t}(_e.Component),_O=_e.useContext;function cl(){return _O(RO)}function fp(){var e=_O(Oa).match;return e?e.params:{}}function Ou(e){return e.charAt(0)==="/"?e:"/"+e}function ZS(e){return e.charAt(0)==="/"?e.substr(1):e}function r8(e,t){return e.toLowerCase().indexOf(t.toLowerCase())===0&&"/?#".indexOf(e.charAt(t.length))!==-1}function $O(e,t){return r8(e,t)?e.substr(t.length):e}function DO(e){return e.charAt(e.length-1)==="/"?e.slice(0,-1):e}function n8(e){var t=e||"/",r="",n="",o=t.indexOf("#");o!==-1&&(n=t.substr(o),t=t.substr(0,o));var a=t.indexOf("?");return a!==-1&&(r=t.substr(a),t=t.substr(0,a)),{pathname:t,search:r==="?"?"":r,hash:n==="#"?"":n}}function pn(e){var t=e.pathname,r=e.search,n=e.hash,o=t||"/";return r&&r!=="?"&&(o+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(o+=n.charAt(0)==="#"?n:"#"+n),o}function ba(e,t,r,n){var o;typeof e=="string"?(o=n8(e),o.state=t):(o=nr({},e),o.pathname===void 0&&(o.pathname=""),o.search?o.search.charAt(0)!=="?"&&(o.search="?"+o.search):o.search="",o.hash?o.hash.charAt(0)!=="#"&&(o.hash="#"+o.hash):o.hash="",t!==void 0&&o.state===void 0&&(o.state=t));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return r&&(o.key=r),n?o.pathname?o.pathname.charAt(0)!=="/"&&(o.pathname=CO(o.pathname,n.pathname)):o.pathname=n.pathname:o.pathname||(o.pathname="/"),o}function FO(){var e=null;function t(l){return e=l,function(){e===l&&(e=null)}}function r(l,u,d,h){if(e!=null){var g=typeof e=="function"?e(l,u):e;typeof g=="string"?typeof d=="function"?d(g,h):h(!0):h(g!==!1)}else h(!0)}var n=[];function o(l){var u=!0;function d(){u&&l.apply(void 0,arguments)}return n.push(d),function(){u=!1,n=n.filter(function(h){return h!==d})}}function a(){for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];n.forEach(function(h){return h.apply(void 0,u)})}return{setPrompt:t,confirmTransitionTo:r,appendListener:o,notifyListeners:a}}var zO=!!(typeof window<"u"&&window.document&&window.document.createElement);function HO(e,t){t(window.confirm(e))}function i8(){var e=window.navigator.userAgent;return(e.indexOf("Android 2.")!==-1||e.indexOf("Android 4.0")!==-1)&&e.indexOf("Mobile Safari")!==-1&&e.indexOf("Chrome")===-1&&e.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function o8(){return window.navigator.userAgent.indexOf("Trident")===-1}function a8(){return window.navigator.userAgent.indexOf("Firefox")===-1}function s8(e){return e.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var eE="popstate",tE="hashchange";function rE(){try{return window.history.state||{}}catch{return{}}}function l8(e){e===void 0&&(e={}),zO||Ra();var t=window.history,r=i8(),n=!o8(),o=e,a=o.forceRefresh,l=a===void 0?!1:a,u=o.getUserConfirmation,d=u===void 0?HO:u,h=o.keyLength,g=h===void 0?6:h,m=e.basename?DO(Ou(e.basename)):"";function w(X){var ie=X||{},ue=ie.key,he=ie.state,Se=window.location,Z=Se.pathname,ae=Se.search,le=Se.hash,ce=Z+ae+le;return m&&(ce=$O(ce,m)),ba(ce,he,ue)}function x(){return Math.random().toString(36).substr(2,g)}var C=FO();function j(X){nr(re,X),re.length=t.length,C.notifyListeners(re.location,re.action)}function T(X){s8(X)||A(w(X.state))}function k(){A(w(rE()))}var P=!1;function A(X){if(P)P=!1,j();else{var ie="POP";C.confirmTransitionTo(X,ie,d,function(ue){ue?j({action:ie,location:X}):L(X)})}}function L(X){var ie=re.location,ue=D.indexOf(ie.key);ue===-1&&(ue=0);var he=D.indexOf(X.key);he===-1&&(he=0);var Se=ue-he;Se&&(P=!0,Y(Se))}var R=w(rE()),D=[R.key];function $(X){return m+pn(X)}function B(X,ie){var ue="PUSH",he=ba(X,ie,x(),re.location);C.confirmTransitionTo(he,ue,d,function(Se){if(Se){var Z=$(he),ae=he.key,le=he.state;if(r)if(t.pushState({key:ae,state:le},null,Z),l)window.location.href=Z;else{var ce=D.indexOf(re.location.key),me=D.slice(0,ce+1);me.push(he.key),D=me,j({action:ue,location:he})}else window.location.href=Z}})}function U(X,ie){var ue="REPLACE",he=ba(X,ie,x(),re.location);C.confirmTransitionTo(he,ue,d,function(Se){if(Se){var Z=$(he),ae=he.key,le=he.state;if(r)if(t.replaceState({key:ae,state:le},null,Z),l)window.location.replace(Z);else{var ce=D.indexOf(re.location.key);ce!==-1&&(D[ce]=he.key),j({action:ue,location:he})}else window.location.replace(Z)}})}function Y(X){t.go(X)}function V(){Y(-1)}function de(){Y(1)}var W=0;function _(X){W+=X,W===1&&X===1?(window.addEventListener(eE,T),n&&window.addEventListener(tE,k)):W===0&&(window.removeEventListener(eE,T),n&&window.removeEventListener(tE,k))}var M=!1;function Q(X){X===void 0&&(X=!1);var ie=C.setPrompt(X);return M||(_(1),M=!0),function(){return M&&(M=!1,_(-1)),ie()}}function oe(X){var ie=C.appendListener(X);return _(1),function(){_(-1),ie()}}var re={length:t.length,action:"POP",location:R,createHref:$,push:B,replace:U,go:Y,goBack:V,goForward:de,block:Q,listen:oe};return re}var nE="hashchange",u8={hashbang:{encodePath:function(t){return t.charAt(0)==="!"?t:"!/"+ZS(t)},decodePath:function(t){return t.charAt(0)==="!"?t.substr(1):t}},noslash:{encodePath:ZS,decodePath:Ou},slash:{encodePath:Ou,decodePath:Ou}};function BO(e){var t=e.indexOf("#");return t===-1?e:e.slice(0,t)}function ru(){var e=window.location.href,t=e.indexOf("#");return t===-1?"":e.substring(t+1)}function c8(e){window.location.hash=e}function tv(e){window.location.replace(BO(window.location.href)+"#"+e)}function f8(e){e===void 0&&(e={}),zO||Ra();var t=window.history;a8();var r=e,n=r.getUserConfirmation,o=n===void 0?HO:n,a=r.hashType,l=a===void 0?"slash":a,u=e.basename?DO(Ou(e.basename)):"",d=u8[l],h=d.encodePath,g=d.decodePath;function m(){var ie=g(ru());return u&&(ie=$O(ie,u)),ba(ie)}var w=FO();function x(ie){nr(X,ie),X.length=t.length,w.notifyListeners(X.location,X.action)}var C=!1,j=null;function T(ie,ue){return ie.pathname===ue.pathname&&ie.search===ue.search&&ie.hash===ue.hash}function k(){var ie=ru(),ue=h(ie);if(ie!==ue)tv(ue);else{var he=m(),Se=X.location;if(!C&&T(Se,he)||j===pn(he))return;j=null,P(he)}}function P(ie){if(C)C=!1,x();else{var ue="POP";w.confirmTransitionTo(ie,ue,o,function(he){he?x({action:ue,location:ie}):A(ie)})}}function A(ie){var ue=X.location,he=$.lastIndexOf(pn(ue));he===-1&&(he=0);var Se=$.lastIndexOf(pn(ie));Se===-1&&(Se=0);var Z=he-Se;Z&&(C=!0,V(Z))}var L=ru(),R=h(L);L!==R&&tv(R);var D=m(),$=[pn(D)];function B(ie){var ue=document.querySelector("base"),he="";return ue&&ue.getAttribute("href")&&(he=BO(window.location.href)),he+"#"+h(u+pn(ie))}function U(ie,ue){var he="PUSH",Se=ba(ie,void 0,void 0,X.location);w.confirmTransitionTo(Se,he,o,function(Z){if(Z){var ae=pn(Se),le=h(u+ae),ce=ru()!==le;if(ce){j=ae,c8(le);var me=$.lastIndexOf(pn(X.location)),Le=$.slice(0,me+1);Le.push(ae),$=Le,x({action:he,location:Se})}else x()}})}function Y(ie,ue){var he="REPLACE",Se=ba(ie,void 0,void 0,X.location);w.confirmTransitionTo(Se,he,o,function(Z){if(Z){var ae=pn(Se),le=h(u+ae),ce=ru()!==le;ce&&(j=ae,tv(le));var me=$.indexOf(pn(X.location));me!==-1&&($[me]=ae),x({action:he,location:Se})}})}function V(ie){t.go(ie)}function de(){V(-1)}function W(){V(1)}var _=0;function M(ie){_+=ie,_===1&&ie===1?window.addEventListener(nE,k):_===0&&window.removeEventListener(nE,k)}var Q=!1;function oe(ie){ie===void 0&&(ie=!1);var ue=w.setPrompt(ie);return Q||(M(1),Q=!0),function(){return Q&&(Q=!1,M(-1)),ue()}}function re(ie){var ue=w.appendListener(ie);return M(1),function(){M(-1),ue()}}var X={length:t.length,action:"POP",location:D,createHref:B,push:U,replace:Y,go:V,goBack:de,goForward:W,block:oe,listen:re};return X}_e.Component;var d8=function(e){an(t,e);function t(){for(var n,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,n.history=f8(n.props),n}var r=t.prototype;return r.render=function(){return _e.createElement(cp,{history:this.history,children:this.props.children})},t}(_e.Component),Am=function(t,r){return typeof t=="function"?t(r):t},Mm=function(t,r){return typeof t=="string"?ba(t,null,null,r):t},z0=function(t){return t},Ks=_e.forwardRef;typeof Ks>"u"&&(Ks=z0);function h8(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var p8=Ks(function(e,t){var r=e.innerRef,n=e.navigate,o=e.onClick,a=ja(e,["innerRef","navigate","onClick"]),l=a.target,u=nr({},a,{onClick:function(h){try{o&&o(h)}catch(g){throw h.preventDefault(),g}!h.defaultPrevented&&h.button===0&&(!l||l==="_self")&&!h8(h)&&(h.preventDefault(),n())}});return z0!==Ks?u.ref=t||r:u.ref=r,_e.createElement("a",u)}),g8=Ks(function(e,t){var r=e.component,n=r===void 0?p8:r,o=e.replace,a=e.to,l=e.innerRef,u=ja(e,["component","replace","to","innerRef"]);return _e.createElement(Oa.Consumer,null,function(d){d||Ra();var h=d.history,g=Mm(Am(a,d.location),d.location),m=g?h.createHref(g):"",w=nr({},u,{href:m,navigate:function(){var C=Am(a,d.location),j=pn(d.location)===pn(Mm(C)),T=o||j?h.replace:h.push;T(C)}});return z0!==Ks?w.ref=t||l:w.innerRef=l,_e.createElement(n,w)})}),WO=function(t){return t},th=_e.forwardRef;typeof th>"u"&&(th=WO);function v8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n}).join(" ")}th(function(e,t){var r=e["aria-current"],n=r===void 0?"page":r,o=e.activeClassName,a=o===void 0?"active":o,l=e.activeStyle,u=e.className,d=e.exact,h=e.isActive,g=e.location,m=e.sensitive,w=e.strict,x=e.style,C=e.to,j=e.innerRef,T=ja(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return _e.createElement(Oa.Consumer,null,function(k){k||Ra();var P=g||k.location,A=Mm(Am(C,P),P),L=A.pathname,R=L&&L.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),D=R?D0(P.pathname,{path:R,exact:d,sensitive:m,strict:w}):null,$=!!(h?h(D,P):D),B=typeof u=="function"?u($):u,U=typeof x=="function"?x($):x;$&&(B=v8(B,a),U=nr({},U,l));var Y=nr({"aria-current":$&&n||null,className:B,style:U,to:A},T);return WO!==th?Y.ref=t||j:Y.innerRef=j,_e.createElement(g8,Y)})});function m8(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var UO=E,y8=m8(UO);function iE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w8(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var b8=!!(typeof window<"u"&&window.document&&window.document.createElement);function x8(e,t,r){if(typeof e!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof t!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof r<"u"&&typeof r!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(o){return o.displayName||o.name||"Component"}return function(a){if(typeof a!="function")throw new Error("Expected WrappedComponent to be a React component.");var l=[],u;function d(){u=e(l.map(function(g){return g.props})),h.canUseDOM?t(u):r&&(u=r(u))}var h=function(g){w8(m,g);function m(){return g.apply(this,arguments)||this}m.peek=function(){return u},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var C=u;return u=void 0,l=[],C};var w=m.prototype;return w.UNSAFE_componentWillMount=function(){l.push(this),d()},w.componentDidUpdate=function(){d()},w.componentWillUnmount=function(){var C=l.indexOf(this);l.splice(C,1),d()},w.render=function(){return y8.createElement(a,this.props)},m}(UO.PureComponent);return iE(h,"displayName","SideEffect("+n(a)+")"),iE(h,"canUseDOM",b8),h}}var S8=x8;const E8=wt(S8);var C8=typeof Element<"u",k8=typeof Map=="function",T8=typeof Set=="function",O8=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function ud(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,o;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!ud(e[n],t[n]))return!1;return!0}var a;if(k8&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!ud(n.value[1],t.get(n.value[0])))return!1;return!0}if(T8&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(O8&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[n]))return!1;if(C8&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((o[n]==="_owner"||o[n]==="__v"||o[n]==="__o")&&e.$$typeof)&&!ud(e[o[n]],t[o[n]]))return!1;return!0}return e!==e&&t!==t}var P8=function(t,r){try{return ud(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const KO=wt(P8);var xa={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},Ve={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ve).map(function(e){return Ve[e]});var St={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},rh={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ju={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},L8=Object.keys(rh).reduce(function(e,t){return e[rh[t]]=t,e},{}),N8=[Ve.NOSCRIPT,Ve.SCRIPT,Ve.STYLE],Hn="data-react-helmet",j8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A8=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},M8=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Dr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I8=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},oE=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},R8=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},Im=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return r===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},_8=function(t){var r=Rs(t,Ve.TITLE),n=Rs(t,Ju.TITLE_TEMPLATE);if(n&&r)return n.replace(/%s/g,function(){return Array.isArray(r)?r.join(""):r});var o=Rs(t,Ju.DEFAULT_TITLE);return r||o||void 0},$8=function(t){return Rs(t,Ju.ON_CHANGE_CLIENT_STATE)||function(){}},rv=function(t,r){return r.filter(function(n){return typeof n[t]<"u"}).map(function(n){return n[t]}).reduce(function(n,o){return Dr({},n,o)},{})},D8=function(t,r){return r.filter(function(n){return typeof n[Ve.BASE]<"u"}).map(function(n){return n[Ve.BASE]}).reverse().reduce(function(n,o){if(!n.length)for(var a=Object.keys(o),l=0;l<a.length;l++){var u=a[l],d=u.toLowerCase();if(t.indexOf(d)!==-1&&o[d])return n.concat(o)}return n},[])},nu=function(t,r,n){var o={};return n.filter(function(a){return Array.isArray(a[t])?!0:(typeof a[t]<"u"&&B8("Helmet: "+t+' should be of type "Array". Instead found type "'+j8(a[t])+'"'),!1)}).map(function(a){return a[t]}).reverse().reduce(function(a,l){var u={};l.filter(function(w){for(var x=void 0,C=Object.keys(w),j=0;j<C.length;j++){var T=C[j],k=T.toLowerCase();r.indexOf(k)!==-1&&!(x===St.REL&&w[x].toLowerCase()==="canonical")&&!(k===St.REL&&w[k].toLowerCase()==="stylesheet")&&(x=k),r.indexOf(T)!==-1&&(T===St.INNER_HTML||T===St.CSS_TEXT||T===St.ITEM_PROP)&&(x=T)}if(!x||!w[x])return!1;var P=w[x].toLowerCase();return o[x]||(o[x]={}),u[x]||(u[x]={}),o[x][P]?!1:(u[x][P]=!0,!0)}).reverse().forEach(function(w){return a.push(w)});for(var d=Object.keys(u),h=0;h<d.length;h++){var g=d[h],m=Mj({},o[g],u[g]);o[g]=m}return a},[]).reverse()},Rs=function(t,r){for(var n=t.length-1;n>=0;n--){var o=t[n];if(o.hasOwnProperty(r))return o[r]}return null},F8=function(t){return{baseTag:D8([St.HREF,St.TARGET],t),bodyAttributes:rv(xa.BODY,t),defer:Rs(t,Ju.DEFER),encode:Rs(t,Ju.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:rv(xa.HTML,t),linkTags:nu(Ve.LINK,[St.REL,St.HREF],t),metaTags:nu(Ve.META,[St.NAME,St.CHARSET,St.HTTPEQUIV,St.PROPERTY,St.ITEM_PROP],t),noscriptTags:nu(Ve.NOSCRIPT,[St.INNER_HTML],t),onChangeClientState:$8(t),scriptTags:nu(Ve.SCRIPT,[St.SRC,St.INNER_HTML],t),styleTags:nu(Ve.STYLE,[St.CSS_TEXT],t),title:_8(t),titleAttributes:rv(xa.TITLE,t)}},Rm=function(){var e=Date.now();return function(t){var r=Date.now();r-e>16?(e=r,t(r)):setTimeout(function(){Rm(t)},0)}}(),aE=function(t){return clearTimeout(t)},z8=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Rm:nn.requestAnimationFrame||Rm,H8=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||aE:nn.cancelAnimationFrame||aE,B8=function(t){return console&&typeof console.warn=="function"&&console.warn(t)},iu=null,W8=function(t){iu&&H8(iu),t.defer?iu=z8(function(){sE(t,function(){iu=null})}):(sE(t),iu=null)},sE=function(t,r){var n=t.baseTag,o=t.bodyAttributes,a=t.htmlAttributes,l=t.linkTags,u=t.metaTags,d=t.noscriptTags,h=t.onChangeClientState,g=t.scriptTags,m=t.styleTags,w=t.title,x=t.titleAttributes;_m(Ve.BODY,o),_m(Ve.HTML,a),U8(w,x);var C={baseTag:vs(Ve.BASE,n),linkTags:vs(Ve.LINK,l),metaTags:vs(Ve.META,u),noscriptTags:vs(Ve.NOSCRIPT,d),scriptTags:vs(Ve.SCRIPT,g),styleTags:vs(Ve.STYLE,m)},j={},T={};Object.keys(C).forEach(function(k){var P=C[k],A=P.newTags,L=P.oldTags;A.length&&(j[k]=A),L.length&&(T[k]=C[k].oldTags)}),r&&r(),h(t,j,T)},GO=function(t){return Array.isArray(t)?t.join(""):t},U8=function(t,r){typeof t<"u"&&document.title!==t&&(document.title=GO(t)),_m(Ve.TITLE,r)},_m=function(t,r){var n=document.getElementsByTagName(t)[0];if(n){for(var o=n.getAttribute(Hn),a=o?o.split(","):[],l=[].concat(a),u=Object.keys(r),d=0;d<u.length;d++){var h=u[d],g=r[h]||"";n.getAttribute(h)!==g&&n.setAttribute(h,g),a.indexOf(h)===-1&&a.push(h);var m=l.indexOf(h);m!==-1&&l.splice(m,1)}for(var w=l.length-1;w>=0;w--)n.removeAttribute(l[w]);a.length===l.length?n.removeAttribute(Hn):n.getAttribute(Hn)!==u.join(",")&&n.setAttribute(Hn,u.join(","))}},vs=function(t,r){var n=document.head||document.querySelector(Ve.HEAD),o=n.querySelectorAll(t+"["+Hn+"]"),a=Array.prototype.slice.call(o),l=[],u=void 0;return r&&r.length&&r.forEach(function(d){var h=document.createElement(t);for(var g in d)if(d.hasOwnProperty(g))if(g===St.INNER_HTML)h.innerHTML=d.innerHTML;else if(g===St.CSS_TEXT)h.styleSheet?h.styleSheet.cssText=d.cssText:h.appendChild(document.createTextNode(d.cssText));else{var m=typeof d[g]>"u"?"":d[g];h.setAttribute(g,m)}h.setAttribute(Hn,"true"),a.some(function(w,x){return u=x,h.isEqualNode(w)})?a.splice(u,1):l.push(h)}),a.forEach(function(d){return d.parentNode.removeChild(d)}),l.forEach(function(d){return n.appendChild(d)}),{oldTags:a,newTags:l}},qO=function(t){return Object.keys(t).reduce(function(r,n){var o=typeof t[n]<"u"?n+'="'+t[n]+'"':""+n;return r?r+" "+o:o},"")},K8=function(t,r,n,o){var a=qO(n),l=GO(r);return a?"<"+t+" "+Hn+'="true" '+a+">"+Im(l,o)+"</"+t+">":"<"+t+" "+Hn+'="true">'+Im(l,o)+"</"+t+">"},G8=function(t,r,n){return r.reduce(function(o,a){var l=Object.keys(a).filter(function(h){return!(h===St.INNER_HTML||h===St.CSS_TEXT)}).reduce(function(h,g){var m=typeof a[g]>"u"?g:g+'="'+Im(a[g],n)+'"';return h?h+" "+m:m},""),u=a.innerHTML||a.cssText||"",d=N8.indexOf(t)===-1;return o+"<"+t+" "+Hn+'="true" '+l+(d?"/>":">"+u+"</"+t+">")},"")},VO=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,o){return n[rh[o]||o]=t[o],n},r)},q8=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(t).reduce(function(n,o){return n[L8[o]||o]=t[o],n},r)},V8=function(t,r,n){var o,a=(o={key:r},o[Hn]=!0,o),l=VO(n,a);return[_e.createElement(Ve.TITLE,l,r)]},X8=function(t,r){return r.map(function(n,o){var a,l=(a={key:o},a[Hn]=!0,a);return Object.keys(n).forEach(function(u){var d=rh[u]||u;if(d===St.INNER_HTML||d===St.CSS_TEXT){var h=n.innerHTML||n.cssText;l.dangerouslySetInnerHTML={__html:h}}else l[d]=n[u]}),_e.createElement(t,l)})},ji=function(t,r,n){switch(t){case Ve.TITLE:return{toComponent:function(){return V8(t,r.title,r.titleAttributes)},toString:function(){return K8(t,r.title,r.titleAttributes,n)}};case xa.BODY:case xa.HTML:return{toComponent:function(){return VO(r)},toString:function(){return qO(r)}};default:return{toComponent:function(){return X8(t,r)},toString:function(){return G8(t,r,n)}}}},XO=function(t){var r=t.baseTag,n=t.bodyAttributes,o=t.encode,a=t.htmlAttributes,l=t.linkTags,u=t.metaTags,d=t.noscriptTags,h=t.scriptTags,g=t.styleTags,m=t.title,w=m===void 0?"":m,x=t.titleAttributes;return{base:ji(Ve.BASE,r,o),bodyAttributes:ji(xa.BODY,n,o),htmlAttributes:ji(xa.HTML,a,o),link:ji(Ve.LINK,l,o),meta:ji(Ve.META,u,o),noscript:ji(Ve.NOSCRIPT,d,o),script:ji(Ve.SCRIPT,h,o),style:ji(Ve.STYLE,g,o),title:ji(Ve.TITLE,{title:w,titleAttributes:x},o)}},Y8=function(t){var r,n;return n=r=function(o){I8(a,o);function a(){return A8(this,a),R8(this,o.apply(this,arguments))}return a.prototype.shouldComponentUpdate=function(u){return!KO(this.props,u)},a.prototype.mapNestedChildrenToProps=function(u,d){if(!d)return null;switch(u.type){case Ve.SCRIPT:case Ve.NOSCRIPT:return{innerHTML:d};case Ve.STYLE:return{cssText:d}}throw new Error("<"+u.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},a.prototype.flattenArrayTypeChildren=function(u){var d,h=u.child,g=u.arrayTypeChildren,m=u.newChildProps,w=u.nestedChildren;return Dr({},g,(d={},d[h.type]=[].concat(g[h.type]||[],[Dr({},m,this.mapNestedChildrenToProps(h,w))]),d))},a.prototype.mapObjectTypeChildren=function(u){var d,h,g=u.child,m=u.newProps,w=u.newChildProps,x=u.nestedChildren;switch(g.type){case Ve.TITLE:return Dr({},m,(d={},d[g.type]=x,d.titleAttributes=Dr({},w),d));case Ve.BODY:return Dr({},m,{bodyAttributes:Dr({},w)});case Ve.HTML:return Dr({},m,{htmlAttributes:Dr({},w)})}return Dr({},m,(h={},h[g.type]=Dr({},w),h))},a.prototype.mapArrayTypeChildrenToProps=function(u,d){var h=Dr({},d);return Object.keys(u).forEach(function(g){var m;h=Dr({},h,(m={},m[g]=u[g],m))}),h},a.prototype.warnOnInvalidChildren=function(u,d){return!0},a.prototype.mapChildrenToProps=function(u,d){var h=this,g={};return _e.Children.forEach(u,function(m){if(!(!m||!m.props)){var w=m.props,x=w.children,C=oE(w,["children"]),j=q8(C);switch(h.warnOnInvalidChildren(m,x),m.type){case Ve.LINK:case Ve.META:case Ve.NOSCRIPT:case Ve.SCRIPT:case Ve.STYLE:g=h.flattenArrayTypeChildren({child:m,arrayTypeChildren:g,newChildProps:j,nestedChildren:x});break;default:d=h.mapObjectTypeChildren({child:m,newProps:d,newChildProps:j,nestedChildren:x});break}}}),d=this.mapArrayTypeChildrenToProps(g,d),d},a.prototype.render=function(){var u=this.props,d=u.children,h=oE(u,["children"]),g=Dr({},h);return d&&(g=this.mapChildrenToProps(d,g)),_e.createElement(t,g)},M8(a,null,[{key:"canUseDOM",set:function(u){t.canUseDOM=u}}]),a}(_e.Component),r.propTypes={base:pt.object,bodyAttributes:pt.object,children:pt.oneOfType([pt.arrayOf(pt.node),pt.node]),defaultTitle:pt.string,defer:pt.bool,encodeSpecialCharacters:pt.bool,htmlAttributes:pt.object,link:pt.arrayOf(pt.object),meta:pt.arrayOf(pt.object),noscript:pt.arrayOf(pt.object),onChangeClientState:pt.func,script:pt.arrayOf(pt.object),style:pt.arrayOf(pt.object),title:pt.string,titleAttributes:pt.object,titleTemplate:pt.string},r.defaultProps={defer:!0,encodeSpecialCharacters:!0},r.peek=t.peek,r.rewind=function(){var o=t.rewind();return o||(o=XO({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),o},n},Q8=function(){return null},J8=E8(F8,W8,XO)(Q8),nh=Y8(J8);nh.renderStatic=nh.rewind;const YO=({title:e})=>(E.useEffect(()=>{if(Ia()){const t=window.setTimeout(()=>{document.querySelector("title").innerHTML=e},0);return()=>window.clearTimeout(t)}},[e]),y.jsx(nh,{children:y.jsx("title",{children:e})})),QO=E.forwardRef((e,t)=>{var u;const{children:r,grabbable:n,title:o}=e,a=E.useRef(null),l=Wt("main-content",{padded:(u=e.padded)!=null?u:!0});return E.useImperativeHandle(t,()=>a.current),E.useEffect(()=>{a.current&&a.current.focus()},[]),E.useEffect(()=>{const d=a.current;let h,g;function m(T){d&&(d.scrollLeft=h.left+(g.left-T.clientX),d.scrollTop=h.top+(g.top-T.clientY))}function w(T){d&&(d.releasePointerCapture(T.pointerId),d.removeEventListener("pointerleave",w),d.removeEventListener("pointermove",m),d.style.cursor="",T.preventDefault())}function x(T){T.button===2&&w(T)}function C(T){T.button!==2||!d||(d.setPointerCapture(T.pointerId),d.addEventListener("pointerleave",w),d.addEventListener("pointermove",m),d.addEventListener("pointerup",x),d.style.cursor="grabbing",h={left:d.scrollLeft,top:d.scrollTop},g={left:T.clientX,top:T.clientY},T.preventDefault())}function j(T){T.preventDefault()}if(n&&d)return d.addEventListener("pointerdown",C),d.addEventListener("contextmenu",j),()=>{d.removeEventListener("pointerdown",C),d.removeEventListener("contextmenu",j)}},[n]),y.jsxs("div",{className:l,ref:a,children:[o&&y.jsxs(y.Fragment,{children:[y.jsx(YO,{title:o}),y.jsx("h1",{children:o})]}),r]})});function Z8(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function e7(e,t){e.classList?e.classList.add(t):Z8(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function lE(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function t7(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=lE(e.className,t):e.setAttribute("class",lE(e.className&&e.className.baseVal||"",t))}const uE={disabled:!1},ih=_e.createContext(null);var JO=function(t){return t.scrollTop},gu="unmounted",ea="exited",ta="entering",ys="entered",$m="exiting",Xi=function(e){an(t,e);function t(n,o){var a;a=e.call(this,n,o)||this;var l=o,u=l&&!l.isMounting?n.enter:n.appear,d;return a.appearStatus=null,n.in?u?(d=ea,a.appearStatus=ta):d=ys:n.unmountOnExit||n.mountOnEnter?d=gu:d=ea,a.state={status:d},a.nextCallback=null,a}t.getDerivedStateFromProps=function(o,a){var l=o.in;return l&&a.status===gu?{status:ea}:null};var r=t.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var a=null;if(o!==this.props){var l=this.state.status;this.props.in?l!==ta&&l!==ys&&(a=ta):(l===ta||l===ys)&&(a=$m)}this.updateStatus(!1,a)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,a,l,u;return a=l=u=o,o!=null&&typeof o!="number"&&(a=o.exit,l=o.enter,u=o.appear!==void 0?o.appear:l),{exit:a,enter:l,appear:u}},r.updateStatus=function(o,a){if(o===void 0&&(o=!1),a!==null)if(this.cancelNextCallback(),a===ta){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:wf.findDOMNode(this);l&&JO(l)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ea&&this.setState({status:gu})},r.performEnter=function(o){var a=this,l=this.props.enter,u=this.context?this.context.isMounting:o,d=this.props.nodeRef?[u]:[wf.findDOMNode(this),u],h=d[0],g=d[1],m=this.getTimeouts(),w=u?m.appear:m.enter;if(!o&&!l||uE.disabled){this.safeSetState({status:ys},function(){a.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:ta},function(){a.props.onEntering(h,g),a.onTransitionEnd(w,function(){a.safeSetState({status:ys},function(){a.props.onEntered(h,g)})})})},r.performExit=function(){var o=this,a=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:wf.findDOMNode(this);if(!a||uE.disabled){this.safeSetState({status:ea},function(){o.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:$m},function(){o.props.onExiting(u),o.onTransitionEnd(l.exit,function(){o.safeSetState({status:ea},function(){o.props.onExited(u)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,a){a=this.setNextCallback(a),this.setState(o,a)},r.setNextCallback=function(o){var a=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,a.nextCallback=null,o(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},r.onTransitionEnd=function(o,a){this.setNextCallback(a);var l=this.props.nodeRef?this.props.nodeRef.current:wf.findDOMNode(this),u=o==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=d[0],g=d[1];this.props.addEndListener(h,g)}o!=null&&setTimeout(this.nextCallback,o)},r.render=function(){var o=this.state.status;if(o===gu)return null;var a=this.props,l=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var u=ja(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _e.createElement(ih.Provider,{value:null},typeof l=="function"?l(o,u):_e.cloneElement(_e.Children.only(l),u))},t}(_e.Component);Xi.contextType=ih;Xi.propTypes={};function ms(){}Xi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ms,onEntering:ms,onEntered:ms,onExit:ms,onExiting:ms,onExited:ms};Xi.UNMOUNTED=gu;Xi.EXITED=ea;Xi.ENTERING=ta;Xi.ENTERED=ys;Xi.EXITING=$m;var r7=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return e7(t,n)})},nv=function(t,r){return t&&r&&r.split(" ").forEach(function(n){return t7(t,n)})},Xn=function(e){an(t,e);function t(){for(var n,o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=e.call.apply(e,[this].concat(a))||this,n.appliedClasses={appear:{},enter:{},exit:{}},n.onEnter=function(u,d){var h=n.resolveArguments(u,d),g=h[0],m=h[1];n.removeClasses(g,"exit"),n.addClass(g,m?"appear":"enter","base"),n.props.onEnter&&n.props.onEnter(u,d)},n.onEntering=function(u,d){var h=n.resolveArguments(u,d),g=h[0],m=h[1],w=m?"appear":"enter";n.addClass(g,w,"active"),n.props.onEntering&&n.props.onEntering(u,d)},n.onEntered=function(u,d){var h=n.resolveArguments(u,d),g=h[0],m=h[1],w=m?"appear":"enter";n.removeClasses(g,w),n.addClass(g,w,"done"),n.props.onEntered&&n.props.onEntered(u,d)},n.onExit=function(u){var d=n.resolveArguments(u),h=d[0];n.removeClasses(h,"appear"),n.removeClasses(h,"enter"),n.addClass(h,"exit","base"),n.props.onExit&&n.props.onExit(u)},n.onExiting=function(u){var d=n.resolveArguments(u),h=d[0];n.addClass(h,"exit","active"),n.props.onExiting&&n.props.onExiting(u)},n.onExited=function(u){var d=n.resolveArguments(u),h=d[0];n.removeClasses(h,"exit"),n.addClass(h,"exit","done"),n.props.onExited&&n.props.onExited(u)},n.resolveArguments=function(u,d){return n.props.nodeRef?[n.props.nodeRef.current,u]:[u,d]},n.getClassNames=function(u){var d=n.props.classNames,h=typeof d=="string",g=h&&d?d+"-":"",m=h?""+g+u:d[u],w=h?m+"-active":d[u+"Active"],x=h?m+"-done":d[u+"Done"];return{baseClassName:m,activeClassName:w,doneClassName:x}},n}var r=t.prototype;return r.addClass=function(o,a,l){var u=this.getClassNames(a)[l+"ClassName"],d=this.getClassNames("enter"),h=d.doneClassName;a==="appear"&&l==="done"&&h&&(u+=" "+h),l==="active"&&o&&JO(o),u&&(this.appliedClasses[a][l]=u,r7(o,u))},r.removeClasses=function(o,a){var l=this.appliedClasses[a],u=l.base,d=l.active,h=l.done;this.appliedClasses[a]={},u&&nv(o,u),d&&nv(o,d),h&&nv(o,h)},r.render=function(){var o=this.props;o.classNames;var a=ja(o,["classNames"]);return _e.createElement(Xi,nr({},a,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(_e.Component);Xn.defaultProps={classNames:""};Xn.propTypes={};function H0(e,t){var r=function(a){return t&&E.isValidElement(a)?t(a):a},n=Object.create(null);return e&&E.Children.map(e,function(o){return o}).forEach(function(o){n[o.key]=r(o)}),n}function n7(e,t){e=e||{},t=t||{};function r(g){return g in t?t[g]:e[g]}var n=Object.create(null),o=[];for(var a in e)a in t?o.length&&(n[a]=o,o=[]):o.push(a);var l,u={};for(var d in t){if(n[d])for(l=0;l<n[d].length;l++){var h=n[d][l];u[n[d][l]]=r(h)}u[d]=r(d)}for(l=0;l<o.length;l++)u[o[l]]=r(o[l]);return u}function da(e,t,r){return r[t]!=null?r[t]:e.props[t]}function i7(e,t){return H0(e.children,function(r){return E.cloneElement(r,{onExited:t.bind(null,r),in:!0,appear:da(r,"appear",e),enter:da(r,"enter",e),exit:da(r,"exit",e)})})}function o7(e,t,r){var n=H0(e.children),o=n7(t,n);return Object.keys(o).forEach(function(a){var l=o[a];if(E.isValidElement(l)){var u=a in t,d=a in n,h=t[a],g=E.isValidElement(h)&&!h.props.in;d&&(!u||g)?o[a]=E.cloneElement(l,{onExited:r.bind(null,l),in:!0,exit:da(l,"exit",e),enter:da(l,"enter",e)}):!d&&u&&!g?o[a]=E.cloneElement(l,{in:!1}):d&&u&&E.isValidElement(h)&&(o[a]=E.cloneElement(l,{onExited:r.bind(null,l),in:h.props.in,exit:da(l,"exit",e),enter:da(l,"enter",e)}))}}),o}var a7=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},s7={component:"div",childFactory:function(t){return t}},_a=function(e){an(t,e);function t(n,o){var a;a=e.call(this,n,o)||this;var l=a.handleExited.bind(jo(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}var r=t.prototype;return r.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},r.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(o,a){var l=a.children,u=a.handleExited,d=a.firstRender;return{children:d?i7(o,u):o7(o,l,u),firstRender:!1}},r.handleExited=function(o,a){var l=H0(this.props.children);o.key in l||(o.props.onExited&&o.props.onExited(a),this.mounted&&this.setState(function(u){var d=nr({},u.children);return delete d[o.key],{children:d}}))},r.render=function(){var o=this.props,a=o.component,l=o.childFactory,u=ja(o,["component","childFactory"]),d=this.state.contextValue,h=a7(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,a===null?_e.createElement(ih.Provider,{value:d},h):_e.createElement(ih.Provider,{value:d},_e.createElement(a,u,h))},t}(_e.Component);_a.propTypes={};_a.defaultProps=s7;var cE=function(t){return t.reduce(function(r,n){var o=n[0],a=n[1];return r[o]=a,r},{})},fE=typeof window<"u"&&window.document&&window.document.createElement?E.useLayoutEffect:E.useEffect,Br="top",xn="bottom",Sn="right",Wr="left",B0="auto",Cc=[Br,xn,Sn,Wr],Gs="start",Zu="end",l7="clippingParents",ZO="viewport",ou="popper",u7="reference",dE=Cc.reduce(function(e,t){return e.concat([t+"-"+Gs,t+"-"+Zu])},[]),eP=[].concat(Cc,[B0]).reduce(function(e,t){return e.concat([t,t+"-"+Gs,t+"-"+Zu])},[]),c7="beforeRead",f7="read",d7="afterRead",h7="beforeMain",p7="main",g7="afterMain",v7="beforeWrite",m7="write",y7="afterWrite",w7=[c7,f7,d7,h7,p7,g7,v7,m7,y7];function pi(e){return e?(e.nodeName||"").toLowerCase():null}function sn(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Pa(e){var t=sn(e).Element;return e instanceof t||e instanceof Element}function yn(e){var t=sn(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function W0(e){if(typeof ShadowRoot>"u")return!1;var t=sn(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function b7(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var n=t.styles[r]||{},o=t.attributes[r]||{},a=t.elements[r];!yn(a)||!pi(a)||(Object.assign(a.style,n),Object.keys(o).forEach(function(l){var u=o[l];u===!1?a.removeAttribute(l):a.setAttribute(l,u===!0?"":u)}))})}function x7(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(n){var o=t.elements[n],a=t.attributes[n]||{},l=Object.keys(t.styles.hasOwnProperty(n)?t.styles[n]:r[n]),u=l.reduce(function(d,h){return d[h]="",d},{});!yn(o)||!pi(o)||(Object.assign(o.style,u),Object.keys(a).forEach(function(d){o.removeAttribute(d)}))})}}const S7={name:"applyStyles",enabled:!0,phase:"write",fn:b7,effect:x7,requires:["computeStyles"]};function di(e){return e.split("-")[0]}var Sa=Math.max,oh=Math.min,qs=Math.round;function Dm(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function tP(){return!/^((?!chrome|android).)*safari/i.test(Dm())}function Vs(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var n=e.getBoundingClientRect(),o=1,a=1;t&&yn(e)&&(o=e.offsetWidth>0&&qs(n.width)/e.offsetWidth||1,a=e.offsetHeight>0&&qs(n.height)/e.offsetHeight||1);var l=Pa(e)?sn(e):window,u=l.visualViewport,d=!tP()&&r,h=(n.left+(d&&u?u.offsetLeft:0))/o,g=(n.top+(d&&u?u.offsetTop:0))/a,m=n.width/o,w=n.height/a;return{width:m,height:w,top:g,right:h+m,bottom:g+w,left:h,x:h,y:g}}function U0(e){var t=Vs(e),r=e.offsetWidth,n=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-n)<=1&&(n=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:n}}function rP(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&W0(r)){var n=t;do{if(n&&e.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Gi(e){return sn(e).getComputedStyle(e)}function E7(e){return["table","td","th"].indexOf(pi(e))>=0}function zo(e){return((Pa(e)?e.ownerDocument:e.document)||window.document).documentElement}function dp(e){return pi(e)==="html"?e:e.assignedSlot||e.parentNode||(W0(e)?e.host:null)||zo(e)}function hE(e){return!yn(e)||Gi(e).position==="fixed"?null:e.offsetParent}function C7(e){var t=/firefox/i.test(Dm()),r=/Trident/i.test(Dm());if(r&&yn(e)){var n=Gi(e);if(n.position==="fixed")return null}var o=dp(e);for(W0(o)&&(o=o.host);yn(o)&&["html","body"].indexOf(pi(o))<0;){var a=Gi(o);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||t&&a.willChange==="filter"||t&&a.filter&&a.filter!=="none")return o;o=o.parentNode}return null}function kc(e){for(var t=sn(e),r=hE(e);r&&E7(r)&&Gi(r).position==="static";)r=hE(r);return r&&(pi(r)==="html"||pi(r)==="body"&&Gi(r).position==="static")?t:r||C7(e)||t}function K0(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Pu(e,t,r){return Sa(e,oh(t,r))}function k7(e,t,r){var n=Pu(e,t,r);return n>r?r:n}function nP(){return{top:0,right:0,bottom:0,left:0}}function iP(e){return Object.assign({},nP(),e)}function oP(e,t){return t.reduce(function(r,n){return r[n]=e,r},{})}var T7=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,iP(typeof t!="number"?t:oP(t,Cc))};function O7(e){var t,r=e.state,n=e.name,o=e.options,a=r.elements.arrow,l=r.modifiersData.popperOffsets,u=di(r.placement),d=K0(u),h=[Wr,Sn].indexOf(u)>=0,g=h?"height":"width";if(!(!a||!l)){var m=T7(o.padding,r),w=U0(a),x=d==="y"?Br:Wr,C=d==="y"?xn:Sn,j=r.rects.reference[g]+r.rects.reference[d]-l[d]-r.rects.popper[g],T=l[d]-r.rects.reference[d],k=kc(a),P=k?d==="y"?k.clientHeight||0:k.clientWidth||0:0,A=j/2-T/2,L=m[x],R=P-w[g]-m[C],D=P/2-w[g]/2+A,$=Pu(L,D,R),B=d;r.modifiersData[n]=(t={},t[B]=$,t.centerOffset=$-D,t)}}function P7(e){var t=e.state,r=e.options,n=r.element,o=n===void 0?"[data-popper-arrow]":n;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||rP(t.elements.popper,o)&&(t.elements.arrow=o))}const L7={name:"arrow",enabled:!0,phase:"main",fn:O7,effect:P7,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Xs(e){return e.split("-")[1]}var N7={top:"auto",right:"auto",bottom:"auto",left:"auto"};function j7(e,t){var r=e.x,n=e.y,o=t.devicePixelRatio||1;return{x:qs(r*o)/o||0,y:qs(n*o)/o||0}}function pE(e){var t,r=e.popper,n=e.popperRect,o=e.placement,a=e.variation,l=e.offsets,u=e.position,d=e.gpuAcceleration,h=e.adaptive,g=e.roundOffsets,m=e.isFixed,w=l.x,x=w===void 0?0:w,C=l.y,j=C===void 0?0:C,T=typeof g=="function"?g({x,y:j}):{x,y:j};x=T.x,j=T.y;var k=l.hasOwnProperty("x"),P=l.hasOwnProperty("y"),A=Wr,L=Br,R=window;if(h){var D=kc(r),$="clientHeight",B="clientWidth";if(D===sn(r)&&(D=zo(r),Gi(D).position!=="static"&&u==="absolute"&&($="scrollHeight",B="scrollWidth")),D=D,o===Br||(o===Wr||o===Sn)&&a===Zu){L=xn;var U=m&&D===R&&R.visualViewport?R.visualViewport.height:D[$];j-=U-n.height,j*=d?1:-1}if(o===Wr||(o===Br||o===xn)&&a===Zu){A=Sn;var Y=m&&D===R&&R.visualViewport?R.visualViewport.width:D[B];x-=Y-n.width,x*=d?1:-1}}var V=Object.assign({position:u},h&&N7),de=g===!0?j7({x,y:j},sn(r)):{x,y:j};if(x=de.x,j=de.y,d){var W;return Object.assign({},V,(W={},W[L]=P?"0":"",W[A]=k?"0":"",W.transform=(R.devicePixelRatio||1)<=1?"translate("+x+"px, "+j+"px)":"translate3d("+x+"px, "+j+"px, 0)",W))}return Object.assign({},V,(t={},t[L]=P?j+"px":"",t[A]=k?x+"px":"",t.transform="",t))}function A7(e){var t=e.state,r=e.options,n=r.gpuAcceleration,o=n===void 0?!0:n,a=r.adaptive,l=a===void 0?!0:a,u=r.roundOffsets,d=u===void 0?!0:u,h={placement:di(t.placement),variation:Xs(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,pE(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:l,roundOffsets:d})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,pE(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:d})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}const M7={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:A7,data:{}};var If={passive:!0};function I7(e){var t=e.state,r=e.instance,n=e.options,o=n.scroll,a=o===void 0?!0:o,l=n.resize,u=l===void 0?!0:l,d=sn(t.elements.popper),h=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&h.forEach(function(g){g.addEventListener("scroll",r.update,If)}),u&&d.addEventListener("resize",r.update,If),function(){a&&h.forEach(function(g){g.removeEventListener("scroll",r.update,If)}),u&&d.removeEventListener("resize",r.update,If)}}const R7={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:I7,data:{}};var _7={left:"right",right:"left",bottom:"top",top:"bottom"};function cd(e){return e.replace(/left|right|bottom|top/g,function(t){return _7[t]})}var $7={start:"end",end:"start"};function gE(e){return e.replace(/start|end/g,function(t){return $7[t]})}function G0(e){var t=sn(e),r=t.pageXOffset,n=t.pageYOffset;return{scrollLeft:r,scrollTop:n}}function q0(e){return Vs(zo(e)).left+G0(e).scrollLeft}function D7(e,t){var r=sn(e),n=zo(e),o=r.visualViewport,a=n.clientWidth,l=n.clientHeight,u=0,d=0;if(o){a=o.width,l=o.height;var h=tP();(h||!h&&t==="fixed")&&(u=o.offsetLeft,d=o.offsetTop)}return{width:a,height:l,x:u+q0(e),y:d}}function F7(e){var t,r=zo(e),n=G0(e),o=(t=e.ownerDocument)==null?void 0:t.body,a=Sa(r.scrollWidth,r.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),l=Sa(r.scrollHeight,r.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),u=-n.scrollLeft+q0(e),d=-n.scrollTop;return Gi(o||r).direction==="rtl"&&(u+=Sa(r.clientWidth,o?o.clientWidth:0)-a),{width:a,height:l,x:u,y:d}}function V0(e){var t=Gi(e),r=t.overflow,n=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+o+n)}function aP(e){return["html","body","#document"].indexOf(pi(e))>=0?e.ownerDocument.body:yn(e)&&V0(e)?e:aP(dp(e))}function Lu(e,t){var r;t===void 0&&(t=[]);var n=aP(e),o=n===((r=e.ownerDocument)==null?void 0:r.body),a=sn(n),l=o?[a].concat(a.visualViewport||[],V0(n)?n:[]):n,u=t.concat(l);return o?u:u.concat(Lu(dp(l)))}function Fm(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function z7(e,t){var r=Vs(e,!1,t==="fixed");return r.top=r.top+e.clientTop,r.left=r.left+e.clientLeft,r.bottom=r.top+e.clientHeight,r.right=r.left+e.clientWidth,r.width=e.clientWidth,r.height=e.clientHeight,r.x=r.left,r.y=r.top,r}function vE(e,t,r){return t===ZO?Fm(D7(e,r)):Pa(t)?z7(t,r):Fm(F7(zo(e)))}function H7(e){var t=Lu(dp(e)),r=["absolute","fixed"].indexOf(Gi(e).position)>=0,n=r&&yn(e)?kc(e):e;return Pa(n)?t.filter(function(o){return Pa(o)&&rP(o,n)&&pi(o)!=="body"}):[]}function B7(e,t,r,n){var o=t==="clippingParents"?H7(e):[].concat(t),a=[].concat(o,[r]),l=a[0],u=a.reduce(function(d,h){var g=vE(e,h,n);return d.top=Sa(g.top,d.top),d.right=oh(g.right,d.right),d.bottom=oh(g.bottom,d.bottom),d.left=Sa(g.left,d.left),d},vE(e,l,n));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function sP(e){var t=e.reference,r=e.element,n=e.placement,o=n?di(n):null,a=n?Xs(n):null,l=t.x+t.width/2-r.width/2,u=t.y+t.height/2-r.height/2,d;switch(o){case Br:d={x:l,y:t.y-r.height};break;case xn:d={x:l,y:t.y+t.height};break;case Sn:d={x:t.x+t.width,y:u};break;case Wr:d={x:t.x-r.width,y:u};break;default:d={x:t.x,y:t.y}}var h=o?K0(o):null;if(h!=null){var g=h==="y"?"height":"width";switch(a){case Gs:d[h]=d[h]-(t[g]/2-r[g]/2);break;case Zu:d[h]=d[h]+(t[g]/2-r[g]/2);break}}return d}function ec(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=n===void 0?e.placement:n,a=r.strategy,l=a===void 0?e.strategy:a,u=r.boundary,d=u===void 0?l7:u,h=r.rootBoundary,g=h===void 0?ZO:h,m=r.elementContext,w=m===void 0?ou:m,x=r.altBoundary,C=x===void 0?!1:x,j=r.padding,T=j===void 0?0:j,k=iP(typeof T!="number"?T:oP(T,Cc)),P=w===ou?u7:ou,A=e.rects.popper,L=e.elements[C?P:w],R=B7(Pa(L)?L:L.contextElement||zo(e.elements.popper),d,g,l),D=Vs(e.elements.reference),$=sP({reference:D,element:A,strategy:"absolute",placement:o}),B=Fm(Object.assign({},A,$)),U=w===ou?B:D,Y={top:R.top-U.top+k.top,bottom:U.bottom-R.bottom+k.bottom,left:R.left-U.left+k.left,right:U.right-R.right+k.right},V=e.modifiersData.offset;if(w===ou&&V){var de=V[o];Object.keys(Y).forEach(function(W){var _=[Sn,xn].indexOf(W)>=0?1:-1,M=[Br,xn].indexOf(W)>=0?"y":"x";Y[W]+=de[M]*_})}return Y}function W7(e,t){t===void 0&&(t={});var r=t,n=r.placement,o=r.boundary,a=r.rootBoundary,l=r.padding,u=r.flipVariations,d=r.allowedAutoPlacements,h=d===void 0?eP:d,g=Xs(n),m=g?u?dE:dE.filter(function(C){return Xs(C)===g}):Cc,w=m.filter(function(C){return h.indexOf(C)>=0});w.length===0&&(w=m);var x=w.reduce(function(C,j){return C[j]=ec(e,{placement:j,boundary:o,rootBoundary:a,padding:l})[di(j)],C},{});return Object.keys(x).sort(function(C,j){return x[C]-x[j]})}function U7(e){if(di(e)===B0)return[];var t=cd(e);return[gE(e),t,gE(t)]}function K7(e){var t=e.state,r=e.options,n=e.name;if(!t.modifiersData[n]._skip){for(var o=r.mainAxis,a=o===void 0?!0:o,l=r.altAxis,u=l===void 0?!0:l,d=r.fallbackPlacements,h=r.padding,g=r.boundary,m=r.rootBoundary,w=r.altBoundary,x=r.flipVariations,C=x===void 0?!0:x,j=r.allowedAutoPlacements,T=t.options.placement,k=di(T),P=k===T,A=d||(P||!C?[cd(T)]:U7(T)),L=[T].concat(A).reduce(function(Z,ae){return Z.concat(di(ae)===B0?W7(t,{placement:ae,boundary:g,rootBoundary:m,padding:h,flipVariations:C,allowedAutoPlacements:j}):ae)},[]),R=t.rects.reference,D=t.rects.popper,$=new Map,B=!0,U=L[0],Y=0;Y<L.length;Y++){var V=L[Y],de=di(V),W=Xs(V)===Gs,_=[Br,xn].indexOf(de)>=0,M=_?"width":"height",Q=ec(t,{placement:V,boundary:g,rootBoundary:m,altBoundary:w,padding:h}),oe=_?W?Sn:Wr:W?xn:Br;R[M]>D[M]&&(oe=cd(oe));var re=cd(oe),X=[];if(a&&X.push(Q[de]<=0),u&&X.push(Q[oe]<=0,Q[re]<=0),X.every(function(Z){return Z})){U=V,B=!1;break}$.set(V,X)}if(B)for(var ie=C?3:1,ue=function(ae){var le=L.find(function(ce){var me=$.get(ce);if(me)return me.slice(0,ae).every(function(Le){return Le})});if(le)return U=le,"break"},he=ie;he>0;he--){var Se=ue(he);if(Se==="break")break}t.placement!==U&&(t.modifiersData[n]._skip=!0,t.placement=U,t.reset=!0)}}const G7={name:"flip",enabled:!0,phase:"main",fn:K7,requiresIfExists:["offset"],data:{_skip:!1}};function mE(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function yE(e){return[Br,Sn,xn,Wr].some(function(t){return e[t]>=0})}function q7(e){var t=e.state,r=e.name,n=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,l=ec(t,{elementContext:"reference"}),u=ec(t,{altBoundary:!0}),d=mE(l,n),h=mE(u,o,a),g=yE(d),m=yE(h);t.modifiersData[r]={referenceClippingOffsets:d,popperEscapeOffsets:h,isReferenceHidden:g,hasPopperEscaped:m},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":g,"data-popper-escaped":m})}const V7={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:q7};function X7(e,t,r){var n=di(e),o=[Wr,Br].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,l=a[0],u=a[1];return l=l||0,u=(u||0)*o,[Wr,Sn].indexOf(n)>=0?{x:u,y:l}:{x:l,y:u}}function Y7(e){var t=e.state,r=e.options,n=e.name,o=r.offset,a=o===void 0?[0,0]:o,l=eP.reduce(function(g,m){return g[m]=X7(m,t.rects,a),g},{}),u=l[t.placement],d=u.x,h=u.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=d,t.modifiersData.popperOffsets.y+=h),t.modifiersData[n]=l}const Q7={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Y7};function J7(e){var t=e.state,r=e.name;t.modifiersData[r]=sP({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}const Z7={name:"popperOffsets",enabled:!0,phase:"read",fn:J7,data:{}};function e9(e){return e==="x"?"y":"x"}function t9(e){var t=e.state,r=e.options,n=e.name,o=r.mainAxis,a=o===void 0?!0:o,l=r.altAxis,u=l===void 0?!1:l,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,m=r.padding,w=r.tether,x=w===void 0?!0:w,C=r.tetherOffset,j=C===void 0?0:C,T=ec(t,{boundary:d,rootBoundary:h,padding:m,altBoundary:g}),k=di(t.placement),P=Xs(t.placement),A=!P,L=K0(k),R=e9(L),D=t.modifiersData.popperOffsets,$=t.rects.reference,B=t.rects.popper,U=typeof j=="function"?j(Object.assign({},t.rects,{placement:t.placement})):j,Y=typeof U=="number"?{mainAxis:U,altAxis:U}:Object.assign({mainAxis:0,altAxis:0},U),V=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,de={x:0,y:0};if(D){if(a){var W,_=L==="y"?Br:Wr,M=L==="y"?xn:Sn,Q=L==="y"?"height":"width",oe=D[L],re=oe+T[_],X=oe-T[M],ie=x?-B[Q]/2:0,ue=P===Gs?$[Q]:B[Q],he=P===Gs?-B[Q]:-$[Q],Se=t.elements.arrow,Z=x&&Se?U0(Se):{width:0,height:0},ae=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:nP(),le=ae[_],ce=ae[M],me=Pu(0,$[Q],Z[Q]),Le=A?$[Q]/2-ie-me-le-Y.mainAxis:ue-me-le-Y.mainAxis,Ne=A?-$[Q]/2+ie+me+ce+Y.mainAxis:he+me+ce+Y.mainAxis,Ee=t.elements.arrow&&kc(t.elements.arrow),et=Ee?L==="y"?Ee.clientTop||0:Ee.clientLeft||0:0,Lt=(W=V==null?void 0:V[L])!=null?W:0,ft=oe+Le-Lt-et,Dt=oe+Ne-Lt,Ge=Pu(x?oh(re,ft):re,oe,x?Sa(X,Dt):X);D[L]=Ge,de[L]=Ge-oe}if(u){var qe,tt=L==="x"?Br:Wr,Ft=L==="x"?xn:Sn,ze=D[R],Ze=R==="y"?"height":"width",q=ze+T[tt],fe=ze-T[Ft],ee=[Br,Wr].indexOf(k)!==-1,ke=(qe=V==null?void 0:V[R])!=null?qe:0,He=ee?q:ze-$[Ze]-B[Ze]-ke+Y.altAxis,Fe=ee?ze+$[Ze]+B[Ze]-ke-Y.altAxis:fe,rt=x&&ee?k7(He,ze,Fe):Pu(x?He:q,ze,x?Fe:fe);D[R]=rt,de[R]=rt-ze}t.modifiersData[n]=de}}const r9={name:"preventOverflow",enabled:!0,phase:"main",fn:t9,requiresIfExists:["offset"]};function n9(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function i9(e){return e===sn(e)||!yn(e)?G0(e):n9(e)}function o9(e){var t=e.getBoundingClientRect(),r=qs(t.width)/e.offsetWidth||1,n=qs(t.height)/e.offsetHeight||1;return r!==1||n!==1}function a9(e,t,r){r===void 0&&(r=!1);var n=yn(t),o=yn(t)&&o9(t),a=zo(t),l=Vs(e,o,r),u={scrollLeft:0,scrollTop:0},d={x:0,y:0};return(n||!n&&!r)&&((pi(t)!=="body"||V0(a))&&(u=i9(t)),yn(t)?(d=Vs(t,!0),d.x+=t.clientLeft,d.y+=t.clientTop):a&&(d.x=q0(a))),{x:l.left+u.scrollLeft-d.x,y:l.top+u.scrollTop-d.y,width:l.width,height:l.height}}function s9(e){var t=new Map,r=new Set,n=[];e.forEach(function(a){t.set(a.name,a)});function o(a){r.add(a.name);var l=[].concat(a.requires||[],a.requiresIfExists||[]);l.forEach(function(u){if(!r.has(u)){var d=t.get(u);d&&o(d)}}),n.push(a)}return e.forEach(function(a){r.has(a.name)||o(a)}),n}function l9(e){var t=s9(e);return w7.reduce(function(r,n){return r.concat(t.filter(function(o){return o.phase===n}))},[])}function u9(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function c9(e){var t=e.reduce(function(r,n){var o=r[n.name];return r[n.name]=o?Object.assign({},o,n,{options:Object.assign({},o.options,n.options),data:Object.assign({},o.data,n.data)}):n,r},{});return Object.keys(t).map(function(r){return t[r]})}var wE={placement:"bottom",modifiers:[],strategy:"absolute"};function bE(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function f9(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,n=r===void 0?[]:r,o=t.defaultOptions,a=o===void 0?wE:o;return function(u,d,h){h===void 0&&(h=a);var g={placement:"bottom",orderedModifiers:[],options:Object.assign({},wE,a),modifiersData:{},elements:{reference:u,popper:d},attributes:{},styles:{}},m=[],w=!1,x={state:g,setOptions:function(k){var P=typeof k=="function"?k(g.options):k;j(),g.options=Object.assign({},a,g.options,P),g.scrollParents={reference:Pa(u)?Lu(u):u.contextElement?Lu(u.contextElement):[],popper:Lu(d)};var A=l9(c9([].concat(n,g.options.modifiers)));return g.orderedModifiers=A.filter(function(L){return L.enabled}),C(),x.update()},forceUpdate:function(){if(!w){var k=g.elements,P=k.reference,A=k.popper;if(bE(P,A)){g.rects={reference:a9(P,kc(A),g.options.strategy==="fixed"),popper:U0(A)},g.reset=!1,g.placement=g.options.placement,g.orderedModifiers.forEach(function(Y){return g.modifiersData[Y.name]=Object.assign({},Y.data)});for(var L=0;L<g.orderedModifiers.length;L++){if(g.reset===!0){g.reset=!1,L=-1;continue}var R=g.orderedModifiers[L],D=R.fn,$=R.options,B=$===void 0?{}:$,U=R.name;typeof D=="function"&&(g=D({state:g,options:B,name:U,instance:x})||g)}}}},update:u9(function(){return new Promise(function(T){x.forceUpdate(),T(g)})}),destroy:function(){j(),w=!0}};if(!bE(u,d))return x;x.setOptions(h).then(function(T){!w&&h.onFirstUpdate&&h.onFirstUpdate(T)});function C(){g.orderedModifiers.forEach(function(T){var k=T.name,P=T.options,A=P===void 0?{}:P,L=T.effect;if(typeof L=="function"){var R=L({state:g,name:k,instance:x,options:A}),D=function(){};m.push(R||D)}})}function j(){m.forEach(function(T){return T()}),m=[]}return x}}var d9=[R7,Z7,M7,S7,Q7,G7,r9,L7,V7],h9=f9({defaultModifiers:d9}),p9=[],X0=function(t,r,n){n===void 0&&(n={});var o=E.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||p9},l=E.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),u=l[0],d=l[1],h=E.useMemo(function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(x){var C=x.state,j=Object.keys(C.elements);tl.flushSync(function(){d({styles:cE(j.map(function(T){return[T,C.styles[T]||{}]})),attributes:cE(j.map(function(T){return[T,C.attributes[T]]}))})})},requires:["computeStyles"]}},[]),g=E.useMemo(function(){var w={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[h,{name:"applyStyles",enabled:!1}])};return KO(o.current,w)?o.current||w:(o.current=w,w)},[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,h]),m=E.useRef();return fE(function(){m.current&&m.current.setOptions(g)},[g]),fE(function(){if(!(t==null||r==null)){var w=n.createPopper||h9,x=w(t,r,g);return m.current=x,function(){x.destroy(),m.current=null}}},[t,r,n.createPopper]),{state:m.current?m.current.state:null,styles:u.styles,attributes:u.attributes,update:m.current?m.current.update:null,forceUpdate:m.current?m.current.forceUpdate:null}};const g9=e=>{const{anchor:t,label:r,position:n="top"}=e,[o,a]=E.useState(null),[l,u]=E.useState(null),[d,h]=E.useState(!1),[g,m]=E.useState(),{styles:w,attributes:x}=X0(t,o,{modifiers:[{name:"arrow",options:{element:l}},{name:"flip"}],placement:n,strategy:"fixed"});return E.useEffect(()=>{const C=()=>m(window.setTimeout(()=>h(!0),500)),j=()=>{g&&window.clearTimeout(g),h(!1)};if(t)return t.addEventListener("pointerenter",C),t.addEventListener("pointerleave",j),()=>{t.removeEventListener("pointerenter",C),t.removeEventListener("pointerleave",j)}},[t,g]),y.jsx(Xn,{classNames:"fade-in-out",in:d,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:y.jsxs("div",{"aria-hidden":!0,className:"tooltip",ref:a,role:"tooltip",style:w.popper,...x.popper,children:[y.jsx("div",{className:"tooltip-arrow",ref:u,style:w.arrow}),y.jsx("div",{className:"tooltip-label",children:r})]})})},Pe=E.forwardRef((e,t)=>{var P;const{ariaChecked:r,disabled:n,icon:o,iconOnly:a,iconPosition:l="start",onClick:u,preventDefault:d,role:h,selectable:g=!1,selected:m=!1,tooltipPosition:w,variant:x="secondary"}=e,C=Wt("icon-button","icon-position-".concat(l),{selected:m},"variant-".concat(x),{"icon-only":a}),[j,T]=E.useState(null);E.useImperativeHandle(t,()=>j);const k=A=>{u&&u(A),d&&A.preventDefault()};return y.jsxs(y.Fragment,{children:[y.jsxs("button",{"aria-checked":r,"aria-label":a?e.label:void 0,"aria-pressed":g?m:void 0,disabled:n,className:C,onClick:k,ref:T,role:h,children:[y.jsx("span",{className:"icon",children:o}),!a&&((P=e.displayLabel)!=null?P:e.label)]}),a&&y.jsx(g9,{anchor:j,label:e.label,position:w})]})}),v9=e=>{const{children:t,headerDisplayLabel:r,headerLabel:n,onClose:o,onRaise:a}=e,{didCatch:l,ErrorBoundary:u,error:d}=kh(),{t:h}=Ce();return E.useEffect(()=>{d&&console.error(d)},[d]),y.jsx("div",{"aria-label":n,className:"dialog-card background",children:y.jsxs($o,{floating:!0,children:[y.jsxs("h2",{children:[y.jsx("div",{className:"dialog-card-header",children:y.jsx(Pe,{displayLabel:r,icon:null,label:n,onClick:a})}),y.jsx("div",{className:"dialog-card-header-controls",children:y.jsx(Pe,{icon:y.jsx(zn,{}),iconOnly:!0,label:h("common.close"),onClick:o,tooltipPosition:"bottom"})})]}),l?y.jsx(_o,{children:h("components.dialogCard.contentsCrashed")}):y.jsx(u,{children:t})]})})},Tn=e=>{const{children:t,className:r,collapsed:n,fixedSize:o,headerDisplayLabel:a,headerLabel:l,highlighted:u,maximizable:d,maximized:h,onChangeCollapsed:g,onChangeHighlighted:m,onChangeMaximized:w,onClose:x}=e,{didCatch:C,ErrorBoundary:j,error:T}=kh(),{t:k}=Ce();E.useEffect(()=>{T&&console.error(T)},[T]),E.useEffect(()=>{if(u){const L=window.setTimeout(()=>m(!1),400);return()=>window.clearTimeout(L)}},[u,m]);const P=Wt("dialog-card",r,{collapsed:n,highlighted:u,"fixed-size":o,maximized:h});function A(L){L.key==="Escape"&&x(L)}return y.jsx("div",{"aria-label":l,role:"dialog",className:P,onKeyDown:A,children:y.jsxs($o,{floating:!0,children:[y.jsxs("h2",{children:[y.jsx("div",{className:"dialog-card-header",children:y.jsx(Pe,{icon:n?y.jsx(vI,{}):y.jsx(WT,{}),displayLabel:a,label:l,onClick:()=>g(!n)})}),y.jsxs("div",{className:"dialog-card-header-controls",children:[d&&y.jsx(Pe,{icon:h?y.jsx(rI,{}):y.jsx(iI,{}),iconOnly:!0,label:k(h?"common.unmaximize":"common.maximize"),onClick:()=>w(!h),tooltipPosition:"bottom"}),y.jsx(Pe,{icon:y.jsx(zn,{}),iconOnly:!0,label:k("common.close"),onClick:x,tooltipPosition:"bottom"})]})]}),C?y.jsx(_o,{children:k("components.dialogCard.contentsCrashed")}):y.jsx(j,{children:!n&&t})]})})},Y0=E.forwardRef((e,t)=>y.jsx("div",{className:"dialog-editor",ref:t,children:e.children})),m9=["Chris Klimas","Lorenzo Ancora","Siham Argaw","Leon Arnott","Ingrid Cheung","Daithi O Crualaoich","Thomas Michael Edwards","Micah Fitch","Kate Fractal","Juhana Leinonen","Ngoc Nguyen","Michael Savich","Ross Smith"],y9=["David Marchand (Castellano)","Jordi Mallach (catal)","MasterStudioCZ, Svatopluk Vt (etina)","Kristian Torgard (Dansk)","Julian Brehmer, Moritz Rebbert (Deutsch)","Flavien Robert, Valentin Rocher (Franais)","Marco Secchi (Italiano)","MinariHak ()","SjoerdHekking, Stefan Peeters (Nederlands)","Jos Carlos Dias (Portugus)","Alliah, Rafael Games (Portugus Brasileiro)","Anton Zhuchkov ()","Mika Letonsaari (Suomi)","Dsire Nordlund (Svenska)","H. Utku Maden (Trke)","Serhii Mozhaiskyi ()","Shitake & SEN1 &  ()"],xE={code:m9,localizations:y9},w9=e=>{const{t}=Ce(),r=vn();return y.jsx(Tn,{...e,className:"about-twine-dialog",fixedSize:!0,headerLabel:t("dialogs.aboutTwine.title",{version:r.version}),children:y.jsxs("div",{className:"content",children:[y.jsx("p",{children:t("dialogs.aboutTwine.twineDescription")}),y.jsx("p",{dangerouslySetInnerHTML:{__html:t("dialogs.aboutTwine.license")}}),y.jsxs("div",{className:"credits",children:[y.jsxs("div",{className:"code",children:[y.jsx("h3",{children:t("dialogs.aboutTwine.codeHeader")}),y.jsx("ul",{children:xE.code.map(n=>y.jsx("li",{children:n},n))})]}),y.jsxs("div",{className:"localizations",children:[y.jsx("h3",{children:t("dialogs.aboutTwine.localizationHeader")}),y.jsx("ul",{children:xE.localizations.map(n=>y.jsx("li",{children:n},n))})]})]}),y.jsxs(At,{children:[y.jsx(Bu,{href:"https://twinery.org/donate",icon:y.jsx(GT,{}),label:t("dialogs.aboutTwine.donateToTwine"),variant:"primary"}),y.jsx(Bu,{href:"https://github.com/klembot/twinejs",icon:y.jsx(SI,{}),label:t("dialogs.aboutTwine.codeRepo")})]})]})})},b9=e=>{const{dispatch:t}=lt(),{t:r}=Ce();return E.useEffect(()=>t(Ht("donateShown",!0)),[t]),y.jsxs(Tn,{...e,className:"app-donation-dialog",fixedSize:!0,headerLabel:r("dialogs.appDonation.title"),children:[y.jsx(fr,{children:y.jsxs("div",{className:"text",children:[y.jsx("p",{children:r("dialogs.appDonation.supportMessage")}),y.jsx("p",{children:r("dialogs.appDonation.onlyOnce")})]})}),y.jsxs(At,{children:[y.jsx(Bu,{href:"https://twinery.org/donate",icon:y.jsx(GT,{}),label:r("dialogs.appDonation.donate"),variant:"primary"}),y.jsx(Pe,{icon:y.jsx(zn,{}),label:r("dialogs.appDonation.noThanks"),onClick:e.onClose})]})]})},Wi=e=>{const{checkedIcon:t,icon:r,onChange:n,uncheckedIcon:o,value:a,...l}=e,u=a?t!=null?t:y.jsx(yR,{}):o!=null?o:y.jsx(VT,{});return y.jsx(Pe,{icon:r!=null?r:u,onClick:()=>n(!a),role:"checkbox",ariaChecked:a,...l})},tc=E.forwardRef((e,t)=>{var n;const r=Wt("text-input","orientation-".concat(e.orientation),"type-".concat(e.type));return y.jsx("span",{className:r,children:y.jsxs("label",{children:[y.jsx("span",{className:"text-input-label",children:e.children}),y.jsx("input",{onChange:e.onChange,onInput:e.onInput,placeholder:e.placeholder,ref:t,type:(n=e.type)!=null?n:"text",value:e.value})]})})}),Ui=e=>{const{children:t,onChange:r,options:n,orientation:o,value:a}=e,l=Wt("text-select","orientation-".concat(o!=null?o:"horizontal"));return y.jsx("span",{className:l,children:y.jsxs("label",{children:[y.jsx("span",{className:"text-select-label",children:t}),y.jsx("span",{className:"text-select-control",children:y.jsx("select",{onChange:r,value:a,children:n.map(u=>y.jsx("option",{disabled:u.disabled,value:u.value,children:u.label},u.value))})})]})})},SE=["var(--font-monospaced)","var(--font-system)"],EE=[.8,.9,1,1.25,1.5,2],CE=e=>{const{familyLabel:t,fontFamily:r,fontScale:n,onChangeFamily:o,onChangeScale:a,scaleLabel:l}=e,[u,d]=E.useState(!EE.includes(n)),[h,g]=E.useState(!SE.includes(r)),[m,w]=E.useState(r),[x,C]=E.useState((n*100).toString()),{t:j}=Ce();function T(L){L.target.value==="custom"?(g(!0),SE.includes(m)&&w("")):(g(!1),o(L.target.value))}function k(L){L.target.value==="custom"?d(!0):(d(!1),a(parseFloat(L.target.value)))}function P(L){w(L.target.value),L.target.value.trim()!==""&&o(L.target.value)}function A(L){C(L.target.value);const R=parseInt(L.target.value);Number.isFinite(R)&&a(R/100)}return y.jsxs("div",{className:"font-select",children:[y.jsx(Ui,{onChange:T,options:[{label:j("components.fontSelect.fonts.system"),value:"var(--font-system)"},{label:j("components.fontSelect.fonts.monospaced"),value:"var(--font-monospaced)"},{label:j("common.custom"),value:"custom"}],value:h?"custom":r,children:t}),h&&y.jsx(tc,{onChange:P,orientation:"vertical",value:m,children:j("components.fontSelect.customFamilyDetail")}),y.jsx(Ui,{onChange:k,options:[...EE.map(L=>({label:j("components.fontSelect.percentage",{percent:L*100}),value:L.toString()})),{label:j("common.custom"),value:"custom"}],value:u?"custom":n.toString(),children:l}),u&&y.jsx(tc,{onChange:A,orientation:"vertical",value:x,children:j("components.fontSelect.customScaleDetail")})]})},zm=[{code:"ca",name:"Catal"},{code:"cs",name:"etina"},{code:"da",name:"Dansk"},{code:"de",name:"Deutsch"},{code:"en",name:"English"},{code:"es",name:"Castellano"},{code:"fi",name:"Suomi"},{code:"fr",name:"Franais"},{code:"it",name:"Italiano"},{code:"ko",name:""},{code:"ms",name:"Bahasa Melayu"},{code:"nb",name:"Norsk bokml"},{code:"nl",name:"Nederlands"},{code:"pt-br",name:"Portugus Brasileiro"},{code:"pt-pt",name:"Portugus"},{code:"ru",name:""},{code:"sv",name:"Svenska"},{code:"tr",name:"Trke"},{code:"uk",name:""},{code:"zh-cn",name:"()"}];function x9(e){if(zm.some(t=>t.code===e))return e;if(e.includes("-")){const t=e.replace(/-.+/,""),r=zm.find(n=>n.code===t||n.code.replace(/-.+/,"")===t);if(r)return r.code}return"en"}const S9=e=>{const{dispatch:t,prefs:r}=lt(),{t:n}=Ce();function o(a){t(Ht("useCodeMirror",a)),a||t(Ht("editorCursorBlinks",!0))}return y.jsx(Tn,{...e,className:"app-prefs-dialog",fixedSize:!0,headerLabel:n("dialogs.appPrefs.title"),children:y.jsxs(fr,{children:[y.jsx(Ui,{onChange:a=>t(Ht("locale",a.target.value)),options:zm.map(a=>({label:a.name,value:a.code})),value:x9(r.locale),children:n("dialogs.appPrefs.language")}),y.jsx(Ui,{onChange:a=>t(Ht("appTheme",a.target.value)),options:[{label:n("dialogs.appPrefs.themeSystem"),value:"system"},{label:n("dialogs.appPrefs.themeLight"),value:"light"},{label:n("dialogs.appPrefs.themeDark"),value:"dark"}],value:r.appTheme,children:n("dialogs.appPrefs.theme")}),y.jsx(Ui,{onChange:a=>t(Ht("dialogWidth",parseInt(a.target.value))),options:[{label:n("dialogs.appPrefs.dialogWidths.default"),value:"600"},{label:n("dialogs.appPrefs.dialogWidths.wider"),value:"700"},{label:n("dialogs.appPrefs.dialogWidths.widest"),value:"800"}],value:r.dialogWidth.toString(),children:n("dialogs.appPrefs.dialogWidth")}),y.jsx(Wi,{disabled:!r.useCodeMirror,label:n("dialogs.appPrefs.editorCursorBlinks"),onChange:a=>t(Ht("editorCursorBlinks",a)),value:r.editorCursorBlinks}),y.jsx(Wi,{label:n("dialogs.appPrefs.useEnhancedEditors"),onChange:o,value:r.useCodeMirror}),y.jsx("p",{className:"font-explanation",children:n("dialogs.appPrefs.fontExplanation")}),y.jsx(CE,{familyLabel:n("dialogs.appPrefs.passageEditorFont"),fontFamily:r.passageEditorFontFamily,fontScale:r.passageEditorFontScale,onChangeFamily:a=>t(Ht("passageEditorFontFamily",a)),onChangeScale:a=>t(Ht("passageEditorFontScale",a)),scaleLabel:n("dialogs.appPrefs.passageEditorFontScale")}),y.jsx(CE,{familyLabel:n("dialogs.appPrefs.codeEditorFont"),fontFamily:r.codeEditorFontFamily,fontScale:r.codeEditorFontScale,onChangeFamily:a=>t(Ht("codeEditorFontFamily",a)),onChangeScale:a=>t(Ht("codeEditorFontScale",a)),scaleLabel:n("dialogs.appPrefs.codeEditorFontScale")})]})})},E9=e=>{const{dialogLength:t,expanded:r,onChangeExpanded:n}=e,[o,a]=E.useState(!1);return E.useEffect(()=>{function l(){r&&(n(!1),a(!1))}return window.addEventListener("touchstart",l),()=>window.removeEventListener("touchstart",l)},[r,n]),r&&o?null:y.jsx("div",{"aria-hidden":!0,className:"dialog-stack-expander",onMouseEnter:()=>n(!r),onTouchEnd:l=>{n(!0),a(!0),l.preventDefault()},style:{bottom:r?0:"auto",height:r?"auto":"var(--control-height)",top:r?"calc(var(--control-height) * ".concat(t,")"):0}})},Rf=3,_f="var(--control-height)",C9=({children:e,childKeys:t})=>{const r=E.useRef(null),[n,o]=E.useState(!1),a=E.useMemo(()=>[...e].reverse(),[e]),l=E.useMemo(()=>[...t].reverse(),[t]),u=E.useRef();E.useEffect(()=>{u.current=l},[l]);const d=E.useMemo(()=>{var x,C;return l.length===((x=u.current)==null?void 0:x.length)&&l[l.length-1]!==((C=u.current)==null?void 0:C[l.length-1])},[l]),h=Math.min(e.length,Rf),g=e.length>h,m="".concat(_f," / ").concat(e.length+1-Rf),w="calc(100% - (".concat(_f," * ").concat(h-1,"))");return y.jsxs("div",{className:"dialog-stack",onMouseLeave:()=>o(!1),onClick:()=>o(!1),ref:r,children:[g&&y.jsx(E9,{dialogLength:e.length,expanded:n,onChangeExpanded:o}),y.jsx(_a,{component:null,children:a.map((x,C)=>{const j=g&&C<=e.length-Rf,T=j?"calc(".concat(m," * ").concat(C,")"):"calc(".concat(_f," * ").concat(g?C-(e.length-Rf):C,")"),k="calc(".concat(_f," * ").concat(C,")"),P=j&&{onBlur:()=>o(!1),onFocus:()=>o(!0)};return y.jsx(Xn,{classNames:"pop",timeout:200,children:y.jsx("div",{className:Wt("dialog-height-setter",{rising:d&&C===a.length-1}),style:{height:w},...P,children:y.jsx("div",{className:"dialog-transform-setter",style:{transform:"translateY(".concat(n?k:T,")")},children:x})})},l[C])})})]})};function lP(e,t){switch(e.type){case"createPassage":if(e.props.id)return{type:"deletePassage",passageId:e.props.id,storyId:e.storyId};if(e.props.name)return(n,o)=>{n({type:"deletePassage",passageId:Yd(o(),e.storyId,e.props.name).id,storyId:e.storyId})};throw new Error("Can't reverse a createPassage action without either name or ID");case"createPassages":if(e.props.some(r=>!r.id&&!r.name))throw new Error("Can't reverse a createPassages action where a prop set doesn't have either name or ID");return(r,n)=>{e.props.forEach(o=>{o.id?r({type:"deletePassage",passageId:o.id,storyId:e.storyId}):o.name&&r({type:"deletePassage",passageId:Yd(n(),e.storyId,o.name).id,storyId:e.storyId})})};case"deletePassage":return{type:"createPassage",props:Fi(t,e.storyId,e.passageId),storyId:e.storyId};case"deletePassages":return{type:"createPassages",props:e.passageIds.map(r=>Fi(t,e.storyId,r)),storyId:e.storyId};case"updatePassage":{const r=Fi(t,e.storyId,e.passageId);return{type:"updatePassage",props:Object.keys(e.props).reduce((o,a)=>({...o,[a]:r[a]}),{}),passageId:e.passageId,storyId:e.storyId}}case"updatePassages":return{type:"updatePassages",passageUpdates:Object.keys(e.passageUpdates).reduce((r,n)=>{const o=Fi(t,e.storyId,n);return{...r,[n]:Object.keys(e.passageUpdates[n]).reduce((a,l)=>({...a,[l]:o[l]}),{})}},{}),storyId:e.storyId};case"updateStory":{const r=st(t,e.storyId);return{type:"updateStory",props:Object.keys(e.props).reduce((o,a)=>({...o,[a]:r[a]}),{}),storyId:e.storyId}}}throw new Error("Don't know how to reverse action type \"".concat(e.type,'"'))}function uP(e,t){const r=[];return e(o=>{typeof o=="function"?r.push(uP(o,t)):r.push(lP(o,t))},()=>t),o=>r.forEach(o)}const k9=(e,t)=>{switch(t.type){case"addChange":{const r={description:t.description,redo:t.action,undo:typeof t.action=="function"?uP(t.action,t.storiesState):lP(t.action,t.storiesState)},n=[...e.changes.slice(0,e.currentChange+1),r];return{changes:n,currentChange:n.length-1}}case"updateCurrent":return{...e,currentChange:Math.min(Math.max(e.currentChange+t.change,-1),e.changes.length-1)}}},Q0=E.createContext({dispatch:()=>{},stories:[]});Q0.displayName="UndoableStories";const fn=()=>E.useContext(Q0),cP=e=>{const{dispatch:t,stories:r}=gt(),[n,o]=E.useReducer(k9,{changes:[],currentChange:-1}),a=E.useCallback((m,w)=>(w&&o({type:"addChange",action:m,description:w,storiesState:r}),t(m)),[r,t]),{t:l}=Ce();let u,d,h,g;return n.changes.length>0&&(n.currentChange>=0&&(h=()=>{t(n.changes[n.currentChange].undo),o({type:"updateCurrent",change:-1})},g=l("common.undoChange",{change:l(n.changes[n.currentChange].description)})),n.currentChange<n.changes.length-1&&(u=()=>{t(n.changes[n.currentChange+1].redo),o({type:"updateCurrent",change:1})},d=l("common.redoChange",{change:l(n.changes[n.currentChange+1].description)}))),y.jsx(Q0.Provider,{value:{dispatch:a,redo:u,redoLabel:d,stories:r,undo:h,undoLabel:g},children:e.children})};var rc={},iv={exports:{}},kE;function fl(){return kE||(kE=1,function(e,t){(function(r,n){e.exports=n()})(tr,function(){var r=navigator.userAgent,n=navigator.platform,o=/gecko\/\d/i.test(r),a=/MSIE \d/.test(r),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(r),u=/Edge\/(\d+)/.exec(r),d=a||l||u,h=d&&(a?document.documentMode||6:+(u||l)[1]),g=!u&&/WebKit\//.test(r),m=g&&/Qt\/\d+\.\d+/.test(r),w=!u&&/Chrome\/(\d+)/.exec(r),x=w&&+w[1],C=/Opera\//.test(r),j=/Apple Computer/.test(navigator.vendor),T=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(r),k=/PhantomJS/.test(r),P=j&&(/Mobile\/\w+/.test(r)||navigator.maxTouchPoints>2),A=/Android/.test(r),L=P||A||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(r),R=P||/Mac/.test(n),D=/\bCrOS\b/.test(r),$=/win/i.test(n),B=C&&r.match(/Version\/(\d*\.\d*)/);B&&(B=Number(B[1])),B&&B>=15&&(C=!1,g=!0);var U=R&&(m||C&&(B==null||B<12.11)),Y=o||d&&h>=9;function V(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var de=function(i,s){var f=i.className,c=V(s).exec(f);if(c){var p=f.slice(c.index+c[0].length);i.className=f.slice(0,c.index)+(p?c[1]+p:"")}};function W(i){for(var s=i.childNodes.length;s>0;--s)i.removeChild(i.firstChild);return i}function _(i,s){return W(i).appendChild(s)}function M(i,s,f,c){var p=document.createElement(i);if(f&&(p.className=f),c&&(p.style.cssText=c),typeof s=="string")p.appendChild(document.createTextNode(s));else if(s)for(var v=0;v<s.length;++v)p.appendChild(s[v]);return p}function Q(i,s,f,c){var p=M(i,s,f,c);return p.setAttribute("role","presentation"),p}var oe;document.createRange?oe=function(i,s,f,c){var p=document.createRange();return p.setEnd(c||i,f),p.setStart(i,s),p}:oe=function(i,s,f){var c=document.body.createTextRange();try{c.moveToElementText(i.parentNode)}catch{return c}return c.collapse(!0),c.moveEnd("character",f),c.moveStart("character",s),c};function re(i,s){if(s.nodeType==3&&(s=s.parentNode),i.contains)return i.contains(s);do if(s.nodeType==11&&(s=s.host),s==i)return!0;while(s=s.parentNode)}function X(i){var s=i.ownerDocument||i,f;try{f=i.activeElement}catch{f=s.body||null}for(;f&&f.shadowRoot&&f.shadowRoot.activeElement;)f=f.shadowRoot.activeElement;return f}function ie(i,s){var f=i.className;V(s).test(f)||(i.className+=(f?" ":"")+s)}function ue(i,s){for(var f=i.split(" "),c=0;c<f.length;c++)f[c]&&!V(f[c]).test(s)&&(s+=" "+f[c]);return s}var he=function(i){i.select()};P?he=function(i){i.selectionStart=0,i.selectionEnd=i.value.length}:d&&(he=function(i){try{i.select()}catch{}});function Se(i){return i.display.wrapper.ownerDocument}function Z(i){return ae(i.display.wrapper)}function ae(i){return i.getRootNode?i.getRootNode():i.ownerDocument}function le(i){return Se(i).defaultView}function ce(i){var s=Array.prototype.slice.call(arguments,1);return function(){return i.apply(null,s)}}function me(i,s,f){s||(s={});for(var c in i)i.hasOwnProperty(c)&&(f!==!1||!s.hasOwnProperty(c))&&(s[c]=i[c]);return s}function Le(i,s,f,c,p){s==null&&(s=i.search(/[^\s\u00a0]/),s==-1&&(s=i.length));for(var v=c||0,b=p||0;;){var S=i.indexOf("	",v);if(S<0||S>=s)return b+(s-v);b+=S-v,b+=f-b%f,v=S+1}}var Ne=function(){this.id=null,this.f=null,this.time=0,this.handler=ce(this.onTimeout,this)};Ne.prototype.onTimeout=function(i){i.id=0,i.time<=+new Date?i.f():setTimeout(i.handler,i.time-+new Date)},Ne.prototype.set=function(i,s){this.f=s;var f=+new Date+i;(!this.id||f<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,i),this.time=f)};function Ee(i,s){for(var f=0;f<i.length;++f)if(i[f]==s)return f;return-1}var et=50,Lt={toString:function(){return"CodeMirror.Pass"}},ft={scroll:!1},Dt={origin:"*mouse"},Ge={origin:"+move"};function qe(i,s,f){for(var c=0,p=0;;){var v=i.indexOf("	",c);v==-1&&(v=i.length);var b=v-c;if(v==i.length||p+b>=s)return c+Math.min(b,s-p);if(p+=v-c,p+=f-p%f,c=v+1,p>=s)return c}}var tt=[""];function Ft(i){for(;tt.length<=i;)tt.push(ze(tt)+" ");return tt[i]}function ze(i){return i[i.length-1]}function Ze(i,s){for(var f=[],c=0;c<i.length;c++)f[c]=s(i[c],c);return f}function q(i,s,f){for(var c=0,p=f(s);c<i.length&&f(i[c])<=p;)c++;i.splice(c,0,s)}function fe(){}function ee(i,s){var f;return Object.create?f=Object.create(i):(fe.prototype=i,f=new fe),s&&me(s,f),f}var ke=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function He(i){return/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||ke.test(i))}function Fe(i,s){return s?s.source.indexOf("\\w")>-1&&He(i)?!0:s.test(i):He(i)}function rt(i){for(var s in i)if(i.hasOwnProperty(s)&&i[s])return!1;return!0}var Ut=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function nt(i){return i.charCodeAt(0)>=768&&Ut.test(i)}function Qe(i,s,f){for(;(f<0?s>0:s<i.length)&&nt(i.charAt(s));)s+=f;return s}function $e(i,s,f){for(var c=s>f?-1:1;;){if(s==f)return s;var p=(s+f)/2,v=c<0?Math.ceil(p):Math.floor(p);if(v==s)return i(v)?s:f;i(v)?f=v:s=v+c}}function Kt(i,s,f,c){if(!i)return c(s,f,"ltr",0);for(var p=!1,v=0;v<i.length;++v){var b=i[v];(b.from<f&&b.to>s||s==f&&b.to==s)&&(c(Math.max(b.from,s),Math.min(b.to,f),b.level==1?"rtl":"ltr",v),p=!0)}p||c(s,f,"ltr")}var On=null;function Pn(i,s,f){var c;On=null;for(var p=0;p<i.length;++p){var v=i[p];if(v.from<s&&v.to>s)return p;v.to==s&&(v.from!=v.to&&f=="before"?c=p:On=p),v.from==s&&(v.from!=v.to&&f!="before"?c=p:On=p)}return c!=null?c:On}var kp=function(){var i="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",s="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function f(N){return N<=247?i.charAt(N):1424<=N&&N<=1524?"R":1536<=N&&N<=1785?s.charAt(N-1536):1774<=N&&N<=2220?"r":8192<=N&&N<=8203?"w":N==8204?"b":"L"}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,p=/[stwN]/,v=/[LRr]/,b=/[Lb1n]/,S=/[1n]/;function O(N,F,H){this.level=N,this.from=F,this.to=H}return function(N,F){var H=F=="ltr"?"L":"R";if(N.length==0||F=="ltr"&&!c.test(N))return!1;for(var G=N.length,K=[],te=0;te<G;++te)K.push(f(N.charCodeAt(te)));for(var se=0,ge=H;se<G;++se){var ye=K[se];ye=="m"?K[se]=ge:ge=ye}for(var xe=0,we=H;xe<G;++xe){var Te=K[xe];Te=="1"&&we=="r"?K[xe]="n":v.test(Te)&&(we=Te,Te=="r"&&(K[xe]="R"))}for(var Re=1,je=K[0];Re<G-1;++Re){var Xe=K[Re];Xe=="+"&&je=="1"&&K[Re+1]=="1"?K[Re]="1":Xe==","&&je==K[Re+1]&&(je=="1"||je=="n")&&(K[Re]=je),je=Xe}for(var dt=0;dt<G;++dt){var Yt=K[dt];if(Yt==",")K[dt]="N";else if(Yt=="%"){var bt=void 0;for(bt=dt+1;bt<G&&K[bt]=="%";++bt);for(var _r=dt&&K[dt-1]=="!"||bt<G&&K[bt]=="1"?"1":"N",Tr=dt;Tr<bt;++Tr)K[Tr]=_r;dt=bt-1}}for(var It=0,Or=H;It<G;++It){var Zt=K[It];Or=="L"&&Zt=="1"?K[It]="L":v.test(Zt)&&(Or=Zt)}for(var zt=0;zt<G;++zt)if(p.test(K[zt])){var Rt=void 0;for(Rt=zt+1;Rt<G&&p.test(K[Rt]);++Rt);for(var Ot=(zt?K[zt-1]:H)=="L",Pr=(Rt<G?K[Rt]:H)=="L",us=Ot==Pr?Ot?"L":"R":H,lo=zt;lo<Rt;++lo)K[lo]=us;zt=Rt-1}for(var ur=[],ei,Qt=0;Qt<G;)if(b.test(K[Qt])){var wg=Qt;for(++Qt;Qt<G&&b.test(K[Qt]);++Qt);ur.push(new O(0,wg,Qt))}else{var Pi=Qt,Yo=ur.length,Qo=F=="rtl"?1:0;for(++Qt;Qt<G&&K[Qt]!="L";++Qt);for(var gr=Pi;gr<Qt;)if(S.test(K[gr])){Pi<gr&&(ur.splice(Yo,0,new O(1,Pi,gr)),Yo+=Qo);var cs=gr;for(++gr;gr<Qt&&S.test(K[gr]);++gr);ur.splice(Yo,0,new O(2,cs,gr)),Yo+=Qo,Pi=gr}else++gr;Pi<Qt&&ur.splice(Yo,0,new O(1,Pi,Qt))}return F=="ltr"&&(ur[0].level==1&&(ei=N.match(/^\s+/))&&(ur[0].from=ei[0].length,ur.unshift(new O(0,0,ei[0].length))),ze(ur).level==1&&(ei=N.match(/\s+$/))&&(ze(ur).to-=ei[0].length,ur.push(new O(0,G-ei[0].length,G)))),F=="rtl"?ur.reverse():ur}}();function Je(i,s){var f=i.order;return f==null&&(f=i.order=kp(i.text,s)),f}var Lc=[],Ie=function(i,s,f){if(i.addEventListener)i.addEventListener(s,f,!1);else if(i.attachEvent)i.attachEvent("on"+s,f);else{var c=i._handlers||(i._handlers={});c[s]=(c[s]||Lc).concat(f)}};function xi(i,s){return i._handlers&&i._handlers[s]||Lc}function ar(i,s,f){if(i.removeEventListener)i.removeEventListener(s,f,!1);else if(i.detachEvent)i.detachEvent("on"+s,f);else{var c=i._handlers,p=c&&c[s];if(p){var v=Ee(p,f);v>-1&&(c[s]=p.slice(0,v).concat(p.slice(v+1)))}}}function Ct(i,s){var f=xi(i,s);if(f.length)for(var c=Array.prototype.slice.call(arguments,2),p=0;p<f.length;++p)f[p].apply(null,c)}function kt(i,s,f){return typeof s=="string"&&(s={type:s,preventDefault:function(){this.defaultPrevented=!0}}),Ct(i,f||s.type,i,s),Sr(s)||s.codemirrorIgnore}function dn(i){var s=i._handlers&&i._handlers.cursorActivity;if(s)for(var f=i.curOp.cursorActivityHandlers||(i.curOp.cursorActivityHandlers=[]),c=0;c<s.length;++c)Ee(f,s[c])==-1&&f.push(s[c])}function Ir(i,s){return xi(i,s).length>0}function Ln(i){i.prototype.on=function(s,f){Ie(this,s,f)},i.prototype.off=function(s,f){ar(this,s,f)}}function sr(i){i.preventDefault?i.preventDefault():i.returnValue=!1}function Da(i){i.stopPropagation?i.stopPropagation():i.cancelBubble=!0}function Sr(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==!1}function Yi(i){sr(i),Da(i)}function gl(i){return i.target||i.srcElement}function Nn(i){var s=i.which;return s==null&&(i.button&1?s=1:i.button&2?s=3:i.button&4&&(s=2)),R&&i.ctrlKey&&s==1&&(s=3),s}var Tp=function(){if(d&&h<9)return!1;var i=M("div");return"draggable"in i||"dragDrop"in i}(),Fa;function Nc(i){if(Fa==null){var s=M("span","");_(i,M("span",[s,document.createTextNode("x")])),i.firstChild.offsetHeight!=0&&(Fa=s.offsetWidth<=1&&s.offsetHeight>2&&!(d&&h<8))}var f=Fa?M("span",""):M("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return f.setAttribute("cm-text",""),f}var vl;function Qi(i){if(vl!=null)return vl;var s=_(i,document.createTextNode("AA")),f=oe(s,0,1).getBoundingClientRect(),c=oe(s,1,2).getBoundingClientRect();return W(i),!f||f.left==f.right?!1:vl=c.right-f.right<3}var hn="\n\nb".split(/\n/).length!=3?function(i){for(var s=0,f=[],c=i.length;s<=c;){var p=i.indexOf("\n",s);p==-1&&(p=i.length);var v=i.slice(s,i.charAt(p-1)=="\r"?p-1:p),b=v.indexOf("\r");b!=-1?(f.push(v.slice(0,b)),s+=b+1):(f.push(v),s=p+1)}return f}:function(i){return i.split(/\r\n?|\n/)},Ji=window.getSelection?function(i){try{return i.selectionStart!=i.selectionEnd}catch{return!1}}:function(i){var s;try{s=i.ownerDocument.selection.createRange()}catch{}return!s||s.parentElement()!=i?!1:s.compareEndPoints("StartToEnd",s)!=0},jc=function(){var i=M("div");return"oncopy"in i?!0:(i.setAttribute("oncopy","return;"),typeof i.oncopy=="function")}(),jn=null;function Op(i){if(jn!=null)return jn;var s=_(i,M("span","x")),f=s.getBoundingClientRect(),c=oe(s,0,1).getBoundingClientRect();return jn=Math.abs(f.left-c.left)>1}var za={},An={};function Mn(i,s){arguments.length>2&&(s.dependencies=Array.prototype.slice.call(arguments,2)),za[i]=s}function Ho(i,s){An[i]=s}function Ha(i){if(typeof i=="string"&&An.hasOwnProperty(i))i=An[i];else if(i&&typeof i.name=="string"&&An.hasOwnProperty(i.name)){var s=An[i.name];typeof s=="string"&&(s={name:s}),i=ee(s,i),i.name=s.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i))return Ha("application/xml");if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i))return Ha("application/json")}return typeof i=="string"?{name:i}:i||{name:"null"}}function Ba(i,s){s=Ha(s);var f=za[s.name];if(!f)return Ba(i,"text/plain");var c=f(i,s);if(Zi.hasOwnProperty(s.name)){var p=Zi[s.name];for(var v in p)p.hasOwnProperty(v)&&(c.hasOwnProperty(v)&&(c["_"+v]=c[v]),c[v]=p[v])}if(c.name=s.name,s.helperType&&(c.helperType=s.helperType),s.modeProps)for(var b in s.modeProps)c[b]=s.modeProps[b];return c}var Zi={};function Wa(i,s){var f=Zi.hasOwnProperty(i)?Zi[i]:Zi[i]={};me(s,f)}function Yn(i,s){if(s===!0)return s;if(i.copyState)return i.copyState(s);var f={};for(var c in s){var p=s[c];p instanceof Array&&(p=p.concat([])),f[c]=p}return f}function ml(i,s){for(var f;i.innerMode&&(f=i.innerMode(s),!(!f||f.mode==i));)s=f.state,i=f.mode;return f||{mode:i,state:s}}function Ua(i,s,f){return i.startState?i.startState(s,f):!0}var Tt=function(i,s,f){this.pos=this.start=0,this.string=i,this.tabSize=s||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=f};Tt.prototype.eol=function(){return this.pos>=this.string.length},Tt.prototype.sol=function(){return this.pos==this.lineStart},Tt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Tt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Tt.prototype.eat=function(i){var s=this.string.charAt(this.pos),f;if(typeof i=="string"?f=s==i:f=s&&(i.test?i.test(s):i(s)),f)return++this.pos,s},Tt.prototype.eatWhile=function(i){for(var s=this.pos;this.eat(i););return this.pos>s},Tt.prototype.eatSpace=function(){for(var i=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>i},Tt.prototype.skipToEnd=function(){this.pos=this.string.length},Tt.prototype.skipTo=function(i){var s=this.string.indexOf(i,this.pos);if(s>-1)return this.pos=s,!0},Tt.prototype.backUp=function(i){this.pos-=i},Tt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Le(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Le(this.string,this.lineStart,this.tabSize):0)},Tt.prototype.indentation=function(){return Le(this.string,null,this.tabSize)-(this.lineStart?Le(this.string,this.lineStart,this.tabSize):0)},Tt.prototype.match=function(i,s,f){if(typeof i=="string"){var c=function(b){return f?b.toLowerCase():b},p=this.string.substr(this.pos,i.length);if(c(p)==c(i))return s!==!1&&(this.pos+=i.length),!0}else{var v=this.string.slice(this.pos).match(i);return v&&v.index>0?null:(v&&s!==!1&&(this.pos+=v[0].length),v)}},Tt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Tt.prototype.hideFirstChars=function(i,s){this.lineStart+=i;try{return s()}finally{this.lineStart-=i}},Tt.prototype.lookAhead=function(i){var s=this.lineOracle;return s&&s.lookAhead(i)},Tt.prototype.baseToken=function(){var i=this.lineOracle;return i&&i.baseToken(this.pos)};function Oe(i,s){if(s-=i.first,s<0||s>=i.size)throw new Error("There is no line "+(s+i.first)+" in the document.");for(var f=i;!f.lines;)for(var c=0;;++c){var p=f.children[c],v=p.chunkSize();if(s<v){f=p;break}s-=v}return f.lines[s]}function Si(i,s,f){var c=[],p=s.line;return i.iter(s.line,f.line+1,function(v){var b=v.text;p==f.line&&(b=b.slice(0,f.ch)),p==s.line&&(b=b.slice(s.ch)),c.push(b),++p}),c}function yl(i,s,f){var c=[];return i.iter(s,f,function(p){c.push(p.text)}),c}function qr(i,s){var f=s-i.height;if(f)for(var c=i;c;c=c.parent)c.height+=f}function I(i){if(i.parent==null)return null;for(var s=i.parent,f=Ee(s.lines,i),c=s.parent;c;s=c,c=c.parent)for(var p=0;c.children[p]!=s;++p)f+=c.children[p].chunkSize();return f+s.first}function z(i,s){var f=i.first;e:do{for(var c=0;c<i.children.length;++c){var p=i.children[c],v=p.height;if(s<v){i=p;continue e}s-=v,f+=p.chunkSize()}return f}while(!i.lines);for(var b=0;b<i.lines.length;++b){var S=i.lines[b],O=S.height;if(s<O)break;s-=O}return f+b}function ne(i,s){return s>=i.first&&s<i.first+i.size}function pe(i,s){return String(i.lineNumberFormatter(s+i.firstLineNumber))}function J(i,s,f){if(f===void 0&&(f=null),!(this instanceof J))return new J(i,s,f);this.line=i,this.ch=s,this.sticky=f}function be(i,s){return i.line-s.line||i.ch-s.ch}function it(i,s){return i.sticky==s.sticky&&be(i,s)==0}function Gt(i){return J(i.line,i.ch)}function Er(i,s){return be(i,s)<0?s:i}function Ka(i,s){return be(i,s)<0?i:s}function Sw(i,s){return Math.max(i.first,Math.min(s,i.first+i.size-1))}function Be(i,s){if(s.line<i.first)return J(i.first,0);var f=i.first+i.size-1;return s.line>f?J(f,Oe(i,f).text.length):LL(s,Oe(i,s.line).text.length)}function LL(i,s){var f=i.ch;return f==null||f>s?J(i.line,s):f<0?J(i.line,0):i}function Ew(i,s){for(var f=[],c=0;c<s.length;c++)f[c]=Be(i,s[c]);return f}var Ac=function(i,s){this.state=i,this.lookAhead=s},Qn=function(i,s,f,c){this.state=s,this.doc=i,this.line=f,this.maxLookAhead=c||0,this.baseTokens=null,this.baseTokenPos=1};Qn.prototype.lookAhead=function(i){var s=this.doc.getLine(this.line+i);return s!=null&&i>this.maxLookAhead&&(this.maxLookAhead=i),s},Qn.prototype.baseToken=function(i){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=i;)this.baseTokenPos+=2;var s=this.baseTokens[this.baseTokenPos+1];return{type:s&&s.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-i}},Qn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Qn.fromSaved=function(i,s,f){return s instanceof Ac?new Qn(i,Yn(i.mode,s.state),f,s.lookAhead):new Qn(i,Yn(i.mode,s),f)},Qn.prototype.save=function(i){var s=i!==!1?Yn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Ac(s,this.maxLookAhead):s};function Cw(i,s,f,c){var p=[i.state.modeGen],v={};Nw(i,s.text,i.doc.mode,f,function(N,F){return p.push(N,F)},v,c);for(var b=f.state,S=function(N){f.baseTokens=p;var F=i.state.overlays[N],H=1,G=0;f.state=!0,Nw(i,s.text,F.mode,f,function(K,te){for(var se=H;G<K;){var ge=p[H];ge>K&&p.splice(H,1,K,p[H+1],ge),H+=2,G=Math.min(K,ge)}if(te)if(F.opaque)p.splice(se,H-se,K,"overlay "+te),H=se+2;else for(;se<H;se+=2){var ye=p[se+1];p[se+1]=(ye?ye+" ":"")+"overlay "+te}},v),f.state=b,f.baseTokens=null,f.baseTokenPos=1},O=0;O<i.state.overlays.length;++O)S(O);return{styles:p,classes:v.bgClass||v.textClass?v:null}}function kw(i,s,f){if(!s.styles||s.styles[0]!=i.state.modeGen){var c=wl(i,I(s)),p=s.text.length>i.options.maxHighlightLength&&Yn(i.doc.mode,c.state),v=Cw(i,s,c);p&&(c.state=p),s.stateAfter=c.save(!p),s.styles=v.styles,v.classes?s.styleClasses=v.classes:s.styleClasses&&(s.styleClasses=null),f===i.doc.highlightFrontier&&(i.doc.modeFrontier=Math.max(i.doc.modeFrontier,++i.doc.highlightFrontier))}return s.styles}function wl(i,s,f){var c=i.doc,p=i.display;if(!c.mode.startState)return new Qn(c,!0,s);var v=NL(i,s,f),b=v>c.first&&Oe(c,v-1).stateAfter,S=b?Qn.fromSaved(c,b,v):new Qn(c,Ua(c.mode),v);return c.iter(v,s,function(O){Pp(i,O.text,S);var N=S.line;O.stateAfter=N==s-1||N%5==0||N>=p.viewFrom&&N<p.viewTo?S.save():null,S.nextLine()}),f&&(c.modeFrontier=S.line),S}function Pp(i,s,f,c){var p=i.doc.mode,v=new Tt(s,i.options.tabSize,f);for(v.start=v.pos=c||0,s==""&&Tw(p,f.state);!v.eol();)Lp(p,v,f.state),v.start=v.pos}function Tw(i,s){if(i.blankLine)return i.blankLine(s);if(i.innerMode){var f=ml(i,s);if(f.mode.blankLine)return f.mode.blankLine(f.state)}}function Lp(i,s,f,c){for(var p=0;p<10;p++){c&&(c[0]=ml(i,f).mode);var v=i.token(s,f);if(s.pos>s.start)return v}throw new Error("Mode "+i.name+" failed to advance stream.")}var Ow=function(i,s,f){this.start=i.start,this.end=i.pos,this.string=i.current(),this.type=s||null,this.state=f};function Pw(i,s,f,c){var p=i.doc,v=p.mode,b;s=Be(p,s);var S=Oe(p,s.line),O=wl(i,s.line,f),N=new Tt(S.text,i.options.tabSize,O),F;for(c&&(F=[]);(c||N.pos<s.ch)&&!N.eol();)N.start=N.pos,b=Lp(v,N,O.state),c&&F.push(new Ow(N,b,Yn(p.mode,O.state)));return c?F:new Ow(N,b,O.state)}function Lw(i,s){if(i)for(;;){var f=i.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f)break;i=i.slice(0,f.index)+i.slice(f.index+f[0].length);var c=f[1]?"bgClass":"textClass";s[c]==null?s[c]=f[2]:new RegExp("(?:^|\\s)"+f[2]+"(?:$|\\s)").test(s[c])||(s[c]+=" "+f[2])}return i}function Nw(i,s,f,c,p,v,b){var S=f.flattenSpans;S==null&&(S=i.options.flattenSpans);var O=0,N=null,F=new Tt(s,i.options.tabSize,c),H,G=i.options.addModeClass&&[null];for(s==""&&Lw(Tw(f,c.state),v);!F.eol();){if(F.pos>i.options.maxHighlightLength?(S=!1,b&&Pp(i,s,c,F.pos),F.pos=s.length,H=null):H=Lw(Lp(f,F,c.state,G),v),G){var K=G[0].name;K&&(H="m-"+(H?K+" "+H:K))}if(!S||N!=H){for(;O<F.start;)O=Math.min(F.start,O+5e3),p(O,N);N=H}F.start=F.pos}for(;O<F.pos;){var te=Math.min(F.pos,O+5e3);p(te,N),O=te}}function NL(i,s,f){for(var c,p,v=i.doc,b=f?-1:s-(i.doc.mode.innerMode?1e3:100),S=s;S>b;--S){if(S<=v.first)return v.first;var O=Oe(v,S-1),N=O.stateAfter;if(N&&(!f||S+(N instanceof Ac?N.lookAhead:0)<=v.modeFrontier))return S;var F=Le(O.text,null,i.options.tabSize);(p==null||c>F)&&(p=S-1,c=F)}return p}function jL(i,s){if(i.modeFrontier=Math.min(i.modeFrontier,s),!(i.highlightFrontier<s-10)){for(var f=i.first,c=s-1;c>f;c--){var p=Oe(i,c).stateAfter;if(p&&(!(p instanceof Ac)||c+p.lookAhead<s)){f=c+1;break}}i.highlightFrontier=Math.min(i.highlightFrontier,f)}}var jw=!1,Ei=!1;function AL(){jw=!0}function ML(){Ei=!0}function Mc(i,s,f){this.marker=i,this.from=s,this.to=f}function bl(i,s){if(i)for(var f=0;f<i.length;++f){var c=i[f];if(c.marker==s)return c}}function IL(i,s){for(var f,c=0;c<i.length;++c)i[c]!=s&&(f||(f=[])).push(i[c]);return f}function RL(i,s,f){var c=f&&window.WeakSet&&(f.markedSpans||(f.markedSpans=new WeakSet));c&&i.markedSpans&&c.has(i.markedSpans)?i.markedSpans.push(s):(i.markedSpans=i.markedSpans?i.markedSpans.concat([s]):[s],c&&c.add(i.markedSpans)),s.marker.attachLine(i)}function _L(i,s,f){var c;if(i)for(var p=0;p<i.length;++p){var v=i[p],b=v.marker,S=v.from==null||(b.inclusiveLeft?v.from<=s:v.from<s);if(S||v.from==s&&b.type=="bookmark"&&(!f||!v.marker.insertLeft)){var O=v.to==null||(b.inclusiveRight?v.to>=s:v.to>s);(c||(c=[])).push(new Mc(b,v.from,O?null:v.to))}}return c}function $L(i,s,f){var c;if(i)for(var p=0;p<i.length;++p){var v=i[p],b=v.marker,S=v.to==null||(b.inclusiveRight?v.to>=s:v.to>s);if(S||v.from==s&&b.type=="bookmark"&&(!f||v.marker.insertLeft)){var O=v.from==null||(b.inclusiveLeft?v.from<=s:v.from<s);(c||(c=[])).push(new Mc(b,O?null:v.from-s,v.to==null?null:v.to-s))}}return c}function Np(i,s){if(s.full)return null;var f=ne(i,s.from.line)&&Oe(i,s.from.line).markedSpans,c=ne(i,s.to.line)&&Oe(i,s.to.line).markedSpans;if(!f&&!c)return null;var p=s.from.ch,v=s.to.ch,b=be(s.from,s.to)==0,S=_L(f,p,b),O=$L(c,v,b),N=s.text.length==1,F=ze(s.text).length+(N?p:0);if(S)for(var H=0;H<S.length;++H){var G=S[H];if(G.to==null){var K=bl(O,G.marker);K?N&&(G.to=K.to==null?null:K.to+F):G.to=p}}if(O)for(var te=0;te<O.length;++te){var se=O[te];if(se.to!=null&&(se.to+=F),se.from==null){var ge=bl(S,se.marker);ge||(se.from=F,N&&(S||(S=[])).push(se))}else se.from+=F,N&&(S||(S=[])).push(se)}S&&(S=Aw(S)),O&&O!=S&&(O=Aw(O));var ye=[S];if(!N){var xe=s.text.length-2,we;if(xe>0&&S)for(var Te=0;Te<S.length;++Te)S[Te].to==null&&(we||(we=[])).push(new Mc(S[Te].marker,null,null));for(var Re=0;Re<xe;++Re)ye.push(we);ye.push(O)}return ye}function Aw(i){for(var s=0;s<i.length;++s){var f=i[s];f.from!=null&&f.from==f.to&&f.marker.clearWhenEmpty!==!1&&i.splice(s--,1)}return i.length?i:null}function DL(i,s,f){var c=null;if(i.iter(s.line,f.line+1,function(K){if(K.markedSpans)for(var te=0;te<K.markedSpans.length;++te){var se=K.markedSpans[te].marker;se.readOnly&&(!c||Ee(c,se)==-1)&&(c||(c=[])).push(se)}}),!c)return null;for(var p=[{from:s,to:f}],v=0;v<c.length;++v)for(var b=c[v],S=b.find(0),O=0;O<p.length;++O){var N=p[O];if(!(be(N.to,S.from)<0||be(N.from,S.to)>0)){var F=[O,1],H=be(N.from,S.from),G=be(N.to,S.to);(H<0||!b.inclusiveLeft&&!H)&&F.push({from:N.from,to:S.from}),(G>0||!b.inclusiveRight&&!G)&&F.push({from:S.to,to:N.to}),p.splice.apply(p,F),O+=F.length-3}}return p}function Mw(i){var s=i.markedSpans;if(s){for(var f=0;f<s.length;++f)s[f].marker.detachLine(i);i.markedSpans=null}}function Iw(i,s){if(s){for(var f=0;f<s.length;++f)s[f].marker.attachLine(i);i.markedSpans=s}}function Ic(i){return i.inclusiveLeft?-1:0}function Rc(i){return i.inclusiveRight?1:0}function jp(i,s){var f=i.lines.length-s.lines.length;if(f!=0)return f;var c=i.find(),p=s.find(),v=be(c.from,p.from)||Ic(i)-Ic(s);if(v)return-v;var b=be(c.to,p.to)||Rc(i)-Rc(s);return b||s.id-i.id}function Rw(i,s){var f=Ei&&i.markedSpans,c;if(f)for(var p=void 0,v=0;v<f.length;++v)p=f[v],p.marker.collapsed&&(s?p.from:p.to)==null&&(!c||jp(c,p.marker)<0)&&(c=p.marker);return c}function _w(i){return Rw(i,!0)}function _c(i){return Rw(i,!1)}function FL(i,s){var f=Ei&&i.markedSpans,c;if(f)for(var p=0;p<f.length;++p){var v=f[p];v.marker.collapsed&&(v.from==null||v.from<s)&&(v.to==null||v.to>s)&&(!c||jp(c,v.marker)<0)&&(c=v.marker)}return c}function $w(i,s,f,c,p){var v=Oe(i,s),b=Ei&&v.markedSpans;if(b)for(var S=0;S<b.length;++S){var O=b[S];if(O.marker.collapsed){var N=O.marker.find(0),F=be(N.from,f)||Ic(O.marker)-Ic(p),H=be(N.to,c)||Rc(O.marker)-Rc(p);if(!(F>=0&&H<=0||F<=0&&H>=0)&&(F<=0&&(O.marker.inclusiveRight&&p.inclusiveLeft?be(N.to,f)>=0:be(N.to,f)>0)||F>=0&&(O.marker.inclusiveRight&&p.inclusiveLeft?be(N.from,c)<=0:be(N.from,c)<0)))return!0}}}function In(i){for(var s;s=_w(i);)i=s.find(-1,!0).line;return i}function zL(i){for(var s;s=_c(i);)i=s.find(1,!0).line;return i}function HL(i){for(var s,f;s=_c(i);)i=s.find(1,!0).line,(f||(f=[])).push(i);return f}function Ap(i,s){var f=Oe(i,s),c=In(f);return f==c?s:I(c)}function Dw(i,s){if(s>i.lastLine())return s;var f=Oe(i,s),c;if(!eo(i,f))return s;for(;c=_c(f);)f=c.find(1,!0).line;return I(f)+1}function eo(i,s){var f=Ei&&s.markedSpans;if(f){for(var c=void 0,p=0;p<f.length;++p)if(c=f[p],!!c.marker.collapsed){if(c.from==null)return!0;if(!c.marker.widgetNode&&c.from==0&&c.marker.inclusiveLeft&&Mp(i,s,c))return!0}}}function Mp(i,s,f){if(f.to==null){var c=f.marker.find(1,!0);return Mp(i,c.line,bl(c.line.markedSpans,f.marker))}if(f.marker.inclusiveRight&&f.to==s.text.length)return!0;for(var p=void 0,v=0;v<s.markedSpans.length;++v)if(p=s.markedSpans[v],p.marker.collapsed&&!p.marker.widgetNode&&p.from==f.to&&(p.to==null||p.to!=f.from)&&(p.marker.inclusiveLeft||f.marker.inclusiveRight)&&Mp(i,s,p))return!0}function Ci(i){i=In(i);for(var s=0,f=i.parent,c=0;c<f.lines.length;++c){var p=f.lines[c];if(p==i)break;s+=p.height}for(var v=f.parent;v;f=v,v=f.parent)for(var b=0;b<v.children.length;++b){var S=v.children[b];if(S==f)break;s+=S.height}return s}function $c(i){if(i.height==0)return 0;for(var s=i.text.length,f,c=i;f=_w(c);){var p=f.find(0,!0);c=p.from.line,s+=p.from.ch-p.to.ch}for(c=i;f=_c(c);){var v=f.find(0,!0);s-=c.text.length-v.from.ch,c=v.to.line,s+=c.text.length-v.to.ch}return s}function Ip(i){var s=i.display,f=i.doc;s.maxLine=Oe(f,f.first),s.maxLineLength=$c(s.maxLine),s.maxLineChanged=!0,f.iter(function(c){var p=$c(c);p>s.maxLineLength&&(s.maxLineLength=p,s.maxLine=c)})}var Ga=function(i,s,f){this.text=i,Iw(this,s),this.height=f?f(this):1};Ga.prototype.lineNo=function(){return I(this)},Ln(Ga);function BL(i,s,f,c){i.text=s,i.stateAfter&&(i.stateAfter=null),i.styles&&(i.styles=null),i.order!=null&&(i.order=null),Mw(i),Iw(i,f);var p=c?c(i):1;p!=i.height&&qr(i,p)}function WL(i){i.parent=null,Mw(i)}var UL={},KL={};function Fw(i,s){if(!i||/^\s*$/.test(i))return null;var f=s.addModeClass?KL:UL;return f[i]||(f[i]=i.replace(/\S+/g,"cm-$&"))}function zw(i,s){var f=Q("span",null,null,g?"padding-right: .1px":null),c={pre:Q("pre",[f],"CodeMirror-line"),content:f,col:0,pos:0,cm:i,trailingSpace:!1,splitSpaces:i.getOption("lineWrapping")};s.measure={};for(var p=0;p<=(s.rest?s.rest.length:0);p++){var v=p?s.rest[p-1]:s.line,b=void 0;c.pos=0,c.addToken=qL,Qi(i.display.measure)&&(b=Je(v,i.doc.direction))&&(c.addToken=XL(c.addToken,b)),c.map=[];var S=s!=i.display.externalMeasured&&I(v);YL(v,c,kw(i,v,S)),v.styleClasses&&(v.styleClasses.bgClass&&(c.bgClass=ue(v.styleClasses.bgClass,c.bgClass||"")),v.styleClasses.textClass&&(c.textClass=ue(v.styleClasses.textClass,c.textClass||""))),c.map.length==0&&c.map.push(0,0,c.content.appendChild(Nc(i.display.measure))),p==0?(s.measure.map=c.map,s.measure.cache={}):((s.measure.maps||(s.measure.maps=[])).push(c.map),(s.measure.caches||(s.measure.caches=[])).push({}))}if(g){var O=c.content.lastChild;(/\bcm-tab\b/.test(O.className)||O.querySelector&&O.querySelector(".cm-tab"))&&(c.content.className="cm-tab-wrap-hack")}return Ct(i,"renderLine",i,s.line,c.pre),c.pre.className&&(c.textClass=ue(c.pre.className,c.textClass||"")),c}function GL(i){var s=M("span","","cm-invalidchar");return s.title="\\u"+i.charCodeAt(0).toString(16),s.setAttribute("aria-label",s.title),s}function qL(i,s,f,c,p,v,b){if(s){var S=i.splitSpaces?VL(s,i.trailingSpace):s,O=i.cm.state.specialChars,N=!1,F;if(!O.test(s))i.col+=s.length,F=document.createTextNode(S),i.map.push(i.pos,i.pos+s.length,F),d&&h<9&&(N=!0),i.pos+=s.length;else{F=document.createDocumentFragment();for(var H=0;;){O.lastIndex=H;var G=O.exec(s),K=G?G.index-H:s.length-H;if(K){var te=document.createTextNode(S.slice(H,H+K));d&&h<9?F.appendChild(M("span",[te])):F.appendChild(te),i.map.push(i.pos,i.pos+K,te),i.col+=K,i.pos+=K}if(!G)break;H+=K+1;var se=void 0;if(G[0]=="	"){var ge=i.cm.options.tabSize,ye=ge-i.col%ge;se=F.appendChild(M("span",Ft(ye),"cm-tab")),se.setAttribute("role","presentation"),se.setAttribute("cm-text","	"),i.col+=ye}else G[0]=="\r"||G[0]=="\n"?(se=F.appendChild(M("span",G[0]=="\r"?"":"","cm-invalidchar")),se.setAttribute("cm-text",G[0]),i.col+=1):(se=i.cm.options.specialCharPlaceholder(G[0]),se.setAttribute("cm-text",G[0]),d&&h<9?F.appendChild(M("span",[se])):F.appendChild(se),i.col+=1);i.map.push(i.pos,i.pos+1,se),i.pos++}}if(i.trailingSpace=S.charCodeAt(s.length-1)==32,f||c||p||N||v||b){var xe=f||"";c&&(xe+=c),p&&(xe+=p);var we=M("span",[F],xe,v);if(b)for(var Te in b)b.hasOwnProperty(Te)&&Te!="style"&&Te!="class"&&we.setAttribute(Te,b[Te]);return i.content.appendChild(we)}i.content.appendChild(F)}}function VL(i,s){if(i.length>1&&!/  /.test(i))return i;for(var f=s,c="",p=0;p<i.length;p++){var v=i.charAt(p);v==" "&&f&&(p==i.length-1||i.charCodeAt(p+1)==32)&&(v=""),c+=v,f=v==" "}return c}function XL(i,s){return function(f,c,p,v,b,S,O){p=p?p+" cm-force-border":"cm-force-border";for(var N=f.pos,F=N+c.length;;){for(var H=void 0,G=0;G<s.length&&(H=s[G],!(H.to>N&&H.from<=N));G++);if(H.to>=F)return i(f,c,p,v,b,S,O);i(f,c.slice(0,H.to-N),p,v,null,S,O),v=null,c=c.slice(H.to-N),N=H.to}}}function Hw(i,s,f,c){var p=!c&&f.widgetNode;p&&i.map.push(i.pos,i.pos+s,p),!c&&i.cm.display.input.needsContentAttribute&&(p||(p=i.content.appendChild(document.createElement("span"))),p.setAttribute("cm-marker",f.id)),p&&(i.cm.display.input.setUneditable(p),i.content.appendChild(p)),i.pos+=s,i.trailingSpace=!1}function YL(i,s,f){var c=i.markedSpans,p=i.text,v=0;if(!c){for(var b=1;b<f.length;b+=2)s.addToken(s,p.slice(v,v=f[b]),Fw(f[b+1],s.cm.options));return}for(var S=p.length,O=0,N=1,F="",H,G,K=0,te,se,ge,ye,xe;;){if(K==O){te=se=ge=G="",xe=null,ye=null,K=1/0;for(var we=[],Te=void 0,Re=0;Re<c.length;++Re){var je=c[Re],Xe=je.marker;if(Xe.type=="bookmark"&&je.from==O&&Xe.widgetNode)we.push(Xe);else if(je.from<=O&&(je.to==null||je.to>O||Xe.collapsed&&je.to==O&&je.from==O)){if(je.to!=null&&je.to!=O&&K>je.to&&(K=je.to,se=""),Xe.className&&(te+=" "+Xe.className),Xe.css&&(G=(G?G+";":"")+Xe.css),Xe.startStyle&&je.from==O&&(ge+=" "+Xe.startStyle),Xe.endStyle&&je.to==K&&(Te||(Te=[])).push(Xe.endStyle,je.to),Xe.title&&((xe||(xe={})).title=Xe.title),Xe.attributes)for(var dt in Xe.attributes)(xe||(xe={}))[dt]=Xe.attributes[dt];Xe.collapsed&&(!ye||jp(ye.marker,Xe)<0)&&(ye=je)}else je.from>O&&K>je.from&&(K=je.from)}if(Te)for(var Yt=0;Yt<Te.length;Yt+=2)Te[Yt+1]==K&&(se+=" "+Te[Yt]);if(!ye||ye.from==O)for(var bt=0;bt<we.length;++bt)Hw(s,0,we[bt]);if(ye&&(ye.from||0)==O){if(Hw(s,(ye.to==null?S+1:ye.to)-O,ye.marker,ye.from==null),ye.to==null)return;ye.to==O&&(ye=!1)}}if(O>=S)break;for(var _r=Math.min(S,K);;){if(F){var Tr=O+F.length;if(!ye){var It=Tr>_r?F.slice(0,_r-O):F;s.addToken(s,It,H?H+te:te,ge,O+It.length==K?se:"",G,xe)}if(Tr>=_r){F=F.slice(_r-O),O=_r;break}O=Tr,ge=""}F=p.slice(v,v=f[N++]),H=Fw(f[N++],s.cm.options)}}}function Bw(i,s,f){this.line=s,this.rest=HL(s),this.size=this.rest?I(ze(this.rest))-f+1:1,this.node=this.text=null,this.hidden=eo(i,s)}function Dc(i,s,f){for(var c=[],p,v=s;v<f;v=p){var b=new Bw(i.doc,Oe(i.doc,v),v);p=v+b.size,c.push(b)}return c}var qa=null;function QL(i){qa?qa.ops.push(i):i.ownsGroup=qa={ops:[i],delayedCallbacks:[]}}function JL(i){var s=i.delayedCallbacks,f=0;do{for(;f<s.length;f++)s[f].call(null);for(var c=0;c<i.ops.length;c++){var p=i.ops[c];if(p.cursorActivityHandlers)for(;p.cursorActivityCalled<p.cursorActivityHandlers.length;)p.cursorActivityHandlers[p.cursorActivityCalled++].call(null,p.cm)}}while(f<s.length)}function ZL(i,s){var f=i.ownsGroup;if(f)try{JL(f)}finally{qa=null,s(f)}}var xl=null;function qt(i,s){var f=xi(i,s);if(f.length){var c=Array.prototype.slice.call(arguments,2),p;qa?p=qa.delayedCallbacks:xl?p=xl:(p=xl=[],setTimeout(eN,0));for(var v=function(S){p.push(function(){return f[S].apply(null,c)})},b=0;b<f.length;++b)v(b)}}function eN(){var i=xl;xl=null;for(var s=0;s<i.length;++s)i[s]()}function Ww(i,s,f,c){for(var p=0;p<s.changes.length;p++){var v=s.changes[p];v=="text"?rN(i,s):v=="gutter"?Kw(i,s,f,c):v=="class"?Rp(i,s):v=="widget"&&nN(i,s,c)}s.changes=null}function Sl(i){return i.node==i.text&&(i.node=M("div",null,null,"position: relative"),i.text.parentNode&&i.text.parentNode.replaceChild(i.node,i.text),i.node.appendChild(i.text),d&&h<8&&(i.node.style.zIndex=2)),i.node}function tN(i,s){var f=s.bgClass?s.bgClass+" "+(s.line.bgClass||""):s.line.bgClass;if(f&&(f+=" CodeMirror-linebackground"),s.background)f?s.background.className=f:(s.background.parentNode.removeChild(s.background),s.background=null);else if(f){var c=Sl(s);s.background=c.insertBefore(M("div",null,f),c.firstChild),i.display.input.setUneditable(s.background)}}function Uw(i,s){var f=i.display.externalMeasured;return f&&f.line==s.line?(i.display.externalMeasured=null,s.measure=f.measure,f.built):zw(i,s)}function rN(i,s){var f=s.text.className,c=Uw(i,s);s.text==s.node&&(s.node=c.pre),s.text.parentNode.replaceChild(c.pre,s.text),s.text=c.pre,c.bgClass!=s.bgClass||c.textClass!=s.textClass?(s.bgClass=c.bgClass,s.textClass=c.textClass,Rp(i,s)):f&&(s.text.className=f)}function Rp(i,s){tN(i,s),s.line.wrapClass?Sl(s).className=s.line.wrapClass:s.node!=s.text&&(s.node.className="");var f=s.textClass?s.textClass+" "+(s.line.textClass||""):s.line.textClass;s.text.className=f||""}function Kw(i,s,f,c){if(s.gutter&&(s.node.removeChild(s.gutter),s.gutter=null),s.gutterBackground&&(s.node.removeChild(s.gutterBackground),s.gutterBackground=null),s.line.gutterClass){var p=Sl(s);s.gutterBackground=M("div",null,"CodeMirror-gutter-background "+s.line.gutterClass,"left: "+(i.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px; width: "+c.gutterTotalWidth+"px"),i.display.input.setUneditable(s.gutterBackground),p.insertBefore(s.gutterBackground,s.text)}var v=s.line.gutterMarkers;if(i.options.lineNumbers||v){var b=Sl(s),S=s.gutter=M("div",null,"CodeMirror-gutter-wrapper","left: "+(i.options.fixedGutter?c.fixedPos:-c.gutterTotalWidth)+"px");if(S.setAttribute("aria-hidden","true"),i.display.input.setUneditable(S),b.insertBefore(S,s.text),s.line.gutterClass&&(S.className+=" "+s.line.gutterClass),i.options.lineNumbers&&(!v||!v["CodeMirror-linenumbers"])&&(s.lineNumber=S.appendChild(M("div",pe(i.options,f),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+c.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+i.display.lineNumInnerWidth+"px"))),v)for(var O=0;O<i.display.gutterSpecs.length;++O){var N=i.display.gutterSpecs[O].className,F=v.hasOwnProperty(N)&&v[N];F&&S.appendChild(M("div",[F],"CodeMirror-gutter-elt","left: "+c.gutterLeft[N]+"px; width: "+c.gutterWidth[N]+"px"))}}}function nN(i,s,f){s.alignable&&(s.alignable=null);for(var c=V("CodeMirror-linewidget"),p=s.node.firstChild,v=void 0;p;p=v)v=p.nextSibling,c.test(p.className)&&s.node.removeChild(p);Gw(i,s,f)}function iN(i,s,f,c){var p=Uw(i,s);return s.text=s.node=p.pre,p.bgClass&&(s.bgClass=p.bgClass),p.textClass&&(s.textClass=p.textClass),Rp(i,s),Kw(i,s,f,c),Gw(i,s,c),s.node}function Gw(i,s,f){if(qw(i,s.line,s,f,!0),s.rest)for(var c=0;c<s.rest.length;c++)qw(i,s.rest[c],s,f,!1)}function qw(i,s,f,c,p){if(s.widgets)for(var v=Sl(f),b=0,S=s.widgets;b<S.length;++b){var O=S[b],N=M("div",[O.node],"CodeMirror-linewidget"+(O.className?" "+O.className:""));O.handleMouseEvents||N.setAttribute("cm-ignore-events","true"),oN(O,N,f,c),i.display.input.setUneditable(N),p&&O.above?v.insertBefore(N,f.gutter||f.text):v.appendChild(N),qt(O,"redraw")}}function oN(i,s,f,c){if(i.noHScroll){(f.alignable||(f.alignable=[])).push(s);var p=c.wrapperWidth;s.style.left=c.fixedPos+"px",i.coverGutter||(p-=c.gutterTotalWidth,s.style.paddingLeft=c.gutterTotalWidth+"px"),s.style.width=p+"px"}i.coverGutter&&(s.style.zIndex=5,s.style.position="relative",i.noHScroll||(s.style.marginLeft=-c.gutterTotalWidth+"px"))}function El(i){if(i.height!=null)return i.height;var s=i.doc.cm;if(!s)return 0;if(!re(document.body,i.node)){var f="position: relative;";i.coverGutter&&(f+="margin-left: -"+s.display.gutters.offsetWidth+"px;"),i.noHScroll&&(f+="width: "+s.display.wrapper.clientWidth+"px;"),_(s.display.measure,M("div",[i.node],null,f))}return i.height=i.node.parentNode.offsetHeight}function ki(i,s){for(var f=gl(s);f!=i.wrapper;f=f.parentNode)if(!f||f.nodeType==1&&f.getAttribute("cm-ignore-events")=="true"||f.parentNode==i.sizer&&f!=i.mover)return!0}function Fc(i){return i.lineSpace.offsetTop}function _p(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function Vw(i){if(i.cachedPaddingH)return i.cachedPaddingH;var s=_(i.measure,M("pre","x","CodeMirror-line-like")),f=window.getComputedStyle?window.getComputedStyle(s):s.currentStyle,c={left:parseInt(f.paddingLeft),right:parseInt(f.paddingRight)};return!isNaN(c.left)&&!isNaN(c.right)&&(i.cachedPaddingH=c),c}function Jn(i){return et-i.display.nativeBarWidth}function Bo(i){return i.display.scroller.clientWidth-Jn(i)-i.display.barWidth}function $p(i){return i.display.scroller.clientHeight-Jn(i)-i.display.barHeight}function aN(i,s,f){var c=i.options.lineWrapping,p=c&&Bo(i);if(!s.measure.heights||c&&s.measure.width!=p){var v=s.measure.heights=[];if(c){s.measure.width=p;for(var b=s.text.firstChild.getClientRects(),S=0;S<b.length-1;S++){var O=b[S],N=b[S+1];Math.abs(O.bottom-N.bottom)>2&&v.push((O.bottom+N.top)/2-f.top)}}v.push(f.bottom-f.top)}}function Xw(i,s,f){if(i.line==s)return{map:i.measure.map,cache:i.measure.cache};if(i.rest){for(var c=0;c<i.rest.length;c++)if(i.rest[c]==s)return{map:i.measure.maps[c],cache:i.measure.caches[c]};for(var p=0;p<i.rest.length;p++)if(I(i.rest[p])>f)return{map:i.measure.maps[p],cache:i.measure.caches[p],before:!0}}}function sN(i,s){s=In(s);var f=I(s),c=i.display.externalMeasured=new Bw(i.doc,s,f);c.lineN=f;var p=c.built=zw(i,c);return c.text=p.pre,_(i.display.lineMeasure,p.pre),c}function Yw(i,s,f,c){return Zn(i,Va(i,s),f,c)}function Dp(i,s){if(s>=i.display.viewFrom&&s<i.display.viewTo)return i.display.view[Ko(i,s)];var f=i.display.externalMeasured;if(f&&s>=f.lineN&&s<f.lineN+f.size)return f}function Va(i,s){var f=I(s),c=Dp(i,f);c&&!c.text?c=null:c&&c.changes&&(Ww(i,c,f,Wp(i)),i.curOp.forceUpdate=!0),c||(c=sN(i,s));var p=Xw(c,s,f);return{line:s,view:c,rect:null,map:p.map,cache:p.cache,before:p.before,hasHeights:!1}}function Zn(i,s,f,c,p){s.before&&(f=-1);var v=f+(c||""),b;return s.cache.hasOwnProperty(v)?b=s.cache[v]:(s.rect||(s.rect=s.view.text.getBoundingClientRect()),s.hasHeights||(aN(i,s.view,s.rect),s.hasHeights=!0),b=uN(i,s,f,c),b.bogus||(s.cache[v]=b)),{left:b.left,right:b.right,top:p?b.rtop:b.top,bottom:p?b.rbottom:b.bottom}}var Qw={left:0,right:0,top:0,bottom:0};function Jw(i,s,f){for(var c,p,v,b,S,O,N=0;N<i.length;N+=3)if(S=i[N],O=i[N+1],s<S?(p=0,v=1,b="left"):s<O?(p=s-S,v=p+1):(N==i.length-3||s==O&&i[N+3]>s)&&(v=O-S,p=v-1,s>=O&&(b="right")),p!=null){if(c=i[N+2],S==O&&f==(c.insertLeft?"left":"right")&&(b=f),f=="left"&&p==0)for(;N&&i[N-2]==i[N-3]&&i[N-1].insertLeft;)c=i[(N-=3)+2],b="left";if(f=="right"&&p==O-S)for(;N<i.length-3&&i[N+3]==i[N+4]&&!i[N+5].insertLeft;)c=i[(N+=3)+2],b="right";break}return{node:c,start:p,end:v,collapse:b,coverStart:S,coverEnd:O}}function lN(i,s){var f=Qw;if(s=="left")for(var c=0;c<i.length&&(f=i[c]).left==f.right;c++);else for(var p=i.length-1;p>=0&&(f=i[p]).left==f.right;p--);return f}function uN(i,s,f,c){var p=Jw(s.map,f,c),v=p.node,b=p.start,S=p.end,O=p.collapse,N;if(v.nodeType==3){for(var F=0;F<4;F++){for(;b&&nt(s.line.text.charAt(p.coverStart+b));)--b;for(;p.coverStart+S<p.coverEnd&&nt(s.line.text.charAt(p.coverStart+S));)++S;if(d&&h<9&&b==0&&S==p.coverEnd-p.coverStart?N=v.parentNode.getBoundingClientRect():N=lN(oe(v,b,S).getClientRects(),c),N.left||N.right||b==0)break;S=b,b=b-1,O="right"}d&&h<11&&(N=cN(i.display.measure,N))}else{b>0&&(O=c="right");var H;i.options.lineWrapping&&(H=v.getClientRects()).length>1?N=H[c=="right"?H.length-1:0]:N=v.getBoundingClientRect()}if(d&&h<9&&!b&&(!N||!N.left&&!N.right)){var G=v.parentNode.getClientRects()[0];G?N={left:G.left,right:G.left+Ya(i.display),top:G.top,bottom:G.bottom}:N=Qw}for(var K=N.top-s.rect.top,te=N.bottom-s.rect.top,se=(K+te)/2,ge=s.view.measure.heights,ye=0;ye<ge.length-1&&!(se<ge[ye]);ye++);var xe=ye?ge[ye-1]:0,we=ge[ye],Te={left:(O=="right"?N.right:N.left)-s.rect.left,right:(O=="left"?N.left:N.right)-s.rect.left,top:xe,bottom:we};return!N.left&&!N.right&&(Te.bogus=!0),i.options.singleCursorHeightPerLine||(Te.rtop=K,Te.rbottom=te),Te}function cN(i,s){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!Op(i))return s;var f=screen.logicalXDPI/screen.deviceXDPI,c=screen.logicalYDPI/screen.deviceYDPI;return{left:s.left*f,right:s.right*f,top:s.top*c,bottom:s.bottom*c}}function Zw(i){if(i.measure&&(i.measure.cache={},i.measure.heights=null,i.rest))for(var s=0;s<i.rest.length;s++)i.measure.caches[s]={}}function eb(i){i.display.externalMeasure=null,W(i.display.lineMeasure);for(var s=0;s<i.display.view.length;s++)Zw(i.display.view[s])}function Cl(i){eb(i),i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null,i.options.lineWrapping||(i.display.maxLineChanged=!0),i.display.lineNumChars=null}function tb(i){return w&&A?-(i.body.getBoundingClientRect().left-parseInt(getComputedStyle(i.body).marginLeft)):i.defaultView.pageXOffset||(i.documentElement||i.body).scrollLeft}function rb(i){return w&&A?-(i.body.getBoundingClientRect().top-parseInt(getComputedStyle(i.body).marginTop)):i.defaultView.pageYOffset||(i.documentElement||i.body).scrollTop}function Fp(i){var s=In(i),f=s.widgets,c=0;if(f)for(var p=0;p<f.length;++p)f[p].above&&(c+=El(f[p]));return c}function zc(i,s,f,c,p){if(!p){var v=Fp(s);f.top+=v,f.bottom+=v}if(c=="line")return f;c||(c="local");var b=Ci(s);if(c=="local"?b+=Fc(i.display):b-=i.display.viewOffset,c=="page"||c=="window"){var S=i.display.lineSpace.getBoundingClientRect();b+=S.top+(c=="window"?0:rb(Se(i)));var O=S.left+(c=="window"?0:tb(Se(i)));f.left+=O,f.right+=O}return f.top+=b,f.bottom+=b,f}function nb(i,s,f){if(f=="div")return s;var c=s.left,p=s.top;if(f=="page")c-=tb(Se(i)),p-=rb(Se(i));else if(f=="local"||!f){var v=i.display.sizer.getBoundingClientRect();c+=v.left,p+=v.top}var b=i.display.lineSpace.getBoundingClientRect();return{left:c-b.left,top:p-b.top}}function Hc(i,s,f,c,p){return c||(c=Oe(i.doc,s.line)),zc(i,c,Yw(i,c,s.ch,p),f)}function Rn(i,s,f,c,p,v){c=c||Oe(i.doc,s.line),p||(p=Va(i,c));function b(te,se){var ge=Zn(i,p,te,se?"right":"left",v);return se?ge.left=ge.right:ge.right=ge.left,zc(i,c,ge,f)}var S=Je(c,i.doc.direction),O=s.ch,N=s.sticky;if(O>=c.text.length?(O=c.text.length,N="before"):O<=0&&(O=0,N="after"),!S)return b(N=="before"?O-1:O,N=="before");function F(te,se,ge){var ye=S[se],xe=ye.level==1;return b(ge?te-1:te,xe!=ge)}var H=Pn(S,O,N),G=On,K=F(O,H,N=="before");return G!=null&&(K.other=F(O,G,N!="before")),K}function ib(i,s){var f=0;s=Be(i.doc,s),i.options.lineWrapping||(f=Ya(i.display)*s.ch);var c=Oe(i.doc,s.line),p=Ci(c)+Fc(i.display);return{left:f,right:f,top:p,bottom:p+c.height}}function zp(i,s,f,c,p){var v=J(i,s,f);return v.xRel=p,c&&(v.outside=c),v}function Hp(i,s,f){var c=i.doc;if(f+=i.display.viewOffset,f<0)return zp(c.first,0,null,-1,-1);var p=z(c,f),v=c.first+c.size-1;if(p>v)return zp(c.first+c.size-1,Oe(c,v).text.length,null,1,1);s<0&&(s=0);for(var b=Oe(c,p);;){var S=fN(i,b,p,s,f),O=FL(b,S.ch+(S.xRel>0||S.outside>0?1:0));if(!O)return S;var N=O.find(1);if(N.line==p)return N;b=Oe(c,p=N.line)}}function ob(i,s,f,c){c-=Fp(s);var p=s.text.length,v=$e(function(b){return Zn(i,f,b-1).bottom<=c},p,0);return p=$e(function(b){return Zn(i,f,b).top>c},v,p),{begin:v,end:p}}function ab(i,s,f,c){f||(f=Va(i,s));var p=zc(i,s,Zn(i,f,c),"line").top;return ob(i,s,f,p)}function Bp(i,s,f,c){return i.bottom<=f?!1:i.top>f?!0:(c?i.left:i.right)>s}function fN(i,s,f,c,p){p-=Ci(s);var v=Va(i,s),b=Fp(s),S=0,O=s.text.length,N=!0,F=Je(s,i.doc.direction);if(F){var H=(i.options.lineWrapping?hN:dN)(i,s,f,v,F,c,p);N=H.level!=1,S=N?H.from:H.to-1,O=N?H.to:H.from-1}var G=null,K=null,te=$e(function(Re){var je=Zn(i,v,Re);return je.top+=b,je.bottom+=b,Bp(je,c,p,!1)?(je.top<=p&&je.left<=c&&(G=Re,K=je),!0):!1},S,O),se,ge,ye=!1;if(K){var xe=c-K.left<K.right-c,we=xe==N;te=G+(we?0:1),ge=we?"after":"before",se=xe?K.left:K.right}else{!N&&(te==O||te==S)&&te++,ge=te==0?"after":te==s.text.length?"before":Zn(i,v,te-(N?1:0)).bottom+b<=p==N?"after":"before";var Te=Rn(i,J(f,te,ge),"line",s,v);se=Te.left,ye=p<Te.top?-1:p>=Te.bottom?1:0}return te=Qe(s.text,te,1),zp(f,te,ge,ye,c-se)}function dN(i,s,f,c,p,v,b){var S=$e(function(H){var G=p[H],K=G.level!=1;return Bp(Rn(i,J(f,K?G.to:G.from,K?"before":"after"),"line",s,c),v,b,!0)},0,p.length-1),O=p[S];if(S>0){var N=O.level!=1,F=Rn(i,J(f,N?O.from:O.to,N?"after":"before"),"line",s,c);Bp(F,v,b,!0)&&F.top>b&&(O=p[S-1])}return O}function hN(i,s,f,c,p,v,b){var S=ob(i,s,c,b),O=S.begin,N=S.end;/\s/.test(s.text.charAt(N-1))&&N--;for(var F=null,H=null,G=0;G<p.length;G++){var K=p[G];if(!(K.from>=N||K.to<=O)){var te=K.level!=1,se=Zn(i,c,te?Math.min(N,K.to)-1:Math.max(O,K.from)).right,ge=se<v?v-se+1e9:se-v;(!F||H>ge)&&(F=K,H=ge)}}return F||(F=p[p.length-1]),F.from<O&&(F={from:O,to:F.to,level:F.level}),F.to>N&&(F={from:F.from,to:N,level:F.level}),F}var Wo;function Xa(i){if(i.cachedTextHeight!=null)return i.cachedTextHeight;if(Wo==null){Wo=M("pre",null,"CodeMirror-line-like");for(var s=0;s<49;++s)Wo.appendChild(document.createTextNode("x")),Wo.appendChild(M("br"));Wo.appendChild(document.createTextNode("x"))}_(i.measure,Wo);var f=Wo.offsetHeight/50;return f>3&&(i.cachedTextHeight=f),W(i.measure),f||1}function Ya(i){if(i.cachedCharWidth!=null)return i.cachedCharWidth;var s=M("span","xxxxxxxxxx"),f=M("pre",[s],"CodeMirror-line-like");_(i.measure,f);var c=s.getBoundingClientRect(),p=(c.right-c.left)/10;return p>2&&(i.cachedCharWidth=p),p||10}function Wp(i){for(var s=i.display,f={},c={},p=s.gutters.clientLeft,v=s.gutters.firstChild,b=0;v;v=v.nextSibling,++b){var S=i.display.gutterSpecs[b].className;f[S]=v.offsetLeft+v.clientLeft+p,c[S]=v.clientWidth}return{fixedPos:Up(s),gutterTotalWidth:s.gutters.offsetWidth,gutterLeft:f,gutterWidth:c,wrapperWidth:s.wrapper.clientWidth}}function Up(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function sb(i){var s=Xa(i.display),f=i.options.lineWrapping,c=f&&Math.max(5,i.display.scroller.clientWidth/Ya(i.display)-3);return function(p){if(eo(i.doc,p))return 0;var v=0;if(p.widgets)for(var b=0;b<p.widgets.length;b++)p.widgets[b].height&&(v+=p.widgets[b].height);return f?v+(Math.ceil(p.text.length/c)||1)*s:v+s}}function Kp(i){var s=i.doc,f=sb(i);s.iter(function(c){var p=f(c);p!=c.height&&qr(c,p)})}function Uo(i,s,f,c){var p=i.display;if(!f&&gl(s).getAttribute("cm-not-content")=="true")return null;var v,b,S=p.lineSpace.getBoundingClientRect();try{v=s.clientX-S.left,b=s.clientY-S.top}catch{return null}var O=Hp(i,v,b),N;if(c&&O.xRel>0&&(N=Oe(i.doc,O.line).text).length==O.ch){var F=Le(N,N.length,i.options.tabSize)-N.length;O=J(O.line,Math.max(0,Math.round((v-Vw(i.display).left)/Ya(i.display))-F))}return O}function Ko(i,s){if(s>=i.display.viewTo||(s-=i.display.viewFrom,s<0))return null;for(var f=i.display.view,c=0;c<f.length;c++)if(s-=f[c].size,s<0)return c}function Cr(i,s,f,c){s==null&&(s=i.doc.first),f==null&&(f=i.doc.first+i.doc.size),c||(c=0);var p=i.display;if(c&&f<p.viewTo&&(p.updateLineNumbers==null||p.updateLineNumbers>s)&&(p.updateLineNumbers=s),i.curOp.viewChanged=!0,s>=p.viewTo)Ei&&Ap(i.doc,s)<p.viewTo&&ro(i);else if(f<=p.viewFrom)Ei&&Dw(i.doc,f+c)>p.viewFrom?ro(i):(p.viewFrom+=c,p.viewTo+=c);else if(s<=p.viewFrom&&f>=p.viewTo)ro(i);else if(s<=p.viewFrom){var v=Bc(i,f,f+c,1);v?(p.view=p.view.slice(v.index),p.viewFrom=v.lineN,p.viewTo+=c):ro(i)}else if(f>=p.viewTo){var b=Bc(i,s,s,-1);b?(p.view=p.view.slice(0,b.index),p.viewTo=b.lineN):ro(i)}else{var S=Bc(i,s,s,-1),O=Bc(i,f,f+c,1);S&&O?(p.view=p.view.slice(0,S.index).concat(Dc(i,S.lineN,O.lineN)).concat(p.view.slice(O.index)),p.viewTo+=c):ro(i)}var N=p.externalMeasured;N&&(f<N.lineN?N.lineN+=c:s<N.lineN+N.size&&(p.externalMeasured=null))}function to(i,s,f){i.curOp.viewChanged=!0;var c=i.display,p=i.display.externalMeasured;if(p&&s>=p.lineN&&s<p.lineN+p.size&&(c.externalMeasured=null),!(s<c.viewFrom||s>=c.viewTo)){var v=c.view[Ko(i,s)];if(v.node!=null){var b=v.changes||(v.changes=[]);Ee(b,f)==-1&&b.push(f)}}}function ro(i){i.display.viewFrom=i.display.viewTo=i.doc.first,i.display.view=[],i.display.viewOffset=0}function Bc(i,s,f,c){var p=Ko(i,s),v,b=i.display.view;if(!Ei||f==i.doc.first+i.doc.size)return{index:p,lineN:f};for(var S=i.display.viewFrom,O=0;O<p;O++)S+=b[O].size;if(S!=s){if(c>0){if(p==b.length-1)return null;v=S+b[p].size-s,p++}else v=S-s;s+=v,f+=v}for(;Ap(i.doc,f)!=f;){if(p==(c<0?0:b.length-1))return null;f+=c*b[p-(c<0?1:0)].size,p+=c}return{index:p,lineN:f}}function pN(i,s,f){var c=i.display,p=c.view;p.length==0||s>=c.viewTo||f<=c.viewFrom?(c.view=Dc(i,s,f),c.viewFrom=s):(c.viewFrom>s?c.view=Dc(i,s,c.viewFrom).concat(c.view):c.viewFrom<s&&(c.view=c.view.slice(Ko(i,s))),c.viewFrom=s,c.viewTo<f?c.view=c.view.concat(Dc(i,c.viewTo,f)):c.viewTo>f&&(c.view=c.view.slice(0,Ko(i,f)))),c.viewTo=f}function lb(i){for(var s=i.display.view,f=0,c=0;c<s.length;c++){var p=s[c];!p.hidden&&(!p.node||p.changes)&&++f}return f}function kl(i){i.display.input.showSelection(i.display.input.prepareSelection())}function ub(i,s){s===void 0&&(s=!0);var f=i.doc,c={},p=c.cursors=document.createDocumentFragment(),v=c.selection=document.createDocumentFragment(),b=i.options.$customCursor;b&&(s=!0);for(var S=0;S<f.sel.ranges.length;S++)if(!(!s&&S==f.sel.primIndex)){var O=f.sel.ranges[S];if(!(O.from().line>=i.display.viewTo||O.to().line<i.display.viewFrom)){var N=O.empty();if(b){var F=b(i,O);F&&Gp(i,F,p)}else(N||i.options.showCursorWhenSelecting)&&Gp(i,O.head,p);N||gN(i,O,v)}}return c}function Gp(i,s,f){var c=Rn(i,s,"div",null,null,!i.options.singleCursorHeightPerLine),p=f.appendChild(M("div","","CodeMirror-cursor"));if(p.style.left=c.left+"px",p.style.top=c.top+"px",p.style.height=Math.max(0,c.bottom-c.top)*i.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(i.getWrapperElement().className)){var v=Hc(i,s,"div",null,null),b=v.right-v.left;p.style.width=(b>0?b:i.defaultCharWidth())+"px"}if(c.other){var S=f.appendChild(M("div","","CodeMirror-cursor CodeMirror-secondarycursor"));S.style.display="",S.style.left=c.other.left+"px",S.style.top=c.other.top+"px",S.style.height=(c.other.bottom-c.other.top)*.85+"px"}}function Wc(i,s){return i.top-s.top||i.left-s.left}function gN(i,s,f){var c=i.display,p=i.doc,v=document.createDocumentFragment(),b=Vw(i.display),S=b.left,O=Math.max(c.sizerWidth,Bo(i)-c.sizer.offsetLeft)-b.right,N=p.direction=="ltr";function F(we,Te,Re,je){Te<0&&(Te=0),Te=Math.round(Te),je=Math.round(je),v.appendChild(M("div",null,"CodeMirror-selected","position: absolute; left: "+we+"px;\n                             top: "+Te+"px; width: "+(Re==null?O-we:Re)+"px;\n                             height: "+(je-Te)+"px"))}function H(we,Te,Re){var je=Oe(p,we),Xe=je.text.length,dt,Yt;function bt(It,Or){return Hc(i,J(we,It),"div",je,Or)}function _r(It,Or,Zt){var zt=ab(i,je,null,It),Rt=Or=="ltr"==(Zt=="after")?"left":"right",Ot=Zt=="after"?zt.begin:zt.end-(/\s/.test(je.text.charAt(zt.end-1))?2:1);return bt(Ot,Rt)[Rt]}var Tr=Je(je,p.direction);return Kt(Tr,Te||0,Re==null?Xe:Re,function(It,Or,Zt,zt){var Rt=Zt=="ltr",Ot=bt(It,Rt?"left":"right"),Pr=bt(Or-1,Rt?"right":"left"),us=Te==null&&It==0,lo=Re==null&&Or==Xe,ur=zt==0,ei=!Tr||zt==Tr.length-1;if(Pr.top-Ot.top<=3){var Qt=(N?us:lo)&&ur,wg=(N?lo:us)&&ei,Pi=Qt?S:(Rt?Ot:Pr).left,Yo=wg?O:(Rt?Pr:Ot).right;F(Pi,Ot.top,Yo-Pi,Ot.bottom)}else{var Qo,gr,cs,bg;Rt?(Qo=N&&us&&ur?S:Ot.left,gr=N?O:_r(It,Zt,"before"),cs=N?S:_r(Or,Zt,"after"),bg=N&&lo&&ei?O:Pr.right):(Qo=N?_r(It,Zt,"before"):S,gr=!N&&us&&ur?O:Ot.right,cs=!N&&lo&&ei?S:Pr.left,bg=N?_r(Or,Zt,"after"):O),F(Qo,Ot.top,gr-Qo,Ot.bottom),Ot.bottom<Pr.top&&F(S,Ot.bottom,null,Pr.top),F(cs,Pr.top,bg-cs,Pr.bottom)}(!dt||Wc(Ot,dt)<0)&&(dt=Ot),Wc(Pr,dt)<0&&(dt=Pr),(!Yt||Wc(Ot,Yt)<0)&&(Yt=Ot),Wc(Pr,Yt)<0&&(Yt=Pr)}),{start:dt,end:Yt}}var G=s.from(),K=s.to();if(G.line==K.line)H(G.line,G.ch,K.ch);else{var te=Oe(p,G.line),se=Oe(p,K.line),ge=In(te)==In(se),ye=H(G.line,G.ch,ge?te.text.length+1:null).end,xe=H(K.line,ge?0:null,K.ch).start;ge&&(ye.top<xe.top-2?(F(ye.right,ye.top,null,ye.bottom),F(S,xe.top,xe.left,xe.bottom)):F(ye.right,ye.top,xe.left-ye.right,ye.bottom)),ye.bottom<xe.top&&F(S,ye.bottom,null,xe.top)}f.appendChild(v)}function qp(i){if(i.state.focused){var s=i.display;clearInterval(s.blinker);var f=!0;s.cursorDiv.style.visibility="",i.options.cursorBlinkRate>0?s.blinker=setInterval(function(){i.hasFocus()||Qa(i),s.cursorDiv.style.visibility=(f=!f)?"":"hidden"},i.options.cursorBlinkRate):i.options.cursorBlinkRate<0&&(s.cursorDiv.style.visibility="hidden")}}function cb(i){i.hasFocus()||(i.display.input.focus(),i.state.focused||Xp(i))}function Vp(i){i.state.delayingBlurEvent=!0,setTimeout(function(){i.state.delayingBlurEvent&&(i.state.delayingBlurEvent=!1,i.state.focused&&Qa(i))},100)}function Xp(i,s){i.state.delayingBlurEvent&&!i.state.draggingText&&(i.state.delayingBlurEvent=!1),i.options.readOnly!="nocursor"&&(i.state.focused||(Ct(i,"focus",i,s),i.state.focused=!0,ie(i.display.wrapper,"CodeMirror-focused"),!i.curOp&&i.display.selForContextMenu!=i.doc.sel&&(i.display.input.reset(),g&&setTimeout(function(){return i.display.input.reset(!0)},20)),i.display.input.receivedFocus()),qp(i))}function Qa(i,s){i.state.delayingBlurEvent||(i.state.focused&&(Ct(i,"blur",i,s),i.state.focused=!1,de(i.display.wrapper,"CodeMirror-focused")),clearInterval(i.display.blinker),setTimeout(function(){i.state.focused||(i.display.shift=!1)},150))}function Uc(i){for(var s=i.display,f=s.lineDiv.offsetTop,c=Math.max(0,s.scroller.getBoundingClientRect().top),p=s.lineDiv.getBoundingClientRect().top,v=0,b=0;b<s.view.length;b++){var S=s.view[b],O=i.options.lineWrapping,N=void 0,F=0;if(!S.hidden){if(p+=S.line.height,d&&h<8){var H=S.node.offsetTop+S.node.offsetHeight;N=H-f,f=H}else{var G=S.node.getBoundingClientRect();N=G.bottom-G.top,!O&&S.text.firstChild&&(F=S.text.firstChild.getBoundingClientRect().right-G.left-1)}var K=S.line.height-N;if((K>.005||K<-.005)&&(p<c&&(v-=K),qr(S.line,N),fb(S.line),S.rest))for(var te=0;te<S.rest.length;te++)fb(S.rest[te]);if(F>i.display.sizerWidth){var se=Math.ceil(F/Ya(i.display));se>i.display.maxLineLength&&(i.display.maxLineLength=se,i.display.maxLine=S.line,i.display.maxLineChanged=!0)}}}Math.abs(v)>2&&(s.scroller.scrollTop+=v)}function fb(i){if(i.widgets)for(var s=0;s<i.widgets.length;++s){var f=i.widgets[s],c=f.node.parentNode;c&&(f.height=c.offsetHeight)}}function Kc(i,s,f){var c=f&&f.top!=null?Math.max(0,f.top):i.scroller.scrollTop;c=Math.floor(c-Fc(i));var p=f&&f.bottom!=null?f.bottom:c+i.wrapper.clientHeight,v=z(s,c),b=z(s,p);if(f&&f.ensure){var S=f.ensure.from.line,O=f.ensure.to.line;S<v?(v=S,b=z(s,Ci(Oe(s,S))+i.wrapper.clientHeight)):Math.min(O,s.lastLine())>=b&&(v=z(s,Ci(Oe(s,O))-i.wrapper.clientHeight),b=O)}return{from:v,to:Math.max(b,v+1)}}function vN(i,s){if(!kt(i,"scrollCursorIntoView")){var f=i.display,c=f.sizer.getBoundingClientRect(),p=null,v=f.wrapper.ownerDocument;if(s.top+c.top<0?p=!0:s.bottom+c.top>(v.defaultView.innerHeight||v.documentElement.clientHeight)&&(p=!1),p!=null&&!k){var b=M("div","",null,"position: absolute;\n                         top: "+(s.top-f.viewOffset-Fc(i.display))+"px;\n                         height: "+(s.bottom-s.top+Jn(i)+f.barHeight)+"px;\n                         left: "+s.left+"px; width: "+Math.max(2,s.right-s.left)+"px;");i.display.lineSpace.appendChild(b),b.scrollIntoView(p),i.display.lineSpace.removeChild(b)}}}function mN(i,s,f,c){c==null&&(c=0);var p;!i.options.lineWrapping&&s==f&&(f=s.sticky=="before"?J(s.line,s.ch+1,"before"):s,s=s.ch?J(s.line,s.sticky=="before"?s.ch-1:s.ch,"after"):s);for(var v=0;v<5;v++){var b=!1,S=Rn(i,s),O=!f||f==s?S:Rn(i,f);p={left:Math.min(S.left,O.left),top:Math.min(S.top,O.top)-c,right:Math.max(S.left,O.left),bottom:Math.max(S.bottom,O.bottom)+c};var N=Yp(i,p),F=i.doc.scrollTop,H=i.doc.scrollLeft;if(N.scrollTop!=null&&(Ol(i,N.scrollTop),Math.abs(i.doc.scrollTop-F)>1&&(b=!0)),N.scrollLeft!=null&&(Go(i,N.scrollLeft),Math.abs(i.doc.scrollLeft-H)>1&&(b=!0)),!b)break}return p}function yN(i,s){var f=Yp(i,s);f.scrollTop!=null&&Ol(i,f.scrollTop),f.scrollLeft!=null&&Go(i,f.scrollLeft)}function Yp(i,s){var f=i.display,c=Xa(i.display);s.top<0&&(s.top=0);var p=i.curOp&&i.curOp.scrollTop!=null?i.curOp.scrollTop:f.scroller.scrollTop,v=$p(i),b={};s.bottom-s.top>v&&(s.bottom=s.top+v);var S=i.doc.height+_p(f),O=s.top<c,N=s.bottom>S-c;if(s.top<p)b.scrollTop=O?0:s.top;else if(s.bottom>p+v){var F=Math.min(s.top,(N?S:s.bottom)-v);F!=p&&(b.scrollTop=F)}var H=i.options.fixedGutter?0:f.gutters.offsetWidth,G=i.curOp&&i.curOp.scrollLeft!=null?i.curOp.scrollLeft:f.scroller.scrollLeft-H,K=Bo(i)-f.gutters.offsetWidth,te=s.right-s.left>K;return te&&(s.right=s.left+K),s.left<10?b.scrollLeft=0:s.left<G?b.scrollLeft=Math.max(0,s.left+H-(te?0:10)):s.right>K+G-3&&(b.scrollLeft=s.right+(te?0:10)-K),b}function Qp(i,s){s!=null&&(Gc(i),i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+s)}function Ja(i){Gc(i);var s=i.getCursor();i.curOp.scrollToPos={from:s,to:s,margin:i.options.cursorScrollMargin}}function Tl(i,s,f){(s!=null||f!=null)&&Gc(i),s!=null&&(i.curOp.scrollLeft=s),f!=null&&(i.curOp.scrollTop=f)}function wN(i,s){Gc(i),i.curOp.scrollToPos=s}function Gc(i){var s=i.curOp.scrollToPos;if(s){i.curOp.scrollToPos=null;var f=ib(i,s.from),c=ib(i,s.to);db(i,f,c,s.margin)}}function db(i,s,f,c){var p=Yp(i,{left:Math.min(s.left,f.left),top:Math.min(s.top,f.top)-c,right:Math.max(s.right,f.right),bottom:Math.max(s.bottom,f.bottom)+c});Tl(i,p.scrollLeft,p.scrollTop)}function Ol(i,s){Math.abs(i.doc.scrollTop-s)<2||(o||Zp(i,{top:s}),hb(i,s,!0),o&&Zp(i),Nl(i,100))}function hb(i,s,f){s=Math.max(0,Math.min(i.display.scroller.scrollHeight-i.display.scroller.clientHeight,s)),!(i.display.scroller.scrollTop==s&&!f)&&(i.doc.scrollTop=s,i.display.scrollbars.setScrollTop(s),i.display.scroller.scrollTop!=s&&(i.display.scroller.scrollTop=s))}function Go(i,s,f,c){s=Math.max(0,Math.min(s,i.display.scroller.scrollWidth-i.display.scroller.clientWidth)),!((f?s==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-s)<2)&&!c)&&(i.doc.scrollLeft=s,yb(i),i.display.scroller.scrollLeft!=s&&(i.display.scroller.scrollLeft=s),i.display.scrollbars.setScrollLeft(s))}function Pl(i){var s=i.display,f=s.gutters.offsetWidth,c=Math.round(i.doc.height+_p(i.display));return{clientHeight:s.scroller.clientHeight,viewHeight:s.wrapper.clientHeight,scrollWidth:s.scroller.scrollWidth,clientWidth:s.scroller.clientWidth,viewWidth:s.wrapper.clientWidth,barLeft:i.options.fixedGutter?f:0,docHeight:c,scrollHeight:c+Jn(i)+s.barHeight,nativeBarWidth:s.nativeBarWidth,gutterWidth:f}}var qo=function(i,s,f){this.cm=f;var c=this.vert=M("div",[M("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),p=this.horiz=M("div",[M("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");c.tabIndex=p.tabIndex=-1,i(c),i(p),Ie(c,"scroll",function(){c.clientHeight&&s(c.scrollTop,"vertical")}),Ie(p,"scroll",function(){p.clientWidth&&s(p.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,d&&h<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};qo.prototype.update=function(i){var s=i.scrollWidth>i.clientWidth+1,f=i.scrollHeight>i.clientHeight+1,c=i.nativeBarWidth;if(f){this.vert.style.display="block",this.vert.style.bottom=s?c+"px":"0";var p=i.viewHeight-(s?c:0);this.vert.firstChild.style.height=Math.max(0,i.scrollHeight-i.clientHeight+p)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(s){this.horiz.style.display="block",this.horiz.style.right=f?c+"px":"0",this.horiz.style.left=i.barLeft+"px";var v=i.viewWidth-i.barLeft-(f?c:0);this.horiz.firstChild.style.width=Math.max(0,i.scrollWidth-i.clientWidth+v)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&i.clientHeight>0&&(c==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:f?c:0,bottom:s?c:0}},qo.prototype.setScrollLeft=function(i){this.horiz.scrollLeft!=i&&(this.horiz.scrollLeft=i),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},qo.prototype.setScrollTop=function(i){this.vert.scrollTop!=i&&(this.vert.scrollTop=i),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},qo.prototype.zeroWidthHack=function(){var i=R&&!T?"12px":"18px";this.horiz.style.height=this.vert.style.width=i,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new Ne,this.disableVert=new Ne},qo.prototype.enableZeroWidthBar=function(i,s,f){i.style.visibility="";function c(){var p=i.getBoundingClientRect(),v=f=="vert"?document.elementFromPoint(p.right-1,(p.top+p.bottom)/2):document.elementFromPoint((p.right+p.left)/2,p.bottom-1);v!=i?i.style.visibility="hidden":s.set(1e3,c)}s.set(1e3,c)},qo.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz),i.removeChild(this.vert)};var Ll=function(){};Ll.prototype.update=function(){return{bottom:0,right:0}},Ll.prototype.setScrollLeft=function(){},Ll.prototype.setScrollTop=function(){},Ll.prototype.clear=function(){};function Za(i,s){s||(s=Pl(i));var f=i.display.barWidth,c=i.display.barHeight;pb(i,s);for(var p=0;p<4&&f!=i.display.barWidth||c!=i.display.barHeight;p++)f!=i.display.barWidth&&i.options.lineWrapping&&Uc(i),pb(i,Pl(i)),f=i.display.barWidth,c=i.display.barHeight}function pb(i,s){var f=i.display,c=f.scrollbars.update(s);f.sizer.style.paddingRight=(f.barWidth=c.right)+"px",f.sizer.style.paddingBottom=(f.barHeight=c.bottom)+"px",f.heightForcer.style.borderBottom=c.bottom+"px solid transparent",c.right&&c.bottom?(f.scrollbarFiller.style.display="block",f.scrollbarFiller.style.height=c.bottom+"px",f.scrollbarFiller.style.width=c.right+"px"):f.scrollbarFiller.style.display="",c.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter?(f.gutterFiller.style.display="block",f.gutterFiller.style.height=c.bottom+"px",f.gutterFiller.style.width=s.gutterWidth+"px"):f.gutterFiller.style.display=""}var gb={native:qo,null:Ll};function vb(i){i.display.scrollbars&&(i.display.scrollbars.clear(),i.display.scrollbars.addClass&&de(i.display.wrapper,i.display.scrollbars.addClass)),i.display.scrollbars=new gb[i.options.scrollbarStyle](function(s){i.display.wrapper.insertBefore(s,i.display.scrollbarFiller),Ie(s,"mousedown",function(){i.state.focused&&setTimeout(function(){return i.display.input.focus()},0)}),s.setAttribute("cm-not-content","true")},function(s,f){f=="horizontal"?Go(i,s):Ol(i,s)},i),i.display.scrollbars.addClass&&ie(i.display.wrapper,i.display.scrollbars.addClass)}var bN=0;function Vo(i){i.curOp={cm:i,viewChanged:!1,startHeight:i.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++bN,markArrays:null},QL(i.curOp)}function Xo(i){var s=i.curOp;s&&ZL(s,function(f){for(var c=0;c<f.ops.length;c++)f.ops[c].cm.curOp=null;xN(f)})}function xN(i){for(var s=i.ops,f=0;f<s.length;f++)SN(s[f]);for(var c=0;c<s.length;c++)EN(s[c]);for(var p=0;p<s.length;p++)CN(s[p]);for(var v=0;v<s.length;v++)kN(s[v]);for(var b=0;b<s.length;b++)TN(s[b])}function SN(i){var s=i.cm,f=s.display;PN(s),i.updateMaxLine&&Ip(s),i.mustUpdate=i.viewChanged||i.forceUpdate||i.scrollTop!=null||i.scrollToPos&&(i.scrollToPos.from.line<f.viewFrom||i.scrollToPos.to.line>=f.viewTo)||f.maxLineChanged&&s.options.lineWrapping,i.update=i.mustUpdate&&new qc(s,i.mustUpdate&&{top:i.scrollTop,ensure:i.scrollToPos},i.forceUpdate)}function EN(i){i.updatedDisplay=i.mustUpdate&&Jp(i.cm,i.update)}function CN(i){var s=i.cm,f=s.display;i.updatedDisplay&&Uc(s),i.barMeasure=Pl(s),f.maxLineChanged&&!s.options.lineWrapping&&(i.adjustWidthTo=Yw(s,f.maxLine,f.maxLine.text.length).left+3,s.display.sizerWidth=i.adjustWidthTo,i.barMeasure.scrollWidth=Math.max(f.scroller.clientWidth,f.sizer.offsetLeft+i.adjustWidthTo+Jn(s)+s.display.barWidth),i.maxScrollLeft=Math.max(0,f.sizer.offsetLeft+i.adjustWidthTo-Bo(s))),(i.updatedDisplay||i.selectionChanged)&&(i.preparedSelection=f.input.prepareSelection())}function kN(i){var s=i.cm;i.adjustWidthTo!=null&&(s.display.sizer.style.minWidth=i.adjustWidthTo+"px",i.maxScrollLeft<s.doc.scrollLeft&&Go(s,Math.min(s.display.scroller.scrollLeft,i.maxScrollLeft),!0),s.display.maxLineChanged=!1);var f=i.focus&&i.focus==X(Z(s));i.preparedSelection&&s.display.input.showSelection(i.preparedSelection,f),(i.updatedDisplay||i.startHeight!=s.doc.height)&&Za(s,i.barMeasure),i.updatedDisplay&&tg(s,i.barMeasure),i.selectionChanged&&qp(s),s.state.focused&&i.updateInput&&s.display.input.reset(i.typing),f&&cb(i.cm)}function TN(i){var s=i.cm,f=s.display,c=s.doc;if(i.updatedDisplay&&mb(s,i.update),f.wheelStartX!=null&&(i.scrollTop!=null||i.scrollLeft!=null||i.scrollToPos)&&(f.wheelStartX=f.wheelStartY=null),i.scrollTop!=null&&hb(s,i.scrollTop,i.forceScroll),i.scrollLeft!=null&&Go(s,i.scrollLeft,!0,!0),i.scrollToPos){var p=mN(s,Be(c,i.scrollToPos.from),Be(c,i.scrollToPos.to),i.scrollToPos.margin);vN(s,p)}var v=i.maybeHiddenMarkers,b=i.maybeUnhiddenMarkers;if(v)for(var S=0;S<v.length;++S)v[S].lines.length||Ct(v[S],"hide");if(b)for(var O=0;O<b.length;++O)b[O].lines.length&&Ct(b[O],"unhide");f.wrapper.offsetHeight&&(c.scrollTop=s.display.scroller.scrollTop),i.changeObjs&&Ct(s,"changes",s,i.changeObjs),i.update&&i.update.finish()}function Rr(i,s){if(i.curOp)return s();Vo(i);try{return s()}finally{Xo(i)}}function Vt(i,s){return function(){if(i.curOp)return s.apply(i,arguments);Vo(i);try{return s.apply(i,arguments)}finally{Xo(i)}}}function pr(i){return function(){if(this.curOp)return i.apply(this,arguments);Vo(this);try{return i.apply(this,arguments)}finally{Xo(this)}}}function Xt(i){return function(){var s=this.cm;if(!s||s.curOp)return i.apply(this,arguments);Vo(s);try{return i.apply(this,arguments)}finally{Xo(s)}}}function Nl(i,s){i.doc.highlightFrontier<i.display.viewTo&&i.state.highlight.set(s,ce(ON,i))}function ON(i){var s=i.doc;if(!(s.highlightFrontier>=i.display.viewTo)){var f=+new Date+i.options.workTime,c=wl(i,s.highlightFrontier),p=[];s.iter(c.line,Math.min(s.first+s.size,i.display.viewTo+500),function(v){if(c.line>=i.display.viewFrom){var b=v.styles,S=v.text.length>i.options.maxHighlightLength?Yn(s.mode,c.state):null,O=Cw(i,v,c,!0);S&&(c.state=S),v.styles=O.styles;var N=v.styleClasses,F=O.classes;F?v.styleClasses=F:N&&(v.styleClasses=null);for(var H=!b||b.length!=v.styles.length||N!=F&&(!N||!F||N.bgClass!=F.bgClass||N.textClass!=F.textClass),G=0;!H&&G<b.length;++G)H=b[G]!=v.styles[G];H&&p.push(c.line),v.stateAfter=c.save(),c.nextLine()}else v.text.length<=i.options.maxHighlightLength&&Pp(i,v.text,c),v.stateAfter=c.line%5==0?c.save():null,c.nextLine();if(+new Date>f)return Nl(i,i.options.workDelay),!0}),s.highlightFrontier=c.line,s.modeFrontier=Math.max(s.modeFrontier,c.line),p.length&&Rr(i,function(){for(var v=0;v<p.length;v++)to(i,p[v],"text")})}}var qc=function(i,s,f){var c=i.display;this.viewport=s,this.visible=Kc(c,i.doc,s),this.editorIsHidden=!c.wrapper.offsetWidth,this.wrapperHeight=c.wrapper.clientHeight,this.wrapperWidth=c.wrapper.clientWidth,this.oldDisplayWidth=Bo(i),this.force=f,this.dims=Wp(i),this.events=[]};qc.prototype.signal=function(i,s){Ir(i,s)&&this.events.push(arguments)},qc.prototype.finish=function(){for(var i=0;i<this.events.length;i++)Ct.apply(null,this.events[i])};function PN(i){var s=i.display;!s.scrollbarsClipped&&s.scroller.offsetWidth&&(s.nativeBarWidth=s.scroller.offsetWidth-s.scroller.clientWidth,s.heightForcer.style.height=Jn(i)+"px",s.sizer.style.marginBottom=-s.nativeBarWidth+"px",s.sizer.style.borderRightWidth=Jn(i)+"px",s.scrollbarsClipped=!0)}function LN(i){if(i.hasFocus())return null;var s=X(Z(i));if(!s||!re(i.display.lineDiv,s))return null;var f={activeElt:s};if(window.getSelection){var c=le(i).getSelection();c.anchorNode&&c.extend&&re(i.display.lineDiv,c.anchorNode)&&(f.anchorNode=c.anchorNode,f.anchorOffset=c.anchorOffset,f.focusNode=c.focusNode,f.focusOffset=c.focusOffset)}return f}function NN(i){if(!(!i||!i.activeElt||i.activeElt==X(ae(i.activeElt)))&&(i.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(i.activeElt.nodeName)&&i.anchorNode&&re(document.body,i.anchorNode)&&re(document.body,i.focusNode))){var s=i.activeElt.ownerDocument,f=s.defaultView.getSelection(),c=s.createRange();c.setEnd(i.anchorNode,i.anchorOffset),c.collapse(!1),f.removeAllRanges(),f.addRange(c),f.extend(i.focusNode,i.focusOffset)}}function Jp(i,s){var f=i.display,c=i.doc;if(s.editorIsHidden)return ro(i),!1;if(!s.force&&s.visible.from>=f.viewFrom&&s.visible.to<=f.viewTo&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo)&&f.renderedView==f.view&&lb(i)==0)return!1;wb(i)&&(ro(i),s.dims=Wp(i));var p=c.first+c.size,v=Math.max(s.visible.from-i.options.viewportMargin,c.first),b=Math.min(p,s.visible.to+i.options.viewportMargin);f.viewFrom<v&&v-f.viewFrom<20&&(v=Math.max(c.first,f.viewFrom)),f.viewTo>b&&f.viewTo-b<20&&(b=Math.min(p,f.viewTo)),Ei&&(v=Ap(i.doc,v),b=Dw(i.doc,b));var S=v!=f.viewFrom||b!=f.viewTo||f.lastWrapHeight!=s.wrapperHeight||f.lastWrapWidth!=s.wrapperWidth;pN(i,v,b),f.viewOffset=Ci(Oe(i.doc,f.viewFrom)),i.display.mover.style.top=f.viewOffset+"px";var O=lb(i);if(!S&&O==0&&!s.force&&f.renderedView==f.view&&(f.updateLineNumbers==null||f.updateLineNumbers>=f.viewTo))return!1;var N=LN(i);return O>4&&(f.lineDiv.style.display="none"),jN(i,f.updateLineNumbers,s.dims),O>4&&(f.lineDiv.style.display=""),f.renderedView=f.view,NN(N),W(f.cursorDiv),W(f.selectionDiv),f.gutters.style.height=f.sizer.style.minHeight=0,S&&(f.lastWrapHeight=s.wrapperHeight,f.lastWrapWidth=s.wrapperWidth,Nl(i,400)),f.updateLineNumbers=null,!0}function mb(i,s){for(var f=s.viewport,c=!0;;c=!1){if(!c||!i.options.lineWrapping||s.oldDisplayWidth==Bo(i)){if(f&&f.top!=null&&(f={top:Math.min(i.doc.height+_p(i.display)-$p(i),f.top)}),s.visible=Kc(i.display,i.doc,f),s.visible.from>=i.display.viewFrom&&s.visible.to<=i.display.viewTo)break}else c&&(s.visible=Kc(i.display,i.doc,f));if(!Jp(i,s))break;Uc(i);var p=Pl(i);kl(i),Za(i,p),tg(i,p),s.force=!1}s.signal(i,"update",i),(i.display.viewFrom!=i.display.reportedViewFrom||i.display.viewTo!=i.display.reportedViewTo)&&(s.signal(i,"viewportChange",i,i.display.viewFrom,i.display.viewTo),i.display.reportedViewFrom=i.display.viewFrom,i.display.reportedViewTo=i.display.viewTo)}function Zp(i,s){var f=new qc(i,s);if(Jp(i,f)){Uc(i),mb(i,f);var c=Pl(i);kl(i),Za(i,c),tg(i,c),f.finish()}}function jN(i,s,f){var c=i.display,p=i.options.lineNumbers,v=c.lineDiv,b=v.firstChild;function S(te){var se=te.nextSibling;return g&&R&&i.display.currentWheelTarget==te?te.style.display="none":te.parentNode.removeChild(te),se}for(var O=c.view,N=c.viewFrom,F=0;F<O.length;F++){var H=O[F];if(!H.hidden)if(!H.node||H.node.parentNode!=v){var G=iN(i,H,N,f);v.insertBefore(G,b)}else{for(;b!=H.node;)b=S(b);var K=p&&s!=null&&s<=N&&H.lineNumber;H.changes&&(Ee(H.changes,"gutter")>-1&&(K=!1),Ww(i,H,N,f)),K&&(W(H.lineNumber),H.lineNumber.appendChild(document.createTextNode(pe(i.options,N)))),b=H.node.nextSibling}N+=H.size}for(;b;)b=S(b)}function eg(i){var s=i.gutters.offsetWidth;i.sizer.style.marginLeft=s+"px",qt(i,"gutterChanged",i)}function tg(i,s){i.display.sizer.style.minHeight=s.docHeight+"px",i.display.heightForcer.style.top=s.docHeight+"px",i.display.gutters.style.height=s.docHeight+i.display.barHeight+Jn(i)+"px"}function yb(i){var s=i.display,f=s.view;if(!(!s.alignWidgets&&(!s.gutters.firstChild||!i.options.fixedGutter))){for(var c=Up(s)-s.scroller.scrollLeft+i.doc.scrollLeft,p=s.gutters.offsetWidth,v=c+"px",b=0;b<f.length;b++)if(!f[b].hidden){i.options.fixedGutter&&(f[b].gutter&&(f[b].gutter.style.left=v),f[b].gutterBackground&&(f[b].gutterBackground.style.left=v));var S=f[b].alignable;if(S)for(var O=0;O<S.length;O++)S[O].style.left=v}i.options.fixedGutter&&(s.gutters.style.left=c+p+"px")}}function wb(i){if(!i.options.lineNumbers)return!1;var s=i.doc,f=pe(i.options,s.first+s.size-1),c=i.display;if(f.length!=c.lineNumChars){var p=c.measure.appendChild(M("div",[M("div",f)],"CodeMirror-linenumber CodeMirror-gutter-elt")),v=p.firstChild.offsetWidth,b=p.offsetWidth-v;return c.lineGutter.style.width="",c.lineNumInnerWidth=Math.max(v,c.lineGutter.offsetWidth-b)+1,c.lineNumWidth=c.lineNumInnerWidth+b,c.lineNumChars=c.lineNumInnerWidth?f.length:-1,c.lineGutter.style.width=c.lineNumWidth+"px",eg(i.display),!0}return!1}function rg(i,s){for(var f=[],c=!1,p=0;p<i.length;p++){var v=i[p],b=null;if(typeof v!="string"&&(b=v.style,v=v.className),v=="CodeMirror-linenumbers")if(s)c=!0;else continue;f.push({className:v,style:b})}return s&&!c&&f.push({className:"CodeMirror-linenumbers",style:null}),f}function bb(i){var s=i.gutters,f=i.gutterSpecs;W(s),i.lineGutter=null;for(var c=0;c<f.length;++c){var p=f[c],v=p.className,b=p.style,S=s.appendChild(M("div",null,"CodeMirror-gutter "+v));b&&(S.style.cssText=b),v=="CodeMirror-linenumbers"&&(i.lineGutter=S,S.style.width=(i.lineNumWidth||1)+"px")}s.style.display=f.length?"":"none",eg(i)}function jl(i){bb(i.display),Cr(i),yb(i)}function AN(i,s,f,c){var p=this;this.input=f,p.scrollbarFiller=M("div",null,"CodeMirror-scrollbar-filler"),p.scrollbarFiller.setAttribute("cm-not-content","true"),p.gutterFiller=M("div",null,"CodeMirror-gutter-filler"),p.gutterFiller.setAttribute("cm-not-content","true"),p.lineDiv=Q("div",null,"CodeMirror-code"),p.selectionDiv=M("div",null,null,"position: relative; z-index: 1"),p.cursorDiv=M("div",null,"CodeMirror-cursors"),p.measure=M("div",null,"CodeMirror-measure"),p.lineMeasure=M("div",null,"CodeMirror-measure"),p.lineSpace=Q("div",[p.measure,p.lineMeasure,p.selectionDiv,p.cursorDiv,p.lineDiv],null,"position: relative; outline: none");var v=Q("div",[p.lineSpace],"CodeMirror-lines");p.mover=M("div",[v],null,"position: relative"),p.sizer=M("div",[p.mover],"CodeMirror-sizer"),p.sizerWidth=null,p.heightForcer=M("div",null,null,"position: absolute; height: "+et+"px; width: 1px;"),p.gutters=M("div",null,"CodeMirror-gutters"),p.lineGutter=null,p.scroller=M("div",[p.sizer,p.heightForcer,p.gutters],"CodeMirror-scroll"),p.scroller.setAttribute("tabIndex","-1"),p.wrapper=M("div",[p.scrollbarFiller,p.gutterFiller,p.scroller],"CodeMirror"),w&&x>=105&&(p.wrapper.style.clipPath="inset(0px)"),p.wrapper.setAttribute("translate","no"),d&&h<8&&(p.gutters.style.zIndex=-1,p.scroller.style.paddingRight=0),!g&&!(o&&L)&&(p.scroller.draggable=!0),i&&(i.appendChild?i.appendChild(p.wrapper):i(p.wrapper)),p.viewFrom=p.viewTo=s.first,p.reportedViewFrom=p.reportedViewTo=s.first,p.view=[],p.renderedView=null,p.externalMeasured=null,p.viewOffset=0,p.lastWrapHeight=p.lastWrapWidth=0,p.updateLineNumbers=null,p.nativeBarWidth=p.barHeight=p.barWidth=0,p.scrollbarsClipped=!1,p.lineNumWidth=p.lineNumInnerWidth=p.lineNumChars=null,p.alignWidgets=!1,p.cachedCharWidth=p.cachedTextHeight=p.cachedPaddingH=null,p.maxLine=null,p.maxLineLength=0,p.maxLineChanged=!1,p.wheelDX=p.wheelDY=p.wheelStartX=p.wheelStartY=null,p.shift=!1,p.selForContextMenu=null,p.activeTouch=null,p.gutterSpecs=rg(c.gutters,c.lineNumbers),bb(p),f.init(p)}var Vc=0,Ti=null;d?Ti=-.53:o?Ti=15:w?Ti=-.7:j&&(Ti=-1/3);function xb(i){var s=i.wheelDeltaX,f=i.wheelDeltaY;return s==null&&i.detail&&i.axis==i.HORIZONTAL_AXIS&&(s=i.detail),f==null&&i.detail&&i.axis==i.VERTICAL_AXIS?f=i.detail:f==null&&(f=i.wheelDelta),{x:s,y:f}}function MN(i){var s=xb(i);return s.x*=Ti,s.y*=Ti,s}function Sb(i,s){w&&x==102&&(i.display.chromeScrollHack==null?i.display.sizer.style.pointerEvents="none":clearTimeout(i.display.chromeScrollHack),i.display.chromeScrollHack=setTimeout(function(){i.display.chromeScrollHack=null,i.display.sizer.style.pointerEvents=""},100));var f=xb(s),c=f.x,p=f.y,v=Ti;s.deltaMode===0&&(c=s.deltaX,p=s.deltaY,v=1);var b=i.display,S=b.scroller,O=S.scrollWidth>S.clientWidth,N=S.scrollHeight>S.clientHeight;if(c&&O||p&&N){if(p&&R&&g){e:for(var F=s.target,H=b.view;F!=S;F=F.parentNode)for(var G=0;G<H.length;G++)if(H[G].node==F){i.display.currentWheelTarget=F;break e}}if(c&&!o&&!C&&v!=null){p&&N&&Ol(i,Math.max(0,S.scrollTop+p*v)),Go(i,Math.max(0,S.scrollLeft+c*v)),(!p||p&&N)&&sr(s),b.wheelStartX=null;return}if(p&&v!=null){var K=p*v,te=i.doc.scrollTop,se=te+b.wrapper.clientHeight;K<0?te=Math.max(0,te+K-50):se=Math.min(i.doc.height,se+K+50),Zp(i,{top:te,bottom:se})}Vc<20&&s.deltaMode!==0&&(b.wheelStartX==null?(b.wheelStartX=S.scrollLeft,b.wheelStartY=S.scrollTop,b.wheelDX=c,b.wheelDY=p,setTimeout(function(){if(b.wheelStartX!=null){var ge=S.scrollLeft-b.wheelStartX,ye=S.scrollTop-b.wheelStartY,xe=ye&&b.wheelDY&&ye/b.wheelDY||ge&&b.wheelDX&&ge/b.wheelDX;b.wheelStartX=b.wheelStartY=null,xe&&(Ti=(Ti*Vc+xe)/(Vc+1),++Vc)}},200)):(b.wheelDX+=c,b.wheelDY+=p))}}var Vr=function(i,s){this.ranges=i,this.primIndex=s};Vr.prototype.primary=function(){return this.ranges[this.primIndex]},Vr.prototype.equals=function(i){if(i==this)return!0;if(i.primIndex!=this.primIndex||i.ranges.length!=this.ranges.length)return!1;for(var s=0;s<this.ranges.length;s++){var f=this.ranges[s],c=i.ranges[s];if(!it(f.anchor,c.anchor)||!it(f.head,c.head))return!1}return!0},Vr.prototype.deepCopy=function(){for(var i=[],s=0;s<this.ranges.length;s++)i[s]=new ot(Gt(this.ranges[s].anchor),Gt(this.ranges[s].head));return new Vr(i,this.primIndex)},Vr.prototype.somethingSelected=function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},Vr.prototype.contains=function(i,s){s||(s=i);for(var f=0;f<this.ranges.length;f++){var c=this.ranges[f];if(be(s,c.from())>=0&&be(i,c.to())<=0)return f}return-1};var ot=function(i,s){this.anchor=i,this.head=s};ot.prototype.from=function(){return Ka(this.anchor,this.head)},ot.prototype.to=function(){return Er(this.anchor,this.head)},ot.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function _n(i,s,f){var c=i&&i.options.selectionsMayTouch,p=s[f];s.sort(function(G,K){return be(G.from(),K.from())}),f=Ee(s,p);for(var v=1;v<s.length;v++){var b=s[v],S=s[v-1],O=be(S.to(),b.from());if(c&&!b.empty()?O>0:O>=0){var N=Ka(S.from(),b.from()),F=Er(S.to(),b.to()),H=S.empty()?b.from()==b.head:S.from()==S.head;v<=f&&--f,s.splice(--v,2,new ot(H?F:N,H?N:F))}}return new Vr(s,f)}function no(i,s){return new Vr([new ot(i,s||i)],0)}function io(i){return i.text?J(i.from.line+i.text.length-1,ze(i.text).length+(i.text.length==1?i.from.ch:0)):i.to}function Eb(i,s){if(be(i,s.from)<0)return i;if(be(i,s.to)<=0)return io(s);var f=i.line+s.text.length-(s.to.line-s.from.line)-1,c=i.ch;return i.line==s.to.line&&(c+=io(s).ch-s.to.ch),J(f,c)}function ng(i,s){for(var f=[],c=0;c<i.sel.ranges.length;c++){var p=i.sel.ranges[c];f.push(new ot(Eb(p.anchor,s),Eb(p.head,s)))}return _n(i.cm,f,i.sel.primIndex)}function Cb(i,s,f){return i.line==s.line?J(f.line,i.ch-s.ch+f.ch):J(f.line+(i.line-s.line),i.ch)}function IN(i,s,f){for(var c=[],p=J(i.first,0),v=p,b=0;b<s.length;b++){var S=s[b],O=Cb(S.from,p,v),N=Cb(io(S),p,v);if(p=S.to,v=N,f=="around"){var F=i.sel.ranges[b],H=be(F.head,F.anchor)<0;c[b]=new ot(H?N:O,H?O:N)}else c[b]=new ot(O,O)}return new Vr(c,i.sel.primIndex)}function ig(i){i.doc.mode=Ba(i.options,i.doc.modeOption),Al(i)}function Al(i){i.doc.iter(function(s){s.stateAfter&&(s.stateAfter=null),s.styles&&(s.styles=null)}),i.doc.modeFrontier=i.doc.highlightFrontier=i.doc.first,Nl(i,100),i.state.modeGen++,i.curOp&&Cr(i)}function kb(i,s){return s.from.ch==0&&s.to.ch==0&&ze(s.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function og(i,s,f,c){function p(xe){return f?f[xe]:null}function v(xe,we,Te){BL(xe,we,Te,c),qt(xe,"change",xe,s)}function b(xe,we){for(var Te=[],Re=xe;Re<we;++Re)Te.push(new Ga(N[Re],p(Re),c));return Te}var S=s.from,O=s.to,N=s.text,F=Oe(i,S.line),H=Oe(i,O.line),G=ze(N),K=p(N.length-1),te=O.line-S.line;if(s.full)i.insert(0,b(0,N.length)),i.remove(N.length,i.size-N.length);else if(kb(i,s)){var se=b(0,N.length-1);v(H,H.text,K),te&&i.remove(S.line,te),se.length&&i.insert(S.line,se)}else if(F==H)if(N.length==1)v(F,F.text.slice(0,S.ch)+G+F.text.slice(O.ch),K);else{var ge=b(1,N.length-1);ge.push(new Ga(G+F.text.slice(O.ch),K,c)),v(F,F.text.slice(0,S.ch)+N[0],p(0)),i.insert(S.line+1,ge)}else if(N.length==1)v(F,F.text.slice(0,S.ch)+N[0]+H.text.slice(O.ch),p(0)),i.remove(S.line+1,te);else{v(F,F.text.slice(0,S.ch)+N[0],p(0)),v(H,G+H.text.slice(O.ch),K);var ye=b(1,N.length-1);te>1&&i.remove(S.line+1,te-1),i.insert(S.line+1,ye)}qt(i,"change",i,s)}function oo(i,s,f){function c(p,v,b){if(p.linked)for(var S=0;S<p.linked.length;++S){var O=p.linked[S];if(O.doc!=v){var N=b&&O.sharedHist;f&&!N||(s(O.doc,N),c(O.doc,p,N))}}}c(i,null,!0)}function Tb(i,s){if(s.cm)throw new Error("This document is already in use.");i.doc=s,s.cm=i,Kp(i),ig(i),Ob(i),i.options.direction=s.direction,i.options.lineWrapping||Ip(i),i.options.mode=s.modeOption,Cr(i)}function Ob(i){(i.doc.direction=="rtl"?ie:de)(i.display.lineDiv,"CodeMirror-rtl")}function RN(i){Rr(i,function(){Ob(i),Cr(i)})}function Xc(i){this.done=[],this.undone=[],this.undoDepth=i?i.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=i?i.maxGeneration:1}function ag(i,s){var f={from:Gt(s.from),to:io(s),text:Si(i,s.from,s.to)};return Nb(i,f,s.from.line,s.to.line+1),oo(i,function(c){return Nb(c,f,s.from.line,s.to.line+1)},!0),f}function Pb(i){for(;i.length;){var s=ze(i);if(s.ranges)i.pop();else break}}function _N(i,s){if(s)return Pb(i.done),ze(i.done);if(i.done.length&&!ze(i.done).ranges)return ze(i.done);if(i.done.length>1&&!i.done[i.done.length-2].ranges)return i.done.pop(),ze(i.done)}function Lb(i,s,f,c){var p=i.history;p.undone.length=0;var v=+new Date,b,S;if((p.lastOp==c||p.lastOrigin==s.origin&&s.origin&&(s.origin.charAt(0)=="+"&&p.lastModTime>v-(i.cm?i.cm.options.historyEventDelay:500)||s.origin.charAt(0)=="*"))&&(b=_N(p,p.lastOp==c)))S=ze(b.changes),be(s.from,s.to)==0&&be(s.from,S.to)==0?S.to=io(s):b.changes.push(ag(i,s));else{var O=ze(p.done);for((!O||!O.ranges)&&Yc(i.sel,p.done),b={changes:[ag(i,s)],generation:p.generation},p.done.push(b);p.done.length>p.undoDepth;)p.done.shift(),p.done[0].ranges||p.done.shift()}p.done.push(f),p.generation=++p.maxGeneration,p.lastModTime=p.lastSelTime=v,p.lastOp=p.lastSelOp=c,p.lastOrigin=p.lastSelOrigin=s.origin,S||Ct(i,"historyAdded")}function $N(i,s,f,c){var p=s.charAt(0);return p=="*"||p=="+"&&f.ranges.length==c.ranges.length&&f.somethingSelected()==c.somethingSelected()&&new Date-i.history.lastSelTime<=(i.cm?i.cm.options.historyEventDelay:500)}function DN(i,s,f,c){var p=i.history,v=c&&c.origin;f==p.lastSelOp||v&&p.lastSelOrigin==v&&(p.lastModTime==p.lastSelTime&&p.lastOrigin==v||$N(i,v,ze(p.done),s))?p.done[p.done.length-1]=s:Yc(s,p.done),p.lastSelTime=+new Date,p.lastSelOrigin=v,p.lastSelOp=f,c&&c.clearRedo!==!1&&Pb(p.undone)}function Yc(i,s){var f=ze(s);f&&f.ranges&&f.equals(i)||s.push(i)}function Nb(i,s,f,c){var p=s["spans_"+i.id],v=0;i.iter(Math.max(i.first,f),Math.min(i.first+i.size,c),function(b){b.markedSpans&&((p||(p=s["spans_"+i.id]={}))[v]=b.markedSpans),++v})}function FN(i){if(!i)return null;for(var s,f=0;f<i.length;++f)i[f].marker.explicitlyCleared?s||(s=i.slice(0,f)):s&&s.push(i[f]);return s?s.length?s:null:i}function zN(i,s){var f=s["spans_"+i.id];if(!f)return null;for(var c=[],p=0;p<s.text.length;++p)c.push(FN(f[p]));return c}function jb(i,s){var f=zN(i,s),c=Np(i,s);if(!f)return c;if(!c)return f;for(var p=0;p<f.length;++p){var v=f[p],b=c[p];if(v&&b)e:for(var S=0;S<b.length;++S){for(var O=b[S],N=0;N<v.length;++N)if(v[N].marker==O.marker)continue e;v.push(O)}else b&&(f[p]=b)}return f}function es(i,s,f){for(var c=[],p=0;p<i.length;++p){var v=i[p];if(v.ranges){c.push(f?Vr.prototype.deepCopy.call(v):v);continue}var b=v.changes,S=[];c.push({changes:S});for(var O=0;O<b.length;++O){var N=b[O],F=void 0;if(S.push({from:N.from,to:N.to,text:N.text}),s)for(var H in N)(F=H.match(/^spans_(\d+)$/))&&Ee(s,Number(F[1]))>-1&&(ze(S)[H]=N[H],delete N[H])}}return c}function sg(i,s,f,c){if(c){var p=i.anchor;if(f){var v=be(s,p)<0;v!=be(f,p)<0?(p=s,s=f):v!=be(s,f)<0&&(s=f)}return new ot(p,s)}else return new ot(f||s,s)}function Qc(i,s,f,c,p){p==null&&(p=i.cm&&(i.cm.display.shift||i.extend)),lr(i,new Vr([sg(i.sel.primary(),s,f,p)],0),c)}function Ab(i,s,f){for(var c=[],p=i.cm&&(i.cm.display.shift||i.extend),v=0;v<i.sel.ranges.length;v++)c[v]=sg(i.sel.ranges[v],s[v],null,p);var b=_n(i.cm,c,i.sel.primIndex);lr(i,b,f)}function lg(i,s,f,c){var p=i.sel.ranges.slice(0);p[s]=f,lr(i,_n(i.cm,p,i.sel.primIndex),c)}function Mb(i,s,f,c){lr(i,no(s,f),c)}function HN(i,s,f){var c={ranges:s.ranges,update:function(p){this.ranges=[];for(var v=0;v<p.length;v++)this.ranges[v]=new ot(Be(i,p[v].anchor),Be(i,p[v].head))},origin:f&&f.origin};return Ct(i,"beforeSelectionChange",i,c),i.cm&&Ct(i.cm,"beforeSelectionChange",i.cm,c),c.ranges!=s.ranges?_n(i.cm,c.ranges,c.ranges.length-1):s}function Ib(i,s,f){var c=i.history.done,p=ze(c);p&&p.ranges?(c[c.length-1]=s,Jc(i,s,f)):lr(i,s,f)}function lr(i,s,f){Jc(i,s,f),DN(i,i.sel,i.cm?i.cm.curOp.id:NaN,f)}function Jc(i,s,f){(Ir(i,"beforeSelectionChange")||i.cm&&Ir(i.cm,"beforeSelectionChange"))&&(s=HN(i,s,f));var c=f&&f.bias||(be(s.primary().head,i.sel.primary().head)<0?-1:1);Rb(i,$b(i,s,c,!0)),!(f&&f.scroll===!1)&&i.cm&&i.cm.getOption("readOnly")!="nocursor"&&Ja(i.cm)}function Rb(i,s){s.equals(i.sel)||(i.sel=s,i.cm&&(i.cm.curOp.updateInput=1,i.cm.curOp.selectionChanged=!0,dn(i.cm)),qt(i,"cursorActivity",i))}function _b(i){Rb(i,$b(i,i.sel,null,!1))}function $b(i,s,f,c){for(var p,v=0;v<s.ranges.length;v++){var b=s.ranges[v],S=s.ranges.length==i.sel.ranges.length&&i.sel.ranges[v],O=Zc(i,b.anchor,S&&S.anchor,f,c),N=b.head==b.anchor?O:Zc(i,b.head,S&&S.head,f,c);(p||O!=b.anchor||N!=b.head)&&(p||(p=s.ranges.slice(0,v)),p[v]=new ot(O,N))}return p?_n(i.cm,p,s.primIndex):s}function ts(i,s,f,c,p){var v=Oe(i,s.line);if(v.markedSpans)for(var b=0;b<v.markedSpans.length;++b){var S=v.markedSpans[b],O=S.marker,N="selectLeft"in O?!O.selectLeft:O.inclusiveLeft,F="selectRight"in O?!O.selectRight:O.inclusiveRight;if((S.from==null||(N?S.from<=s.ch:S.from<s.ch))&&(S.to==null||(F?S.to>=s.ch:S.to>s.ch))){if(p&&(Ct(O,"beforeCursorEnter"),O.explicitlyCleared))if(v.markedSpans){--b;continue}else break;if(!O.atomic)continue;if(f){var H=O.find(c<0?1:-1),G=void 0;if((c<0?F:N)&&(H=Db(i,H,-c,H&&H.line==s.line?v:null)),H&&H.line==s.line&&(G=be(H,f))&&(c<0?G<0:G>0))return ts(i,H,s,c,p)}var K=O.find(c<0?-1:1);return(c<0?N:F)&&(K=Db(i,K,c,K.line==s.line?v:null)),K?ts(i,K,s,c,p):null}}return s}function Zc(i,s,f,c,p){var v=c||1,b=ts(i,s,f,v,p)||!p&&ts(i,s,f,v,!0)||ts(i,s,f,-v,p)||!p&&ts(i,s,f,-v,!0);return b||(i.cantEdit=!0,J(i.first,0))}function Db(i,s,f,c){return f<0&&s.ch==0?s.line>i.first?Be(i,J(s.line-1)):null:f>0&&s.ch==(c||Oe(i,s.line)).text.length?s.line<i.first+i.size-1?J(s.line+1,0):null:new J(s.line,s.ch+f)}function Fb(i){i.setSelection(J(i.firstLine(),0),J(i.lastLine()),ft)}function zb(i,s,f){var c={canceled:!1,from:s.from,to:s.to,text:s.text,origin:s.origin,cancel:function(){return c.canceled=!0}};return f&&(c.update=function(p,v,b,S){p&&(c.from=Be(i,p)),v&&(c.to=Be(i,v)),b&&(c.text=b),S!==void 0&&(c.origin=S)}),Ct(i,"beforeChange",i,c),i.cm&&Ct(i.cm,"beforeChange",i.cm,c),c.canceled?(i.cm&&(i.cm.curOp.updateInput=2),null):{from:c.from,to:c.to,text:c.text,origin:c.origin}}function rs(i,s,f){if(i.cm){if(!i.cm.curOp)return Vt(i.cm,rs)(i,s,f);if(i.cm.state.suppressEdits)return}if(!((Ir(i,"beforeChange")||i.cm&&Ir(i.cm,"beforeChange"))&&(s=zb(i,s,!0),!s))){var c=jw&&!f&&DL(i,s.from,s.to);if(c)for(var p=c.length-1;p>=0;--p)Hb(i,{from:c[p].from,to:c[p].to,text:p?[""]:s.text,origin:s.origin});else Hb(i,s)}}function Hb(i,s){if(!(s.text.length==1&&s.text[0]==""&&be(s.from,s.to)==0)){var f=ng(i,s);Lb(i,s,f,i.cm?i.cm.curOp.id:NaN),Ml(i,s,f,Np(i,s));var c=[];oo(i,function(p,v){!v&&Ee(c,p.history)==-1&&(Kb(p.history,s),c.push(p.history)),Ml(p,s,null,Np(p,s))})}}function ef(i,s,f){var c=i.cm&&i.cm.state.suppressEdits;if(!(c&&!f)){for(var p=i.history,v,b=i.sel,S=s=="undo"?p.done:p.undone,O=s=="undo"?p.undone:p.done,N=0;N<S.length&&(v=S[N],!(f?v.ranges&&!v.equals(i.sel):!v.ranges));N++);if(N!=S.length){for(p.lastOrigin=p.lastSelOrigin=null;;)if(v=S.pop(),v.ranges){if(Yc(v,O),f&&!v.equals(i.sel)){lr(i,v,{clearRedo:!1});return}b=v}else if(c){S.push(v);return}else break;var F=[];Yc(b,O),O.push({changes:F,generation:p.generation}),p.generation=v.generation||++p.maxGeneration;for(var H=Ir(i,"beforeChange")||i.cm&&Ir(i.cm,"beforeChange"),G=function(se){var ge=v.changes[se];if(ge.origin=s,H&&!zb(i,ge,!1))return S.length=0,{};F.push(ag(i,ge));var ye=se?ng(i,ge):ze(S);Ml(i,ge,ye,jb(i,ge)),!se&&i.cm&&i.cm.scrollIntoView({from:ge.from,to:io(ge)});var xe=[];oo(i,function(we,Te){!Te&&Ee(xe,we.history)==-1&&(Kb(we.history,ge),xe.push(we.history)),Ml(we,ge,null,jb(we,ge))})},K=v.changes.length-1;K>=0;--K){var te=G(K);if(te)return te.v}}}}function Bb(i,s){if(s!=0&&(i.first+=s,i.sel=new Vr(Ze(i.sel.ranges,function(p){return new ot(J(p.anchor.line+s,p.anchor.ch),J(p.head.line+s,p.head.ch))}),i.sel.primIndex),i.cm)){Cr(i.cm,i.first,i.first-s,s);for(var f=i.cm.display,c=f.viewFrom;c<f.viewTo;c++)to(i.cm,c,"gutter")}}function Ml(i,s,f,c){if(i.cm&&!i.cm.curOp)return Vt(i.cm,Ml)(i,s,f,c);if(s.to.line<i.first){Bb(i,s.text.length-1-(s.to.line-s.from.line));return}if(!(s.from.line>i.lastLine())){if(s.from.line<i.first){var p=s.text.length-1-(i.first-s.from.line);Bb(i,p),s={from:J(i.first,0),to:J(s.to.line+p,s.to.ch),text:[ze(s.text)],origin:s.origin}}var v=i.lastLine();s.to.line>v&&(s={from:s.from,to:J(v,Oe(i,v).text.length),text:[s.text[0]],origin:s.origin}),s.removed=Si(i,s.from,s.to),f||(f=ng(i,s)),i.cm?BN(i.cm,s,c):og(i,s,c),Jc(i,f,ft),i.cantEdit&&Zc(i,J(i.firstLine(),0))&&(i.cantEdit=!1)}}function BN(i,s,f){var c=i.doc,p=i.display,v=s.from,b=s.to,S=!1,O=v.line;i.options.lineWrapping||(O=I(In(Oe(c,v.line))),c.iter(O,b.line+1,function(K){if(K==p.maxLine)return S=!0,!0})),c.sel.contains(s.from,s.to)>-1&&dn(i),og(c,s,f,sb(i)),i.options.lineWrapping||(c.iter(O,v.line+s.text.length,function(K){var te=$c(K);te>p.maxLineLength&&(p.maxLine=K,p.maxLineLength=te,p.maxLineChanged=!0,S=!1)}),S&&(i.curOp.updateMaxLine=!0)),jL(c,v.line),Nl(i,400);var N=s.text.length-(b.line-v.line)-1;s.full?Cr(i):v.line==b.line&&s.text.length==1&&!kb(i.doc,s)?to(i,v.line,"text"):Cr(i,v.line,b.line+1,N);var F=Ir(i,"changes"),H=Ir(i,"change");if(H||F){var G={from:v,to:b,text:s.text,removed:s.removed,origin:s.origin};H&&qt(i,"change",i,G),F&&(i.curOp.changeObjs||(i.curOp.changeObjs=[])).push(G)}i.display.selForContextMenu=null}function ns(i,s,f,c,p){var v;c||(c=f),be(c,f)<0&&(v=[c,f],f=v[0],c=v[1]),typeof s=="string"&&(s=i.splitLines(s)),rs(i,{from:f,to:c,text:s,origin:p})}function Wb(i,s,f,c){f<i.line?i.line+=c:s<i.line&&(i.line=s,i.ch=0)}function Ub(i,s,f,c){for(var p=0;p<i.length;++p){var v=i[p],b=!0;if(v.ranges){v.copied||(v=i[p]=v.deepCopy(),v.copied=!0);for(var S=0;S<v.ranges.length;S++)Wb(v.ranges[S].anchor,s,f,c),Wb(v.ranges[S].head,s,f,c);continue}for(var O=0;O<v.changes.length;++O){var N=v.changes[O];if(f<N.from.line)N.from=J(N.from.line+c,N.from.ch),N.to=J(N.to.line+c,N.to.ch);else if(s<=N.to.line){b=!1;break}}b||(i.splice(0,p+1),p=0)}}function Kb(i,s){var f=s.from.line,c=s.to.line,p=s.text.length-(c-f)-1;Ub(i.done,f,c,p),Ub(i.undone,f,c,p)}function Il(i,s,f,c){var p=s,v=s;return typeof s=="number"?v=Oe(i,Sw(i,s)):p=I(s),p==null?null:(c(v,p)&&i.cm&&to(i.cm,p,f),v)}function Rl(i){this.lines=i,this.parent=null;for(var s=0,f=0;f<i.length;++f)i[f].parent=this,s+=i[f].height;this.height=s}Rl.prototype={chunkSize:function(){return this.lines.length},removeInner:function(i,s){for(var f=i,c=i+s;f<c;++f){var p=this.lines[f];this.height-=p.height,WL(p),qt(p,"delete")}this.lines.splice(i,s)},collapse:function(i){i.push.apply(i,this.lines)},insertInner:function(i,s,f){this.height+=f,this.lines=this.lines.slice(0,i).concat(s).concat(this.lines.slice(i));for(var c=0;c<s.length;++c)s[c].parent=this},iterN:function(i,s,f){for(var c=i+s;i<c;++i)if(f(this.lines[i]))return!0}};function _l(i){this.children=i;for(var s=0,f=0,c=0;c<i.length;++c){var p=i[c];s+=p.chunkSize(),f+=p.height,p.parent=this}this.size=s,this.height=f,this.parent=null}_l.prototype={chunkSize:function(){return this.size},removeInner:function(i,s){this.size-=s;for(var f=0;f<this.children.length;++f){var c=this.children[f],p=c.chunkSize();if(i<p){var v=Math.min(s,p-i),b=c.height;if(c.removeInner(i,v),this.height-=b-c.height,p==v&&(this.children.splice(f--,1),c.parent=null),(s-=v)==0)break;i=0}else i-=p}if(this.size-s<25&&(this.children.length>1||!(this.children[0]instanceof Rl))){var S=[];this.collapse(S),this.children=[new Rl(S)],this.children[0].parent=this}},collapse:function(i){for(var s=0;s<this.children.length;++s)this.children[s].collapse(i)},insertInner:function(i,s,f){this.size+=s.length,this.height+=f;for(var c=0;c<this.children.length;++c){var p=this.children[c],v=p.chunkSize();if(i<=v){if(p.insertInner(i,s,f),p.lines&&p.lines.length>50){for(var b=p.lines.length%25+25,S=b;S<p.lines.length;){var O=new Rl(p.lines.slice(S,S+=25));p.height-=O.height,this.children.splice(++c,0,O),O.parent=this}p.lines=p.lines.slice(0,b),this.maybeSpill()}break}i-=v}},maybeSpill:function(){if(!(this.children.length<=10)){var i=this;do{var s=i.children.splice(i.children.length-5,5),f=new _l(s);if(i.parent){i.size-=f.size,i.height-=f.height;var p=Ee(i.parent.children,i);i.parent.children.splice(p+1,0,f)}else{var c=new _l(i.children);c.parent=i,i.children=[c,f],i=c}f.parent=i.parent}while(i.children.length>10);i.parent.maybeSpill()}},iterN:function(i,s,f){for(var c=0;c<this.children.length;++c){var p=this.children[c],v=p.chunkSize();if(i<v){var b=Math.min(s,v-i);if(p.iterN(i,b,f))return!0;if((s-=b)==0)break;i=0}else i-=v}}};var $l=function(i,s,f){if(f)for(var c in f)f.hasOwnProperty(c)&&(this[c]=f[c]);this.doc=i,this.node=s};$l.prototype.clear=function(){var i=this.doc.cm,s=this.line.widgets,f=this.line,c=I(f);if(!(c==null||!s)){for(var p=0;p<s.length;++p)s[p]==this&&s.splice(p--,1);s.length||(f.widgets=null);var v=El(this);qr(f,Math.max(0,f.height-v)),i&&(Rr(i,function(){Gb(i,f,-v),to(i,c,"widget")}),qt(i,"lineWidgetCleared",i,this,c))}},$l.prototype.changed=function(){var i=this,s=this.height,f=this.doc.cm,c=this.line;this.height=null;var p=El(this)-s;p&&(eo(this.doc,c)||qr(c,c.height+p),f&&Rr(f,function(){f.curOp.forceUpdate=!0,Gb(f,c,p),qt(f,"lineWidgetChanged",f,i,I(c))}))},Ln($l);function Gb(i,s,f){Ci(s)<(i.curOp&&i.curOp.scrollTop||i.doc.scrollTop)&&Qp(i,f)}function WN(i,s,f,c){var p=new $l(i,f,c),v=i.cm;return v&&p.noHScroll&&(v.display.alignWidgets=!0),Il(i,s,"widget",function(b){var S=b.widgets||(b.widgets=[]);if(p.insertAt==null?S.push(p):S.splice(Math.min(S.length,Math.max(0,p.insertAt)),0,p),p.line=b,v&&!eo(i,b)){var O=Ci(b)<i.scrollTop;qr(b,b.height+El(p)),O&&Qp(v,p.height),v.curOp.forceUpdate=!0}return!0}),v&&qt(v,"lineWidgetAdded",v,p,typeof s=="number"?s:I(s)),p}var qb=0,ao=function(i,s){this.lines=[],this.type=s,this.doc=i,this.id=++qb};ao.prototype.clear=function(){if(!this.explicitlyCleared){var i=this.doc.cm,s=i&&!i.curOp;if(s&&Vo(i),Ir(this,"clear")){var f=this.find();f&&qt(this,"clear",f.from,f.to)}for(var c=null,p=null,v=0;v<this.lines.length;++v){var b=this.lines[v],S=bl(b.markedSpans,this);i&&!this.collapsed?to(i,I(b),"text"):i&&(S.to!=null&&(p=I(b)),S.from!=null&&(c=I(b))),b.markedSpans=IL(b.markedSpans,S),S.from==null&&this.collapsed&&!eo(this.doc,b)&&i&&qr(b,Xa(i.display))}if(i&&this.collapsed&&!i.options.lineWrapping)for(var O=0;O<this.lines.length;++O){var N=In(this.lines[O]),F=$c(N);F>i.display.maxLineLength&&(i.display.maxLine=N,i.display.maxLineLength=F,i.display.maxLineChanged=!0)}c!=null&&i&&this.collapsed&&Cr(i,c,p+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,i&&_b(i.doc)),i&&qt(i,"markerCleared",i,this,c,p),s&&Xo(i),this.parent&&this.parent.clear()}},ao.prototype.find=function(i,s){i==null&&this.type=="bookmark"&&(i=1);for(var f,c,p=0;p<this.lines.length;++p){var v=this.lines[p],b=bl(v.markedSpans,this);if(b.from!=null&&(f=J(s?v:I(v),b.from),i==-1))return f;if(b.to!=null&&(c=J(s?v:I(v),b.to),i==1))return c}return f&&{from:f,to:c}},ao.prototype.changed=function(){var i=this,s=this.find(-1,!0),f=this,c=this.doc.cm;!s||!c||Rr(c,function(){var p=s.line,v=I(s.line),b=Dp(c,v);if(b&&(Zw(b),c.curOp.selectionChanged=c.curOp.forceUpdate=!0),c.curOp.updateMaxLine=!0,!eo(f.doc,p)&&f.height!=null){var S=f.height;f.height=null;var O=El(f)-S;O&&qr(p,p.height+O)}qt(c,"markerChanged",c,i)})},ao.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(!s.maybeHiddenMarkers||Ee(s.maybeHiddenMarkers,this)==-1)&&(s.maybeUnhiddenMarkers||(s.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(i)},ao.prototype.detachLine=function(i){if(this.lines.splice(Ee(this.lines,i),1),!this.lines.length&&this.doc.cm){var s=this.doc.cm.curOp;(s.maybeHiddenMarkers||(s.maybeHiddenMarkers=[])).push(this)}},Ln(ao);function is(i,s,f,c,p){if(c&&c.shared)return UN(i,s,f,c,p);if(i.cm&&!i.cm.curOp)return Vt(i.cm,is)(i,s,f,c,p);var v=new ao(i,p),b=be(s,f);if(c&&me(c,v,!1),b>0||b==0&&v.clearWhenEmpty!==!1)return v;if(v.replacedWith&&(v.collapsed=!0,v.widgetNode=Q("span",[v.replacedWith],"CodeMirror-widget"),c.handleMouseEvents||v.widgetNode.setAttribute("cm-ignore-events","true"),c.insertLeft&&(v.widgetNode.insertLeft=!0)),v.collapsed){if($w(i,s.line,s,f,v)||s.line!=f.line&&$w(i,f.line,s,f,v))throw new Error("Inserting collapsed marker partially overlapping an existing one");ML()}v.addToHistory&&Lb(i,{from:s,to:f,origin:"markText"},i.sel,NaN);var S=s.line,O=i.cm,N;if(i.iter(S,f.line+1,function(H){O&&v.collapsed&&!O.options.lineWrapping&&In(H)==O.display.maxLine&&(N=!0),v.collapsed&&S!=s.line&&qr(H,0),RL(H,new Mc(v,S==s.line?s.ch:null,S==f.line?f.ch:null),i.cm&&i.cm.curOp),++S}),v.collapsed&&i.iter(s.line,f.line+1,function(H){eo(i,H)&&qr(H,0)}),v.clearOnEnter&&Ie(v,"beforeCursorEnter",function(){return v.clear()}),v.readOnly&&(AL(),(i.history.done.length||i.history.undone.length)&&i.clearHistory()),v.collapsed&&(v.id=++qb,v.atomic=!0),O){if(N&&(O.curOp.updateMaxLine=!0),v.collapsed)Cr(O,s.line,f.line+1);else if(v.className||v.startStyle||v.endStyle||v.css||v.attributes||v.title)for(var F=s.line;F<=f.line;F++)to(O,F,"text");v.atomic&&_b(O.doc),qt(O,"markerAdded",O,v)}return v}var Dl=function(i,s){this.markers=i,this.primary=s;for(var f=0;f<i.length;++f)i[f].parent=this};Dl.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();qt(this,"clear")}},Dl.prototype.find=function(i,s){return this.primary.find(i,s)},Ln(Dl);function UN(i,s,f,c,p){c=me(c),c.shared=!1;var v=[is(i,s,f,c,p)],b=v[0],S=c.widgetNode;return oo(i,function(O){S&&(c.widgetNode=S.cloneNode(!0)),v.push(is(O,Be(O,s),Be(O,f),c,p));for(var N=0;N<O.linked.length;++N)if(O.linked[N].isParent)return;b=ze(v)}),new Dl(v,b)}function Vb(i){return i.findMarks(J(i.first,0),i.clipPos(J(i.lastLine())),function(s){return s.parent})}function KN(i,s){for(var f=0;f<s.length;f++){var c=s[f],p=c.find(),v=i.clipPos(p.from),b=i.clipPos(p.to);if(be(v,b)){var S=is(i,v,b,c.primary,c.primary.type);c.markers.push(S),S.parent=c}}}function GN(i){for(var s=function(c){var p=i[c],v=[p.primary.doc];oo(p.primary.doc,function(O){return v.push(O)});for(var b=0;b<p.markers.length;b++){var S=p.markers[b];Ee(v,S.doc)==-1&&(S.parent=null,p.markers.splice(b--,1))}},f=0;f<i.length;f++)s(f)}var qN=0,kr=function(i,s,f,c,p){if(!(this instanceof kr))return new kr(i,s,f,c,p);f==null&&(f=0),_l.call(this,[new Rl([new Ga("",null)])]),this.first=f,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=f;var v=J(f,0);this.sel=no(v),this.history=new Xc(null),this.id=++qN,this.modeOption=s,this.lineSep=c,this.direction=p=="rtl"?"rtl":"ltr",this.extend=!1,typeof i=="string"&&(i=this.splitLines(i)),og(this,{from:v,to:v,text:i}),lr(this,no(v),ft)};kr.prototype=ee(_l.prototype,{constructor:kr,iter:function(i,s,f){f?this.iterN(i-this.first,s-i,f):this.iterN(this.first,this.first+this.size,i)},insert:function(i,s){for(var f=0,c=0;c<s.length;++c)f+=s[c].height;this.insertInner(i-this.first,s,f)},remove:function(i,s){this.removeInner(i-this.first,s)},getValue:function(i){var s=yl(this,this.first,this.first+this.size);return i===!1?s:s.join(i||this.lineSeparator())},setValue:Xt(function(i){var s=J(this.first,0),f=this.first+this.size-1;rs(this,{from:s,to:J(f,Oe(this,f).text.length),text:this.splitLines(i),origin:"setValue",full:!0},!0),this.cm&&Tl(this.cm,0,0),lr(this,no(s),ft)}),replaceRange:function(i,s,f,c){s=Be(this,s),f=f?Be(this,f):s,ns(this,i,s,f,c)},getRange:function(i,s,f){var c=Si(this,Be(this,i),Be(this,s));return f===!1?c:f===""?c.join(""):c.join(f||this.lineSeparator())},getLine:function(i){var s=this.getLineHandle(i);return s&&s.text},getLineHandle:function(i){if(ne(this,i))return Oe(this,i)},getLineNumber:function(i){return I(i)},getLineHandleVisualStart:function(i){return typeof i=="number"&&(i=Oe(this,i)),In(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return Be(this,i)},getCursor:function(i){var s=this.sel.primary(),f;return i==null||i=="head"?f=s.head:i=="anchor"?f=s.anchor:i=="end"||i=="to"||i===!1?f=s.to():f=s.from(),f},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Xt(function(i,s,f){Mb(this,Be(this,typeof i=="number"?J(i,s||0):i),null,f)}),setSelection:Xt(function(i,s,f){Mb(this,Be(this,i),Be(this,s||i),f)}),extendSelection:Xt(function(i,s,f){Qc(this,Be(this,i),s&&Be(this,s),f)}),extendSelections:Xt(function(i,s){Ab(this,Ew(this,i),s)}),extendSelectionsBy:Xt(function(i,s){var f=Ze(this.sel.ranges,i);Ab(this,Ew(this,f),s)}),setSelections:Xt(function(i,s,f){if(i.length){for(var c=[],p=0;p<i.length;p++)c[p]=new ot(Be(this,i[p].anchor),Be(this,i[p].head||i[p].anchor));s==null&&(s=Math.min(i.length-1,this.sel.primIndex)),lr(this,_n(this.cm,c,s),f)}}),addSelection:Xt(function(i,s,f){var c=this.sel.ranges.slice(0);c.push(new ot(Be(this,i),Be(this,s||i))),lr(this,_n(this.cm,c,c.length-1),f)}),getSelection:function(i){for(var s=this.sel.ranges,f,c=0;c<s.length;c++){var p=Si(this,s[c].from(),s[c].to());f=f?f.concat(p):p}return i===!1?f:f.join(i||this.lineSeparator())},getSelections:function(i){for(var s=[],f=this.sel.ranges,c=0;c<f.length;c++){var p=Si(this,f[c].from(),f[c].to());i!==!1&&(p=p.join(i||this.lineSeparator())),s[c]=p}return s},replaceSelection:function(i,s,f){for(var c=[],p=0;p<this.sel.ranges.length;p++)c[p]=i;this.replaceSelections(c,s,f||"+input")},replaceSelections:Xt(function(i,s,f){for(var c=[],p=this.sel,v=0;v<p.ranges.length;v++){var b=p.ranges[v];c[v]={from:b.from(),to:b.to(),text:this.splitLines(i[v]),origin:f}}for(var S=s&&s!="end"&&IN(this,c,s),O=c.length-1;O>=0;O--)rs(this,c[O]);S?Ib(this,S):this.cm&&Ja(this.cm)}),undo:Xt(function(){ef(this,"undo")}),redo:Xt(function(){ef(this,"redo")}),undoSelection:Xt(function(){ef(this,"undo",!0)}),redoSelection:Xt(function(){ef(this,"redo",!0)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){for(var i=this.history,s=0,f=0,c=0;c<i.done.length;c++)i.done[c].ranges||++s;for(var p=0;p<i.undone.length;p++)i.undone[p].ranges||++f;return{undo:s,redo:f}},clearHistory:function(){var i=this;this.history=new Xc(this.history),oo(this,function(s){return s.history=i.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(i){return i&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:es(this.history.done),undone:es(this.history.undone)}},setHistory:function(i){var s=this.history=new Xc(this.history);s.done=es(i.done.slice(0),null,!0),s.undone=es(i.undone.slice(0),null,!0)},setGutterMarker:Xt(function(i,s,f){return Il(this,i,"gutter",function(c){var p=c.gutterMarkers||(c.gutterMarkers={});return p[s]=f,!f&&rt(p)&&(c.gutterMarkers=null),!0})}),clearGutter:Xt(function(i){var s=this;this.iter(function(f){f.gutterMarkers&&f.gutterMarkers[i]&&Il(s,f,"gutter",function(){return f.gutterMarkers[i]=null,rt(f.gutterMarkers)&&(f.gutterMarkers=null),!0})})}),lineInfo:function(i){var s;if(typeof i=="number"){if(!ne(this,i)||(s=i,i=Oe(this,i),!i))return null}else if(s=I(i),s==null)return null;return{line:s,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:Xt(function(i,s,f){return Il(this,i,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass";if(!c[p])c[p]=f;else{if(V(f).test(c[p]))return!1;c[p]+=" "+f}return!0})}),removeLineClass:Xt(function(i,s,f){return Il(this,i,s=="gutter"?"gutter":"class",function(c){var p=s=="text"?"textClass":s=="background"?"bgClass":s=="gutter"?"gutterClass":"wrapClass",v=c[p];if(v)if(f==null)c[p]=null;else{var b=v.match(V(f));if(!b)return!1;var S=b.index+b[0].length;c[p]=v.slice(0,b.index)+(!b.index||S==v.length?"":" ")+v.slice(S)||null}else return!1;return!0})}),addLineWidget:Xt(function(i,s,f){return WN(this,i,s,f)}),removeLineWidget:function(i){i.clear()},markText:function(i,s,f){return is(this,Be(this,i),Be(this,s),f,f&&f.type||"range")},setBookmark:function(i,s){var f={replacedWith:s&&(s.nodeType==null?s.widget:s),insertLeft:s&&s.insertLeft,clearWhenEmpty:!1,shared:s&&s.shared,handleMouseEvents:s&&s.handleMouseEvents};return i=Be(this,i),is(this,i,i,f,"bookmark")},findMarksAt:function(i){i=Be(this,i);var s=[],f=Oe(this,i.line).markedSpans;if(f)for(var c=0;c<f.length;++c){var p=f[c];(p.from==null||p.from<=i.ch)&&(p.to==null||p.to>=i.ch)&&s.push(p.marker.parent||p.marker)}return s},findMarks:function(i,s,f){i=Be(this,i),s=Be(this,s);var c=[],p=i.line;return this.iter(i.line,s.line+1,function(v){var b=v.markedSpans;if(b)for(var S=0;S<b.length;S++){var O=b[S];!(O.to!=null&&p==i.line&&i.ch>=O.to||O.from==null&&p!=i.line||O.from!=null&&p==s.line&&O.from>=s.ch)&&(!f||f(O.marker))&&c.push(O.marker.parent||O.marker)}++p}),c},getAllMarks:function(){var i=[];return this.iter(function(s){var f=s.markedSpans;if(f)for(var c=0;c<f.length;++c)f[c].from!=null&&i.push(f[c].marker)}),i},posFromIndex:function(i){var s,f=this.first,c=this.lineSeparator().length;return this.iter(function(p){var v=p.text.length+c;if(v>i)return s=i,!0;i-=v,++f}),Be(this,J(f,s))},indexFromPos:function(i){i=Be(this,i);var s=i.ch;if(i.line<this.first||i.ch<0)return 0;var f=this.lineSeparator().length;return this.iter(this.first,i.line,function(c){s+=c.text.length+f}),s},copy:function(i){var s=new kr(yl(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return s.scrollTop=this.scrollTop,s.scrollLeft=this.scrollLeft,s.sel=this.sel,s.extend=!1,i&&(s.history.undoDepth=this.history.undoDepth,s.setHistory(this.getHistory())),s},linkedDoc:function(i){i||(i={});var s=this.first,f=this.first+this.size;i.from!=null&&i.from>s&&(s=i.from),i.to!=null&&i.to<f&&(f=i.to);var c=new kr(yl(this,s,f),i.mode||this.modeOption,s,this.lineSep,this.direction);return i.sharedHist&&(c.history=this.history),(this.linked||(this.linked=[])).push({doc:c,sharedHist:i.sharedHist}),c.linked=[{doc:this,isParent:!0,sharedHist:i.sharedHist}],KN(c,Vb(this)),c},unlinkDoc:function(i){if(i instanceof vt&&(i=i.doc),this.linked)for(var s=0;s<this.linked.length;++s){var f=this.linked[s];if(f.doc==i){this.linked.splice(s,1),i.unlinkDoc(this),GN(Vb(this));break}}if(i.history==this.history){var c=[i.id];oo(i,function(p){return c.push(p.id)},!0),i.history=new Xc(null),i.history.done=es(this.history.done,c),i.history.undone=es(this.history.undone,c)}},iterLinkedDocs:function(i){oo(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){return this.lineSep?i.split(this.lineSep):hn(i)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Xt(function(i){i!="rtl"&&(i="ltr"),i!=this.direction&&(this.direction=i,this.iter(function(s){return s.order=null}),this.cm&&RN(this.cm))})}),kr.prototype.eachLine=kr.prototype.iter;var Xb=0;function VN(i){var s=this;if(Yb(s),!(kt(s,i)||ki(s.display,i))){sr(i),d&&(Xb=+new Date);var f=Uo(s,i,!0),c=i.dataTransfer.files;if(!(!f||s.isReadOnly()))if(c&&c.length&&window.FileReader&&window.File)for(var p=c.length,v=Array(p),b=0,S=function(){++b==p&&Vt(s,function(){f=Be(s.doc,f);var K={from:f,to:f,text:s.doc.splitLines(v.filter(function(te){return te!=null}).join(s.doc.lineSeparator())),origin:"paste"};rs(s.doc,K),Ib(s.doc,no(Be(s.doc,f),Be(s.doc,io(K))))})()},O=function(K,te){if(s.options.allowDropFileTypes&&Ee(s.options.allowDropFileTypes,K.type)==-1){S();return}var se=new FileReader;se.onerror=function(){return S()},se.onload=function(){var ge=se.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(ge)){S();return}v[te]=ge,S()},se.readAsText(K)},N=0;N<c.length;N++)O(c[N],N);else{if(s.state.draggingText&&s.doc.sel.contains(f)>-1){s.state.draggingText(i),setTimeout(function(){return s.display.input.focus()},20);return}try{var F=i.dataTransfer.getData("Text");if(F){var H;if(s.state.draggingText&&!s.state.draggingText.copy&&(H=s.listSelections()),Jc(s.doc,no(f,f)),H)for(var G=0;G<H.length;++G)ns(s.doc,"",H[G].anchor,H[G].head,"drag");s.replaceSelection(F,"around","paste"),s.display.input.focus()}}catch{}}}}function XN(i,s){if(d&&(!i.state.draggingText||+new Date-Xb<100)){Yi(s);return}if(!(kt(i,s)||ki(i.display,s))&&(s.dataTransfer.setData("Text",i.getSelection()),s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setDragImage&&!j)){var f=M("img",null,null,"position: fixed; left: 0; top: 0;");f.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",C&&(f.width=f.height=1,i.display.wrapper.appendChild(f),f._top=f.offsetTop),s.dataTransfer.setDragImage(f,0,0),C&&f.parentNode.removeChild(f)}}function YN(i,s){var f=Uo(i,s);if(f){var c=document.createDocumentFragment();Gp(i,f,c),i.display.dragCursor||(i.display.dragCursor=M("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)),_(i.display.dragCursor,c)}}function Yb(i){i.display.dragCursor&&(i.display.lineSpace.removeChild(i.display.dragCursor),i.display.dragCursor=null)}function Qb(i){if(document.getElementsByClassName){for(var s=document.getElementsByClassName("CodeMirror"),f=[],c=0;c<s.length;c++){var p=s[c].CodeMirror;p&&f.push(p)}f.length&&f[0].operation(function(){for(var v=0;v<f.length;v++)i(f[v])})}}var Jb=!1;function QN(){Jb||(JN(),Jb=!0)}function JN(){var i;Ie(window,"resize",function(){i==null&&(i=setTimeout(function(){i=null,Qb(ZN)},100))}),Ie(window,"blur",function(){return Qb(Qa)})}function ZN(i){var s=i.display;s.cachedCharWidth=s.cachedTextHeight=s.cachedPaddingH=null,s.scrollbarsClipped=!1,i.setSize()}for(var so={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Fl=0;Fl<10;Fl++)so[Fl+48]=so[Fl+96]=String(Fl);for(var tf=65;tf<=90;tf++)so[tf]=String.fromCharCode(tf);for(var zl=1;zl<=12;zl++)so[zl+111]=so[zl+63235]="F"+zl;var Oi={};Oi.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Oi.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Oi.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Oi.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Oi.default=R?Oi.macDefault:Oi.pcDefault;function ej(i){var s=i.split(/-(?!$)/);i=s[s.length-1];for(var f,c,p,v,b=0;b<s.length-1;b++){var S=s[b];if(/^(cmd|meta|m)$/i.test(S))v=!0;else if(/^a(lt)?$/i.test(S))f=!0;else if(/^(c|ctrl|control)$/i.test(S))c=!0;else if(/^s(hift)?$/i.test(S))p=!0;else throw new Error("Unrecognized modifier name: "+S)}return f&&(i="Alt-"+i),c&&(i="Ctrl-"+i),v&&(i="Cmd-"+i),p&&(i="Shift-"+i),i}function tj(i){var s={};for(var f in i)if(i.hasOwnProperty(f)){var c=i[f];if(/^(name|fallthrough|(de|at)tach)$/.test(f))continue;if(c=="..."){delete i[f];continue}for(var p=Ze(f.split(" "),ej),v=0;v<p.length;v++){var b=void 0,S=void 0;v==p.length-1?(S=p.join(" "),b=c):(S=p.slice(0,v+1).join(" "),b="...");var O=s[S];if(!O)s[S]=b;else if(O!=b)throw new Error("Inconsistent bindings for "+S)}delete i[f]}for(var N in s)i[N]=s[N];return i}function os(i,s,f,c){s=rf(s);var p=s.call?s.call(i,c):s[i];if(p===!1)return"nothing";if(p==="...")return"multi";if(p!=null&&f(p))return"handled";if(s.fallthrough){if(Object.prototype.toString.call(s.fallthrough)!="[object Array]")return os(i,s.fallthrough,f,c);for(var v=0;v<s.fallthrough.length;v++){var b=os(i,s.fallthrough[v],f,c);if(b)return b}}}function Zb(i){var s=typeof i=="string"?i:so[i.keyCode];return s=="Ctrl"||s=="Alt"||s=="Shift"||s=="Mod"}function e1(i,s,f){var c=i;return s.altKey&&c!="Alt"&&(i="Alt-"+i),(U?s.metaKey:s.ctrlKey)&&c!="Ctrl"&&(i="Ctrl-"+i),(U?s.ctrlKey:s.metaKey)&&c!="Mod"&&(i="Cmd-"+i),!f&&s.shiftKey&&c!="Shift"&&(i="Shift-"+i),i}function t1(i,s){if(C&&i.keyCode==34&&i.char)return!1;var f=so[i.keyCode];return f==null||i.altGraphKey?!1:(i.keyCode==3&&i.code&&(f=i.code),e1(f,i,s))}function rf(i){return typeof i=="string"?Oi[i]:i}function as(i,s){for(var f=i.doc.sel.ranges,c=[],p=0;p<f.length;p++){for(var v=s(f[p]);c.length&&be(v.from,ze(c).to)<=0;){var b=c.pop();if(be(b.from,v.from)<0){v.from=b.from;break}}c.push(v)}Rr(i,function(){for(var S=c.length-1;S>=0;S--)ns(i.doc,"",c[S].from,c[S].to,"+delete");Ja(i)})}function ug(i,s,f){var c=Qe(i.text,s+f,f);return c<0||c>i.text.length?null:c}function cg(i,s,f){var c=ug(i,s.ch,f);return c==null?null:new J(s.line,c,f<0?"after":"before")}function fg(i,s,f,c,p){if(i){s.doc.direction=="rtl"&&(p=-p);var v=Je(f,s.doc.direction);if(v){var b=p<0?ze(v):v[0],S=p<0==(b.level==1),O=S?"after":"before",N;if(b.level>0||s.doc.direction=="rtl"){var F=Va(s,f);N=p<0?f.text.length-1:0;var H=Zn(s,F,N).top;N=$e(function(G){return Zn(s,F,G).top==H},p<0==(b.level==1)?b.from:b.to-1,N),O=="before"&&(N=ug(f,N,1))}else N=p<0?b.to:b.from;return new J(c,N,O)}}return new J(c,p<0?f.text.length:0,p<0?"before":"after")}function rj(i,s,f,c){var p=Je(s,i.doc.direction);if(!p)return cg(s,f,c);f.ch>=s.text.length?(f.ch=s.text.length,f.sticky="before"):f.ch<=0&&(f.ch=0,f.sticky="after");var v=Pn(p,f.ch,f.sticky),b=p[v];if(i.doc.direction=="ltr"&&b.level%2==0&&(c>0?b.to>f.ch:b.from<f.ch))return cg(s,f,c);var S=function(ye,xe){return ug(s,ye instanceof J?ye.ch:ye,xe)},O,N=function(ye){return i.options.lineWrapping?(O=O||Va(i,s),ab(i,s,O,ye)):{begin:0,end:s.text.length}},F=N(f.sticky=="before"?S(f,-1):f.ch);if(i.doc.direction=="rtl"||b.level==1){var H=b.level==1==c<0,G=S(f,H?1:-1);if(G!=null&&(H?G<=b.to&&G<=F.end:G>=b.from&&G>=F.begin)){var K=H?"before":"after";return new J(f.line,G,K)}}var te=function(ye,xe,we){for(var Te=function(dt,Yt){return Yt?new J(f.line,S(dt,1),"before"):new J(f.line,dt,"after")};ye>=0&&ye<p.length;ye+=xe){var Re=p[ye],je=xe>0==(Re.level!=1),Xe=je?we.begin:S(we.end,-1);if(Re.from<=Xe&&Xe<Re.to||(Xe=je?Re.from:S(Re.to,-1),we.begin<=Xe&&Xe<we.end))return Te(Xe,je)}},se=te(v+c,c,F);if(se)return se;var ge=c>0?F.end:S(F.begin,-1);return ge!=null&&!(c>0&&ge==s.text.length)&&(se=te(c>0?0:p.length-1,c,N(ge)),se)?se:null}var Hl={selectAll:Fb,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),ft)},killLine:function(i){return as(i,function(s){if(s.empty()){var f=Oe(i.doc,s.head.line).text.length;return s.head.ch==f&&s.head.line<i.lastLine()?{from:s.head,to:J(s.head.line+1,0)}:{from:s.head,to:J(s.head.line,f)}}else return{from:s.from(),to:s.to()}})},deleteLine:function(i){return as(i,function(s){return{from:J(s.from().line,0),to:Be(i.doc,J(s.to().line+1,0))}})},delLineLeft:function(i){return as(i,function(s){return{from:J(s.from().line,0),to:s.from()}})},delWrappedLineLeft:function(i){return as(i,function(s){var f=i.charCoords(s.head,"div").top+5,c=i.coordsChar({left:0,top:f},"div");return{from:c,to:s.from()}})},delWrappedLineRight:function(i){return as(i,function(s){var f=i.charCoords(s.head,"div").top+5,c=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:f},"div");return{from:s.from(),to:c}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(J(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(J(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(s){return r1(i,s.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(s){return n1(i,s.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(s){return nj(i,s.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(s){var f=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:f},"div")},Ge)},goLineLeft:function(i){return i.extendSelectionsBy(function(s){var f=i.cursorCoords(s.head,"div").top+5;return i.coordsChar({left:0,top:f},"div")},Ge)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(s){var f=i.cursorCoords(s.head,"div").top+5,c=i.coordsChar({left:0,top:f},"div");return c.ch<i.getLine(c.line).search(/\S/)?n1(i,s.head):c},Ge)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"codepoint")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("	")},insertSoftTab:function(i){for(var s=[],f=i.listSelections(),c=i.options.tabSize,p=0;p<f.length;p++){var v=f[p].from(),b=Le(i.getLine(v.line),v.ch,c);s.push(Ft(c-b%c))}i.replaceSelections(s)},defaultTab:function(i){i.somethingSelected()?i.indentSelection("add"):i.execCommand("insertTab")},transposeChars:function(i){return Rr(i,function(){for(var s=i.listSelections(),f=[],c=0;c<s.length;c++)if(s[c].empty()){var p=s[c].head,v=Oe(i.doc,p.line).text;if(v){if(p.ch==v.length&&(p=new J(p.line,p.ch-1)),p.ch>0)p=new J(p.line,p.ch+1),i.replaceRange(v.charAt(p.ch-1)+v.charAt(p.ch-2),J(p.line,p.ch-2),p,"+transpose");else if(p.line>i.doc.first){var b=Oe(i.doc,p.line-1).text;b&&(p=new J(p.line,1),i.replaceRange(v.charAt(0)+i.doc.lineSeparator()+b.charAt(b.length-1),J(p.line-1,b.length-1),p,"+transpose"))}}f.push(new ot(p,p))}i.setSelections(f)})},newlineAndIndent:function(i){return Rr(i,function(){for(var s=i.listSelections(),f=s.length-1;f>=0;f--)i.replaceRange(i.doc.lineSeparator(),s[f].anchor,s[f].head,"+input");s=i.listSelections();for(var c=0;c<s.length;c++)i.indentLine(s[c].from().line,null,!0);Ja(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function r1(i,s){var f=Oe(i.doc,s),c=In(f);return c!=f&&(s=I(c)),fg(!0,i,c,s,1)}function nj(i,s){var f=Oe(i.doc,s),c=zL(f);return c!=f&&(s=I(c)),fg(!0,i,f,s,-1)}function n1(i,s){var f=r1(i,s.line),c=Oe(i.doc,f.line),p=Je(c,i.doc.direction);if(!p||p[0].level==0){var v=Math.max(f.ch,c.text.search(/\S/)),b=s.line==f.line&&s.ch<=v&&s.ch;return J(f.line,b?0:v,f.sticky)}return f}function nf(i,s,f){if(typeof s=="string"&&(s=Hl[s],!s))return!1;i.display.input.ensurePolled();var c=i.display.shift,p=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),f&&(i.display.shift=!1),p=s(i)!=Lt}finally{i.display.shift=c,i.state.suppressEdits=!1}return p}function ij(i,s,f){for(var c=0;c<i.state.keyMaps.length;c++){var p=os(s,i.state.keyMaps[c],f,i);if(p)return p}return i.options.extraKeys&&os(s,i.options.extraKeys,f,i)||os(s,i.options.keyMap,f,i)}var oj=new Ne;function Bl(i,s,f,c){var p=i.state.keySeq;if(p){if(Zb(s))return"handled";if(/\'$/.test(s)?i.state.keySeq=null:oj.set(50,function(){i.state.keySeq==p&&(i.state.keySeq=null,i.display.input.reset())}),i1(i,p+" "+s,f,c))return!0}return i1(i,s,f,c)}function i1(i,s,f,c){var p=ij(i,s,c);return p=="multi"&&(i.state.keySeq=s),p=="handled"&&qt(i,"keyHandled",i,s,f),(p=="handled"||p=="multi")&&(sr(f),qp(i)),!!p}function o1(i,s){var f=t1(s,!0);return f?s.shiftKey&&!i.state.keySeq?Bl(i,"Shift-"+f,s,function(c){return nf(i,c,!0)})||Bl(i,f,s,function(c){if(typeof c=="string"?/^go[A-Z]/.test(c):c.motion)return nf(i,c)}):Bl(i,f,s,function(c){return nf(i,c)}):!1}function aj(i,s,f){return Bl(i,"'"+f+"'",s,function(c){return nf(i,c,!0)})}var dg=null;function a1(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField())&&(s.curOp.focus=X(Z(s)),!kt(s,i))){d&&h<11&&i.keyCode==27&&(i.returnValue=!1);var f=i.keyCode;s.display.shift=f==16||i.shiftKey;var c=o1(s,i);C&&(dg=c?f:null,!c&&f==88&&!jc&&(R?i.metaKey:i.ctrlKey)&&s.replaceSelection("",null,"cut")),o&&!R&&!c&&f==46&&i.shiftKey&&!i.ctrlKey&&document.execCommand&&document.execCommand("cut"),f==18&&!/\bCodeMirror-crosshair\b/.test(s.display.lineDiv.className)&&sj(s)}}function sj(i){var s=i.display.lineDiv;ie(s,"CodeMirror-crosshair");function f(c){(c.keyCode==18||!c.altKey)&&(de(s,"CodeMirror-crosshair"),ar(document,"keyup",f),ar(document,"mouseover",f))}Ie(document,"keyup",f),Ie(document,"mouseover",f)}function s1(i){i.keyCode==16&&(this.doc.sel.shift=!1),kt(this,i)}function l1(i){var s=this;if(!(i.target&&i.target!=s.display.input.getField())&&!(ki(s.display,i)||kt(s,i)||i.ctrlKey&&!i.altKey||R&&i.metaKey)){var f=i.keyCode,c=i.charCode;if(C&&f==dg){dg=null,sr(i);return}if(!(C&&(!i.which||i.which<10)&&o1(s,i))){var p=String.fromCharCode(c==null?f:c);p!="\b"&&(aj(s,i,p)||s.display.input.onKeyPress(i))}}}var lj=400,hg=function(i,s,f){this.time=i,this.pos=s,this.button=f};hg.prototype.compare=function(i,s,f){return this.time+lj>i&&be(s,this.pos)==0&&f==this.button};var Wl,Ul;function uj(i,s){var f=+new Date;return Ul&&Ul.compare(f,i,s)?(Wl=Ul=null,"triple"):Wl&&Wl.compare(f,i,s)?(Ul=new hg(f,i,s),Wl=null,"double"):(Wl=new hg(f,i,s),Ul=null,"single")}function u1(i){var s=this,f=s.display;if(!(kt(s,i)||f.activeTouch&&f.input.supportsTouch())){if(f.input.ensurePolled(),f.shift=i.shiftKey,ki(f,i)){g||(f.scroller.draggable=!1,setTimeout(function(){return f.scroller.draggable=!0},100));return}if(!pg(s,i)){var c=Uo(s,i),p=Nn(i),v=c?uj(c,p):"single";le(s).focus(),p==1&&s.state.selectingText&&s.state.selectingText(i),!(c&&cj(s,p,c,v,i))&&(p==1?c?dj(s,c,v,i):gl(i)==f.scroller&&sr(i):p==2?(c&&Qc(s.doc,c),setTimeout(function(){return f.input.focus()},20)):p==3&&(Y?s.display.input.onContextMenu(i):Vp(s)))}}}function cj(i,s,f,c,p){var v="Click";return c=="double"?v="Double"+v:c=="triple"&&(v="Triple"+v),v=(s==1?"Left":s==2?"Middle":"Right")+v,Bl(i,e1(v,p),p,function(b){if(typeof b=="string"&&(b=Hl[b]),!b)return!1;var S=!1;try{i.isReadOnly()&&(i.state.suppressEdits=!0),S=b(i,f)!=Lt}finally{i.state.suppressEdits=!1}return S})}function fj(i,s,f){var c=i.getOption("configureMouse"),p=c?c(i,s,f):{};if(p.unit==null){var v=D?f.shiftKey&&f.metaKey:f.altKey;p.unit=v?"rectangle":s=="single"?"char":s=="double"?"word":"line"}return(p.extend==null||i.doc.extend)&&(p.extend=i.doc.extend||f.shiftKey),p.addNew==null&&(p.addNew=R?f.metaKey:f.ctrlKey),p.moveOnDrag==null&&(p.moveOnDrag=!(R?f.altKey:f.ctrlKey)),p}function dj(i,s,f,c){d?setTimeout(ce(cb,i),0):i.curOp.focus=X(Z(i));var p=fj(i,f,c),v=i.doc.sel,b;i.options.dragDrop&&Tp&&!i.isReadOnly()&&f=="single"&&(b=v.contains(s))>-1&&(be((b=v.ranges[b]).from(),s)<0||s.xRel>0)&&(be(b.to(),s)>0||s.xRel<0)?hj(i,c,s,p):pj(i,c,s,p)}function hj(i,s,f,c){var p=i.display,v=!1,b=Vt(i,function(N){g&&(p.scroller.draggable=!1),i.state.draggingText=!1,i.state.delayingBlurEvent&&(i.hasFocus()?i.state.delayingBlurEvent=!1:Vp(i)),ar(p.wrapper.ownerDocument,"mouseup",b),ar(p.wrapper.ownerDocument,"mousemove",S),ar(p.scroller,"dragstart",O),ar(p.scroller,"drop",b),v||(sr(N),c.addNew||Qc(i.doc,f,null,null,c.extend),g&&!j||d&&h==9?setTimeout(function(){p.wrapper.ownerDocument.body.focus({preventScroll:!0}),p.input.focus()},20):p.input.focus())}),S=function(N){v=v||Math.abs(s.clientX-N.clientX)+Math.abs(s.clientY-N.clientY)>=10},O=function(){return v=!0};g&&(p.scroller.draggable=!0),i.state.draggingText=b,b.copy=!c.moveOnDrag,Ie(p.wrapper.ownerDocument,"mouseup",b),Ie(p.wrapper.ownerDocument,"mousemove",S),Ie(p.scroller,"dragstart",O),Ie(p.scroller,"drop",b),i.state.delayingBlurEvent=!0,setTimeout(function(){return p.input.focus()},20),p.scroller.dragDrop&&p.scroller.dragDrop()}function c1(i,s,f){if(f=="char")return new ot(s,s);if(f=="word")return i.findWordAt(s);if(f=="line")return new ot(J(s.line,0),Be(i.doc,J(s.line+1,0)));var c=f(i,s);return new ot(c.from,c.to)}function pj(i,s,f,c){d&&Vp(i);var p=i.display,v=i.doc;sr(s);var b,S,O=v.sel,N=O.ranges;if(c.addNew&&!c.extend?(S=v.sel.contains(f),S>-1?b=N[S]:b=new ot(f,f)):(b=v.sel.primary(),S=v.sel.primIndex),c.unit=="rectangle")c.addNew||(b=new ot(f,f)),f=Uo(i,s,!0,!0),S=-1;else{var F=c1(i,f,c.unit);c.extend?b=sg(b,F.anchor,F.head,c.extend):b=F}c.addNew?S==-1?(S=N.length,lr(v,_n(i,N.concat([b]),S),{scroll:!1,origin:"*mouse"})):N.length>1&&N[S].empty()&&c.unit=="char"&&!c.extend?(lr(v,_n(i,N.slice(0,S).concat(N.slice(S+1)),0),{scroll:!1,origin:"*mouse"}),O=v.sel):lg(v,S,b,Dt):(S=0,lr(v,new Vr([b],0),Dt),O=v.sel);var H=f;function G(we){if(be(H,we)!=0)if(H=we,c.unit=="rectangle"){for(var Te=[],Re=i.options.tabSize,je=Le(Oe(v,f.line).text,f.ch,Re),Xe=Le(Oe(v,we.line).text,we.ch,Re),dt=Math.min(je,Xe),Yt=Math.max(je,Xe),bt=Math.min(f.line,we.line),_r=Math.min(i.lastLine(),Math.max(f.line,we.line));bt<=_r;bt++){var Tr=Oe(v,bt).text,It=qe(Tr,dt,Re);dt==Yt?Te.push(new ot(J(bt,It),J(bt,It))):Tr.length>It&&Te.push(new ot(J(bt,It),J(bt,qe(Tr,Yt,Re))))}Te.length||Te.push(new ot(f,f)),lr(v,_n(i,O.ranges.slice(0,S).concat(Te),S),{origin:"*mouse",scroll:!1}),i.scrollIntoView(we)}else{var Or=b,Zt=c1(i,we,c.unit),zt=Or.anchor,Rt;be(Zt.anchor,zt)>0?(Rt=Zt.head,zt=Ka(Or.from(),Zt.anchor)):(Rt=Zt.anchor,zt=Er(Or.to(),Zt.head));var Ot=O.ranges.slice(0);Ot[S]=gj(i,new ot(Be(v,zt),Rt)),lr(v,_n(i,Ot,S),Dt)}}var K=p.wrapper.getBoundingClientRect(),te=0;function se(we){var Te=++te,Re=Uo(i,we,!0,c.unit=="rectangle");if(Re)if(be(Re,H)!=0){i.curOp.focus=X(Z(i)),G(Re);var je=Kc(p,v);(Re.line>=je.to||Re.line<je.from)&&setTimeout(Vt(i,function(){te==Te&&se(we)}),150)}else{var Xe=we.clientY<K.top?-20:we.clientY>K.bottom?20:0;Xe&&setTimeout(Vt(i,function(){te==Te&&(p.scroller.scrollTop+=Xe,se(we))}),50)}}function ge(we){i.state.selectingText=!1,te=1/0,we&&(sr(we),p.input.focus()),ar(p.wrapper.ownerDocument,"mousemove",ye),ar(p.wrapper.ownerDocument,"mouseup",xe),v.history.lastSelOrigin=null}var ye=Vt(i,function(we){we.buttons===0||!Nn(we)?ge(we):se(we)}),xe=Vt(i,ge);i.state.selectingText=xe,Ie(p.wrapper.ownerDocument,"mousemove",ye),Ie(p.wrapper.ownerDocument,"mouseup",xe)}function gj(i,s){var f=s.anchor,c=s.head,p=Oe(i.doc,f.line);if(be(f,c)==0&&f.sticky==c.sticky)return s;var v=Je(p);if(!v)return s;var b=Pn(v,f.ch,f.sticky),S=v[b];if(S.from!=f.ch&&S.to!=f.ch)return s;var O=b+(S.from==f.ch==(S.level!=1)?0:1);if(O==0||O==v.length)return s;var N;if(c.line!=f.line)N=(c.line-f.line)*(i.doc.direction=="ltr"?1:-1)>0;else{var F=Pn(v,c.ch,c.sticky),H=F-b||(c.ch-f.ch)*(S.level==1?-1:1);F==O-1||F==O?N=H<0:N=H>0}var G=v[O+(N?-1:0)],K=N==(G.level==1),te=K?G.from:G.to,se=K?"after":"before";return f.ch==te&&f.sticky==se?s:new ot(new J(f.line,te,se),c)}function f1(i,s,f,c){var p,v;if(s.touches)p=s.touches[0].clientX,v=s.touches[0].clientY;else try{p=s.clientX,v=s.clientY}catch{return!1}if(p>=Math.floor(i.display.gutters.getBoundingClientRect().right))return!1;c&&sr(s);var b=i.display,S=b.lineDiv.getBoundingClientRect();if(v>S.bottom||!Ir(i,f))return Sr(s);v-=S.top-b.viewOffset;for(var O=0;O<i.display.gutterSpecs.length;++O){var N=b.gutters.childNodes[O];if(N&&N.getBoundingClientRect().right>=p){var F=z(i.doc,v),H=i.display.gutterSpecs[O];return Ct(i,f,i,F,H.className,s),Sr(s)}}}function pg(i,s){return f1(i,s,"gutterClick",!0)}function d1(i,s){ki(i.display,s)||vj(i,s)||kt(i,s,"contextmenu")||Y||i.display.input.onContextMenu(s)}function vj(i,s){return Ir(i,"gutterContextMenu")?f1(i,s,"gutterContextMenu",!1):!1}function h1(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Cl(i)}var ss={toString:function(){return"CodeMirror.Init"}},p1={},of={};function mj(i){var s=i.optionHandlers;function f(c,p,v,b){i.defaults[c]=p,v&&(s[c]=b?function(S,O,N){N!=ss&&v(S,O,N)}:v)}i.defineOption=f,i.Init=ss,f("value","",function(c,p){return c.setValue(p)},!0),f("mode",null,function(c,p){c.doc.modeOption=p,ig(c)},!0),f("indentUnit",2,ig,!0),f("indentWithTabs",!1),f("smartIndent",!0),f("tabSize",4,function(c){Al(c),Cl(c),Cr(c)},!0),f("lineSeparator",null,function(c,p){if(c.doc.lineSep=p,!!p){var v=[],b=c.doc.first;c.doc.iter(function(O){for(var N=0;;){var F=O.text.indexOf(p,N);if(F==-1)break;N=F+p.length,v.push(J(b,F))}b++});for(var S=v.length-1;S>=0;S--)ns(c.doc,p,v[S],J(v[S].line,v[S].ch+p.length))}}),f("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(c,p,v){c.state.specialChars=new RegExp(p.source+(p.test("	")?"":"|	"),"g"),v!=ss&&c.refresh()}),f("specialCharPlaceholder",GL,function(c){return c.refresh()},!0),f("electricChars",!0),f("inputStyle",L?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),f("spellcheck",!1,function(c,p){return c.getInputField().spellcheck=p},!0),f("autocorrect",!1,function(c,p){return c.getInputField().autocorrect=p},!0),f("autocapitalize",!1,function(c,p){return c.getInputField().autocapitalize=p},!0),f("rtlMoveVisually",!$),f("wholeLineUpdateBefore",!0),f("theme","default",function(c){h1(c),jl(c)},!0),f("keyMap","default",function(c,p,v){var b=rf(p),S=v!=ss&&rf(v);S&&S.detach&&S.detach(c,b),b.attach&&b.attach(c,S||null)}),f("extraKeys",null),f("configureMouse",null),f("lineWrapping",!1,wj,!0),f("gutters",[],function(c,p){c.display.gutterSpecs=rg(p,c.options.lineNumbers),jl(c)},!0),f("fixedGutter",!0,function(c,p){c.display.gutters.style.left=p?Up(c.display)+"px":"0",c.refresh()},!0),f("coverGutterNextToScrollbar",!1,function(c){return Za(c)},!0),f("scrollbarStyle","native",function(c){vb(c),Za(c),c.display.scrollbars.setScrollTop(c.doc.scrollTop),c.display.scrollbars.setScrollLeft(c.doc.scrollLeft)},!0),f("lineNumbers",!1,function(c,p){c.display.gutterSpecs=rg(c.options.gutters,p),jl(c)},!0),f("firstLineNumber",1,jl,!0),f("lineNumberFormatter",function(c){return c},jl,!0),f("showCursorWhenSelecting",!1,kl,!0),f("resetSelectionOnContextMenu",!0),f("lineWiseCopyCut",!0),f("pasteLinesPerSelection",!0),f("selectionsMayTouch",!1),f("readOnly",!1,function(c,p){p=="nocursor"&&(Qa(c),c.display.input.blur()),c.display.input.readOnlyChanged(p)}),f("screenReaderLabel",null,function(c,p){p=p===""?null:p,c.display.input.screenReaderLabelChanged(p)}),f("disableInput",!1,function(c,p){p||c.display.input.reset()},!0),f("dragDrop",!0,yj),f("allowDropFileTypes",null),f("cursorBlinkRate",530),f("cursorScrollMargin",0),f("cursorHeight",1,kl,!0),f("singleCursorHeightPerLine",!0,kl,!0),f("workTime",100),f("workDelay",100),f("flattenSpans",!0,Al,!0),f("addModeClass",!1,Al,!0),f("pollInterval",100),f("undoDepth",200,function(c,p){return c.doc.history.undoDepth=p}),f("historyEventDelay",1250),f("viewportMargin",10,function(c){return c.refresh()},!0),f("maxHighlightLength",1e4,Al,!0),f("moveInputWithCursor",!0,function(c,p){p||c.display.input.resetPosition()}),f("tabindex",null,function(c,p){return c.display.input.getField().tabIndex=p||""}),f("autofocus",null),f("direction","ltr",function(c,p){return c.doc.setDirection(p)},!0),f("phrases",null)}function yj(i,s,f){var c=f&&f!=ss;if(!s!=!c){var p=i.display.dragFunctions,v=s?Ie:ar;v(i.display.scroller,"dragstart",p.start),v(i.display.scroller,"dragenter",p.enter),v(i.display.scroller,"dragover",p.over),v(i.display.scroller,"dragleave",p.leave),v(i.display.scroller,"drop",p.drop)}}function wj(i){i.options.lineWrapping?(ie(i.display.wrapper,"CodeMirror-wrap"),i.display.sizer.style.minWidth="",i.display.sizerWidth=null):(de(i.display.wrapper,"CodeMirror-wrap"),Ip(i)),Kp(i),Cr(i),Cl(i),setTimeout(function(){return Za(i)},100)}function vt(i,s){var f=this;if(!(this instanceof vt))return new vt(i,s);this.options=s=s?me(s):{},me(p1,s,!1);var c=s.value;typeof c=="string"?c=new kr(c,s.mode,null,s.lineSeparator,s.direction):s.mode&&(c.modeOption=s.mode),this.doc=c;var p=new vt.inputStyles[s.inputStyle](this),v=this.display=new AN(i,c,p,s);v.wrapper.CodeMirror=this,h1(this),s.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),vb(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new Ne,keySeq:null,specialChars:null},s.autofocus&&!L&&v.input.focus(),d&&h<11&&setTimeout(function(){return f.display.input.reset(!0)},20),bj(this),QN(),Vo(this),this.curOp.forceUpdate=!0,Tb(this,c),s.autofocus&&!L||this.hasFocus()?setTimeout(function(){f.hasFocus()&&!f.state.focused&&Xp(f)},20):Qa(this);for(var b in of)of.hasOwnProperty(b)&&of[b](this,s[b],ss);wb(this),s.finishInit&&s.finishInit(this);for(var S=0;S<gg.length;++S)gg[S](this);Xo(this),g&&s.lineWrapping&&getComputedStyle(v.lineDiv).textRendering=="optimizelegibility"&&(v.lineDiv.style.textRendering="auto")}vt.defaults=p1,vt.optionHandlers=of;function bj(i){var s=i.display;Ie(s.scroller,"mousedown",Vt(i,u1)),d&&h<11?Ie(s.scroller,"dblclick",Vt(i,function(O){if(!kt(i,O)){var N=Uo(i,O);if(!(!N||pg(i,O)||ki(i.display,O))){sr(O);var F=i.findWordAt(N);Qc(i.doc,F.anchor,F.head)}}})):Ie(s.scroller,"dblclick",function(O){return kt(i,O)||sr(O)}),Ie(s.scroller,"contextmenu",function(O){return d1(i,O)}),Ie(s.input.getField(),"contextmenu",function(O){s.scroller.contains(O.target)||d1(i,O)});var f,c={end:0};function p(){s.activeTouch&&(f=setTimeout(function(){return s.activeTouch=null},1e3),c=s.activeTouch,c.end=+new Date)}function v(O){if(O.touches.length!=1)return!1;var N=O.touches[0];return N.radiusX<=1&&N.radiusY<=1}function b(O,N){if(N.left==null)return!0;var F=N.left-O.left,H=N.top-O.top;return F*F+H*H>20*20}Ie(s.scroller,"touchstart",function(O){if(!kt(i,O)&&!v(O)&&!pg(i,O)){s.input.ensurePolled(),clearTimeout(f);var N=+new Date;s.activeTouch={start:N,moved:!1,prev:N-c.end<=300?c:null},O.touches.length==1&&(s.activeTouch.left=O.touches[0].pageX,s.activeTouch.top=O.touches[0].pageY)}}),Ie(s.scroller,"touchmove",function(){s.activeTouch&&(s.activeTouch.moved=!0)}),Ie(s.scroller,"touchend",function(O){var N=s.activeTouch;if(N&&!ki(s,O)&&N.left!=null&&!N.moved&&new Date-N.start<300){var F=i.coordsChar(s.activeTouch,"page"),H;!N.prev||b(N,N.prev)?H=new ot(F,F):!N.prev.prev||b(N,N.prev.prev)?H=i.findWordAt(F):H=new ot(J(F.line,0),Be(i.doc,J(F.line+1,0))),i.setSelection(H.anchor,H.head),i.focus(),sr(O)}p()}),Ie(s.scroller,"touchcancel",p),Ie(s.scroller,"scroll",function(){s.scroller.clientHeight&&(Ol(i,s.scroller.scrollTop),Go(i,s.scroller.scrollLeft,!0),Ct(i,"scroll",i))}),Ie(s.scroller,"mousewheel",function(O){return Sb(i,O)}),Ie(s.scroller,"DOMMouseScroll",function(O){return Sb(i,O)}),Ie(s.wrapper,"scroll",function(){return s.wrapper.scrollTop=s.wrapper.scrollLeft=0}),s.dragFunctions={enter:function(O){kt(i,O)||Yi(O)},over:function(O){kt(i,O)||(YN(i,O),Yi(O))},start:function(O){return XN(i,O)},drop:Vt(i,VN),leave:function(O){kt(i,O)||Yb(i)}};var S=s.input.getField();Ie(S,"keyup",function(O){return s1.call(i,O)}),Ie(S,"keydown",Vt(i,a1)),Ie(S,"keypress",Vt(i,l1)),Ie(S,"focus",function(O){return Xp(i,O)}),Ie(S,"blur",function(O){return Qa(i,O)})}var gg=[];vt.defineInitHook=function(i){return gg.push(i)};function Kl(i,s,f,c){var p=i.doc,v;f==null&&(f="add"),f=="smart"&&(p.mode.indent?v=wl(i,s).state:f="prev");var b=i.options.tabSize,S=Oe(p,s),O=Le(S.text,null,b);S.stateAfter&&(S.stateAfter=null);var N=S.text.match(/^\s*/)[0],F;if(!c&&!/\S/.test(S.text))F=0,f="not";else if(f=="smart"&&(F=p.mode.indent(v,S.text.slice(N.length),S.text),F==Lt||F>150)){if(!c)return;f="prev"}f=="prev"?s>p.first?F=Le(Oe(p,s-1).text,null,b):F=0:f=="add"?F=O+i.options.indentUnit:f=="subtract"?F=O-i.options.indentUnit:typeof f=="number"&&(F=O+f),F=Math.max(0,F);var H="",G=0;if(i.options.indentWithTabs)for(var K=Math.floor(F/b);K;--K)G+=b,H+="	";if(G<F&&(H+=Ft(F-G)),H!=N)return ns(p,H,J(s,0),J(s,N.length),"+input"),S.stateAfter=null,!0;for(var te=0;te<p.sel.ranges.length;te++){var se=p.sel.ranges[te];if(se.head.line==s&&se.head.ch<N.length){var ge=J(s,N.length);lg(p,te,new ot(ge,ge));break}}}var $n=null;function af(i){$n=i}function vg(i,s,f,c,p){var v=i.doc;i.display.shift=!1,c||(c=v.sel);var b=+new Date-200,S=p=="paste"||i.state.pasteIncoming>b,O=hn(s),N=null;if(S&&c.ranges.length>1)if($n&&$n.text.join("\n")==s){if(c.ranges.length%$n.text.length==0){N=[];for(var F=0;F<$n.text.length;F++)N.push(v.splitLines($n.text[F]))}}else O.length==c.ranges.length&&i.options.pasteLinesPerSelection&&(N=Ze(O,function(ye){return[ye]}));for(var H=i.curOp.updateInput,G=c.ranges.length-1;G>=0;G--){var K=c.ranges[G],te=K.from(),se=K.to();K.empty()&&(f&&f>0?te=J(te.line,te.ch-f):i.state.overwrite&&!S?se=J(se.line,Math.min(Oe(v,se.line).text.length,se.ch+ze(O).length)):S&&$n&&$n.lineWise&&$n.text.join("\n")==O.join("\n")&&(te=se=J(te.line,0)));var ge={from:te,to:se,text:N?N[G%N.length]:O,origin:p||(S?"paste":i.state.cutIncoming>b?"cut":"+input")};rs(i.doc,ge),qt(i,"inputRead",i,ge)}s&&!S&&v1(i,s),Ja(i),i.curOp.updateInput<2&&(i.curOp.updateInput=H),i.curOp.typing=!0,i.state.pasteIncoming=i.state.cutIncoming=-1}function g1(i,s){var f=i.clipboardData&&i.clipboardData.getData("Text");if(f)return i.preventDefault(),!s.isReadOnly()&&!s.options.disableInput&&s.hasFocus()&&Rr(s,function(){return vg(s,f,0,null,"paste")}),!0}function v1(i,s){if(!(!i.options.electricChars||!i.options.smartIndent))for(var f=i.doc.sel,c=f.ranges.length-1;c>=0;c--){var p=f.ranges[c];if(!(p.head.ch>100||c&&f.ranges[c-1].head.line==p.head.line)){var v=i.getModeAt(p.head),b=!1;if(v.electricChars){for(var S=0;S<v.electricChars.length;S++)if(s.indexOf(v.electricChars.charAt(S))>-1){b=Kl(i,p.head.line,"smart");break}}else v.electricInput&&v.electricInput.test(Oe(i.doc,p.head.line).text.slice(0,p.head.ch))&&(b=Kl(i,p.head.line,"smart"));b&&qt(i,"electricInput",i,p.head.line)}}}function m1(i){for(var s=[],f=[],c=0;c<i.doc.sel.ranges.length;c++){var p=i.doc.sel.ranges[c].head.line,v={anchor:J(p,0),head:J(p+1,0)};f.push(v),s.push(i.getRange(v.anchor,v.head))}return{text:s,ranges:f}}function mg(i,s,f,c){i.setAttribute("autocorrect",f?"on":"off"),i.setAttribute("autocapitalize",c?"on":"off"),i.setAttribute("spellcheck",!!s)}function y1(){var i=M("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),s=M("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return g?i.style.width="1000px":i.setAttribute("wrap","off"),P&&(i.style.border="1px solid black"),s}function xj(i){var s=i.optionHandlers,f=i.helpers={};i.prototype={constructor:i,focus:function(){le(this).focus(),this.display.input.focus()},setOption:function(c,p){var v=this.options,b=v[c];v[c]==p&&c!="mode"||(v[c]=p,s.hasOwnProperty(c)&&Vt(this,s[c])(this,p,b),Ct(this,"optionChange",this,c))},getOption:function(c){return this.options[c]},getDoc:function(){return this.doc},addKeyMap:function(c,p){this.state.keyMaps[p?"push":"unshift"](rf(c))},removeKeyMap:function(c){for(var p=this.state.keyMaps,v=0;v<p.length;++v)if(p[v]==c||p[v].name==c)return p.splice(v,1),!0},addOverlay:pr(function(c,p){var v=c.token?c:i.getMode(this.options,c);if(v.startState)throw new Error("Overlays may not be stateful.");q(this.state.overlays,{mode:v,modeSpec:c,opaque:p&&p.opaque,priority:p&&p.priority||0},function(b){return b.priority}),this.state.modeGen++,Cr(this)}),removeOverlay:pr(function(c){for(var p=this.state.overlays,v=0;v<p.length;++v){var b=p[v].modeSpec;if(b==c||typeof c=="string"&&b.name==c){p.splice(v,1),this.state.modeGen++,Cr(this);return}}}),indentLine:pr(function(c,p,v){typeof p!="string"&&typeof p!="number"&&(p==null?p=this.options.smartIndent?"smart":"prev":p=p?"add":"subtract"),ne(this.doc,c)&&Kl(this,c,p,v)}),indentSelection:pr(function(c){for(var p=this.doc.sel.ranges,v=-1,b=0;b<p.length;b++){var S=p[b];if(S.empty())S.head.line>v&&(Kl(this,S.head.line,c,!0),v=S.head.line,b==this.doc.sel.primIndex&&Ja(this));else{var O=S.from(),N=S.to(),F=Math.max(v,O.line);v=Math.min(this.lastLine(),N.line-(N.ch?0:1))+1;for(var H=F;H<v;++H)Kl(this,H,c);var G=this.doc.sel.ranges;O.ch==0&&p.length==G.length&&G[b].from().ch>0&&lg(this.doc,b,new ot(O,G[b].to()),ft)}}}),getTokenAt:function(c,p){return Pw(this,c,p)},getLineTokens:function(c,p){return Pw(this,J(c),p,!0)},getTokenTypeAt:function(c){c=Be(this.doc,c);var p=kw(this,Oe(this.doc,c.line)),v=0,b=(p.length-1)/2,S=c.ch,O;if(S==0)O=p[2];else for(;;){var N=v+b>>1;if((N?p[N*2-1]:0)>=S)b=N;else if(p[N*2+1]<S)v=N+1;else{O=p[N*2+2];break}}var F=O?O.indexOf("overlay "):-1;return F<0?O:F==0?null:O.slice(0,F-1)},getModeAt:function(c){var p=this.doc.mode;return p.innerMode?i.innerMode(p,this.getTokenAt(c).state).mode:p},getHelper:function(c,p){return this.getHelpers(c,p)[0]},getHelpers:function(c,p){var v=[];if(!f.hasOwnProperty(p))return v;var b=f[p],S=this.getModeAt(c);if(typeof S[p]=="string")b[S[p]]&&v.push(b[S[p]]);else if(S[p])for(var O=0;O<S[p].length;O++){var N=b[S[p][O]];N&&v.push(N)}else S.helperType&&b[S.helperType]?v.push(b[S.helperType]):b[S.name]&&v.push(b[S.name]);for(var F=0;F<b._global.length;F++){var H=b._global[F];H.pred(S,this)&&Ee(v,H.val)==-1&&v.push(H.val)}return v},getStateAfter:function(c,p){var v=this.doc;return c=Sw(v,c==null?v.first+v.size-1:c),wl(this,c+1,p).state},cursorCoords:function(c,p){var v,b=this.doc.sel.primary();return c==null?v=b.head:typeof c=="object"?v=Be(this.doc,c):v=c?b.from():b.to(),Rn(this,v,p||"page")},charCoords:function(c,p){return Hc(this,Be(this.doc,c),p||"page")},coordsChar:function(c,p){return c=nb(this,c,p||"page"),Hp(this,c.left,c.top)},lineAtHeight:function(c,p){return c=nb(this,{top:c,left:0},p||"page").top,z(this.doc,c+this.display.viewOffset)},heightAtLine:function(c,p,v){var b=!1,S;if(typeof c=="number"){var O=this.doc.first+this.doc.size-1;c<this.doc.first?c=this.doc.first:c>O&&(c=O,b=!0),S=Oe(this.doc,c)}else S=c;return zc(this,S,{top:0,left:0},p||"page",v||b).top+(b?this.doc.height-Ci(S):0)},defaultTextHeight:function(){return Xa(this.display)},defaultCharWidth:function(){return Ya(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(c,p,v,b,S){var O=this.display;c=Rn(this,Be(this.doc,c));var N=c.bottom,F=c.left;if(p.style.position="absolute",p.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(p),O.sizer.appendChild(p),b=="over")N=c.top;else if(b=="above"||b=="near"){var H=Math.max(O.wrapper.clientHeight,this.doc.height),G=Math.max(O.sizer.clientWidth,O.lineSpace.clientWidth);(b=="above"||c.bottom+p.offsetHeight>H)&&c.top>p.offsetHeight?N=c.top-p.offsetHeight:c.bottom+p.offsetHeight<=H&&(N=c.bottom),F+p.offsetWidth>G&&(F=G-p.offsetWidth)}p.style.top=N+"px",p.style.left=p.style.right="",S=="right"?(F=O.sizer.clientWidth-p.offsetWidth,p.style.right="0px"):(S=="left"?F=0:S=="middle"&&(F=(O.sizer.clientWidth-p.offsetWidth)/2),p.style.left=F+"px"),v&&yN(this,{left:F,top:N,right:F+p.offsetWidth,bottom:N+p.offsetHeight})},triggerOnKeyDown:pr(a1),triggerOnKeyPress:pr(l1),triggerOnKeyUp:s1,triggerOnMouseDown:pr(u1),execCommand:function(c){if(Hl.hasOwnProperty(c))return Hl[c].call(null,this)},triggerElectric:pr(function(c){v1(this,c)}),findPosH:function(c,p,v,b){var S=1;p<0&&(S=-1,p=-p);for(var O=Be(this.doc,c),N=0;N<p&&(O=yg(this.doc,O,S,v,b),!O.hitSide);++N);return O},moveH:pr(function(c,p){var v=this;this.extendSelectionsBy(function(b){return v.display.shift||v.doc.extend||b.empty()?yg(v.doc,b.head,c,p,v.options.rtlMoveVisually):c<0?b.from():b.to()},Ge)}),deleteH:pr(function(c,p){var v=this.doc.sel,b=this.doc;v.somethingSelected()?b.replaceSelection("",null,"+delete"):as(this,function(S){var O=yg(b,S.head,c,p,!1);return c<0?{from:O,to:S.head}:{from:S.head,to:O}})}),findPosV:function(c,p,v,b){var S=1,O=b;p<0&&(S=-1,p=-p);for(var N=Be(this.doc,c),F=0;F<p;++F){var H=Rn(this,N,"div");if(O==null?O=H.left:H.left=O,N=w1(this,H,S,v),N.hitSide)break}return N},moveV:pr(function(c,p){var v=this,b=this.doc,S=[],O=!this.display.shift&&!b.extend&&b.sel.somethingSelected();if(b.extendSelectionsBy(function(F){if(O)return c<0?F.from():F.to();var H=Rn(v,F.head,"div");F.goalColumn!=null&&(H.left=F.goalColumn),S.push(H.left);var G=w1(v,H,c,p);return p=="page"&&F==b.sel.primary()&&Qp(v,Hc(v,G,"div").top-H.top),G},Ge),S.length)for(var N=0;N<b.sel.ranges.length;N++)b.sel.ranges[N].goalColumn=S[N]}),findWordAt:function(c){var p=this.doc,v=Oe(p,c.line).text,b=c.ch,S=c.ch;if(v){var O=this.getHelper(c,"wordChars");(c.sticky=="before"||S==v.length)&&b?--b:++S;for(var N=v.charAt(b),F=Fe(N,O)?function(H){return Fe(H,O)}:/\s/.test(N)?function(H){return/\s/.test(H)}:function(H){return!/\s/.test(H)&&!Fe(H)};b>0&&F(v.charAt(b-1));)--b;for(;S<v.length&&F(v.charAt(S));)++S}return new ot(J(c.line,b),J(c.line,S))},toggleOverwrite:function(c){c!=null&&c==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ie(this.display.cursorDiv,"CodeMirror-overwrite"):de(this.display.cursorDiv,"CodeMirror-overwrite"),Ct(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==X(Z(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:pr(function(c,p){Tl(this,c,p)}),getScrollInfo:function(){var c=this.display.scroller;return{left:c.scrollLeft,top:c.scrollTop,height:c.scrollHeight-Jn(this)-this.display.barHeight,width:c.scrollWidth-Jn(this)-this.display.barWidth,clientHeight:$p(this),clientWidth:Bo(this)}},scrollIntoView:pr(function(c,p){c==null?(c={from:this.doc.sel.primary().head,to:null},p==null&&(p=this.options.cursorScrollMargin)):typeof c=="number"?c={from:J(c,0),to:null}:c.from==null&&(c={from:c,to:null}),c.to||(c.to=c.from),c.margin=p||0,c.from.line!=null?wN(this,c):db(this,c.from,c.to,c.margin)}),setSize:pr(function(c,p){var v=this,b=function(O){return typeof O=="number"||/^\d+$/.test(String(O))?O+"px":O};c!=null&&(this.display.wrapper.style.width=b(c)),p!=null&&(this.display.wrapper.style.height=b(p)),this.options.lineWrapping&&eb(this);var S=this.display.viewFrom;this.doc.iter(S,this.display.viewTo,function(O){if(O.widgets){for(var N=0;N<O.widgets.length;N++)if(O.widgets[N].noHScroll){to(v,S,"widget");break}}++S}),this.curOp.forceUpdate=!0,Ct(this,"refresh",this)}),operation:function(c){return Rr(this,c)},startOperation:function(){return Vo(this)},endOperation:function(){return Xo(this)},refresh:pr(function(){var c=this.display.cachedTextHeight;Cr(this),this.curOp.forceUpdate=!0,Cl(this),Tl(this,this.doc.scrollLeft,this.doc.scrollTop),eg(this.display),(c==null||Math.abs(c-Xa(this.display))>.5||this.options.lineWrapping)&&Kp(this),Ct(this,"refresh",this)}),swapDoc:pr(function(c){var p=this.doc;return p.cm=null,this.state.selectingText&&this.state.selectingText(),Tb(this,c),Cl(this),this.display.input.reset(),Tl(this,c.scrollLeft,c.scrollTop),this.curOp.forceScroll=!0,qt(this,"swapDoc",this,p),p}),phrase:function(c){var p=this.options.phrases;return p&&Object.prototype.hasOwnProperty.call(p,c)?p[c]:c},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ln(i),i.registerHelper=function(c,p,v){f.hasOwnProperty(c)||(f[c]=i[c]={_global:[]}),f[c][p]=v},i.registerGlobalHelper=function(c,p,v,b){i.registerHelper(c,p,b),f[c]._global.push({pred:v,val:b})}}function yg(i,s,f,c,p){var v=s,b=f,S=Oe(i,s.line),O=p&&i.direction=="rtl"?-f:f;function N(){var xe=s.line+O;return xe<i.first||xe>=i.first+i.size?!1:(s=new J(xe,s.ch,s.sticky),S=Oe(i,xe))}function F(xe){var we;if(c=="codepoint"){var Te=S.text.charCodeAt(s.ch+(f>0?0:-1));if(isNaN(Te))we=null;else{var Re=f>0?Te>=55296&&Te<56320:Te>=56320&&Te<57343;we=new J(s.line,Math.max(0,Math.min(S.text.length,s.ch+f*(Re?2:1))),-f)}}else p?we=rj(i.cm,S,s,f):we=cg(S,s,f);if(we==null)if(!xe&&N())s=fg(p,i.cm,S,s.line,O);else return!1;else s=we;return!0}if(c=="char"||c=="codepoint")F();else if(c=="column")F(!0);else if(c=="word"||c=="group")for(var H=null,G=c=="group",K=i.cm&&i.cm.getHelper(s,"wordChars"),te=!0;!(f<0&&!F(!te));te=!1){var se=S.text.charAt(s.ch)||"\n",ge=Fe(se,K)?"w":G&&se=="\n"?"n":!G||/\s/.test(se)?null:"p";if(G&&!te&&!ge&&(ge="s"),H&&H!=ge){f<0&&(f=1,F(),s.sticky="after");break}if(ge&&(H=ge),f>0&&!F(!te))break}var ye=Zc(i,s,v,b,!0);return it(v,ye)&&(ye.hitSide=!0),ye}function w1(i,s,f,c){var p=i.doc,v=s.left,b;if(c=="page"){var S=Math.min(i.display.wrapper.clientHeight,le(i).innerHeight||p(i).documentElement.clientHeight),O=Math.max(S-.5*Xa(i.display),3);b=(f>0?s.bottom:s.top)+f*O}else c=="line"&&(b=f>0?s.bottom+3:s.top-3);for(var N;N=Hp(i,v,b),!!N.outside;){if(f<0?b<=0:b>=p.height){N.hitSide=!0;break}b+=f*5}return N}var at=function(i){this.cm=i,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ne,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};at.prototype.init=function(i){var s=this,f=this,c=f.cm,p=f.div=i.lineDiv;p.contentEditable=!0,mg(p,c.options.spellcheck,c.options.autocorrect,c.options.autocapitalize);function v(S){for(var O=S.target;O;O=O.parentNode){if(O==p)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(O.className))break}return!1}Ie(p,"paste",function(S){!v(S)||kt(c,S)||g1(S,c)||h<=11&&setTimeout(Vt(c,function(){return s.updateFromDOM()}),20)}),Ie(p,"compositionstart",function(S){s.composing={data:S.data,done:!1}}),Ie(p,"compositionupdate",function(S){s.composing||(s.composing={data:S.data,done:!1})}),Ie(p,"compositionend",function(S){s.composing&&(S.data!=s.composing.data&&s.readFromDOMSoon(),s.composing.done=!0)}),Ie(p,"touchstart",function(){return f.forceCompositionEnd()}),Ie(p,"input",function(){s.composing||s.readFromDOMSoon()});function b(S){if(!(!v(S)||kt(c,S))){if(c.somethingSelected())af({lineWise:!1,text:c.getSelections()}),S.type=="cut"&&c.replaceSelection("",null,"cut");else if(c.options.lineWiseCopyCut){var O=m1(c);af({lineWise:!0,text:O.text}),S.type=="cut"&&c.operation(function(){c.setSelections(O.ranges,0,ft),c.replaceSelection("",null,"cut")})}else return;if(S.clipboardData){S.clipboardData.clearData();var N=$n.text.join("\n");if(S.clipboardData.setData("Text",N),S.clipboardData.getData("Text")==N){S.preventDefault();return}}var F=y1(),H=F.firstChild;mg(H),c.display.lineSpace.insertBefore(F,c.display.lineSpace.firstChild),H.value=$n.text.join("\n");var G=X(ae(p));he(H),setTimeout(function(){c.display.lineSpace.removeChild(F),G.focus(),G==p&&f.showPrimarySelection()},50)}}Ie(p,"copy",b),Ie(p,"cut",b)},at.prototype.screenReaderLabelChanged=function(i){i?this.div.setAttribute("aria-label",i):this.div.removeAttribute("aria-label")},at.prototype.prepareSelection=function(){var i=ub(this.cm,!1);return i.focus=X(ae(this.div))==this.div,i},at.prototype.showSelection=function(i,s){!i||!this.cm.display.view.length||((i.focus||s)&&this.showPrimarySelection(),this.showMultipleSelections(i))},at.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},at.prototype.showPrimarySelection=function(){var i=this.getSelection(),s=this.cm,f=s.doc.sel.primary(),c=f.from(),p=f.to();if(s.display.viewTo==s.display.viewFrom||c.line>=s.display.viewTo||p.line<s.display.viewFrom){i.removeAllRanges();return}var v=sf(s,i.anchorNode,i.anchorOffset),b=sf(s,i.focusNode,i.focusOffset);if(!(v&&!v.bad&&b&&!b.bad&&be(Ka(v,b),c)==0&&be(Er(v,b),p)==0)){var S=s.display.view,O=c.line>=s.display.viewFrom&&b1(s,c)||{node:S[0].measure.map[2],offset:0},N=p.line<s.display.viewTo&&b1(s,p);if(!N){var F=S[S.length-1].measure,H=F.maps?F.maps[F.maps.length-1]:F.map;N={node:H[H.length-1],offset:H[H.length-2]-H[H.length-3]}}if(!O||!N){i.removeAllRanges();return}var G=i.rangeCount&&i.getRangeAt(0),K;try{K=oe(O.node,O.offset,N.offset,N.node)}catch{}K&&(!o&&s.state.focused?(i.collapse(O.node,O.offset),K.collapsed||(i.removeAllRanges(),i.addRange(K))):(i.removeAllRanges(),i.addRange(K)),G&&i.anchorNode==null?i.addRange(G):o&&this.startGracePeriod()),this.rememberSelection()}},at.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){i.gracePeriod=!1,i.selectionChanged()&&i.cm.operation(function(){return i.cm.curOp.selectionChanged=!0})},20)},at.prototype.showMultipleSelections=function(i){_(this.cm.display.cursorDiv,i.cursors),_(this.cm.display.selectionDiv,i.selection)},at.prototype.rememberSelection=function(){var i=this.getSelection();this.lastAnchorNode=i.anchorNode,this.lastAnchorOffset=i.anchorOffset,this.lastFocusNode=i.focusNode,this.lastFocusOffset=i.focusOffset},at.prototype.selectionInEditor=function(){var i=this.getSelection();if(!i.rangeCount)return!1;var s=i.getRangeAt(0).commonAncestorContainer;return re(this.div,s)},at.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||X(ae(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},at.prototype.blur=function(){this.div.blur()},at.prototype.getField=function(){return this.div},at.prototype.supportsTouch=function(){return!0},at.prototype.receivedFocus=function(){var i=this,s=this;this.selectionInEditor()?setTimeout(function(){return i.pollSelection()},20):Rr(this.cm,function(){return s.cm.curOp.selectionChanged=!0});function f(){s.cm.state.focused&&(s.pollSelection(),s.polling.set(s.cm.options.pollInterval,f))}this.polling.set(this.cm.options.pollInterval,f)},at.prototype.selectionChanged=function(){var i=this.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset},at.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var i=this.getSelection(),s=this.cm;if(A&&w&&this.cm.display.gutterSpecs.length&&Sj(i.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var f=sf(s,i.anchorNode,i.anchorOffset),c=sf(s,i.focusNode,i.focusOffset);f&&c&&Rr(s,function(){lr(s.doc,no(f,c),ft),(f.bad||c.bad)&&(s.curOp.selectionChanged=!0)})}}},at.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var i=this.cm,s=i.display,f=i.doc.sel.primary(),c=f.from(),p=f.to();if(c.ch==0&&c.line>i.firstLine()&&(c=J(c.line-1,Oe(i.doc,c.line-1).length)),p.ch==Oe(i.doc,p.line).text.length&&p.line<i.lastLine()&&(p=J(p.line+1,0)),c.line<s.viewFrom||p.line>s.viewTo-1)return!1;var v,b,S;c.line==s.viewFrom||(v=Ko(i,c.line))==0?(b=I(s.view[0].line),S=s.view[0].node):(b=I(s.view[v].line),S=s.view[v-1].node.nextSibling);var O=Ko(i,p.line),N,F;if(O==s.view.length-1?(N=s.viewTo-1,F=s.lineDiv.lastChild):(N=I(s.view[O+1].line)-1,F=s.view[O+1].node.previousSibling),!S)return!1;for(var H=i.doc.splitLines(Ej(i,S,F,b,N)),G=Si(i.doc,J(b,0),J(N,Oe(i.doc,N).text.length));H.length>1&&G.length>1;)if(ze(H)==ze(G))H.pop(),G.pop(),N--;else if(H[0]==G[0])H.shift(),G.shift(),b++;else break;for(var K=0,te=0,se=H[0],ge=G[0],ye=Math.min(se.length,ge.length);K<ye&&se.charCodeAt(K)==ge.charCodeAt(K);)++K;for(var xe=ze(H),we=ze(G),Te=Math.min(xe.length-(H.length==1?K:0),we.length-(G.length==1?K:0));te<Te&&xe.charCodeAt(xe.length-te-1)==we.charCodeAt(we.length-te-1);)++te;if(H.length==1&&G.length==1&&b==c.line)for(;K&&K>c.ch&&xe.charCodeAt(xe.length-te-1)==we.charCodeAt(we.length-te-1);)K--,te++;H[H.length-1]=xe.slice(0,xe.length-te).replace(/^\u200b+/,""),H[0]=H[0].slice(K).replace(/\u200b+$/,"");var Re=J(b,K),je=J(N,G.length?ze(G).length-te:0);if(H.length>1||H[0]||be(Re,je))return ns(i.doc,H,Re,je,"+input"),!0},at.prototype.ensurePolled=function(){this.forceCompositionEnd()},at.prototype.reset=function(){this.forceCompositionEnd()},at.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},at.prototype.readFromDOMSoon=function(){var i=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(i.readDOMTimeout=null,i.composing)if(i.composing.done)i.composing=null;else return;i.updateFromDOM()},80))},at.prototype.updateFromDOM=function(){var i=this;(this.cm.isReadOnly()||!this.pollContent())&&Rr(this.cm,function(){return Cr(i.cm)})},at.prototype.setUneditable=function(i){i.contentEditable="false"},at.prototype.onKeyPress=function(i){i.charCode==0||this.composing||(i.preventDefault(),this.cm.isReadOnly()||Vt(this.cm,vg)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0))},at.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")},at.prototype.onContextMenu=function(){},at.prototype.resetPosition=function(){},at.prototype.needsContentAttribute=!0;function b1(i,s){var f=Dp(i,s.line);if(!f||f.hidden)return null;var c=Oe(i.doc,s.line),p=Xw(f,c,s.line),v=Je(c,i.doc.direction),b="left";if(v){var S=Pn(v,s.ch);b=S%2?"right":"left"}var O=Jw(p.map,s.ch,b);return O.offset=O.collapse=="right"?O.end:O.start,O}function Sj(i){for(var s=i;s;s=s.parentNode)if(/CodeMirror-gutter-wrapper/.test(s.className))return!0;return!1}function ls(i,s){return s&&(i.bad=!0),i}function Ej(i,s,f,c,p){var v="",b=!1,S=i.doc.lineSeparator(),O=!1;function N(K){return function(te){return te.id==K}}function F(){b&&(v+=S,O&&(v+=S),b=O=!1)}function H(K){K&&(F(),v+=K)}function G(K){if(K.nodeType==1){var te=K.getAttribute("cm-text");if(te){H(te);return}var se=K.getAttribute("cm-marker"),ge;if(se){var ye=i.findMarks(J(c,0),J(p+1,0),N(+se));ye.length&&(ge=ye[0].find(0))&&H(Si(i.doc,ge.from,ge.to).join(S));return}if(K.getAttribute("contenteditable")=="false")return;var xe=/^(pre|div|p|li|table|br)$/i.test(K.nodeName);if(!/^br$/i.test(K.nodeName)&&K.textContent.length==0)return;xe&&F();for(var we=0;we<K.childNodes.length;we++)G(K.childNodes[we]);/^(pre|p)$/i.test(K.nodeName)&&(O=!0),xe&&(b=!0)}else K.nodeType==3&&H(K.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;G(s),s!=f;)s=s.nextSibling,O=!1;return v}function sf(i,s,f){var c;if(s==i.display.lineDiv){if(c=i.display.lineDiv.childNodes[f],!c)return ls(i.clipPos(J(i.display.viewTo-1)),!0);s=null,f=0}else for(c=s;;c=c.parentNode){if(!c||c==i.display.lineDiv)return null;if(c.parentNode&&c.parentNode==i.display.lineDiv)break}for(var p=0;p<i.display.view.length;p++){var v=i.display.view[p];if(v.node==c)return Cj(v,s,f)}}function Cj(i,s,f){var c=i.text.firstChild,p=!1;if(!s||!re(c,s))return ls(J(I(i.line),0),!0);if(s==c&&(p=!0,s=c.childNodes[f],f=0,!s)){var v=i.rest?ze(i.rest):i.line;return ls(J(I(v),v.text.length),p)}var b=s.nodeType==3?s:null,S=s;for(!b&&s.childNodes.length==1&&s.firstChild.nodeType==3&&(b=s.firstChild,f&&(f=b.nodeValue.length));S.parentNode!=c;)S=S.parentNode;var O=i.measure,N=O.maps;function F(ge,ye,xe){for(var we=-1;we<(N?N.length:0);we++)for(var Te=we<0?O.map:N[we],Re=0;Re<Te.length;Re+=3){var je=Te[Re+2];if(je==ge||je==ye){var Xe=I(we<0?i.line:i.rest[we]),dt=Te[Re]+xe;return(xe<0||je!=ge)&&(dt=Te[Re+(xe?1:0)]),J(Xe,dt)}}}var H=F(b,S,f);if(H)return ls(H,p);for(var G=S.nextSibling,K=b?b.nodeValue.length-f:0;G;G=G.nextSibling){if(H=F(G,G.firstChild,0),H)return ls(J(H.line,H.ch-K),p);K+=G.textContent.length}for(var te=S.previousSibling,se=f;te;te=te.previousSibling){if(H=F(te,te.firstChild,-1),H)return ls(J(H.line,H.ch+se),p);se+=te.textContent.length}}var Nt=function(i){this.cm=i,this.prevInput="",this.pollingFast=!1,this.polling=new Ne,this.hasSelection=!1,this.composing=null,this.resetting=!1};Nt.prototype.init=function(i){var s=this,f=this,c=this.cm;this.createField(i);var p=this.textarea;i.wrapper.insertBefore(this.wrapper,i.wrapper.firstChild),P&&(p.style.width="0px"),Ie(p,"input",function(){d&&h>=9&&s.hasSelection&&(s.hasSelection=null),f.poll()}),Ie(p,"paste",function(b){kt(c,b)||g1(b,c)||(c.state.pasteIncoming=+new Date,f.fastPoll())});function v(b){if(!kt(c,b)){if(c.somethingSelected())af({lineWise:!1,text:c.getSelections()});else if(c.options.lineWiseCopyCut){var S=m1(c);af({lineWise:!0,text:S.text}),b.type=="cut"?c.setSelections(S.ranges,null,ft):(f.prevInput="",p.value=S.text.join("\n"),he(p))}else return;b.type=="cut"&&(c.state.cutIncoming=+new Date)}}Ie(p,"cut",v),Ie(p,"copy",v),Ie(i.scroller,"paste",function(b){if(!(ki(i,b)||kt(c,b))){if(!p.dispatchEvent){c.state.pasteIncoming=+new Date,f.focus();return}var S=new Event("paste");S.clipboardData=b.clipboardData,p.dispatchEvent(S)}}),Ie(i.lineSpace,"selectstart",function(b){ki(i,b)||sr(b)}),Ie(p,"compositionstart",function(){var b=c.getCursor("from");f.composing&&f.composing.range.clear(),f.composing={start:b,range:c.markText(b,c.getCursor("to"),{className:"CodeMirror-composing"})}}),Ie(p,"compositionend",function(){f.composing&&(f.poll(),f.composing.range.clear(),f.composing=null)})},Nt.prototype.createField=function(i){this.wrapper=y1(),this.textarea=this.wrapper.firstChild;var s=this.cm.options;mg(this.textarea,s.spellcheck,s.autocorrect,s.autocapitalize)},Nt.prototype.screenReaderLabelChanged=function(i){i?this.textarea.setAttribute("aria-label",i):this.textarea.removeAttribute("aria-label")},Nt.prototype.prepareSelection=function(){var i=this.cm,s=i.display,f=i.doc,c=ub(i);if(i.options.moveInputWithCursor){var p=Rn(i,f.sel.primary().head,"div"),v=s.wrapper.getBoundingClientRect(),b=s.lineDiv.getBoundingClientRect();c.teTop=Math.max(0,Math.min(s.wrapper.clientHeight-10,p.top+b.top-v.top)),c.teLeft=Math.max(0,Math.min(s.wrapper.clientWidth-10,p.left+b.left-v.left))}return c},Nt.prototype.showSelection=function(i){var s=this.cm,f=s.display;_(f.cursorDiv,i.cursors),_(f.selectionDiv,i.selection),i.teTop!=null&&(this.wrapper.style.top=i.teTop+"px",this.wrapper.style.left=i.teLeft+"px")},Nt.prototype.reset=function(i){if(!(this.contextMenuPending||this.composing&&i)){var s=this.cm;if(this.resetting=!0,s.somethingSelected()){this.prevInput="";var f=s.getSelection();this.textarea.value=f,s.state.focused&&he(this.textarea),d&&h>=9&&(this.hasSelection=f)}else i||(this.prevInput=this.textarea.value="",d&&h>=9&&(this.hasSelection=null));this.resetting=!1}},Nt.prototype.getField=function(){return this.textarea},Nt.prototype.supportsTouch=function(){return!1},Nt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!L||X(ae(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Nt.prototype.blur=function(){this.textarea.blur()},Nt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Nt.prototype.receivedFocus=function(){this.slowPoll()},Nt.prototype.slowPoll=function(){var i=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){i.poll(),i.cm.state.focused&&i.slowPoll()})},Nt.prototype.fastPoll=function(){var i=!1,s=this;s.pollingFast=!0;function f(){var c=s.poll();!c&&!i?(i=!0,s.polling.set(60,f)):(s.pollingFast=!1,s.slowPoll())}s.polling.set(20,f)},Nt.prototype.poll=function(){var i=this,s=this.cm,f=this.textarea,c=this.prevInput;if(this.contextMenuPending||this.resetting||!s.state.focused||Ji(f)&&!c&&!this.composing||s.isReadOnly()||s.options.disableInput||s.state.keySeq)return!1;var p=f.value;if(p==c&&!s.somethingSelected())return!1;if(d&&h>=9&&this.hasSelection===p||R&&/[\uf700-\uf7ff]/.test(p))return s.display.input.reset(),!1;if(s.doc.sel==s.display.selForContextMenu){var v=p.charCodeAt(0);if(v==8203&&!c&&(c=""),v==8666)return this.reset(),this.cm.execCommand("undo")}for(var b=0,S=Math.min(c.length,p.length);b<S&&c.charCodeAt(b)==p.charCodeAt(b);)++b;return Rr(s,function(){vg(s,p.slice(b),c.length-b,null,i.composing?"*compose":null),p.length>1e3||p.indexOf("\n")>-1?f.value=i.prevInput="":i.prevInput=p,i.composing&&(i.composing.range.clear(),i.composing.range=s.markText(i.composing.start,s.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Nt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Nt.prototype.onKeyPress=function(){d&&h>=9&&(this.hasSelection=null),this.fastPoll()},Nt.prototype.onContextMenu=function(i){var s=this,f=s.cm,c=f.display,p=s.textarea;s.contextMenuPending&&s.contextMenuPending();var v=Uo(f,i),b=c.scroller.scrollTop;if(!v||C)return;var S=f.options.resetSelectionOnContextMenu;S&&f.doc.sel.contains(v)==-1&&Vt(f,lr)(f.doc,no(v),ft);var O=p.style.cssText,N=s.wrapper.style.cssText,F=s.wrapper.offsetParent.getBoundingClientRect();s.wrapper.style.cssText="position: static",p.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(i.clientY-F.top-5)+"px; left: "+(i.clientX-F.left-5)+"px;\n      z-index: 1000; background: "+(d?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var H;g&&(H=p.ownerDocument.defaultView.scrollY),c.input.focus(),g&&p.ownerDocument.defaultView.scrollTo(null,H),c.input.reset(),f.somethingSelected()||(p.value=s.prevInput=" "),s.contextMenuPending=K,c.selForContextMenu=f.doc.sel,clearTimeout(c.detectingSelectAll);function G(){if(p.selectionStart!=null){var se=f.somethingSelected(),ge=""+(se?p.value:"");p.value="",p.value=ge,s.prevInput=se?"":"",p.selectionStart=1,p.selectionEnd=ge.length,c.selForContextMenu=f.doc.sel}}function K(){if(s.contextMenuPending==K&&(s.contextMenuPending=!1,s.wrapper.style.cssText=N,p.style.cssText=O,d&&h<9&&c.scrollbars.setScrollTop(c.scroller.scrollTop=b),p.selectionStart!=null)){(!d||d&&h<9)&&G();var se=0,ge=function(){c.selForContextMenu==f.doc.sel&&p.selectionStart==0&&p.selectionEnd>0&&s.prevInput==""?Vt(f,Fb)(f):se++<10?c.detectingSelectAll=setTimeout(ge,500):(c.selForContextMenu=null,c.input.reset())};c.detectingSelectAll=setTimeout(ge,200)}}if(d&&h>=9&&G(),Y){Yi(i);var te=function(){ar(window,"mouseup",te),setTimeout(K,20)};Ie(window,"mouseup",te)}else setTimeout(K,50)},Nt.prototype.readOnlyChanged=function(i){i||this.reset(),this.textarea.disabled=i=="nocursor",this.textarea.readOnly=!!i},Nt.prototype.setUneditable=function(){},Nt.prototype.needsContentAttribute=!1;function kj(i,s){if(s=s?me(s):{},s.value=i.value,!s.tabindex&&i.tabIndex&&(s.tabindex=i.tabIndex),!s.placeholder&&i.placeholder&&(s.placeholder=i.placeholder),s.autofocus==null){var f=X(ae(i));s.autofocus=f==i||i.getAttribute("autofocus")!=null&&f==document.body}function c(){i.value=S.getValue()}var p;if(i.form&&(Ie(i.form,"submit",c),!s.leaveSubmitMethodAlone)){var v=i.form;p=v.submit;try{var b=v.submit=function(){c(),v.submit=p,v.submit(),v.submit=b}}catch{}}s.finishInit=function(O){O.save=c,O.getTextArea=function(){return i},O.toTextArea=function(){O.toTextArea=isNaN,c(),i.parentNode.removeChild(O.getWrapperElement()),i.style.display="",i.form&&(ar(i.form,"submit",c),!s.leaveSubmitMethodAlone&&typeof i.form.submit=="function"&&(i.form.submit=p))}},i.style.display="none";var S=vt(function(O){return i.parentNode.insertBefore(O,i.nextSibling)},s);return S}function Tj(i){i.off=ar,i.on=Ie,i.wheelEventPixels=MN,i.Doc=kr,i.splitLines=hn,i.countColumn=Le,i.findColumn=qe,i.isWordChar=He,i.Pass=Lt,i.signal=Ct,i.Line=Ga,i.changeEnd=io,i.scrollbarModel=gb,i.Pos=J,i.cmpPos=be,i.modes=za,i.mimeModes=An,i.resolveMode=Ha,i.getMode=Ba,i.modeExtensions=Zi,i.extendMode=Wa,i.copyState=Yn,i.startState=Ua,i.innerMode=ml,i.commands=Hl,i.keyMap=Oi,i.keyName=t1,i.isModifierKey=Zb,i.lookupKey=os,i.normalizeKeyMap=tj,i.StringStream=Tt,i.SharedTextMarker=Dl,i.TextMarker=ao,i.LineWidget=$l,i.e_preventDefault=sr,i.e_stopPropagation=Da,i.e_stop=Yi,i.addClass=ie,i.contains=re,i.rmClass=de,i.keyNames=so}mj(vt),xj(vt);var Oj="iter insert remove copy getEditor constructor".split(" ");for(var lf in kr.prototype)kr.prototype.hasOwnProperty(lf)&&Ee(Oj,lf)<0&&(vt.prototype[lf]=function(i){return function(){return i.apply(this.doc,arguments)}}(kr.prototype[lf]));return Ln(kr),vt.inputStyles={textarea:Nt,contenteditable:at},vt.defineMode=function(i){!vt.defaults.mode&&i!="null"&&(vt.defaults.mode=i),Mn.apply(this,arguments)},vt.defineMIME=Ho,vt.defineMode("null",function(){return{token:function(i){return i.skipToEnd()}}}),vt.defineMIME("text/plain","null"),vt.defineExtension=function(i,s){vt.prototype[i]=s},vt.defineDocExtension=function(i,s){kr.prototype[i]=s},vt.fromTextArea=kj,Tj(vt),vt.version="5.65.16",vt})}(iv)),iv.exports}function ah(){return ah=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ah.apply(this,arguments)}function Nu(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Nu=function(r){return typeof r}:Nu=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Nu(e)}var fP=function(){var e=function(r,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var l in a)a.hasOwnProperty(l)&&(o[l]=a[l])},e(r,n)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(rc,"__esModule",{value:!0});rc.UnControlled=hP=rc.Controlled=void 0;var sh=E,Zr=typeof navigator>"u"||typeof tr<"u"&&tr.PREVENT_CODEMIRROR_RENDER===!0,oi;Zr||(oi=fl());var ov=function(){function e(){}return e.equals=function(t,r){var n=this,o=Object.keys,a=Nu(t),l=Nu(r);return t&&r&&a==="object"&&a===l?o(t).length===o(r).length&&o(t).every(function(u){return n.equals(t[u],r[u])}):t===r},e}(),dP=function(){function e(t,r){this.editor=t,this.props=r}return e.prototype.delegateCursor=function(t,r,n){var o=this.editor.getDoc();n&&this.editor.focus(),r?o.setCursor(t):o.setCursor(t,null,{scroll:!1})},e.prototype.delegateScroll=function(t){this.editor.scrollTo(t.x,t.y)},e.prototype.delegateSelection=function(t,r){var n=this.editor.getDoc();n.setSelections(t),r&&this.editor.focus()},e.prototype.apply=function(t){t&&t.selection&&t.selection.ranges&&this.delegateSelection(t.selection.ranges,t.selection.focus||!1),t&&t.cursor&&this.delegateCursor(t.cursor,t.autoScroll||!1,this.editor.getOption("autofocus")||!1),t&&t.scroll&&this.delegateScroll(t.scroll)},e.prototype.applyNext=function(t,r,n){t&&t.selection&&t.selection.ranges&&r&&r.selection&&r.selection.ranges&&!ov.equals(t.selection.ranges,r.selection.ranges)&&this.delegateSelection(r.selection.ranges,r.selection.focus||!1),t&&t.cursor&&r&&r.cursor&&!ov.equals(t.cursor,r.cursor)&&this.delegateCursor(n.cursor||r.cursor,r.autoScroll||!1,r.autoCursor||!1),t&&t.scroll&&r&&r.scroll&&!ov.equals(t.scroll,r.scroll)&&this.delegateScroll(r.scroll)},e.prototype.applyUserDefined=function(t,r){r&&r.cursor&&this.delegateCursor(r.cursor,t.autoScroll||!1,this.editor.getOption("autofocus")||!1)},e.prototype.wire=function(t){var r=this;Object.keys(t||{}).filter(function(n){return/^on/.test(n)}).forEach(function(n){switch(n){case"onBlur":r.editor.on("blur",function(o,a){r.props.onBlur(r.editor,a)});break;case"onContextMenu":{r.editor.on("contextmenu",function(o,a){r.props.onContextMenu(r.editor,a)});break}case"onCopy":{r.editor.on("copy",function(o,a){r.props.onCopy(r.editor,a)});break}case"onCursor":r.editor.on("cursorActivity",function(o){r.props.onCursor(r.editor,r.editor.getDoc().getCursor())});break;case"onCursorActivity":r.editor.on("cursorActivity",function(o){r.props.onCursorActivity(r.editor)});break;case"onCut":{r.editor.on("cut",function(o,a){r.props.onCut(r.editor,a)});break}case"onDblClick":{r.editor.on("dblclick",function(o,a){r.props.onDblClick(r.editor,a)});break}case"onDragEnter":r.editor.on("dragenter",function(o,a){r.props.onDragEnter(r.editor,a)});break;case"onDragLeave":{r.editor.on("dragleave",function(o,a){r.props.onDragLeave(r.editor,a)});break}case"onDragOver":r.editor.on("dragover",function(o,a){r.props.onDragOver(r.editor,a)});break;case"onDragStart":{r.editor.on("dragstart",function(o,a){r.props.onDragStart(r.editor,a)});break}case"onDrop":r.editor.on("drop",function(o,a){r.props.onDrop(r.editor,a)});break;case"onFocus":r.editor.on("focus",function(o,a){r.props.onFocus(r.editor,a)});break;case"onGutterClick":r.editor.on("gutterClick",function(o,a,l,u){r.props.onGutterClick(r.editor,a,l,u)});break;case"onInputRead":r.editor.on("inputRead",function(o,a){r.props.onInputRead(r.editor,a)});break;case"onKeyDown":r.editor.on("keydown",function(o,a){r.props.onKeyDown(r.editor,a)});break;case"onKeyHandled":r.editor.on("keyHandled",function(o,a,l){r.props.onKeyHandled(r.editor,a,l)});break;case"onKeyPress":r.editor.on("keypress",function(o,a){r.props.onKeyPress(r.editor,a)});break;case"onKeyUp":r.editor.on("keyup",function(o,a){r.props.onKeyUp(r.editor,a)});break;case"onMouseDown":{r.editor.on("mousedown",function(o,a){r.props.onMouseDown(r.editor,a)});break}case"onPaste":{r.editor.on("paste",function(o,a){r.props.onPaste(r.editor,a)});break}case"onRenderLine":{r.editor.on("renderLine",function(o,a,l){r.props.onRenderLine(r.editor,a,l)});break}case"onScroll":r.editor.on("scroll",function(o){r.props.onScroll(r.editor,r.editor.getScrollInfo())});break;case"onSelection":r.editor.on("beforeSelectionChange",function(o,a){r.props.onSelection(r.editor,a)});break;case"onTouchStart":{r.editor.on("touchstart",function(o,a){r.props.onTouchStart(r.editor,a)});break}case"onUpdate":r.editor.on("update",function(o){r.props.onUpdate(r.editor)});break;case"onViewportChange":r.editor.on("viewportChange",function(o,a,l){r.props.onViewportChange(r.editor,a,l)});break}})},e}(),T9=function(e){fP(t,e);function t(r){var n=e.call(this,r)||this;return Zr||(n.applied=!1,n.appliedNext=!1,n.appliedUserDefined=!1,n.deferred=null,n.emulating=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1),n}return t.prototype.hydrate=function(r){var n=this,o=r&&r.options?r.options:{},a=ah({},oi.defaults,this.editor.options,o),l=Object.keys(a).some(function(u){return n.editor.getOption(u)!==a[u]});l&&Object.keys(a).forEach(function(u){o.hasOwnProperty(u)&&n.editor.getOption(u)!==a[u]&&(n.editor.setOption(u,a[u]),n.mirror.setOption(u,a[u]))}),this.hydrated||(this.deferred?this.resolveChange(r.value):this.initChange(r.value||"")),this.hydrated=!0},t.prototype.initChange=function(r){this.emulating=!0;var n=this.editor.getDoc(),o=n.lastLine(),a=n.getLine(n.lastLine()).length;n.replaceRange(r||"",{line:0,ch:0},{line:o,ch:a}),this.mirror.setValue(r),n.clearHistory(),this.mirror.clearHistory(),this.emulating=!1},t.prototype.resolveChange=function(r){this.emulating=!0;var n=this.editor.getDoc();if(this.deferred.origin==="undo"?n.undo():this.deferred.origin==="redo"?n.redo():n.replaceRange(this.deferred.text,this.deferred.from,this.deferred.to,this.deferred.origin),r&&r!==n.getValue()){var o=n.getCursor();n.setValue(r),n.setCursor(o)}this.emulating=!1,this.deferred=null},t.prototype.mirrorChange=function(r){var n=this.editor.getDoc();return r.origin==="undo"?(n.setHistory(this.mirror.getHistory()),this.mirror.undo()):r.origin==="redo"?(n.setHistory(this.mirror.getHistory()),this.mirror.redo()):this.mirror.replaceRange(r.text,r.from,r.to,r.origin),this.mirror.getValue()},t.prototype.componentDidMount=function(){var r=this;Zr||(this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&oi.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=oi(this.ref,this.props.options),this.shared=new dP(this.editor,this.props),this.mirror=oi(function(){},this.props.options),this.editor.on("electricInput",function(){r.mirror.setHistory(r.editor.getDoc().getHistory())}),this.editor.on("cursorActivity",function(){r.mirror.setCursor(r.editor.getDoc().getCursor())}),this.editor.on("beforeChange",function(n,o){if(!r.emulating){o.cancel(),r.deferred=o;var a=r.mirrorChange(r.deferred);r.props.onBeforeChange&&r.props.onBeforeChange(r.editor,r.deferred,a)}}),this.editor.on("change",function(n,o){r.mounted&&r.props.onChange&&r.props.onChange(r.editor,o,r.editor.getValue())}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getOption("autofocus")&&this.editor.focus(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentDidUpdate=function(r){if(!Zr){var n={cursor:null};this.props.value!==r.value&&(this.hydrated=!1),!this.props.autoCursor&&this.props.autoCursor!==void 0&&(n.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.appliedNext||(this.shared.applyNext(r,this.props,n),this.appliedNext=!0),this.shared.applyUserDefined(r,n),this.appliedUserDefined=!0}},t.prototype.componentWillUnmount=function(){Zr||this.props.editorWillUnmount&&this.props.editorWillUnmount(oi)},t.prototype.shouldComponentUpdate=function(r,n){return!Zr},t.prototype.render=function(){var r=this;if(Zr)return null;var n=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return sh.createElement("div",{className:n,ref:function(a){return r.ref=a}})},t}(sh.Component),hP=rc.Controlled=T9,O9=function(e){fP(t,e);function t(r){var n=e.call(this,r)||this;return Zr||(n.applied=!1,n.appliedUserDefined=!1,n.continueChange=!1,n.detached=!1,n.hydrated=!1,n.initCb=function(){n.props.editorDidConfigure&&n.props.editorDidConfigure(n.editor)},n.mounted=!1,n.onBeforeChangeCb=function(){n.continueChange=!0}),n}return t.prototype.hydrate=function(r){var n=this,o=r&&r.options?r.options:{},a=ah({},oi.defaults,this.editor.options,o),l=Object.keys(a).some(function(g){return n.editor.getOption(g)!==a[g]});if(l&&Object.keys(a).forEach(function(g){o.hasOwnProperty(g)&&n.editor.getOption(g)!==a[g]&&n.editor.setOption(g,a[g])}),!this.hydrated){var u=this.editor.getDoc(),d=u.lastLine(),h=u.getLine(u.lastLine()).length;u.replaceRange(r.value||"",{line:0,ch:0},{line:d,ch:h})}this.hydrated=!0},t.prototype.componentDidMount=function(){var r=this;Zr||(this.detached=this.props.detach===!0,this.props.defineMode&&this.props.defineMode.name&&this.props.defineMode.fn&&oi.defineMode(this.props.defineMode.name,this.props.defineMode.fn),this.editor=oi(this.ref,this.props.options),this.shared=new dP(this.editor,this.props),this.editor.on("beforeChange",function(n,o){r.props.onBeforeChange&&r.props.onBeforeChange(r.editor,o,r.editor.getValue(),r.onBeforeChangeCb)}),this.editor.on("change",function(n,o){!r.mounted||!r.props.onChange||(r.props.onBeforeChange?r.continueChange&&r.props.onChange(r.editor,o,r.editor.getValue()):r.props.onChange(r.editor,o,r.editor.getValue()))}),this.hydrate(this.props),this.shared.apply(this.props),this.applied=!0,this.mounted=!0,this.shared.wire(this.props),this.editor.getDoc().clearHistory(),this.props.editorDidMount&&this.props.editorDidMount(this.editor,this.editor.getValue(),this.initCb))},t.prototype.componentDidUpdate=function(r){if(this.detached&&this.props.detach===!1&&(this.detached=!1,r.editorDidAttach&&r.editorDidAttach(this.editor)),!this.detached&&this.props.detach===!0&&(this.detached=!0,r.editorDidDetach&&r.editorDidDetach(this.editor)),!(Zr||this.detached)){var n={cursor:null};this.props.value!==r.value&&(this.hydrated=!1,this.applied=!1,this.appliedUserDefined=!1),!r.autoCursor&&r.autoCursor!==void 0&&(n.cursor=this.editor.getDoc().getCursor()),this.hydrate(this.props),this.applied||(this.shared.apply(r),this.applied=!0),this.appliedUserDefined||(this.shared.applyUserDefined(r,n),this.appliedUserDefined=!0)}},t.prototype.componentWillUnmount=function(){Zr||this.props.editorWillUnmount&&this.props.editorWillUnmount(oi)},t.prototype.shouldComponentUpdate=function(r,n){var o=!0;return Zr&&(o=!1),this.detached&&r.detach&&(o=!1),o},t.prototype.render=function(){var r=this;if(Zr)return null;var n=this.props.className?"react-codemirror2 "+this.props.className:"react-codemirror2";return sh.createElement("div",{className:n,ref:function(a){return r.ref=a}})},t}(sh.Component);rc.UnControlled=O9;(function(e,t){(function(r){r(fl())})(function(r){r.defineOption("placeholder","",function(h,g,m){var w=m&&m!=r.Init;if(g&&!w)h.on("blur",l),h.on("change",u),h.on("swapDoc",u),r.on(h.getInputField(),"compositionupdate",h.state.placeholderCompose=function(){a(h)}),u(h);else if(!g&&w){h.off("blur",l),h.off("change",u),h.off("swapDoc",u),r.off(h.getInputField(),"compositionupdate",h.state.placeholderCompose),n(h);var x=h.getWrapperElement();x.className=x.className.replace(" CodeMirror-empty","")}g&&!h.hasFocus()&&l(h)});function n(h){h.state.placeholder&&(h.state.placeholder.parentNode.removeChild(h.state.placeholder),h.state.placeholder=null)}function o(h){n(h);var g=h.state.placeholder=document.createElement("pre");g.style.cssText="height: 0; overflow: visible",g.style.direction=h.getOption("direction"),g.className="CodeMirror-placeholder CodeMirror-line-like";var m=h.getOption("placeholder");typeof m=="string"&&(m=document.createTextNode(m)),g.appendChild(m),h.display.lineSpace.insertBefore(g,h.display.lineSpace.firstChild)}function a(h){setTimeout(function(){var g=!1;if(h.lineCount()==1){var m=h.getInputField();g=m.nodeName=="TEXTAREA"?!h.getLine(0).length:!/[^\u200b]/.test(m.querySelector(".CodeMirror-line").textContent)}g?o(h):n(h)},20)}function l(h){d(h)&&o(h)}function u(h){var g=h.getWrapperElement(),m=d(h);g.className=g.className.replace(" CodeMirror-empty","")+(m?" CodeMirror-empty":""),m?o(h):n(h)}function d(h){return h.lineCount()===1&&h.getLine(0)===""}})})();(function(e,t){(function(r){r(fl())})(function(r){var n="CodeMirror-hint",o="CodeMirror-hint-active";r.showHint=function(k,P,A){if(!P)return k.showHint(A);A&&A.async&&(P.async=!0);var L={hint:P};if(A)for(var R in A)L[R]=A[R];return k.showHint(L)},r.defineExtension("showHint",function(k){k=d(this,this.getCursor("start"),k);var P=this.listSelections();if(!(P.length>1)){if(this.somethingSelected()){if(!k.hint.supportsSelection)return;for(var A=0;A<P.length;A++)if(P[A].head.line!=P[A].anchor.line)return}this.state.completionActive&&this.state.completionActive.close();var L=this.state.completionActive=new a(this,k);L.options.hint&&(r.signal(this,"startCompletion",this),L.update(!0))}}),r.defineExtension("closeHint",function(){this.state.completionActive&&this.state.completionActive.close()});function a(k,P){if(this.cm=k,this.options=P,this.widget=null,this.debounce=0,this.tick=0,this.startPos=this.cm.getCursor("start"),this.startLen=this.cm.getLine(this.startPos.line).length-this.cm.getSelection().length,this.options.updateOnCursorActivity){var A=this;k.on("cursorActivity",this.activityFunc=function(){A.cursorActivity()})}}var l=window.requestAnimationFrame||function(k){return setTimeout(k,1e3/60)},u=window.cancelAnimationFrame||clearTimeout;a.prototype={close:function(){this.active()&&(this.cm.state.completionActive=null,this.tick=null,this.options.updateOnCursorActivity&&this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&r.signal(this.data,"close"),this.widget&&this.widget.close(),r.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==this},pick:function(k,P){var A=k.list[P],L=this;this.cm.operation(function(){A.hint?A.hint(L.cm,k,A):L.cm.replaceRange(h(A),A.from||k.from,A.to||k.to,"complete"),r.signal(k,"pick",A),L.cm.scrollIntoView()}),this.options.closeOnPick&&this.close()},cursorActivity:function(){this.debounce&&(u(this.debounce),this.debounce=0);var k=this.startPos;this.data&&(k=this.data.from);var P=this.cm.getCursor(),A=this.cm.getLine(P.line);if(P.line!=this.startPos.line||A.length-P.ch!=this.startLen-this.startPos.ch||P.ch<k.ch||this.cm.somethingSelected()||!P.ch||this.options.closeCharacters.test(A.charAt(P.ch-1)))this.close();else{var L=this;this.debounce=l(function(){L.update()}),this.widget&&this.widget.disable()}},update:function(k){if(this.tick!=null){var P=this,A=++this.tick;C(this.options.hint,this.cm,this.options,function(L){P.tick==A&&P.finishUpdate(L,k)})}},finishUpdate:function(k,P){this.data&&r.signal(this.data,"update");var A=this.widget&&this.widget.picked||P&&this.options.completeSingle;this.widget&&this.widget.close(),this.data=k,k&&k.list.length&&(A&&k.list.length==1?this.pick(k,0):(this.widget=new w(this,k),r.signal(k,"shown")))}};function d(k,P,A){var L=k.options.hintOptions,R={};for(var D in T)R[D]=T[D];if(L)for(var D in L)L[D]!==void 0&&(R[D]=L[D]);if(A)for(var D in A)A[D]!==void 0&&(R[D]=A[D]);return R.hint.resolve&&(R.hint=R.hint.resolve(k,P)),R}function h(k){return typeof k=="string"?k:k.text}function g(k,P){var A={Up:function(){P.moveFocus(-1)},Down:function(){P.moveFocus(1)},PageUp:function(){P.moveFocus(-P.menuSize()+1,!0)},PageDown:function(){P.moveFocus(P.menuSize()-1,!0)},Home:function(){P.setFocus(0)},End:function(){P.setFocus(P.length-1)},Enter:P.pick,Tab:P.pick,Esc:P.close},L=/Mac/.test(navigator.platform);L&&(A["Ctrl-P"]=function(){P.moveFocus(-1)},A["Ctrl-N"]=function(){P.moveFocus(1)});var R=k.options.customKeys,D=R?{}:A;function $(Y,V){var de;typeof V!="string"?de=function(W){return V(W,P)}:A.hasOwnProperty(V)?de=A[V]:de=V,D[Y]=de}if(R)for(var B in R)R.hasOwnProperty(B)&&$(B,R[B]);var U=k.options.extraKeys;if(U)for(var B in U)U.hasOwnProperty(B)&&$(B,U[B]);return D}function m(k,P){for(;P&&P!=k;){if(P.nodeName.toUpperCase()==="LI"&&P.parentNode==k)return P;P=P.parentNode}}function w(k,P){this.id="cm-complete-"+Math.floor(Math.random(1e6)),this.completion=k,this.data=P,this.picked=!1;var A=this,L=k.cm,R=L.getInputField().ownerDocument,D=R.defaultView||R.parentWindow,$=this.hints=R.createElement("ul");$.setAttribute("role","listbox"),$.setAttribute("aria-expanded","true"),$.id=this.id;var B=k.cm.options.theme;$.className="CodeMirror-hints "+B,this.selectedHint=P.selectedHint||0;for(var U=P.list,Y=0;Y<U.length;++Y){var V=$.appendChild(R.createElement("li")),de=U[Y],W=n+(Y!=this.selectedHint?"":" "+o);de.className!=null&&(W=de.className+" "+W),V.className=W,Y==this.selectedHint&&V.setAttribute("aria-selected","true"),V.id=this.id+"-"+Y,V.setAttribute("role","option"),de.render?de.render(V,P,de):V.appendChild(R.createTextNode(de.displayText||h(de))),V.hintId=Y}var _=k.options.container||R.body,M=L.cursorCoords(k.options.alignWithWord?P.from:null),Q=M.left,oe=M.bottom,re=!0,X=0,ie=0;if(_!==R.body){var ue=["absolute","relative","fixed"].indexOf(D.getComputedStyle(_).position)!==-1,he=ue?_:_.offsetParent,Se=he.getBoundingClientRect(),Z=R.body.getBoundingClientRect();X=Se.left-Z.left-he.scrollLeft,ie=Se.top-Z.top-he.scrollTop}$.style.left=Q-X+"px",$.style.top=oe-ie+"px";var ae=D.innerWidth||Math.max(R.body.offsetWidth,R.documentElement.offsetWidth),le=D.innerHeight||Math.max(R.body.offsetHeight,R.documentElement.offsetHeight);_.appendChild($),L.getInputField().setAttribute("aria-autocomplete","list"),L.getInputField().setAttribute("aria-owns",this.id),L.getInputField().setAttribute("aria-activedescendant",this.id+"-"+this.selectedHint);var ce=k.options.moveOnOverlap?$.getBoundingClientRect():new DOMRect,me=k.options.paddingForScrollbar?$.scrollHeight>$.clientHeight+1:!1,Le;setTimeout(function(){Le=L.getScrollInfo()});var Ne=ce.bottom-le;if(Ne>0){var Ee=ce.bottom-ce.top,et=ce.top-(M.bottom-M.top)-2;le-ce.top<et?(Ee>et&&($.style.height=(Ee=et)+"px"),$.style.top=(oe=M.top-Ee)+ie+"px",re=!1):$.style.height=le-ce.top-2+"px"}var Lt=ce.right-ae;if(me&&(Lt+=L.display.nativeBarWidth),Lt>0&&(ce.right-ce.left>ae&&($.style.width=ae-5+"px",Lt-=ce.right-ce.left-ae),$.style.left=(Q=Math.max(M.left-Lt-X,0))+"px"),me)for(var ft=$.firstChild;ft;ft=ft.nextSibling)ft.style.paddingRight=L.display.nativeBarWidth+"px";if(L.addKeyMap(this.keyMap=g(k,{moveFocus:function(qe,tt){A.changeActive(A.selectedHint+qe,tt)},setFocus:function(qe){A.changeActive(qe)},menuSize:function(){return A.screenAmount()},length:U.length,close:function(){k.close()},pick:function(){A.pick()},data:P})),k.options.closeOnUnfocus){var Dt;L.on("blur",this.onBlur=function(){Dt=setTimeout(function(){k.close()},100)}),L.on("focus",this.onFocus=function(){clearTimeout(Dt)})}L.on("scroll",this.onScroll=function(){var qe=L.getScrollInfo(),tt=L.getWrapperElement().getBoundingClientRect();Le||(Le=L.getScrollInfo());var Ft=oe+Le.top-qe.top,ze=Ft-(D.pageYOffset||(R.documentElement||R.body).scrollTop);if(re||(ze+=$.offsetHeight),ze<=tt.top||ze>=tt.bottom)return k.close();$.style.top=Ft+"px",$.style.left=Q+Le.left-qe.left+"px"}),r.on($,"dblclick",function(qe){var tt=m($,qe.target||qe.srcElement);tt&&tt.hintId!=null&&(A.changeActive(tt.hintId),A.pick())}),r.on($,"click",function(qe){var tt=m($,qe.target||qe.srcElement);tt&&tt.hintId!=null&&(A.changeActive(tt.hintId),k.options.completeOnSingleClick&&A.pick())}),r.on($,"mousedown",function(){setTimeout(function(){L.focus()},20)});var Ge=this.getSelectedHintRange();return(Ge.from!==0||Ge.to!==0)&&this.scrollToActive(),r.signal(P,"select",U[this.selectedHint],$.childNodes[this.selectedHint]),!0}w.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null,this.hints.parentNode&&this.hints.parentNode.removeChild(this.hints),this.completion.cm.removeKeyMap(this.keyMap);var k=this.completion.cm.getInputField();k.removeAttribute("aria-activedescendant"),k.removeAttribute("aria-owns");var P=this.completion.cm;this.completion.options.closeOnUnfocus&&(P.off("blur",this.onBlur),P.off("focus",this.onFocus)),P.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var k=this;this.keyMap={Enter:function(){k.picked=!0}},this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(k,P){if(k>=this.data.list.length?k=P?this.data.list.length-1:0:k<0&&(k=P?0:this.data.list.length-1),this.selectedHint!=k){var A=this.hints.childNodes[this.selectedHint];A&&(A.className=A.className.replace(" "+o,""),A.removeAttribute("aria-selected")),A=this.hints.childNodes[this.selectedHint=k],A.className+=" "+o,A.setAttribute("aria-selected","true"),this.completion.cm.getInputField().setAttribute("aria-activedescendant",A.id),this.scrollToActive(),r.signal(this.data,"select",this.data.list[this.selectedHint],A)}},scrollToActive:function(){var k=this.getSelectedHintRange(),P=this.hints.childNodes[k.from],A=this.hints.childNodes[k.to],L=this.hints.firstChild;P.offsetTop<this.hints.scrollTop?this.hints.scrollTop=P.offsetTop-L.offsetTop:A.offsetTop+A.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=A.offsetTop+A.offsetHeight-this.hints.clientHeight+L.offsetTop)},screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1},getSelectedHintRange:function(){var k=this.completion.options.scrollMargin||0;return{from:Math.max(0,this.selectedHint-k),to:Math.min(this.data.list.length-1,this.selectedHint+k)}}};function x(k,P){if(!k.somethingSelected())return P;for(var A=[],L=0;L<P.length;L++)P[L].supportsSelection&&A.push(P[L]);return A}function C(k,P,A,L){if(k.async)k(P,L,A);else{var R=k(P,A);R&&R.then?R.then(L):L(R)}}function j(k,P){var A=k.getHelpers(P,"hint"),L;if(A.length){var R=function(D,$,B){var U=x(D,A);function Y(V){if(V==U.length)return $(null);C(U[V],D,B,function(de){de&&de.list.length>0?$(de):Y(V+1)})}Y(0)};return R.async=!0,R.supportsSelection=!0,R}else return(L=k.getHelper(k.getCursor(),"hintWords"))?function(D){return r.hint.fromList(D,{words:L})}:r.hint.anyword?function(D,$){return r.hint.anyword(D,$)}:function(){}}r.registerHelper("hint","auto",{resolve:j}),r.registerHelper("hint","fromList",function(k,P){var A=k.getCursor(),L=k.getTokenAt(A),R,D=r.Pos(A.line,L.start),$=A;L.start<A.ch&&/\w/.test(L.string.charAt(A.ch-L.start-1))?R=L.string.substr(0,A.ch-L.start):(R="",D=A);for(var B=[],U=0;U<P.words.length;U++){var Y=P.words[U];Y.slice(0,R.length)==R&&B.push(Y)}if(B.length)return{list:B,from:D,to:$}}),r.commands.autocomplete=r.showHint;var T={hint:r.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnPick:!0,closeOnUnfocus:!0,updateOnCursorActivity:!0,completeOnSingleClick:!0,container:null,customKeys:null,extraKeys:null,paddingForScrollbar:!0,moveOnOverlap:!0};r.defineOption("hintOptions",null)})})();(function(e,t){(function(r){r(fl())})(function(r){r.defineMode("css",function(Y,V){var de=V.inline;V.propertyKeywords||(V=r.resolveMode("text/css"));var W=Y.indentUnit,_=V.tokenHooks,M=V.documentTypes||{},Q=V.mediaTypes||{},oe=V.mediaFeatures||{},re=V.mediaValueKeywords||{},X=V.propertyKeywords||{},ie=V.nonStandardPropertyKeywords||{},ue=V.fontProperties||{},he=V.counterDescriptors||{},Se=V.colorKeywords||{},Z=V.valueKeywords||{},ae=V.allowNested,le=V.lineComment,ce=V.supportsAtComponent===!0,me=Y.highlightNonStandardPropertyKeywords!==!1,Le,Ne;function Ee(q,fe){return Le=fe,q}function et(q,fe){var ee=q.next();if(_[ee]){var ke=_[ee](q,fe);if(ke!==!1)return ke}if(ee=="@")return q.eatWhile(/[\w\\\-]/),Ee("def",q.current());if(ee=="="||(ee=="~"||ee=="|")&&q.eat("="))return Ee(null,"compare");if(ee=='"'||ee=="'")return fe.tokenize=Lt(ee),fe.tokenize(q,fe);if(ee=="#")return q.eatWhile(/[\w\\\-]/),Ee("atom","hash");if(ee=="!")return q.match(/^\s*\w*/),Ee("keyword","important");if(/\d/.test(ee)||ee=="."&&q.eat(/\d/))return q.eatWhile(/[\w.%]/),Ee("number","unit");if(ee==="-"){if(/[\d.]/.test(q.peek()))return q.eatWhile(/[\w.%]/),Ee("number","unit");if(q.match(/^-[\w\\\-]*/))return q.eatWhile(/[\w\\\-]/),q.match(/^\s*:/,!1)?Ee("variable-2","variable-definition"):Ee("variable-2","variable");if(q.match(/^\w+-/))return Ee("meta","meta")}else return/[,+>*\/]/.test(ee)?Ee(null,"select-op"):ee=="."&&q.match(/^-?[_a-z][_a-z0-9-]*/i)?Ee("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(ee)?Ee(null,ee):q.match(/^[\w-.]+(?=\()/)?(/^(url(-prefix)?|domain|regexp)$/i.test(q.current())&&(fe.tokenize=ft),Ee("variable callee","variable")):/[\w\\\-]/.test(ee)?(q.eatWhile(/[\w\\\-]/),Ee("property","word")):Ee(null,null)}function Lt(q){return function(fe,ee){for(var ke=!1,He;(He=fe.next())!=null;){if(He==q&&!ke){q==")"&&fe.backUp(1);break}ke=!ke&&He=="\\"}return(He==q||!ke&&q!=")")&&(ee.tokenize=null),Ee("string","string")}}function ft(q,fe){return q.next(),q.match(/^\s*[\"\')]/,!1)?fe.tokenize=null:fe.tokenize=Lt(")"),Ee(null,"(")}function Dt(q,fe,ee){this.type=q,this.indent=fe,this.prev=ee}function Ge(q,fe,ee,ke){return q.context=new Dt(ee,fe.indentation()+(ke===!1?0:W),q.context),ee}function qe(q){return q.context.prev&&(q.context=q.context.prev),q.context.type}function tt(q,fe,ee){return Ze[ee.context.type](q,fe,ee)}function Ft(q,fe,ee,ke){for(var He=ke||1;He>0;He--)ee.context=ee.context.prev;return tt(q,fe,ee)}function ze(q){var fe=q.current().toLowerCase();Z.hasOwnProperty(fe)?Ne="atom":Se.hasOwnProperty(fe)?Ne="keyword":Ne="variable"}var Ze={};return Ze.top=function(q,fe,ee){if(q=="{")return Ge(ee,fe,"block");if(q=="}"&&ee.context.prev)return qe(ee);if(ce&&/@component/i.test(q))return Ge(ee,fe,"atComponentBlock");if(/^@(-moz-)?document$/i.test(q))return Ge(ee,fe,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/i.test(q))return Ge(ee,fe,"atBlock");if(/^@(font-face|counter-style)/i.test(q))return ee.stateArg=q,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/i.test(q))return"keyframes";if(q&&q.charAt(0)=="@")return Ge(ee,fe,"at");if(q=="hash")Ne="builtin";else if(q=="word")Ne="tag";else{if(q=="variable-definition")return"maybeprop";if(q=="interpolation")return Ge(ee,fe,"interpolation");if(q==":")return"pseudo";if(ae&&q=="(")return Ge(ee,fe,"parens")}return ee.context.type},Ze.block=function(q,fe,ee){if(q=="word"){var ke=fe.current().toLowerCase();return X.hasOwnProperty(ke)?(Ne="property","maybeprop"):ie.hasOwnProperty(ke)?(Ne=me?"string-2":"property","maybeprop"):ae?(Ne=fe.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(Ne+=" error","maybeprop")}else return q=="meta"?"block":!ae&&(q=="hash"||q=="qualifier")?(Ne="error","block"):Ze.top(q,fe,ee)},Ze.maybeprop=function(q,fe,ee){return q==":"?Ge(ee,fe,"prop"):tt(q,fe,ee)},Ze.prop=function(q,fe,ee){if(q==";")return qe(ee);if(q=="{"&&ae)return Ge(ee,fe,"propBlock");if(q=="}"||q=="{")return Ft(q,fe,ee);if(q=="(")return Ge(ee,fe,"parens");if(q=="hash"&&!/^#([0-9a-fA-F]{3,4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/.test(fe.current()))Ne+=" error";else if(q=="word")ze(fe);else if(q=="interpolation")return Ge(ee,fe,"interpolation");return"prop"},Ze.propBlock=function(q,fe,ee){return q=="}"?qe(ee):q=="word"?(Ne="property","maybeprop"):ee.context.type},Ze.parens=function(q,fe,ee){return q=="{"||q=="}"?Ft(q,fe,ee):q==")"?qe(ee):q=="("?Ge(ee,fe,"parens"):q=="interpolation"?Ge(ee,fe,"interpolation"):(q=="word"&&ze(fe),"parens")},Ze.pseudo=function(q,fe,ee){return q=="meta"?"pseudo":q=="word"?(Ne="variable-3",ee.context.type):tt(q,fe,ee)},Ze.documentTypes=function(q,fe,ee){return q=="word"&&M.hasOwnProperty(fe.current())?(Ne="tag",ee.context.type):Ze.atBlock(q,fe,ee)},Ze.atBlock=function(q,fe,ee){if(q=="(")return Ge(ee,fe,"atBlock_parens");if(q=="}"||q==";")return Ft(q,fe,ee);if(q=="{")return qe(ee)&&Ge(ee,fe,ae?"block":"top");if(q=="interpolation")return Ge(ee,fe,"interpolation");if(q=="word"){var ke=fe.current().toLowerCase();ke=="only"||ke=="not"||ke=="and"||ke=="or"?Ne="keyword":Q.hasOwnProperty(ke)?Ne="attribute":oe.hasOwnProperty(ke)?Ne="property":re.hasOwnProperty(ke)?Ne="keyword":X.hasOwnProperty(ke)?Ne="property":ie.hasOwnProperty(ke)?Ne=me?"string-2":"property":Z.hasOwnProperty(ke)?Ne="atom":Se.hasOwnProperty(ke)?Ne="keyword":Ne="error"}return ee.context.type},Ze.atComponentBlock=function(q,fe,ee){return q=="}"?Ft(q,fe,ee):q=="{"?qe(ee)&&Ge(ee,fe,ae?"block":"top",!1):(q=="word"&&(Ne="error"),ee.context.type)},Ze.atBlock_parens=function(q,fe,ee){return q==")"?qe(ee):q=="{"||q=="}"?Ft(q,fe,ee,2):Ze.atBlock(q,fe,ee)},Ze.restricted_atBlock_before=function(q,fe,ee){return q=="{"?Ge(ee,fe,"restricted_atBlock"):q=="word"&&ee.stateArg=="@counter-style"?(Ne="variable","restricted_atBlock_before"):tt(q,fe,ee)},Ze.restricted_atBlock=function(q,fe,ee){return q=="}"?(ee.stateArg=null,qe(ee)):q=="word"?(ee.stateArg=="@font-face"&&!ue.hasOwnProperty(fe.current().toLowerCase())||ee.stateArg=="@counter-style"&&!he.hasOwnProperty(fe.current().toLowerCase())?Ne="error":Ne="property","maybeprop"):"restricted_atBlock"},Ze.keyframes=function(q,fe,ee){return q=="word"?(Ne="variable","keyframes"):q=="{"?Ge(ee,fe,"top"):tt(q,fe,ee)},Ze.at=function(q,fe,ee){return q==";"?qe(ee):q=="{"||q=="}"?Ft(q,fe,ee):(q=="word"?Ne="tag":q=="hash"&&(Ne="builtin"),"at")},Ze.interpolation=function(q,fe,ee){return q=="}"?qe(ee):q=="{"||q==";"?Ft(q,fe,ee):(q=="word"?Ne="variable":q!="variable"&&q!="("&&q!=")"&&(Ne="error"),"interpolation")},{startState:function(q){return{tokenize:null,state:de?"block":"top",stateArg:null,context:new Dt(de?"block":"top",q||0,null)}},token:function(q,fe){if(!fe.tokenize&&q.eatSpace())return null;var ee=(fe.tokenize||et)(q,fe);return ee&&typeof ee=="object"&&(Le=ee[1],ee=ee[0]),Ne=ee,Le!="comment"&&(fe.state=Ze[fe.state](Le,q,fe)),Ne},indent:function(q,fe){var ee=q.context,ke=fe&&fe.charAt(0),He=ee.indent;return ee.type=="prop"&&(ke=="}"||ke==")")&&(ee=ee.prev),ee.prev&&(ke=="}"&&(ee.type=="block"||ee.type=="top"||ee.type=="interpolation"||ee.type=="restricted_atBlock")?(ee=ee.prev,He=ee.indent):(ke==")"&&(ee.type=="parens"||ee.type=="atBlock_parens")||ke=="{"&&(ee.type=="at"||ee.type=="atBlock"))&&(He=Math.max(0,ee.indent-W))),He},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",blockCommentContinue:" * ",lineComment:le,fold:"brace"}});function n(Y){for(var V={},de=0;de<Y.length;++de)V[Y[de].toLowerCase()]=!0;return V}var o=["domain","regexp","url","url-prefix"],a=n(o),l=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],u=n(l),d=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover","prefers-color-scheme","dynamic-range","video-dynamic-range"],h=n(d),g=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive","dark","light","standard","high"],m=n(g),w=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","all","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backdrop-filter","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-position-x","background-position-y","background-repeat","background-size","baseline-shift","binding","bleed","block-size","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-content","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-family","font-feature-settings","font-kerning","font-language-override","font-optical-sizing","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","inset","inset-block","inset-block-end","inset-block-start","inset-inline","inset-inline-end","inset-inline-start","isolation","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-height-step","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","offset","offset-anchor","offset-distance","offset-path","offset-position","offset-rotate","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotate","rotation","rotation-point","row-gap","ruby-align","ruby-overhang","ruby-position","ruby-span","scale","scroll-behavior","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-type","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-skip-ink","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-orientation","text-outline","text-overflow","text-rendering","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","touch-action","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","translate","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","paint-order","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],x=n(w),C=["accent-color","aspect-ratio","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","content-visibility","margin-block","margin-block-end","margin-block-start","margin-inline","margin-inline-end","margin-inline-start","overflow-anchor","overscroll-behavior","padding-block","padding-block-end","padding-block-start","padding-inline","padding-inline-end","padding-inline-start","scroll-snap-stop","scrollbar-3d-light-color","scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-track-color","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","shape-inside","zoom"],j=n(C),T=["font-display","font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],k=n(T),P=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],A=n(P),L=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],R=n(L),D=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","blur","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","brightness","bullets","button","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","conic-gradient","contain","content","contents","content-box","context-menu","continuous","contrast","copy","counter","counters","cover","crop","cross","crosshair","cubic-bezier","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","drop-shadow","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","grayscale","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","hue-rotate","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","manipulation","match","matrix","matrix3d","media-play-button","media-slider","media-sliderthumb","media-volume-slider","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiple_mask_images","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeating-conic-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturate","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","sepia","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],$=n(D),B=o.concat(l).concat(d).concat(g).concat(w).concat(C).concat(L).concat(D);r.registerHelper("hintWords","css",B);function U(Y,V){for(var de=!1,W;(W=Y.next())!=null;){if(de&&W=="/"){V.tokenize=null;break}de=W=="*"}return["comment","comment"]}r.defineMIME("text/css",{documentTypes:a,mediaTypes:u,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:x,nonStandardPropertyKeywords:j,fontProperties:k,counterDescriptors:A,colorKeywords:R,valueKeywords:$,tokenHooks:{"/":function(Y,V){return Y.eat("*")?(V.tokenize=U,U(Y,V)):!1}},name:"css"}),r.defineMIME("text/x-scss",{mediaTypes:u,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:x,nonStandardPropertyKeywords:j,colorKeywords:R,valueKeywords:$,fontProperties:k,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Y,V){return Y.eat("/")?(Y.skipToEnd(),["comment","comment"]):Y.eat("*")?(V.tokenize=U,U(Y,V)):["operator","operator"]},":":function(Y){return Y.match(/^\s*\{/,!1)?[null,null]:!1},$:function(Y){return Y.match(/^[\w-]+/),Y.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(Y){return Y.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),r.defineMIME("text/x-less",{mediaTypes:u,mediaFeatures:h,mediaValueKeywords:m,propertyKeywords:x,nonStandardPropertyKeywords:j,colorKeywords:R,valueKeywords:$,fontProperties:k,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(Y,V){return Y.eat("/")?(Y.skipToEnd(),["comment","comment"]):Y.eat("*")?(V.tokenize=U,U(Y,V)):["operator","operator"]},"@":function(Y){return Y.eat("{")?[null,"interpolation"]:Y.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/i,!1)?!1:(Y.eatWhile(/[\w\\\-]/),Y.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),r.defineMIME("text/x-gss",{documentTypes:a,mediaTypes:u,mediaFeatures:h,propertyKeywords:x,nonStandardPropertyKeywords:j,fontProperties:k,counterDescriptors:A,colorKeywords:R,valueKeywords:$,supportsAtComponent:!0,tokenHooks:{"/":function(Y,V){return Y.eat("*")?(V.tokenize=U,U(Y,V)):!1}},name:"css",helperType:"gss"})})})();(function(e,t){(function(r){r(fl())})(function(r){r.defineMode("javascript",function(n,o){var a=n.indentUnit,l=o.statementIndent,u=o.jsonld,d=o.json||u,h=o.trackScope!==!1,g=o.typescript,m=o.wordCharacters||/[\w$\xa1-\uffff]/,w=function(){function I(Gt){return{type:Gt,style:"keyword"}}var z=I("keyword a"),ne=I("keyword b"),pe=I("keyword c"),J=I("keyword d"),be=I("operator"),it={type:"atom",style:"atom"};return{if:I("if"),while:z,with:z,else:ne,do:ne,try:ne,finally:ne,return:J,break:J,continue:J,new:I("new"),delete:pe,void:pe,throw:pe,debugger:I("debugger"),var:I("var"),const:I("var"),let:I("var"),function:I("function"),catch:I("catch"),for:I("for"),switch:I("switch"),case:I("case"),default:I("default"),in:be,typeof:be,instanceof:be,true:it,false:it,null:it,undefined:it,NaN:it,Infinity:it,this:I("this"),class:I("class"),super:I("atom"),yield:pe,export:I("export"),import:I("import"),extends:pe,await:pe}}(),x=/[+\-*&%=<>!?|~^@]/,C=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function j(I){for(var z=!1,ne,pe=!1;(ne=I.next())!=null;){if(!z){if(ne=="/"&&!pe)return;ne=="["?pe=!0:pe&&ne=="]"&&(pe=!1)}z=!z&&ne=="\\"}}var T,k;function P(I,z,ne){return T=I,k=ne,z}function A(I,z){var ne=I.next();if(ne=='"'||ne=="'")return z.tokenize=L(ne),z.tokenize(I,z);if(ne=="."&&I.match(/^\d[\d_]*(?:[eE][+\-]?[\d_]+)?/))return P("number","number");if(ne=="."&&I.match(".."))return P("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ne))return P(ne);if(ne=="="&&I.eat(">"))return P("=>","operator");if(ne=="0"&&I.match(/^(?:x[\dA-Fa-f_]+|o[0-7_]+|b[01_]+)n?/))return P("number","number");if(/\d/.test(ne))return I.match(/^[\d_]*(?:n|(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)?/),P("number","number");if(ne=="/")return I.eat("*")?(z.tokenize=R,R(I,z)):I.eat("/")?(I.skipToEnd(),P("comment","comment")):qr(I,z,1)?(j(I),I.match(/^\b(([gimyus])(?![gimyus]*\2))+\b/),P("regexp","string-2")):(I.eat("="),P("operator","operator",I.current()));if(ne=="`")return z.tokenize=D,D(I,z);if(ne=="#"&&I.peek()=="!")return I.skipToEnd(),P("meta","meta");if(ne=="#"&&I.eatWhile(m))return P("variable","property");if(ne=="<"&&I.match("!--")||ne=="-"&&I.match("->")&&!/\S/.test(I.string.slice(0,I.start)))return I.skipToEnd(),P("comment","comment");if(x.test(ne))return(ne!=">"||!z.lexical||z.lexical.type!=">")&&(I.eat("=")?(ne=="!"||ne=="=")&&I.eat("="):/[<>*+\-|&?]/.test(ne)&&(I.eat(ne),ne==">"&&I.eat(ne))),ne=="?"&&I.eat(".")?P("."):P("operator","operator",I.current());if(m.test(ne)){I.eatWhile(m);var pe=I.current();if(z.lastType!="."){if(w.propertyIsEnumerable(pe)){var J=w[pe];return P(J.type,J.style,pe)}if(pe=="async"&&I.match(/^(\s|\/\*([^*]|\*(?!\/))*?\*\/)*[\[\(\w]/,!1))return P("async","keyword",pe)}return P("variable","variable",pe)}}function L(I){return function(z,ne){var pe=!1,J;if(u&&z.peek()=="@"&&z.match(C))return ne.tokenize=A,P("jsonld-keyword","meta");for(;(J=z.next())!=null&&!(J==I&&!pe);)pe=!pe&&J=="\\";return pe||(ne.tokenize=A),P("string","string")}}function R(I,z){for(var ne=!1,pe;pe=I.next();){if(pe=="/"&&ne){z.tokenize=A;break}ne=pe=="*"}return P("comment","comment")}function D(I,z){for(var ne=!1,pe;(pe=I.next())!=null;){if(!ne&&(pe=="`"||pe=="$"&&I.eat("{"))){z.tokenize=A;break}ne=!ne&&pe=="\\"}return P("quasi","string-2",I.current())}var $="([{}])";function B(I,z){z.fatArrowAt&&(z.fatArrowAt=null);var ne=I.string.indexOf("=>",I.start);if(!(ne<0)){if(g){var pe=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(I.string.slice(I.start,ne));pe&&(ne=pe.index)}for(var J=0,be=!1,it=ne-1;it>=0;--it){var Gt=I.string.charAt(it),Er=$.indexOf(Gt);if(Er>=0&&Er<3){if(!J){++it;break}if(--J==0){Gt=="("&&(be=!0);break}}else if(Er>=3&&Er<6)++J;else if(m.test(Gt))be=!0;else if(/["'\/`]/.test(Gt))for(;;--it){if(it==0)return;var Ka=I.string.charAt(it-1);if(Ka==Gt&&I.string.charAt(it-2)!="\\"){it--;break}}else if(be&&!J){++it;break}}be&&!J&&(z.fatArrowAt=it)}}var U={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,import:!0,"jsonld-keyword":!0};function Y(I,z,ne,pe,J,be){this.indented=I,this.column=z,this.type=ne,this.prev=J,this.info=be,pe!=null&&(this.align=pe)}function V(I,z){if(!h)return!1;for(var ne=I.localVars;ne;ne=ne.next)if(ne.name==z)return!0;for(var pe=I.context;pe;pe=pe.prev)for(var ne=pe.vars;ne;ne=ne.next)if(ne.name==z)return!0}function de(I,z,ne,pe,J){var be=I.cc;for(W.state=I,W.stream=J,W.marked=null,W.cc=be,W.style=z,I.lexical.hasOwnProperty("align")||(I.lexical.align=!0);;){var it=be.length?be.pop():d?Ee:Le;if(it(ne,pe)){for(;be.length&&be[be.length-1].lex;)be.pop()();return W.marked?W.marked:ne=="variable"&&V(I,pe)?"variable-2":z}}}var W={state:null,column:null,marked:null,cc:null};function _(){for(var I=arguments.length-1;I>=0;I--)W.cc.push(arguments[I])}function M(){return _.apply(null,arguments),!0}function Q(I,z){for(var ne=z;ne;ne=ne.next)if(ne.name==I)return!0;return!1}function oe(I){var z=W.state;if(W.marked="def",!!h){if(z.context){if(z.lexical.info=="var"&&z.context&&z.context.block){var ne=re(I,z.context);if(ne!=null){z.context=ne;return}}else if(!Q(I,z.localVars)){z.localVars=new ue(I,z.localVars);return}}o.globalVars&&!Q(I,z.globalVars)&&(z.globalVars=new ue(I,z.globalVars))}}function re(I,z){if(z)if(z.block){var ne=re(I,z.prev);return ne?ne==z.prev?z:new ie(ne,z.vars,!0):null}else return Q(I,z.vars)?z:new ie(z.prev,new ue(I,z.vars),!1);else return null}function X(I){return I=="public"||I=="private"||I=="protected"||I=="abstract"||I=="readonly"}function ie(I,z,ne){this.prev=I,this.vars=z,this.block=ne}function ue(I,z){this.name=I,this.next=z}var he=new ue("this",new ue("arguments",null));function Se(){W.state.context=new ie(W.state.context,W.state.localVars,!1),W.state.localVars=he}function Z(){W.state.context=new ie(W.state.context,W.state.localVars,!0),W.state.localVars=null}Se.lex=Z.lex=!0;function ae(){W.state.localVars=W.state.context.vars,W.state.context=W.state.context.prev}ae.lex=!0;function le(I,z){var ne=function(){var pe=W.state,J=pe.indented;if(pe.lexical.type=="stat")J=pe.lexical.indented;else for(var be=pe.lexical;be&&be.type==")"&&be.align;be=be.prev)J=be.indented;pe.lexical=new Y(J,W.stream.column(),I,null,pe.lexical,z)};return ne.lex=!0,ne}function ce(){var I=W.state;I.lexical.prev&&(I.lexical.type==")"&&(I.indented=I.lexical.indented),I.lexical=I.lexical.prev)}ce.lex=!0;function me(I){function z(ne){return ne==I?M():I==";"||ne=="}"||ne==")"||ne=="]"?_():M(z)}return z}function Le(I,z){return I=="var"?M(le("vardef",z),Da,me(";"),ce):I=="keyword a"?M(le("form"),Lt,Le,ce):I=="keyword b"?M(le("form"),Le,ce):I=="keyword d"?W.stream.match(/^\s*$/,!1)?M():M(le("stat"),Dt,me(";"),ce):I=="debugger"?M(me(";")):I=="{"?M(le("}"),Z,$e,ce,ae):I==";"?M():I=="if"?(W.state.lexical.info=="else"&&W.state.cc[W.state.cc.length-1]==ce&&W.state.cc.pop()(),M(le("form"),Lt,Le,ce,Fa)):I=="function"?M(hn):I=="for"?M(le("form"),Z,Nc,Le,ae,ce):I=="class"||g&&z=="interface"?(W.marked="keyword",M(le("form",I=="class"?I:z),za,ce)):I=="variable"?g&&z=="declare"?(W.marked="keyword",M(Le)):g&&(z=="module"||z=="enum"||z=="type")&&W.stream.match(/^\s*\w/,!1)?(W.marked="keyword",z=="enum"?M(Oe):z=="type"?M(jc,me("operator"),Je,me(";")):M(le("form"),Sr,me("{"),le("}"),$e,ce,ce)):g&&z=="namespace"?(W.marked="keyword",M(le("form"),Ee,Le,ce)):g&&z=="abstract"?(W.marked="keyword",M(Le)):M(le("stat"),ke):I=="switch"?M(le("form"),Lt,me("{"),le("}","switch"),Z,$e,ce,ce,ae):I=="case"?M(Ee,me(":")):I=="default"?M(me(":")):I=="catch"?M(le("form"),Se,Ne,Le,ce,ae):I=="export"?M(le("stat"),Ha,ce):I=="import"?M(le("stat"),Zi,ce):I=="async"?M(Le):z=="@"?M(Ee,Le):_(le("stat"),Ee,me(";"),ce)}function Ne(I){if(I=="(")return M(jn,me(")"))}function Ee(I,z){return ft(I,z,!1)}function et(I,z){return ft(I,z,!0)}function Lt(I){return I!="("?_():M(le(")"),Dt,me(")"),ce)}function ft(I,z,ne){if(W.state.fatArrowAt==W.stream.start){var pe=ne?Ze:ze;if(I=="(")return M(Se,le(")"),nt(jn,")"),ce,me("=>"),pe,ae);if(I=="variable")return _(Se,Sr,me("=>"),pe,ae)}var J=ne?qe:Ge;return U.hasOwnProperty(I)?M(J):I=="function"?M(hn,J):I=="class"||g&&z=="interface"?(W.marked="keyword",M(le("form"),Op,ce)):I=="keyword c"||I=="async"?M(ne?et:Ee):I=="("?M(le(")"),Dt,me(")"),ce,J):I=="operator"||I=="spread"?M(ne?et:Ee):I=="["?M(le("]"),Tt,ce,J):I=="{"?Qe(Fe,"}",null,J):I=="quasi"?_(tt,J):I=="new"?M(q(ne)):M()}function Dt(I){return I.match(/[;\}\)\],]/)?_():_(Ee)}function Ge(I,z){return I==","?M(Dt):qe(I,z,!1)}function qe(I,z,ne){var pe=ne==!1?Ge:qe,J=ne==!1?Ee:et;if(I=="=>")return M(Se,ne?Ze:ze,ae);if(I=="operator")return/\+\+|--/.test(z)||g&&z=="!"?M(pe):g&&z=="<"&&W.stream.match(/^([^<>]|<[^<>]*>)*>\s*\(/,!1)?M(le(">"),nt(Je,">"),ce,pe):z=="?"?M(Ee,me(":"),J):M(J);if(I=="quasi")return _(tt,pe);if(I!=";"){if(I=="(")return Qe(et,")","call",pe);if(I==".")return M(He,pe);if(I=="[")return M(le("]"),Dt,me("]"),ce,pe);if(g&&z=="as")return W.marked="keyword",M(Je,pe);if(I=="regexp")return W.state.lastType=W.marked="operator",W.stream.backUp(W.stream.pos-W.stream.start-1),M(J)}}function tt(I,z){return I!="quasi"?_():z.slice(z.length-2)!="${"?M(tt):M(Dt,Ft)}function Ft(I){if(I=="}")return W.marked="string-2",W.state.tokenize=D,M(tt)}function ze(I){return B(W.stream,W.state),_(I=="{"?Le:Ee)}function Ze(I){return B(W.stream,W.state),_(I=="{"?Le:et)}function q(I){return function(z){return z=="."?M(I?ee:fe):z=="variable"&&g?M(Ir,I?qe:Ge):_(I?et:Ee)}}function fe(I,z){if(z=="target")return W.marked="keyword",M(Ge)}function ee(I,z){if(z=="target")return W.marked="keyword",M(qe)}function ke(I){return I==":"?M(ce,Le):_(Ge,me(";"),ce)}function He(I){if(I=="variable")return W.marked="property",M()}function Fe(I,z){if(I=="async")return W.marked="property",M(Fe);if(I=="variable"||W.style=="keyword"){if(W.marked="property",z=="get"||z=="set")return M(rt);var ne;return g&&W.state.fatArrowAt==W.stream.start&&(ne=W.stream.match(/^\s*:\s*/,!1))&&(W.state.fatArrowAt=W.stream.pos+ne[0].length),M(Ut)}else{if(I=="number"||I=="string")return W.marked=u?"property":W.style+" property",M(Ut);if(I=="jsonld-keyword")return M(Ut);if(g&&X(z))return W.marked="keyword",M(Fe);if(I=="[")return M(Ee,Kt,me("]"),Ut);if(I=="spread")return M(et,Ut);if(z=="*")return W.marked="keyword",M(Fe);if(I==":")return _(Ut)}}function rt(I){return I!="variable"?_(Ut):(W.marked="property",M(hn))}function Ut(I){if(I==":")return M(et);if(I=="(")return _(hn)}function nt(I,z,ne){function pe(J,be){if(ne?ne.indexOf(J)>-1:J==","){var it=W.state.lexical;return it.info=="call"&&(it.pos=(it.pos||0)+1),M(function(Gt,Er){return Gt==z||Er==z?_():_(I)},pe)}return J==z||be==z?M():ne&&ne.indexOf(";")>-1?_(I):M(me(z))}return function(J,be){return J==z||be==z?M():_(I,pe)}}function Qe(I,z,ne){for(var pe=3;pe<arguments.length;pe++)W.cc.push(arguments[pe]);return M(le(z,ne),nt(I,z),ce)}function $e(I){return I=="}"?M():_(Le,$e)}function Kt(I,z){if(g){if(I==":")return M(Je);if(z=="?")return M(Kt)}}function On(I,z){if(g&&(I==":"||z=="in"))return M(Je)}function Pn(I){if(g&&I==":")return W.stream.match(/^\s*\w+\s+is\b/,!1)?M(Ee,kp,Je):M(Je)}function kp(I,z){if(z=="is")return W.marked="keyword",M()}function Je(I,z){if(z=="keyof"||z=="typeof"||z=="infer"||z=="readonly")return W.marked="keyword",M(z=="typeof"?et:Je);if(I=="variable"||z=="void")return W.marked="type",M(dn);if(z=="|"||z=="&")return M(Je);if(I=="string"||I=="number"||I=="atom")return M(dn);if(I=="[")return M(le("]"),nt(Je,"]",","),ce,dn);if(I=="{")return M(le("}"),Ie,ce,dn);if(I=="(")return M(nt(kt,")"),Lc,dn);if(I=="<")return M(nt(Je,">"),Je);if(I=="quasi")return _(ar,dn)}function Lc(I){if(I=="=>")return M(Je)}function Ie(I){return I.match(/[\}\)\]]/)?M():I==","||I==";"?M(Ie):_(xi,Ie)}function xi(I,z){if(I=="variable"||W.style=="keyword")return W.marked="property",M(xi);if(z=="?"||I=="number"||I=="string")return M(xi);if(I==":")return M(Je);if(I=="[")return M(me("variable"),On,me("]"),xi);if(I=="(")return _(Ji,xi);if(!I.match(/[;\}\)\],]/))return M()}function ar(I,z){return I!="quasi"?_():z.slice(z.length-2)!="${"?M(ar):M(Je,Ct)}function Ct(I){if(I=="}")return W.marked="string-2",W.state.tokenize=D,M(ar)}function kt(I,z){return I=="variable"&&W.stream.match(/^\s*[?:]/,!1)||z=="?"?M(kt):I==":"?M(Je):I=="spread"?M(kt):_(Je)}function dn(I,z){if(z=="<")return M(le(">"),nt(Je,">"),ce,dn);if(z=="|"||I=="."||z=="&")return M(Je);if(I=="[")return M(Je,me("]"),dn);if(z=="extends"||z=="implements")return W.marked="keyword",M(Je);if(z=="?")return M(Je,me(":"),Je)}function Ir(I,z){if(z=="<")return M(le(">"),nt(Je,">"),ce,dn)}function Ln(){return _(Je,sr)}function sr(I,z){if(z=="=")return M(Je)}function Da(I,z){return z=="enum"?(W.marked="keyword",M(Oe)):_(Sr,Kt,Nn,Tp)}function Sr(I,z){if(g&&X(z))return W.marked="keyword",M(Sr);if(I=="variable")return oe(z),M();if(I=="spread")return M(Sr);if(I=="[")return Qe(gl,"]");if(I=="{")return Qe(Yi,"}")}function Yi(I,z){return I=="variable"&&!W.stream.match(/^\s*:/,!1)?(oe(z),M(Nn)):(I=="variable"&&(W.marked="property"),I=="spread"?M(Sr):I=="}"?_():I=="["?M(Ee,me("]"),me(":"),Yi):M(me(":"),Sr,Nn))}function gl(){return _(Sr,Nn)}function Nn(I,z){if(z=="=")return M(et)}function Tp(I){if(I==",")return M(Da)}function Fa(I,z){if(I=="keyword b"&&z=="else")return M(le("form","else"),Le,ce)}function Nc(I,z){if(z=="await")return M(Nc);if(I=="(")return M(le(")"),vl,ce)}function vl(I){return I=="var"?M(Da,Qi):I=="variable"?M(Qi):_(Qi)}function Qi(I,z){return I==")"?M():I==";"?M(Qi):z=="in"||z=="of"?(W.marked="keyword",M(Ee,Qi)):_(Ee,Qi)}function hn(I,z){if(z=="*")return W.marked="keyword",M(hn);if(I=="variable")return oe(z),M(hn);if(I=="(")return M(Se,le(")"),nt(jn,")"),ce,Pn,Le,ae);if(g&&z=="<")return M(le(">"),nt(Ln,">"),ce,hn)}function Ji(I,z){if(z=="*")return W.marked="keyword",M(Ji);if(I=="variable")return oe(z),M(Ji);if(I=="(")return M(Se,le(")"),nt(jn,")"),ce,Pn,ae);if(g&&z=="<")return M(le(">"),nt(Ln,">"),ce,Ji)}function jc(I,z){if(I=="keyword"||I=="variable")return W.marked="type",M(jc);if(z=="<")return M(le(">"),nt(Ln,">"),ce)}function jn(I,z){return z=="@"&&M(Ee,jn),I=="spread"?M(jn):g&&X(z)?(W.marked="keyword",M(jn)):g&&I=="this"?M(Kt,Nn):_(Sr,Kt,Nn)}function Op(I,z){return I=="variable"?za(I,z):An(I,z)}function za(I,z){if(I=="variable")return oe(z),M(An)}function An(I,z){if(z=="<")return M(le(">"),nt(Ln,">"),ce,An);if(z=="extends"||z=="implements"||g&&I==",")return z=="implements"&&(W.marked="keyword"),M(g?Je:Ee,An);if(I=="{")return M(le("}"),Mn,ce)}function Mn(I,z){if(I=="async"||I=="variable"&&(z=="static"||z=="get"||z=="set"||g&&X(z))&&W.stream.match(/^\s+#?[\w$\xa1-\uffff]/,!1))return W.marked="keyword",M(Mn);if(I=="variable"||W.style=="keyword")return W.marked="property",M(Ho,Mn);if(I=="number"||I=="string")return M(Ho,Mn);if(I=="[")return M(Ee,Kt,me("]"),Ho,Mn);if(z=="*")return W.marked="keyword",M(Mn);if(g&&I=="(")return _(Ji,Mn);if(I==";"||I==",")return M(Mn);if(I=="}")return M();if(z=="@")return M(Ee,Mn)}function Ho(I,z){if(z=="!"||z=="?")return M(Ho);if(I==":")return M(Je,Nn);if(z=="=")return M(et);var ne=W.state.lexical.prev,pe=ne&&ne.info=="interface";return _(pe?Ji:hn)}function Ha(I,z){return z=="*"?(W.marked="keyword",M(Ua,me(";"))):z=="default"?(W.marked="keyword",M(Ee,me(";"))):I=="{"?M(nt(Ba,"}"),Ua,me(";")):_(Le)}function Ba(I,z){if(z=="as")return W.marked="keyword",M(me("variable"));if(I=="variable")return _(et,Ba)}function Zi(I){return I=="string"?M():I=="("?_(Ee):I=="."?_(Ge):_(Wa,Yn,Ua)}function Wa(I,z){return I=="{"?Qe(Wa,"}"):(I=="variable"&&oe(z),z=="*"&&(W.marked="keyword"),M(ml))}function Yn(I){if(I==",")return M(Wa,Yn)}function ml(I,z){if(z=="as")return W.marked="keyword",M(Wa)}function Ua(I,z){if(z=="from")return W.marked="keyword",M(Ee)}function Tt(I){return I=="]"?M():_(nt(et,"]"))}function Oe(){return _(le("form"),Sr,me("{"),le("}"),nt(Si,"}"),ce,ce)}function Si(){return _(Sr,Nn)}function yl(I,z){return I.lastType=="operator"||I.lastType==","||x.test(z.charAt(0))||/[,.]/.test(z.charAt(0))}function qr(I,z,ne){return z.tokenize==A&&/^(?:operator|sof|keyword [bcd]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(z.lastType)||z.lastType=="quasi"&&/\{\s*$/.test(I.string.slice(0,I.pos-(ne||0)))}return{startState:function(I){var z={tokenize:A,lastType:"sof",cc:[],lexical:new Y((I||0)-a,0,"block",!1),localVars:o.localVars,context:o.localVars&&new ie(null,null,!1),indented:I||0};return o.globalVars&&typeof o.globalVars=="object"&&(z.globalVars=o.globalVars),z},token:function(I,z){if(I.sol()&&(z.lexical.hasOwnProperty("align")||(z.lexical.align=!1),z.indented=I.indentation(),B(I,z)),z.tokenize!=R&&I.eatSpace())return null;var ne=z.tokenize(I,z);return T=="comment"?ne:(z.lastType=T=="operator"&&(k=="++"||k=="--")?"incdec":T,de(z,ne,T,k,I))},indent:function(I,z){if(I.tokenize==R||I.tokenize==D)return r.Pass;if(I.tokenize!=A)return 0;var ne=z&&z.charAt(0),pe=I.lexical,J;if(!/^\s*else\b/.test(z))for(var be=I.cc.length-1;be>=0;--be){var it=I.cc[be];if(it==ce)pe=pe.prev;else if(it!=Fa&&it!=ae)break}for(;(pe.type=="stat"||pe.type=="form")&&(ne=="}"||(J=I.cc[I.cc.length-1])&&(J==Ge||J==qe)&&!/^[,\.=+\-*:?[\(]/.test(z));)pe=pe.prev;l&&pe.type==")"&&pe.prev.type=="stat"&&(pe=pe.prev);var Gt=pe.type,Er=ne==Gt;return Gt=="vardef"?pe.indented+(I.lastType=="operator"||I.lastType==","?pe.info.length+1:0):Gt=="form"&&ne=="{"?pe.indented:Gt=="form"?pe.indented+a:Gt=="stat"?pe.indented+(yl(I,z)?l||a:0):pe.info=="switch"&&!Er&&o.doubleIndentSwitch!=!1?pe.indented+(/^(?:case|default)\b/.test(z)?a:2*a):pe.align?pe.column+(Er?0:1):pe.indented+(Er?0:a)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:d?null:"/*",blockCommentEnd:d?null:"*/",blockCommentContinue:d?null:" * ",lineComment:d?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:d?"json":"javascript",jsonldMode:u,jsonMode:d,expressionAllowed:qr,skipExpression:function(I){de(I,"atom","atom","true",new r.StringStream("",2,null))}}}),r.registerHelper("wordChars","javascript",/[\w$]/),r.defineMIME("text/javascript","javascript"),r.defineMIME("text/ecmascript","javascript"),r.defineMIME("application/javascript","javascript"),r.defineMIME("application/x-javascript","javascript"),r.defineMIME("application/ecmascript","javascript"),r.defineMIME("application/json",{name:"javascript",json:!0}),r.defineMIME("application/x-json",{name:"javascript",json:!0}),r.defineMIME("application/manifest+json",{name:"javascript",json:!0}),r.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),r.defineMIME("text/typescript",{name:"javascript",typescript:!0}),r.defineMIME("application/typescript",{name:"javascript",typescript:!0})})})();var P9=fl();const nc=wt(P9);let au=[];function L9(e,t){const{prefixes:r,callback:n}=t;function o(a){if(a.state.completionActive||!r||!n)return;const l=a.findWordAt(a.getDoc().getCursor());l.anchor.ch--;const u=a.findWordAt(l.anchor),d=a.getRange(u.anchor,u.head);for(const h of r)if(d===h){n(a);return}}n&&r&&!au.includes(e)?(au.push(e),e.on("inputRead",o)):au.includes(e)&&(e.off("inputRead",o),au=au.filter(a=>a!==e))}let TE=!1;function N9(){TE||(nc.defineOption("prefixTrigger",[],L9),TE=!0)}N9();const ic=e=>{var w;const{fontFamily:t,fontScale:r,id:n,label:o,onChangeEditor:a,onChangeText:l,useCodeMirror:u,...d}=e,h=E.useRef(null),g={};t&&(g.fontFamily=t.includes(" ")?'"'.concat(t,'"'):t),r&&(g.fontSize="".concat(r*100,"%"));function m(x,C,j){a==null||a(x),l(j,C)}return E.useEffect(()=>{if(u&&h.current){const x=h.current.querySelector("textarea");x&&x.setAttribute("id",n)}},[n,u]),y.jsxs("div",{className:"code-area",ref:h,style:g,children:[y.jsx("label",{htmlFor:n,className:Wt("label",{"screen-reader-only":e.labelHidden}),children:o}),u?y.jsx(hP,{...d,onBeforeChange:m}):y.jsx("textarea",{className:"visible",id:n,onChange:({target:x})=>l(x.value),placeholder:(w=d.options)==null?void 0:w.placeholder,style:g,children:d.value})]})};function j9(e){return E.useCallback(t=>{t.showHint({completeSingle:!1,extraKeys:["]","-","|"].reduce((r,n)=>(r[n]=(o,a)=>{const l=o.getDoc();l.replaceRange(n,l.getCursor()),a.close()},r),{}),hint(){const r=t.findWordAt(t.getCursor()),n=t.getRange(r.anchor,r.head).toLowerCase(),o={list:e.passages.reduce((a,l)=>l.name.toLowerCase().includes(n)?[...a,l.name]:a,[]),from:r.anchor,to:r.head};return nc.on(o,"pick",()=>{const a=t.getDoc();a.replaceRange("]] ",a.getCursor())}),o}})},[e.passages])}function J0(e,t){var n;if(e.loadState!=="loaded"||!((n=e.properties.editorExtensions)!=null&&n.twine))return;const r=Object.keys(e.properties.editorExtensions.twine).filter(o=>C0.satisfies(t,o));if(r.length===0){console.info("".concat(e.name," ").concat(e.version," has editor extensions, but none that ").concat(t," satisfies"));return}return r.length>1&&console.warn("More than one set of editor extensions for ".concat(e.name," ").concat(e.version," is satisfied by ").concat(t,". Using the first.")),e.properties.editorExtensions.twine[r[0]]}function ju(e){return e.name.toLowerCase().replace(/\s/g,"-")+"-"+e.version}function A9(e,t){const{dispatch:r,formats:n}=kn(),o=bn(n,e,t),{prefs:a}=lt(),[l,u]=E.useState(),d=o0(a,e,t);return E.useEffect(()=>{var h;if(!d){if(o.loadState==="unloaded")r(Qu(o));else if(o.loadState==="loaded"){const g=J0(o,vn().version);(h=g==null?void 0:g.codeMirror)!=null&&h.mode&&(nc.defineMode(ju(o),g.codeMirror.mode),u(ju(o)))}}},[r,d,o]),l}function Z0(e){const t={extraKeys:{Insert(){}}};return e.editorCursorBlinks||(t.cursorBlinkRate=0),t}const M9=e=>{var L;const{disabled:t,onChange:r,onEditorChange:n,passage:o,story:a,storyFormat:l,storyFormatExtensionsDisabled:u}=e,[d,h]=E.useState(o.text),{prefs:g}=lt(),m=j9(a),w=(L=A9(l.name,l.version))!=null?L:"text",x=E.useRef(null),{t:C}=Ce(),j=E.useRef(),T=E.useRef();E.useEffect(()=>{!T.current&&d!==o.text&&h(o.text)},[d,o.text]);const k=E.useCallback(R=>{h(R),T.current&&window.clearTimeout(T.current),j.current=R,T.current=window.setTimeout(()=>{T.current=void 0,r(j.current)},1e3)},[r,n]);E.useEffect(()=>{T.current&&(window.clearTimeout(T.current),T.current=window.setTimeout(()=>{T.current=void 0,r(j.current)},1e3))},[r]);const P=E.useCallback(R=>{n(R),window.setTimeout(()=>{R.focus(),R.refresh()},400)},[n]);E.useEffect(()=>{if(!g.useCodeMirror&&x.current){const R=x.current.querySelector("textarea");if(!R)return;R.focus(),R.setSelectionRange(R.value.length,R.value.length)}},[]);const A=E.useMemo(()=>({...Z0(g),mode:u?"text":w,lineWrapping:!0,placeholder:C("dialogs.passageEdit.passageTextPlaceholder"),prefixTrigger:{callback:m,prefixes:["[[","->"]},readOnly:t?"nocursor":!1}),[m,t,w,g,u,C]);return y.jsx(Y0,{ref:x,children:y.jsx(ic,{editorDidMount:P,fontFamily:g.passageEditorFontFamily,fontScale:g.passageEditorFontScale,id:"passage-dialog-passage-text-code-area-".concat(o.id),label:C("dialogs.passageEdit.passageTextEditorLabel"),labelHidden:!0,onChangeEditor:n,onChangeText:k,options:A,useCodeMirror:g.useCodeMirror,value:d})})},pP=e=>{const{editor:t}=e,{t:r}=Ce();function n(o){t==null||t.execCommand(o),t==null||t.focus()}return y.jsxs(y.Fragment,{children:[y.jsx(Pe,{disabled:!t,icon:y.jsx(qI,{}),label:r("components.indentButtons.indent"),onClick:()=>n("indentMore")}),y.jsx(Pe,{disabled:!t,icon:y.jsx(KI,{}),label:r("components.indentButtons.unindent"),onClick:()=>n("indentLess")})]})},ew=e=>{const{disabled:t,editor:r,watch:n}=e,{t:o}=Ce(),[a,l]=E.useState(!1),[u,d]=E.useState(!1);E.useEffect(()=>{if(r){const g=r.historySize();l(g.redo>0),d(g.undo>0)}else l(!1),d(!1)},[r,n]);function h(g){r==null||r.execCommand(g),r==null||r.focus()}return y.jsxs(y.Fragment,{children:[y.jsx(Pe,{disabled:t||!u,icon:y.jsx(HT,{}),label:o("common.undo"),onClick:()=>h("undo")}),y.jsx(Pe,{disabled:t||!a,icon:y.jsx(BT,{}),label:o("common.redo"),onClick:()=>h("redo")})]})},I9=e=>y.jsx("div",{className:"button-card",children:y.jsx($o,{...e})}),dl=e=>{const{items:t,...r}=e,[n,o]=E.useState(null),[a,l]=E.useState(null),[u,d]=E.useState(!1),{styles:h,attributes:g}=X0(n,a,{strategy:"fixed"});return E.useEffect(()=>{const m=()=>d(!1);return u&&document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[a,u,d]),y.jsxs("span",{className:"menu-button",children:[y.jsx(Pe,{...r,onClick:()=>d(m=>!m),ref:o}),y.jsx(Xn,{classNames:"fade-out",in:u,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:y.jsx("div",{className:"menu-button-menu",ref:l,style:h.popper,...g.popper,children:y.jsx(I9,{floating:!0,children:y.jsx(At,{orientation:"vertical",children:t.map((m,w)=>m.separator?y.jsx(e_,{},w):"checkable"in m?y.jsx(Wi,{checkedIcon:y.jsx(n0,{}),disabled:m.disabled,label:m.label,onChange:m.onClick,uncheckedIcon:y.jsx(Dx,{}),value:m.checked},w):y.jsx(Pe,{disabled:m.disabled,icon:y.jsx(Dx,{}),label:m.label,onClick:m.onClick,variant:m.variant},w))})})})})]})};/*!
* tabbable 5.3.3
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var gP=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],lh=gP.join(","),vP=typeof Element>"u",La=vP?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Hm=!vP&&Element.prototype.getRootNode?function(e){return e.getRootNode()}:function(e){return e.ownerDocument},mP=function(t,r,n){var o=Array.prototype.slice.apply(t.querySelectorAll(lh));return r&&La.call(t,lh)&&o.unshift(t),o=o.filter(n),o},yP=function e(t,r,n){for(var o=[],a=Array.from(t);a.length;){var l=a.shift();if(l.tagName==="SLOT"){var u=l.assignedElements(),d=u.length?u:l.children,h=e(d,!0,n);n.flatten?o.push.apply(o,h):o.push({scope:l,candidates:h})}else{var g=La.call(l,lh);g&&n.filter(l)&&(r||!t.includes(l))&&o.push(l);var m=l.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(l),w=!n.shadowRootFilter||n.shadowRootFilter(l);if(m&&w){var x=e(m===!0?l.children:m.children,!0,n);n.flatten?o.push.apply(o,x):o.push({scope:l,candidates:x})}else a.unshift.apply(a,l.children)}}return o},wP=function(t,r){return t.tabIndex<0&&(r||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},R9=function(t,r){return t.tabIndex===r.tabIndex?t.documentOrder-r.documentOrder:t.tabIndex-r.tabIndex},bP=function(t){return t.tagName==="INPUT"},_9=function(t){return bP(t)&&t.type==="hidden"},$9=function(t){var r=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return r},D9=function(t,r){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===r)return t[n]},F9=function(t){if(!t.name)return!0;var r=t.form||Hm(t),n=function(u){return r.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=n(window.CSS.escape(t.name));else try{o=n(t.name)}catch(l){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",l.message),!1}var a=D9(o,t.form);return!a||a===t},z9=function(t){return bP(t)&&t.type==="radio"},H9=function(t){return z9(t)&&!F9(t)},OE=function(t){var r=t.getBoundingClientRect(),n=r.width,o=r.height;return n===0&&o===0},B9=function(t,r){var n=r.displayCheck,o=r.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=La.call(t,"details>summary:first-of-type"),l=a?t.parentElement:t;if(La.call(l,"details:not([open]) *"))return!0;var u=Hm(t).host,d=(u==null?void 0:u.ownerDocument.contains(u))||t.ownerDocument.contains(t);if(!n||n==="full"){if(typeof o=="function"){for(var h=t;t;){var g=t.parentElement,m=Hm(t);if(g&&!g.shadowRoot&&o(g)===!0)return OE(t);t.assignedSlot?t=t.assignedSlot:!g&&m!==t.ownerDocument?t=m.host:t=g}t=h}if(d)return!t.getClientRects().length}else if(n==="non-zero-area")return OE(t);return!1},W9=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var r=t.parentElement;r;){if(r.tagName==="FIELDSET"&&r.disabled){for(var n=0;n<r.children.length;n++){var o=r.children.item(n);if(o.tagName==="LEGEND")return La.call(r,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}r=r.parentElement}return!1},uh=function(t,r){return!(r.disabled||_9(r)||B9(r,t)||$9(r)||W9(r))},Bm=function(t,r){return!(H9(r)||wP(r)<0||!uh(t,r))},U9=function(t){var r=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(r)||r>=0)},K9=function e(t){var r=[],n=[];return t.forEach(function(o,a){var l=!!o.scope,u=l?o.scope:o,d=wP(u,l),h=l?e(o.candidates):u;d===0?l?r.push.apply(r,h):r.push(u):n.push({documentOrder:a,tabIndex:d,item:o,isScope:l,content:h})}),n.sort(R9).reduce(function(o,a){return a.isScope?o.push.apply(o,a.content):o.push(a.content),o},[]).concat(r)},xP=function(t,r){r=r||{};var n;return r.getShadowRoot?n=yP([t],r.includeContainer,{filter:Bm.bind(null,r),flatten:!1,getShadowRoot:r.getShadowRoot,shadowRootFilter:U9}):n=mP(t,r.includeContainer,Bm.bind(null,r)),K9(n)},SP=function(t,r){r=r||{};var n;return r.getShadowRoot?n=yP([t],r.includeContainer,{filter:uh.bind(null,r),flatten:!0,getShadowRoot:r.getShadowRoot}):n=mP(t,r.includeContainer,uh.bind(null,r)),n},vu=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return La.call(t,lh)===!1?!1:Bm(r,t)},G9=gP.concat("iframe").join(","),fd=function(t,r){if(r=r||{},!t)throw new Error("No node provided");return La.call(t,G9)===!1?!1:uh(r,t)};const q9=Object.freeze(Object.defineProperty({__proto__:null,focusable:SP,isFocusable:fd,isTabbable:vu,tabbable:xP},Symbol.toStringTag,{value:"Module"}));/*!
* focus-trap 6.9.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function PE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function LE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(r),!0).forEach(function(n){V9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V9(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NE=function(){var e=[];return{activateTrap:function(r){if(e.length>0){var n=e[e.length-1];n!==r&&n.pause()}var o=e.indexOf(r);o===-1||e.splice(o,1),e.push(r)},deactivateTrap:function(r){var n=e.indexOf(r);n!==-1&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}}}(),X9=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},Y9=function(t){return t.key==="Escape"||t.key==="Esc"||t.keyCode===27},Q9=function(t){return t.key==="Tab"||t.keyCode===9},jE=function(t){return setTimeout(t,0)},AE=function(t,r){var n=-1;return t.every(function(o,a){return r(o)?(n=a,!1):!0}),n},su=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return typeof t=="function"?t.apply(void 0,n):t},$f=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},J9=function(t,r){var n=(r==null?void 0:r.document)||document,o=LE({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},r),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},l,u=function(D,$,B){return D&&D[$]!==void 0?D[$]:o[B||$]},d=function(D){return a.containerGroups.findIndex(function($){var B=$.container,U=$.tabbableNodes;return B.contains(D)||U.find(function(Y){return Y===D})})},h=function(D){var $=o[D];if(typeof $=="function"){for(var B=arguments.length,U=new Array(B>1?B-1:0),Y=1;Y<B;Y++)U[Y-1]=arguments[Y];$=$.apply(void 0,U)}if($===!0&&($=void 0),!$){if($===void 0||$===!1)return $;throw new Error("`".concat(D,"` was specified but was not a node, or did not return a node"))}var V=$;if(typeof $=="string"&&(V=n.querySelector($),!V))throw new Error("`".concat(D,"` as selector refers to no known node"));return V},g=function(){var D=h("initialFocus");if(D===!1)return!1;if(D===void 0)if(d(n.activeElement)>=0)D=n.activeElement;else{var $=a.tabbableGroups[0],B=$&&$.firstTabbableNode;D=B||h("fallbackFocus")}if(!D)throw new Error("Your focus-trap needs to have at least one focusable element");return D},m=function(){if(a.containerGroups=a.containers.map(function(D){var $=xP(D,o.tabbableOptions),B=SP(D,o.tabbableOptions);return{container:D,tabbableNodes:$,focusableNodes:B,firstTabbableNode:$.length>0?$[0]:null,lastTabbableNode:$.length>0?$[$.length-1]:null,nextTabbableNode:function(Y){var V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,de=B.findIndex(function(W){return W===Y});if(!(de<0))return V?B.slice(de+1).find(function(W){return vu(W,o.tabbableOptions)}):B.slice(0,de).reverse().find(function(W){return vu(W,o.tabbableOptions)})}}}),a.tabbableGroups=a.containerGroups.filter(function(D){return D.tabbableNodes.length>0}),a.tabbableGroups.length<=0&&!h("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},w=function R(D){if(D!==!1&&D!==n.activeElement){if(!D||!D.focus){R(g());return}D.focus({preventScroll:!!o.preventScroll}),a.mostRecentlyFocusedNode=D,X9(D)&&D.select()}},x=function(D){var $=h("setReturnFocus",D);return $||($===!1?!1:D)},C=function(D){var $=$f(D);if(!(d($)>=0)){if(su(o.clickOutsideDeactivates,D)){l.deactivate({returnFocus:o.returnFocusOnDeactivate&&!fd($,o.tabbableOptions)});return}su(o.allowOutsideClick,D)||D.preventDefault()}},j=function(D){var $=$f(D),B=d($)>=0;B||$ instanceof Document?B&&(a.mostRecentlyFocusedNode=$):(D.stopImmediatePropagation(),w(a.mostRecentlyFocusedNode||g()))},T=function(D){var $=$f(D);m();var B=null;if(a.tabbableGroups.length>0){var U=d($),Y=U>=0?a.containerGroups[U]:void 0;if(U<0)D.shiftKey?B=a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:B=a.tabbableGroups[0].firstTabbableNode;else if(D.shiftKey){var V=AE(a.tabbableGroups,function(oe){var re=oe.firstTabbableNode;return $===re});if(V<0&&(Y.container===$||fd($,o.tabbableOptions)&&!vu($,o.tabbableOptions)&&!Y.nextTabbableNode($,!1))&&(V=U),V>=0){var de=V===0?a.tabbableGroups.length-1:V-1,W=a.tabbableGroups[de];B=W.lastTabbableNode}}else{var _=AE(a.tabbableGroups,function(oe){var re=oe.lastTabbableNode;return $===re});if(_<0&&(Y.container===$||fd($,o.tabbableOptions)&&!vu($,o.tabbableOptions)&&!Y.nextTabbableNode($))&&(_=U),_>=0){var M=_===a.tabbableGroups.length-1?0:_+1,Q=a.tabbableGroups[M];B=Q.firstTabbableNode}}}else B=h("fallbackFocus");B&&(D.preventDefault(),w(B))},k=function(D){if(Y9(D)&&su(o.escapeDeactivates,D)!==!1){D.preventDefault(),l.deactivate();return}if(Q9(D)){T(D);return}},P=function(D){var $=$f(D);d($)>=0||su(o.clickOutsideDeactivates,D)||su(o.allowOutsideClick,D)||(D.preventDefault(),D.stopImmediatePropagation())},A=function(){if(a.active)return NE.activateTrap(l),a.delayInitialFocusTimer=o.delayInitialFocus?jE(function(){w(g())}):w(g()),n.addEventListener("focusin",j,!0),n.addEventListener("mousedown",C,{capture:!0,passive:!1}),n.addEventListener("touchstart",C,{capture:!0,passive:!1}),n.addEventListener("click",P,{capture:!0,passive:!1}),n.addEventListener("keydown",k,{capture:!0,passive:!1}),l},L=function(){if(a.active)return n.removeEventListener("focusin",j,!0),n.removeEventListener("mousedown",C,!0),n.removeEventListener("touchstart",C,!0),n.removeEventListener("click",P,!0),n.removeEventListener("keydown",k,!0),l};return l={get active(){return a.active},get paused(){return a.paused},activate:function(D){if(a.active)return this;var $=u(D,"onActivate"),B=u(D,"onPostActivate"),U=u(D,"checkCanFocusTrap");U||m(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement,$&&$();var Y=function(){U&&m(),A(),B&&B()};return U?(U(a.containers.concat()).then(Y,Y),this):(Y(),this)},deactivate:function(D){if(!a.active)return this;var $=LE({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},D);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,L(),a.active=!1,a.paused=!1,NE.deactivateTrap(l);var B=u($,"onDeactivate"),U=u($,"onPostDeactivate"),Y=u($,"checkCanReturnFocus"),V=u($,"returnFocus","returnFocusOnDeactivate");B&&B();var de=function(){jE(function(){V&&w(x(a.nodeFocusedBeforeActivation)),U&&U()})};return V&&Y?(Y(x(a.nodeFocusedBeforeActivation)).then(de,de),this):(de(),this)},pause:function(){return a.paused||!a.active?this:(a.paused=!0,L(),this)},unpause:function(){return!a.paused||!a.active?this:(a.paused=!1,m(),A(),this)},updateContainerElements:function(D){var $=[].concat(D).filter(Boolean);return a.containers=$.map(function(B){return typeof B=="string"?n.querySelector(B):B}),a.active&&m(),this}},l.updateContainerElements(t),l};const Z9=Object.freeze(Object.defineProperty({__proto__:null,createFocusTrap:J9},Symbol.toStringTag,{value:"Module"})),eK=oy(Z9),tK=oy(q9);function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function rK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nK(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iK(e,t,r){return t&&nK(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function oK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Um(e,t)}function Um(e,t){return Um=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Um(e,t)}function aK(e){var t=lK();return function(){var n=ch(e),o;if(t){var a=ch(this).constructor;o=Reflect.construct(n,arguments,a)}else o=n.apply(this,arguments);return sK(this,o)}}function sK(e,t){if(t&&(Wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mu(e)}function mu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lK(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ch(e){return ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ch(e)}function uK(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Df=E,cK=tl,We=Wh,fK=eK,dK=fK.createFocusTrap,hK=tK,pK=hK.isFocusable,tw=function(e){oK(r,e);var t=aK(r);function r(n){var o;rK(this,r),o=t.call(this,n),uK(mu(o),"getNodeForOption",function(u){var d,h=(d=this.internalOptions[u])!==null&&d!==void 0?d:this.originalOptions[u];if(typeof h=="function"){for(var g=arguments.length,m=new Array(g>1?g-1:0),w=1;w<g;w++)m[w-1]=arguments[w];h=h.apply(void 0,m)}if(h===!0&&(h=void 0),!h){if(h===void 0||h===!1)return h;throw new Error("`".concat(u,"` was specified but was not a node, or did not return a node"))}var x=h;if(typeof h=="string"){var C;if(x=(C=this.getDocument())===null||C===void 0?void 0:C.querySelector(h),!x)throw new Error("`".concat(u,"` as selector refers to no known node"))}return x}),o.handleDeactivate=o.handleDeactivate.bind(mu(o)),o.handlePostDeactivate=o.handlePostDeactivate.bind(mu(o)),o.handleClickOutsideDeactivates=o.handleClickOutsideDeactivates.bind(mu(o)),o.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:o.handleDeactivate,onPostDeactivate:o.handlePostDeactivate,clickOutsideDeactivates:o.handleClickOutsideDeactivates},o.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var a=n.focusTrapOptions;for(var l in a)if(Object.prototype.hasOwnProperty.call(a,l)){if(l==="returnFocusOnDeactivate"||l==="onDeactivate"||l==="onPostDeactivate"||l==="checkCanReturnFocus"||l==="clickOutsideDeactivates"){o.originalOptions[l]=a[l];continue}o.internalOptions[l]=a[l]}return o.outsideClick=null,o.focusTrapElements=n.containerElements||[],o.updatePreviousElement(),o}return iK(r,[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||(typeof document<"u"?document:void 0)}},{key:"getReturnFocusNode",value:function(){var o=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return o||(o===!1?!1:this.previouslyFocusedElement)}},{key:"updatePreviousElement",value:function(){var o=this.getDocument();o&&(this.previouslyFocusedElement=o.activeElement)}},{key:"deactivateTrap",value:function(){!this.focusTrap||!this.focusTrap.active||this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(o){var a=typeof this.originalOptions.clickOutsideDeactivates=="function"?this.originalOptions.clickOutsideDeactivates.call(null,o):this.originalOptions.clickOutsideDeactivates;return a&&(this.outsideClick={target:o.target,allowDeactivation:a}),a}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var o=this,a=function(){var u=o.getReturnFocusNode(),d=!!(o.originalOptions.returnFocusOnDeactivate&&u!==null&&u!==void 0&&u.focus&&(!o.outsideClick||o.outsideClick.allowDeactivation&&!pK(o.outsideClick.target,o.internalOptions.tabbableOptions))),h=o.internalOptions.preventScroll,g=h===void 0?!1:h;d&&u.focus({preventScroll:g}),o.originalOptions.onPostDeactivate&&o.originalOptions.onPostDeactivate.call(null),o.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(a,a):a()}},{key:"setupFocusTrap",value:function(){if(!this.focusTrap){var o=this.focusTrapElements.map(cK.findDOMNode),a=o.some(Boolean);a&&(this.focusTrap=this.props._createFocusTrap(o,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(o){if(this.focusTrap){o.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var a=!o.active&&this.props.active,l=o.active&&!this.props.active,u=!o.paused&&this.props.paused,d=o.paused&&!this.props.paused;if(a&&(this.updatePreviousElement(),this.focusTrap.activate()),l){this.deactivateTrap();return}u&&this.focusTrap.pause(),d&&this.focusTrap.unpause()}else o.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var o=this,a=this.props.children?Df.Children.only(this.props.children):void 0;if(a){if(a.type&&a.type===Df.Fragment)throw new Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");var l=function(h){var g=o.props.containerElements;a&&(typeof a.ref=="function"?a.ref(h):a.ref&&(a.ref.current=h)),o.focusTrapElements=g||[h]},u=Df.cloneElement(a,{ref:l});return u}return null}}]),r}(Df.Component),lu=typeof Element>"u"?Function:Element;tw.propTypes={active:We.bool,paused:We.bool,focusTrapOptions:We.shape({document:We.object,onActivate:We.func,onPostActivate:We.func,checkCanFocusTrap:We.func,onDeactivate:We.func,onPostDeactivate:We.func,checkCanReturnFocus:We.func,initialFocus:We.oneOfType([We.instanceOf(lu),We.string,We.bool,We.func]),fallbackFocus:We.oneOfType([We.instanceOf(lu),We.string,We.func]),escapeDeactivates:We.oneOfType([We.bool,We.func]),clickOutsideDeactivates:We.oneOfType([We.bool,We.func]),returnFocusOnDeactivate:We.bool,setReturnFocus:We.oneOfType([We.instanceOf(lu),We.string,We.bool,We.func]),allowOutsideClick:We.oneOfType([We.bool,We.func]),preventScroll:We.bool,tabbableOptions:We.shape({displayCheck:We.oneOf(["full","non-zero-area","none"]),getShadowRoot:We.oneOfType([We.bool,We.func])})}),containerElements:We.arrayOf(We.instanceOf(lu)),children:We.oneOfType([We.element,We.instanceOf(lu)])};tw.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:dK};var gK=tw;const vK=wt(gK),ha=e=>{const{ariaLabel:t,children:r,onChangeOpen:n,open:o,...a}=e,[l,u]=E.useState(null),[d,h]=E.useState(null),{styles:g,attributes:m}=X0(l,d,{strategy:"fixed"});return y.jsxs("span",{className:"card-button",children:[y.jsx(Pe,{onClick:()=>n(!o),...a,ref:u}),y.jsx(Xn,{classNames:"fade-out",in:o,mountOnEnter:!0,timeout:200,unmountOnExit:!0,children:y.jsx(vK,{focusTrapOptions:{clickOutsideDeactivates:!0,onDeactivate:()=>n(!1)},children:y.jsx("div",{"aria-label":t,className:"card-button-card",ref:h,role:"dialog",style:g.popper,...m.popper,children:y.jsx($o,{floating:!0,children:r})})})})]})},Tc=e=>{const{cancelIcon:t,cancelLabel:r,onChange:n,onSubmit:o,prompt:a,submitIcon:l,submitLabel:u,submitVariant:d,validate:h,validateOn:g="change",value:m,...w}=e,x=E.useRef(!0),[C,j]=E.useState(!1),[T,k]=E.useState(),{t:P}=Ce();E.useEffect(()=>{async function R(){if(g==="change"&&h){const D=await h(m);x.current&&k(D)}else x.current&&k({valid:!0})}R()},[h,m]),E.useEffect(()=>()=>{x.current=!1},[]);function A(R){R.preventDefault(),j(!1)}async function L(R){if(R.preventDefault(),g==="submit"&&h){k($=>({...$,valid:!1}));const D=await h(m);if(k(D),!D.valid)return}else k({valid:!0});T!=null&&T.valid&&(o(m),j(!1))}return y.jsx("span",{className:"prompt-button",children:y.jsx(ha,{ariaLabel:a,onChangeOpen:j,open:C,...w,children:y.jsxs("form",{onSubmit:L,children:[y.jsxs(fr,{children:[y.jsx(tc,{onChange:n,orientation:"vertical",value:m,children:a}),(T==null?void 0:T.message)&&y.jsx("p",{className:"validation-message",children:T.message})]}),y.jsxs(At,{children:[y.jsx(Pe,{buttonType:"submit",disabled:!(T!=null&&T.valid),icon:l!=null?l:y.jsx(n0,{}),label:u!=null?u:P("common.ok"),variant:d!=null?d:"primary"}),y.jsx(Pe,{buttonType:"button",icon:t!=null?t:y.jsx(zn,{}),label:r!=null?r:P("common.cancel"),onClick:A})]})]})})})},mK=()=>{const{t:e}=Ce();return y.jsx(Pe,{disabled:!0,icon:y.jsx(vc,{}),label:e("common.rename")})},yK=e=>{const{onRename:t,passage:r,story:n}=e,[o,a]=E.useState(r.name),{t:l}=Ce();function u(d){return d.trim()===""?{message:l("components.renamePassageButton.emptyName"),valid:!1}:n.passages.some(h=>h.id!==r.id&&h.name===d)?{message:l("components.renamePassageButton.nameAlreadyUsed"),valid:!1}:{valid:!0}}return y.jsx(Tc,{icon:y.jsx(vc,{}),label:l("common.rename"),onChange:d=>a(d.target.value),onSubmit:t,prompt:l("common.renamePrompt",{name:r.name}),validate:u,value:o})},EP=e=>!e.disabled&&e.passage?y.jsx(yK,{...e}):y.jsx(mK,{}),rw=["none","red","orange","yellow","green","blue","purple"],CP=e=>{const{assignedTags:t,disabled:r,existingTags:n,icon:o,label:a,onAdd:l}=e,[u,d]=E.useState(!0),[h,g]=E.useState("none"),[m,w]=E.useState(""),[x,C]=E.useState(!1),{t:j}=Ce();let T,k=sl(m);!k&&m!==""&&(T=j("components.addTagButton.invalidName")),k&&u&&(k=!n.includes(m),k||(T=j("components.addTagButton.alreadyAdded")));function P(){u?l(m,h):l(m),C(!1)}function A(L){const R=L.target.value;w(R),d(R==="")}return y.jsx("span",{className:"add-tag-button",children:y.jsxs(ha,{ariaLabel:j("components.addTagButton.addLabel"),disabled:r,icon:o!=null?o:y.jsx(Bs,{}),label:a!=null?a:j("common.tag"),onChangeOpen:C,open:x,children:[y.jsxs(fr,{children:[y.jsx(Ui,{onChange:A,options:[{label:j("components.addTagButton.newTag"),value:""},...n.map(L=>({disabled:t.includes(L),label:L,value:L}))],value:u?"":m,children:j("components.addTagButton.addLabel")}),u&&y.jsxs(y.Fragment,{children:[y.jsx(tc,{onChange:L=>w(L.target.value.replace(/\s/g,"-")),value:m,children:j("components.addTagButton.tagNameLabel")}),y.jsx(Ui,{onChange:L=>g(L.target.value),options:rw.map(L=>({label:j("colors.".concat(L)),value:L})),value:h,children:j("components.addTagButton.tagColorLabel")})]}),u&&!!T&&y.jsx("p",{children:T})]}),y.jsxs(At,{children:[y.jsx(Pe,{disabled:!k,icon:y.jsx(Bs,{}),label:j("common.add"),onClick:P,variant:"create"}),y.jsx(Pe,{icon:y.jsx(zn,{}),label:j("common.cancel"),onClick:()=>C(!1)})]})]})})},kP=e=>{const{t}=Ce();return y.jsx("span",{className:Wt("tag-button","color-".concat(e.color)),children:y.jsx(dl,{disabled:e.disabled,icon:y.jsx(WT,{}),iconPosition:"end",items:[...rw.map(r=>({checkable:!0,checked:r==="none"?!e.color:r===e.color,label:t("colors.".concat(r)),onClick:()=>e.onChangeColor(r)})),{separator:!0},{label:t("common.remove"),onClick:e.onRemove}],label:e.name})})},TP=E.memo(e=>y.jsx("div",{className:"tag-stripe",children:e.tags.map(t=>y.jsx("span",{className:"color-".concat(e.tagColors[t]),title:t},t))}));TP.displayName="TagStripe";function Oc(){const{prefs:e}=lt(),{dispatch:t,formats:r}=kn(),{stories:n}=gt();return{publishArchive:E.useCallback(async()=>yO(n,vn()),[n]),proofStory:E.useCallback(async o=>{const a=st(n,o),l=bn(r,e.proofingFormat.name,e.proofingFormat.version),u=await Qu(l)(t);if(!u)throw new Error("Couldn't load story format properties");return Zd(a,u.source,vn())},[r,e.proofingFormat.name,e.proofingFormat.version,n,t]),publishStory:E.useCallback(async(o,a)=>{const l=st(n,o),u=bn(r,l.storyFormat,l.storyFormatVersion),d=await Qu(u)(t);if(!d)throw new Error("Couldn't load story format properties");return Zd(l,d.source,vn(),a)},[r,n,t]),publishStoryData:E.useCallback(o=>{const a=st(n,o);return Hh(a,vn(),{startOptional:!0})},[n])}}function OP(){const{proofStory:e,publishStory:t}=Oc();if(Ia()){const{twineElectron:r}=window;if(!r)throw new Error("Electron bridge is not present on window.");return{playStory:async n=>{r.openWithScratchFile(await t(n),"play-".concat(n,".html"))},proofStory:async n=>{r.openWithScratchFile(await e(n),"proof-".concat(n,".html"))},testStory:async(n,o)=>{r.openWithScratchFile(await t(n,{formatOptions:"debug",startId:o}),"test-".concat(n,".html"))}}}return{playStory:async r=>{window.open("#/stories/".concat(r,"/play"),"_blank")},proofStory:async r=>{window.open("#/stories/".concat(r,"/proof"),"_blank")},testStory:async(r,n)=>{window.open(n?"#/stories/".concat(r,"/test/").concat(n):"#/stories/".concat(r,"/test"),"_blank")}}}const PP=e=>{const{passage:t,story:r}=e,{testStory:n}=OP(),{t:o}=Ce();return y.jsx(Pe,{disabled:!t,icon:y.jsx(QT,{}),label:o("routes.storyEdit.toolbar.testFromHere"),onClick:()=>n(r.id,t==null?void 0:t.id)})},wK=e=>{const{disabled:t,editor:r,passage:n,story:o,useCodeMirror:a}=e,{dispatch:l}=fn(),{t:u}=Ce();function d(m,w){l(JH(o,n,m),u("undoChange.addTag")),w&&l(V2(o,m,w))}function h(m){l(Mo(o,n,{name:m},{dontUpdateOthers:!0}))}function g({height:m,width:w}){l(Mo(o,n,{height:m,width:w}))}return y.jsxs(At,{children:[a&&y.jsx(ew,{disabled:t,editor:r,watch:n.text}),y.jsx(CP,{disabled:t,assignedTags:n.tags,existingTags:U2(o),onAdd:d}),y.jsx(dl,{disabled:t,icon:y.jsx(uR,{}),items:[{checkable:!0,checked:n.height===100&&n.width===100,label:u("dialogs.passageEdit.sizeSmall"),onClick:()=>g({height:100,width:100})},{checkable:!0,checked:n.height===200&&n.width===200,label:u("dialogs.passageEdit.sizeLarge"),onClick:()=>g({height:200,width:200})},{checkable:!0,checked:n.height===200&&n.width===100,label:u("dialogs.passageEdit.sizeTall"),onClick:()=>g({height:200,width:100})},{checkable:!0,checked:n.height===100&&n.width===200,label:u("dialogs.passageEdit.sizeWide"),onClick:()=>g({height:100,width:200})}],label:u("dialogs.passageEdit.size")}),y.jsx(EP,{disabled:t,onRename:h,passage:n,story:o}),y.jsx(PP,{passage:n,story:o})]})};function LP(){const{prefs:e}=lt(),[t]=E.useState(window.matchMedia("(prefers-color-scheme: dark)")),[r,n]=E.useState(t.matches?"dark":"light");return E.useEffect(()=>{const o=a=>n(a.matches?"dark":"light");return t.addEventListener("change",o),()=>t.removeEventListener("change",o)},[t]),e.appTheme==="system"?r:e.appTheme}function bK(e,t){const{dispatch:r,formats:n}=kn(),[o,a]=E.useState({}),[l,u]=E.useState(),d=bn(n,e,t),{prefs:h}=lt(),g=o0(h,e,t);return E.useEffect(()=>{var m,w;if(!g){if(d.loadState==="unloaded")r(Qu(d));else if(d.loadState==="loaded"&&!o[ju(d)]){const x=ju(d),C=J0(d,vn().version);if((m=C==null?void 0:C.codeMirror)!=null&&m.commands)for(const j in C.codeMirror.commands){const T=x+j;T in nc.commands?console.warn('CodeMirror already has a "'.concat(T,'" command defined, skipping')):nc.commands[T]=C.codeMirror.commands[j]}(w=C==null?void 0:C.codeMirror)!=null&&w.toolbar&&u(()=>(j,T)=>{var P;if(!((P=C==null?void 0:C.codeMirror)!=null&&P.toolbar))return[];const k=C.codeMirror.toolbar(j,T);return Array.isArray(k)?k.reduce((A,L)=>{switch(L.type){case"button":return[...A,{...L,command:x+L.command}];case"menu":if(Array.isArray(L.items))return[...A,{...L,items:L.items.filter(R=>["button","separator"].includes(R.type)).map(R=>R.type==="separator"?R:{...R,command:x+R.command})}]}return A},[]):[]}),a(j=>({...j,[ju(d)]:!0}))}}},[r,g,d,o]),l}const xK=e=>{const{disabled:t,editor:r,onExecCommand:n,storyFormat:o}=e,a=E.useRef(null),l=LP(),{prefs:u}=lt(),d=bK(o.name,o.version),[h,g]=E.useState([]),m=E.useCallback(()=>{if(d&&a.current&&r)try{const x=window.getComputedStyle(a.current);g(d(r,{appTheme:l,foregroundColor:x.color,locale:u.locale}))}catch(x){console.error("Toolbar function for ".concat(o.name," ").concat(o.version," threw an error, skipping update"),x)}else g([])},[l,r,u.locale,o.name,o.version,d]);E.useEffect(()=>{if(r)return m(),r.on("cursorActivity",m),()=>r.off("cursorActivity",m)},[r,m]);function w(x){n(x),Promise.resolve().then(m)}return y.jsx("div",{className:"story-format-toolbar",ref:a,children:y.jsx(At,{children:h.map((x,C)=>{switch(x.type){case"button":return y.jsx(Pe,{disabled:t||x.disabled,icon:y.jsx("img",{src:x.icon,alt:""}),iconOnly:x.iconOnly,label:x.label,onClick:()=>w(x.command)},C);case"menu":return y.jsx(dl,{disabled:t||x.disabled,icon:y.jsx("img",{src:x.icon,alt:""}),iconOnly:x.iconOnly,items:x.items.filter(j=>["button","separator"].includes(j.type)).map(j=>j.type==="button"?{type:"button",disabled:j.disabled,label:j.label,onClick:()=>w(j.command)}:{separator:!0}),label:x.label},C)}return null})})})},SK=e=>{const{disabled:t,passage:r,story:n}=e,{dispatch:o,stories:a}=fn(),{t:l}=Ce();function u(h,g){o(Nr(a,n,{tagColors:{...n.tagColors,[h]:g}}))}function d(h){o(ZH(n,r,h),l("undoChange.removeTag"))}return r.tags.length===0?null:y.jsx("div",{className:"tags",children:y.jsx(At,{children:r.tags.map(h=>y.jsx(kP,{color:n.tagColors[h],disabled:t,name:h,onChangeColor:g=>u(h,g),onRemove:()=>d(h)},h))})})},ME=e=>{const{disabled:t,passageId:r,storyId:n}=e,[o,a]=E.useState(!0),[l,u]=E.useState(!1),[d,h]=E.useState(),{ErrorBoundary:g,error:m,reset:w}=kh(),{prefs:x}=lt(),{dispatch:C,stories:j}=fn(),{formats:T}=kn(),k=Fi(j,n,r),P=st(j,n),A=bn(T,P.storyFormat,P.storyFormatVersion),{t:L}=Ce();E.useEffect(()=>{m&&(o?(console.error("Passage editor crashed, trying without format extensions",m),a(!1)):u(!0),w())},[m,w,o]);const R=E.useCallback($=>{C(Mo(P,k,{text:$}))},[C,k,P]);function D($){if(!d)throw new Error("No editor set");d.execCommand($);const B=d.listSelections();Promise.resolve().then(()=>d.setSelections(B))}return l?y.jsx(_o,{children:L("dialogs.passageEdit.editorCrashed")}):y.jsxs("div",{className:"passage-edit-contents","aria-hidden":t,children:[y.jsx(wK,{disabled:t,editor:d,passage:k,story:P,useCodeMirror:x.useCodeMirror}),x.useCodeMirror&&o&&y.jsx(xK,{disabled:t,editor:d,onExecCommand:D,storyFormat:A}),y.jsx(SK,{disabled:t,passage:k,story:P}),y.jsx(g,{children:y.jsx(M9,{disabled:t,onChange:R,onEditorChange:h,passage:k,story:P,storyFormat:A,storyFormatExtensionsDisabled:!o})})]})},IE=({value:e})=>{const t=/^\s*/.exec(e),r=t?t[0].length:0,n=/\s*$/.exec(e),o=n?n[0].length:0;return y.jsxs("span",{className:"visible-whitespace",children:[[...Array(r)].map((a,l)=>y.jsx(Lx,{},l)),e.trim(),[...Array(o)].map((a,l)=>y.jsx(Lx,{},l))]})},EK=e=>{const{onChangeProps:t,onClose:r,passageIds:n,storyId:o,...a}=e,{dispatch:l}=Gr(),{stories:u}=gt(),d=n.map(m=>Fi(u,o,m).name),h={};a.collapsed&&(h.height="calc(var(--control-height) * ".concat(n.length,")"),a.maximized&&(h.bottom=0,h.position="absolute"));function g(m,w){w!=null&&w.shiftKey?r(w):l(CK([m]))}return y.jsx("div",{className:Wt("passage-edit-stack",{collapsed:a.collapsed}),style:h,children:y.jsx(C9,{childKeys:n,children:n.map((m,w)=>w!==0?E.createElement(v9,{...a,headerDisplayLabel:y.jsx(IE,{value:d[w]}),headerLabel:d[w],key:m,onClose:x=>g(m,x),onRaise:()=>l(nw(o,[m]))},y.jsx(ME,{disabled:!0,passageId:m,storyId:o})):E.createElement(Tn,{...a,headerDisplayLabel:y.jsx(IE,{value:d[w]}),headerLabel:d[w],key:m,maximizable:!0,onClose:x=>g(m,x)},y.jsx(ME,{passageId:m,storyId:o})))})})},Km=e=>{const{passageIds:t,storyId:r}=e,{stories:n}=gt(),o=t.filter(a=>{try{Fi(n,r,a)}catch{return!1}return!0});return o.length===0?(e.onClose(),null):o.length!==t.length?(e.onChangeProps({...e,passageIds:o}),null):y.jsx(EK,{...e})};function nw(e,t,r=6){return(n,o)=>{var u,d;const a=o(),l=a.findIndex(({component:h})=>h===Km);if(l!==-1){const h=(d=(u=a[l].props)==null?void 0:u.passageIds)!=null?d:[],g=[...t,...h.filter(m=>!t.includes(m))];g.length>r&&(g.length=r),n({type:"setDialogProps",index:l,props:{...a[l].props,passageIds:g}})}else{const h=[...t];h.length>r&&(h.length=r),n({type:"addDialog",component:Km,props:{storyId:e,passageIds:h}})}}}function CK(e){return(t,r)=>{const n=r(),o=n.findIndex(({component:l})=>l===Km);if(o===-1){console.warn("Asked to remove a passage editor, but there is no editor stack");return}const a=n[o].props.passageIds.filter(l=>!e.includes(l));a.length===0?t({type:"removeDialog",index:o}):t({type:"setDialogProps",index:o,props:{...n[o].props,passageIds:a}})}}var kK=Mh;function TK(){this.__data__=new kK,this.size=0}var OK=TK;function PK(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var LK=PK;function NK(e){return this.__data__.get(e)}var jK=NK;function AK(e){return this.__data__.has(e)}var MK=AK,IK=Mh,RK=c0,_K=f0,$K=200;function DK(e,t){var r=this.__data__;if(r instanceof IK){var n=r.__data__;if(!RK||n.length<$K-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new _K(n)}return r.set(e,t),this.size=r.size,this}var FK=DK,zK=Mh,HK=OK,BK=LK,WK=jK,UK=MK,KK=FK;function hl(e){var t=this.__data__=new zK(e);this.size=t.size}hl.prototype.clear=HK;hl.prototype.delete=BK;hl.prototype.get=WK;hl.prototype.has=UK;hl.prototype.set=KK;var NP=hl;function GK(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var qK=GK,VK=k2,XK=qK,YK=T2,QK=1,JK=2;function ZK(e,t,r,n,o,a){var l=r&QK,u=e.length,d=t.length;if(u!=d&&!(l&&d>u))return!1;var h=a.get(e),g=a.get(t);if(h&&g)return h==t&&g==e;var m=-1,w=!0,x=r&JK?new VK:void 0;for(a.set(e,t),a.set(t,e);++m<u;){var C=e[m],j=t[m];if(n)var T=l?n(j,C,m,t,e,a):n(C,j,m,e,t,a);if(T!==void 0){if(T)continue;w=!1;break}if(x){if(!XK(t,function(k,P){if(!YK(x,P)&&(C===k||o(C,k,r,n,a)))return x.push(P)})){w=!1;break}}else if(!(C===j||o(C,j,r,n,a))){w=!1;break}}return a.delete(e),a.delete(t),w}var jP=ZK,eG=yi,tG=eG.Uint8Array,rG=tG;function nG(e){var t=-1,r=Array(e.size);return e.forEach(function(n,o){r[++t]=[o,n]}),r}var iG=nG,RE=mc,_E=rG,oG=Oh,aG=jP,sG=iG,lG=d0,uG=1,cG=2,fG="[object Boolean]",dG="[object Date]",hG="[object Error]",pG="[object Map]",gG="[object Number]",vG="[object RegExp]",mG="[object Set]",yG="[object String]",wG="[object Symbol]",bG="[object ArrayBuffer]",xG="[object DataView]",$E=RE?RE.prototype:void 0,av=$E?$E.valueOf:void 0;function SG(e,t,r,n,o,a,l){switch(r){case xG:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case bG:return!(e.byteLength!=t.byteLength||!a(new _E(e),new _E(t)));case fG:case dG:case gG:return oG(+e,+t);case hG:return e.name==t.name&&e.message==t.message;case vG:case yG:return e==t+"";case pG:var u=sG;case mG:var d=n&uG;if(u||(u=lG),e.size!=t.size&&!d)return!1;var h=l.get(e);if(h)return h==t;n|=cG,l.set(e,t);var g=aG(u(e),u(t),n,o,a,l);return l.delete(e),g;case wG:if(av)return av.call(e)==av.call(t)}return!1}var EG=SG;function CG(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var AP=CG,kG=AP,TG=Gn;function OG(e,t,r){var n=t(e);return TG(e)?n:kG(n,r(e))}var PG=OG;function LG(e,t){for(var r=-1,n=e==null?0:e.length,o=0,a=[];++r<n;){var l=e[r];t(l,r,e)&&(a[o++]=l)}return a}var NG=LG;function jG(){return[]}var AG=jG,MG=NG,IG=AG,RG=Object.prototype,_G=RG.propertyIsEnumerable,DE=Object.getOwnPropertySymbols,$G=DE?function(e){return e==null?[]:(e=Object(e),MG(DE(e),function(t){return _G.call(e,t)}))}:IG,DG=$G;function FG(e,t){return function(r){return e(t(r))}}var zG=FG,HG=zG,BG=HG(Object.keys,Object),WG=BG,UG=g2,KG=WG,GG=Object.prototype,qG=GG.hasOwnProperty;function VG(e){if(!UG(e))return KG(e);var t=[];for(var r in Object(e))qG.call(e,r)&&r!="constructor"&&t.push(r);return t}var XG=VG,YG=p2,QG=XG,JG=wc;function ZG(e){return JG(e)?YG(e):QG(e)}var iw=ZG,eq=PG,tq=DG,rq=iw;function nq(e){return eq(e,rq,tq)}var iq=nq,FE=iq,oq=1,aq=Object.prototype,sq=aq.hasOwnProperty;function lq(e,t,r,n,o,a){var l=r&oq,u=FE(e),d=u.length,h=FE(t),g=h.length;if(d!=g&&!l)return!1;for(var m=d;m--;){var w=u[m];if(!(l?w in t:sq.call(t,w)))return!1}var x=a.get(e),C=a.get(t);if(x&&C)return x==t&&C==e;var j=!0;a.set(e,t),a.set(t,e);for(var T=l;++m<d;){w=u[m];var k=e[w],P=t[w];if(n)var A=l?n(P,k,w,t,e,a):n(k,P,w,e,t,a);if(!(A===void 0?k===P||o(k,P,r,n,a):A)){j=!1;break}T||(T=w=="constructor")}if(j&&!T){var L=e.constructor,R=t.constructor;L!=R&&"constructor"in e&&"constructor"in t&&!(typeof L=="function"&&L instanceof L&&typeof R=="function"&&R instanceof R)&&(j=!1)}return a.delete(e),a.delete(t),j}var uq=lq,cq=Ma,fq=yi,dq=cq(fq,"DataView"),hq=dq,pq=Ma,gq=yi,vq=pq(gq,"Promise"),mq=vq,yq=Ma,wq=yi,bq=yq(wq,"WeakMap"),xq=bq,Gm=hq,qm=c0,Vm=mq,Xm=O2,Ym=xq,MP=yc,pl=s2,zE="[object Map]",Sq="[object Object]",HE="[object Promise]",BE="[object Set]",WE="[object WeakMap]",UE="[object DataView]",Eq=pl(Gm),Cq=pl(qm),kq=pl(Vm),Tq=pl(Xm),Oq=pl(Ym),ra=MP;(Gm&&ra(new Gm(new ArrayBuffer(1)))!=UE||qm&&ra(new qm)!=zE||Vm&&ra(Vm.resolve())!=HE||Xm&&ra(new Xm)!=BE||Ym&&ra(new Ym)!=WE)&&(ra=function(e){var t=MP(e),r=t==Sq?e.constructor:void 0,n=r?pl(r):"";if(n)switch(n){case Eq:return UE;case Cq:return zE;case kq:return HE;case Tq:return BE;case Oq:return WE}return t});var Pq=ra,sv=NP,Lq=jP,Nq=EG,jq=uq,KE=Pq,GE=Gn,qE=f2,Aq=h2,Mq=1,VE="[object Arguments]",XE="[object Array]",Ff="[object Object]",Iq=Object.prototype,YE=Iq.hasOwnProperty;function Rq(e,t,r,n,o,a){var l=GE(e),u=GE(t),d=l?XE:KE(e),h=u?XE:KE(t);d=d==VE?Ff:d,h=h==VE?Ff:h;var g=d==Ff,m=h==Ff,w=d==h;if(w&&qE(e)){if(!qE(t))return!1;l=!0,g=!1}if(w&&!g)return a||(a=new sv),l||Aq(e)?Lq(e,t,r,n,o,a):Nq(e,t,d,r,n,o,a);if(!(r&Mq)){var x=g&&YE.call(e,"__wrapped__"),C=m&&YE.call(t,"__wrapped__");if(x||C){var j=x?e.value():e,T=C?t.value():t;return a||(a=new sv),o(j,T,r,n,a)}}return w?(a||(a=new sv),jq(e,t,r,n,o,a)):!1}var _q=Rq,$q=_q,QE=bc;function IP(e,t,r,n,o){return e===t?!0:e==null||t==null||!QE(e)&&!QE(t)?e!==e&&t!==t:$q(e,t,r,n,IP,o)}var ow=IP,Dq=ow;function Fq(e,t){return Dq(e,t)}var zq=Fq;const Hq=wt(zq),Bq=(e,t)=>{switch(t.type){case"addDialog":{let r=!1;const n=e.map(o=>Hq(o,{collapsed:o.collapsed,component:t.component,highlighted:o.highlighted,maximized:o.maximized,props:t.props})?(r=!0,{...o,collapsed:!1,highlighted:!0}):o);return r?n:[...e,{collapsed:!1,component:t.component,highlighted:!1,maximized:!1,props:t.props}]}case"removeDialog":return e.filter((r,n)=>n!==t.index);case"setDialogCollapsed":return e.map((r,n)=>n===t.index?{...r,collapsed:t.collapsed}:r);case"setDialogHighlighted":return e.map((r,n)=>n===t.index?{...r,highlighted:t.highlighted}:r);case"setDialogMaximized":return e.map((r,n)=>({...r,maximized:n===t.index?t.maximized:!1}));case"setDialogProps":return e.map((r,n)=>({...r,props:n===t.index?t.props:r.props}))}};var RP={},hp={},Pc={},_P={},pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.default=void 0;var Wq=function(t,r){var n,o=function(){n!=null&&(clearTimeout(n),n=null)},a=function(){for(var u=arguments.length,d=new Array(u),h=0;h<u;h++)d[h]=arguments[h];o(),n=setTimeout(function(){t.apply(void 0,d)},r)};return a.cancel=function(){o()},a},Uq=Wq;pp.default=Uq;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"debounce",{enumerable:!0,get:function(){return t.default}});var t=r(pp);function r(n){return n&&n.__esModule?n:{default:n}}})(_P);Object.defineProperty(Pc,"__esModule",{value:!0});Pc.default=void 0;var lv=E,Kq=_P;function Gq(e,t){return Yq(e)||Xq(e,t)||Vq(e,t)||qq()}function qq(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Vq(e,t){if(e){if(typeof e=="string")return JE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return JE(e,t)}}function JE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xq(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,o=!1,a=void 0;try{for(var l=e[Symbol.iterator](),u;!(n=(u=l.next()).done)&&(r.push(u.value),!(t&&r.length===t));n=!0);}catch(d){o=!0,a=d}finally{try{!n&&l.return!=null&&l.return()}finally{if(o)throw a}}return r}}function Yq(e){if(Array.isArray(e))return e}var Qq=function(){var t=(0,lv.useState)({height:0,width:0}),r=Gq(t,2),n=r[0],o=r[1],a=(0,lv.useRef)(null);return(0,lv.useEffect)(function(){var l=function(){return a.current==null&&(a.current=document.createElement("div"),a.current.style.width="99px",a.current.style.height="99px",a.current.style.overflow="scroll",a.current.style.position="absolute",a.current.style.top="-9999px",a.current.setAttribute("aria-hidden","true"),a.current.setAttribute("role","presentation")),a.current},u=function(){var m=l(),w=m.offsetHeight,x=m.clientHeight,C=m.offsetWidth,j=m.clientWidth,T=w-x,k=C-j;o(function(P){var A=P.height,L=P.width;return A!==T||L!==k?{height:T,width:k}:P})},d=(0,Kq.debounce)(u,100);window.addEventListener("resize",d),document.body.appendChild(l()),u();var h=l();return function(){d.cancel(),window.removeEventListener("resize",d),document.body.removeChild(h)}},[]),n},Jq=Qq;Pc.default=Jq;Object.defineProperty(hp,"__esModule",{value:!0});hp.default=void 0;var Zq=E,eV=tV(Pc);function tV(e){return e&&e.__esModule?e:{default:e}}var rV=function(t){var r=t.onChange,n=(0,eV.default)(),o=n.height,a=n.width;return(0,Zq.useEffect)(function(){r({height:o,width:a})},[o,a,r]),null},nV=rV;hp.default=nV;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"useScrollbarSize",{enumerable:!0,get:function(){return r.default}}),e.default=void 0;var t=n(hp),r=n(Pc);function n(a){return a&&a.__esModule?a:{default:a}}var o=t.default;e.default=o})(RP);const iV=e=>y.jsx(Xn,{classNames:"pop",timeout:200,...e,children:e.children}),oV=()=>{const{height:e,width:t}=RP.useScrollbarSize(),{prefs:r}=lt(),{dispatch:n,dialogs:o}=Gr(),a=o.some(d=>!d.maximized),l={paddingLeft:"calc(100% - (".concat(r.dialogWidth,"px + 2 * (var(--grid-size))))"),marginBottom:e,marginRight:t},u={marginRight:a?"calc(".concat(r.dialogWidth,"px + var(--grid-size))"):0};return y.jsx("div",{className:"dialogs",style:l,children:y.jsx(_a,{component:null,children:o.map((d,h)=>{const g={collapsed:d.collapsed,highlighted:d.highlighted,maximized:d.maximized,onChangeCollapsed:m=>n({type:"setDialogCollapsed",collapsed:m,index:h}),onChangeHighlighted:m=>n({type:"setDialogHighlighted",highlighted:m,index:h}),onChangeMaximized:m=>n({type:"setDialogMaximized",maximized:m,index:h}),onChangeProps:m=>n({type:"setDialogProps",index:h,props:m}),onClose:()=>n({type:"removeDialog",index:h})};return y.jsx(iV,{children:d.maximized?y.jsx("div",{className:"maximized",style:u,children:y.jsx(d.component,{...d.props,...g})}):y.jsx(d.component,{...d.props,...g})},h)})})})},aw=E.createContext({dispatch:()=>{},dialogs:[]});aw.displayName="Dialogs";const Gr=()=>E.useContext(aw),$P=e=>{const[t,r]=v0(Bq,[]);return y.jsxs(aw.Provider,{value:{dispatch:r,dialogs:t},children:[e.children,y.jsx(oV,{})]})},DP=e=>{const{allTags:t,color:r,name:n,onChangeColor:o,onChangeName:a}=e,[l,u]=E.useState(n),{t:d}=Ce();function h(g){return g!==n&&t.includes(g)?{message:d("components.tagEditor.alreadyExists"),valid:!1}:{valid:!0}}return y.jsxs("div",{className:"tag-editor",children:[y.jsx("span",{className:Wt("tag-name","color-".concat(e.color)),children:e.name}),y.jsx(Tc,{icon:y.jsx(vc,{}),label:d("common.rename"),onChange:g=>u(g.target.value.replace(/\s/g,"-")),onSubmit:()=>a(l),prompt:d("common.renamePrompt",{name:n}),value:l,validate:h}),y.jsx(Ui,{onChange:g=>o(g.target.value),options:rw.map(g=>({label:d("colors.".concat(g)),value:g})),value:r!=null?r:"",children:d("common.color")})]})},aV=e=>{const{storyId:t,...r}=e,{dispatch:n,stories:o}=fn(),{t:a}=Ce(),l=st(o,t),u=U2(l);function d(g,m){n(V2(l,g,m),a("undoChange.changeTagColor"))}function h(g,m){n(UH(l,g,m),a("undoChange.renameTag"))}return y.jsx(Tn,{className:"passage-tags-dialog",fixedSize:!0,headerLabel:a("dialogs.passageTags.title"),...r,children:y.jsx(fr,{children:u.length>0?u.map(g=>y.jsx(DP,{allTags:u,color:l.tagColors[g],name:g,onChangeColor:m=>d(g,m),onChangeName:m=>h(g,m)},g)):y.jsx("p",{children:a("dialogs.passageTags.noTags")})})})};function FP(){const{dispatch:e}=gt(),{prefs:t}=lt(),{formats:r}=kn();return _e.useCallback(()=>{let n;try{n=bn(r,t.storyFormat.name,t.storyFormat.version)}catch{try{n=bn(r,Ws().storyFormat.name,Ws().storyFormat.version)}catch(o){console.error("Could not locate a safe story format, skipping story repair: ".concat(o.message))}}n&&e({type:"repair",allFormats:r,defaultFormat:n})},[r,t.storyFormat.name,t.storyFormat.version,e])}const sV=e=>{const{children:t,onChange:r,onError:n,orientation:o,...a}=e,l=Wt("file-input","orientation-".concat(o!=null?o:"horizontal"));function u(d){if(!d.target.files)throw new Error("Change event occurred but no files present");const h=d.target.files[0],g=new FileReader;g.addEventListener("loadend",()=>{g.error?(console.warn(g.error),n&&n(g.error)):r(h,g.result)}),g.readAsText(h)}return y.jsx("span",{className:l,children:y.jsxs("label",{children:[y.jsx("span",{className:"file-input-label",children:t}),y.jsx("span",{className:"file-input-control",children:y.jsx("input",{...a,onChange:u,type:"file"})})]})})};var ZE=mc,lV=l0,uV=Gn,eC=ZE?ZE.isConcatSpreadable:void 0;function cV(e){return uV(e)||lV(e)||!!(eC&&e&&e[eC])}var fV=cV,dV=AP,hV=fV;function zP(e,t,r,n,o){var a=-1,l=e.length;for(r||(r=hV),o||(o=[]);++a<l;){var u=e[a];t>0&&r(u)?t>1?zP(u,t-1,r,n,o):dV(o,u):n||(o[o.length]=u)}return o}var pV=zP,gV=Gn,vV=Sc,mV=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yV=/^\w*$/;function wV(e,t){if(gV(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||vV(e)?!0:yV.test(e)||!mV.test(e)||t!=null&&e in Object(t)}var sw=wV,HP=f0,bV="Expected a function";function lw(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bV);var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var l=e.apply(this,n);return r.cache=a.set(o,l)||a,l};return r.cache=new(lw.Cache||HP),r}lw.Cache=HP;var xV=lw,SV=xV,EV=500;function CV(e){var t=SV(e,function(n){return r.size===EV&&r.clear(),n}),r=t.cache;return t}var kV=CV,TV=kV,OV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,PV=/\\(\\)?/g,LV=TV(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(OV,function(r,n,o,a){t.push(o?a.replace(PV,"$1"):n||r)}),t}),NV=LV,jV=Gn,AV=sw,MV=NV,IV=h0;function RV(e,t){return jV(e)?e:AV(e,t)?[e]:MV(IV(e))}var BP=RV,_V=Sc,$V=1/0;function DV(e){if(typeof e=="string"||_V(e))return e;var t=e+"";return t=="0"&&1/e==-$V?"-0":t}var gp=DV,FV=BP,zV=gp;function HV(e,t){t=FV(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[zV(t[r++])];return r&&r==n?e:void 0}var uw=HV,BV=NP,WV=ow,UV=1,KV=2;function GV(e,t,r,n){var o=r.length,a=o,l=!n;if(e==null)return!a;for(e=Object(e);o--;){var u=r[o];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<a;){u=r[o];var d=u[0],h=e[d],g=u[1];if(l&&u[2]){if(h===void 0&&!(d in e))return!1}else{var m=new BV;if(n)var w=n(h,g,d,e,t,m);if(!(w===void 0?WV(g,h,UV|KV,n,m):w))return!1}}return!0}var qV=GV,VV=Aa;function XV(e){return e===e&&!VV(e)}var WP=XV,YV=WP,QV=iw;function JV(e){for(var t=QV(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,YV(o)]}return t}var ZV=JV;function eX(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var UP=eX,tX=qV,rX=ZV,nX=UP;function iX(e){var t=rX(e);return t.length==1&&t[0][2]?nX(t[0][0],t[0][1]):function(r){return r===e||tX(r,e,t)}}var oX=iX,aX=uw;function sX(e,t,r){var n=e==null?void 0:aX(e,t);return n===void 0?r:n}var lX=sX;function uX(e,t){return e!=null&&t in Object(e)}var cX=uX,fX=BP,dX=l0,hX=Gn,pX=s0,gX=a0,vX=gp;function mX(e,t,r){t=fX(t,e);for(var n=-1,o=t.length,a=!1;++n<o;){var l=vX(t[n]);if(!(a=e!=null&&r(e,l)))break;e=e[l]}return a||++n!=o?a:(o=e==null?0:e.length,!!o&&gX(o)&&pX(l,o)&&(hX(e)||dX(e)))}var yX=mX,wX=cX,bX=yX;function xX(e,t){return e!=null&&bX(e,t,wX)}var SX=xX,EX=ow,CX=lX,kX=SX,TX=sw,OX=WP,PX=UP,LX=gp,NX=1,jX=2;function AX(e,t){return TX(e)&&OX(t)?PX(LX(e),t):function(r){var n=CX(r,e);return n===void 0&&n===t?kX(r,e):EX(t,n,NX|jX)}}var MX=AX;function IX(e){return function(t){return t==null?void 0:t[e]}}var RX=IX,_X=uw;function $X(e){return function(t){return _X(t,e)}}var DX=$X,FX=RX,zX=DX,HX=sw,BX=gp;function WX(e){return HX(e)?FX(BX(e)):zX(e)}var UX=WX,KX=oX,GX=MX,qX=Th,VX=Gn,XX=UX;function YX(e){return typeof e=="function"?e:e==null?qX:typeof e=="object"?VX(e)?GX(e[0],e[1]):KX(e):XX(e)}var QX=YX;function JX(e){return function(t,r,n){for(var o=-1,a=Object(t),l=n(t),u=l.length;u--;){var d=l[e?u:++o];if(r(a[d],d,a)===!1)break}return t}}var ZX=JX,eY=ZX,tY=eY(),rY=tY,nY=rY,iY=iw;function oY(e,t){return e&&nY(e,t,iY)}var aY=oY,sY=wc;function lY(e,t){return function(r,n){if(r==null)return r;if(!sY(r))return e(r,n);for(var o=r.length,a=t?o:-1,l=Object(r);(t?a--:++a<o)&&n(l[a],a,l)!==!1;);return r}}var uY=lY,cY=aY,fY=uY,dY=fY(cY),hY=dY,pY=hY,gY=wc;function vY(e,t){var r=-1,n=gY(e)?Array(e.length):[];return pY(e,function(o,a,l){n[++r]=t(o,a,l)}),n}var mY=vY;function yY(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var wY=yY,tC=Sc;function bY(e,t){if(e!==t){var r=e!==void 0,n=e===null,o=e===e,a=tC(e),l=t!==void 0,u=t===null,d=t===t,h=tC(t);if(!u&&!h&&!a&&e>t||a&&l&&d&&!u&&!h||n&&l&&d||!r&&d||!o)return 1;if(!n&&!a&&!h&&e<t||h&&r&&o&&!n&&!a||u&&r&&o||!l&&o||!d)return-1}return 0}var xY=bY,SY=xY;function EY(e,t,r){for(var n=-1,o=e.criteria,a=t.criteria,l=o.length,u=r.length;++n<l;){var d=SY(o[n],a[n]);if(d){if(n>=u)return d;var h=r[n];return d*(h=="desc"?-1:1)}}return e.index-t.index}var CY=EY,uv=N2,kY=uw,TY=QX,OY=mY,PY=wY,LY=d2,NY=CY,jY=Th,AY=Gn;function MY(e,t,r){t.length?t=uv(t,function(a){return AY(a)?function(l){return kY(l,a.length===1?a[0]:a)}:a}):t=[jY];var n=-1;t=uv(t,LY(TY));var o=OY(e,function(a,l,u){var d=uv(t,function(h){return h(a)});return{criteria:d,index:++n,value:a}});return PY(o,function(a,l){return NY(a,l,r)})}var KP=MY,IY=pV,RY=KP,_Y=l2,rC=u2,$Y=_Y(function(e,t){if(e==null)return[];var r=t.length;return r>1&&rC(e,t[0],t[1])?t=[]:r>2&&rC(t[0],t[1],t[2])&&(t=[t[0]]),RY(e,IY(t,1),[])}),DY=$Y;const FY=wt(DY),zY=/\r?\n/;function nC(e){return e.replace(/\\/g,"\\\\").replace(/([[\]{}])/g,"\\$1")}function dd(e){return e.replace(/^::/gm,"\\::")}function HY(e){const t=nC(e.name).replace(/^\s+/g,a=>"\\ ".repeat(a.length)).replace(/\s+$/g,a=>"\\ ".repeat(a.length)),r=e.tags.length>0?"[".concat(e.tags.map(nC).join(" "),"]"):void 0,n=JSON.stringify({position:"".concat(e.left,",").concat(e.top),size:"".concat(e.width,",").concat(e.height)}).replace(/\s+/g,""),o=dd(e.text);return":: ".concat(t).concat(r?" "+r:""," ").concat(n,"\n").concat(o,"\n")}function BY(e){const[t,...r]=e.split(zY),n=/^::\s*(.*?(?:\\\s)?)\s*(\[.*?\])?\s*(\{.*?\})?\s*$/.exec(t);if(!n)throw new Error("Header line couldn't be parsed: ".concat(t));const[,o,a,l]=n;if(o.trim()==="")throw new Error("Passage name couldn't be found in header line: ".concat(t));const u={...Do(),id:yt(),name:iC(o.replace(/^(\\\s)+/g,d=>" ".repeat(d.length/2)).replace(/(\\\s)+$/g,d=>" ".repeat(d.length/2))),tags:[],text:r.map(KY).join("\n").trim()};if(a&&(u.tags=a.replace(/^\[(.*)\]$/g,"$1").split(/\s/).filter(d=>d.trim()!=="").map(d=>iC(d))),l)try{const d=JSON.parse(l);if(typeof d.position=="string"){const[h,g]=d.position.split(",").map(parseFloat);typeof h=="number"&&typeof g=="number"?(u.left=h,u.top=g):console.warn("Couldn't parse passage position metadata ".concat(d.position))}if(typeof d.size=="string"){const[h,g]=d.size.split(",").map(parseFloat);typeof h=="number"&&typeof g=="number"?(u.width=h,u.height=g):console.warn("Couldn't parse passage size metadata ".concat(d.size))}}catch{console.warn("Couldn't parse passage metadata ".concat(l))}return u}function WY(e){const t=yt(),r={...rl(),id:t,ifid:yt().toUpperCase(),lastUpdate:new Date,passages:e.split(/^::/m).filter(a=>a.trim()!=="").map(a=>":: "+a).map(BY).map(a=>({...a,story:t})),script:""};r.passages=r.passages.filter(a=>{const l=a.tags.includes("script"),u=a.tags.includes("stylesheet");return!l&&!u||l&&u?!0:(l?r.script+=a.text+"\n":u&&(r.stylesheet+=a.text+"\n"),!1)}),r.script=r.script.trim(),r.stylesheet=r.stylesheet.trim();const n=r.passages.findIndex(a=>a.name==="StoryTitle");n!==-1&&(r.name=r.passages[n].text.trim(),r.passages.splice(n,1));const o=r.passages.findIndex(a=>a.name==="StoryData");if(o!==-1){const a=r.passages[o];r.passages.splice(o,1);try{const{ifid:l,format:u,"format-version":d,start:h,"tag-colors":g,zoom:m}=JSON.parse(a.text);if(typeof l=="string"&&(r.ifid=l),typeof u=="string"&&(r.storyFormat=u),typeof d=="string"&&(r.storyFormatVersion=d),typeof h=="string"){const w=r.passages.find(x=>x.name===h);w?r.startPassage=w.id:console.warn("Couldn't find start passage with name \"".concat(h,'"'))}if(typeof g=="object")for(const w in g)typeof g[w]=="string"?r.tagColors[w]=g[w]:console.warn('Tag "'.concat(w,'" has non-string color'));typeof m=="number"&&(r.zoom=m)}catch{console.warn("Couldn't parse story data: ".concat(a.text))}}else console.warn("No StoryData passage is present in Twee");return r.passages.every(({left:a,top:l})=>a===0&&l===0)&&(r.passages=r.passages.map((a,l)=>({...a,left:25+125*(l%10),top:25+125*Math.floor(l/10)}))),r}function UY(e){const t=":: StoryTitle\n".concat(dd(e.name)),r=e.passages.find(l=>l.id===e.startPassage),n=":: StoryData\n".concat(JSON.stringify({ifid:e.ifid,format:e.storyFormat,"format-version":e.storyFormatVersion,start:r==null?void 0:r.name,"tag-colors":Object.keys(e.tagColors).length>0?e.tagColors:void 0,zoom:e.zoom},null,2));let o="".concat(t,"\n\n\n").concat(n,"\n\n\n").concat(FY(e.passages,["name"]).map(HY).join("\n\n"));const a=e.passages.map(({name:l})=>l);if(e.script.trim()!==""){const l=Ku("StoryScript",a);o+="\n\n:: ".concat(l," [script]\n").concat(dd(e.script))}if(e.stylesheet.trim()!==""){const l=Ku("StoryStylesheet",a);o+="\n\n:: ".concat(l," [stylesheet]\n").concat(dd(e.stylesheet))}return o}function iC(e){return e.replace(/\\([[\]{}])/g,"$1").replace(/\\\\/g,"\\")}function KY(e){return e.replace(/^\\:/gm,":")}const GY=e=>{const{onChange:t}=e,{t:r}=Ce();function n(o,a){/\.html$/.test(o.name)?t(o,vO(a)):t(o,[WY(a)])}return y.jsx("div",{className:"file-chooser",children:y.jsx("p",{children:y.jsx(sV,{accept:".html,.twee,.tw",onChange:n,orientation:"vertical",children:r("dialogs.storyImport.filePrompt")})})})},qY=e=>{const{existingStories:t,onImport:r,stories:n}=e,[o,a]=E.useState([]),{t:l}=Ce(),u=E.useCallback(h=>t.some(g=>Fr(g)===Fr(h)),[t]);E.useEffect(()=>{a(n.filter(h=>!u(h)))},[n,u]);function d(h,g){a(g?m=>[...m,h]:m=>m.filter(w=>w.id!==h.id))}return y.jsxs("div",{className:"story-chooser",children:[y.jsx("p",{children:l("dialogs.storyImport.storiesPrompt")}),y.jsx("ul",{children:n.map(h=>y.jsxs("li",{children:[y.jsx(Wi,{label:h.name,onChange:g=>d(h,g),value:o.includes(h)}),o.includes(h)&&u(h)&&y.jsx("span",{className:"replace-warning",children:l("dialogs.storyImport.willReplaceExisting")})]},h.id))}),y.jsx("div",{className:"actions",children:y.jsx(Pe,{disabled:o.length===0,icon:y.jsx(KT,{}),label:l("dialogs.storyImport.importSelected"),onClick:()=>r(o),variant:"primary"})})]})},VY=e=>{const{onClose:t}=e,{t:r}=Ce(),n=FP(),{dispatch:o,stories:a}=gt(),[l,u]=E.useState(),[d,h]=E.useState([]);function g(w){o(BH(w,a)),n(),t()}function m(w,x){x.length===0||x.some(C=>a.some(j=>Fr(j)===Fr(C)))?(u(w),h(x)):g(x)}return y.jsx(Tn,{...e,className:"story-import-dialog",fixedSize:!0,headerLabel:r("dialogs.storyImport.title"),children:y.jsxs(fr,{children:[y.jsx(GY,{onChange:m}),l&&d.length>0&&y.jsx(qY,{existingStories:a,onImport:g,stories:d}),l&&d.length===0&&y.jsx("p",{children:r("dialogs.storyImport.noStoriesInFile")})]})})},XY=e=>{const{storyId:t,...r}=e,[n,o]=E.useState(),{dispatch:a,stories:l}=gt(),{prefs:u}=lt(),d=st(l,t),{t:h}=Ce(),g=m=>{a(Nr(l,d,{script:m}))};return y.jsxs(Tn,{...r,className:"story-javascript-dialog",headerLabel:h("dialogs.storyJavaScript.title"),maximizable:!0,children:[u.useCodeMirror&&y.jsxs(At,{children:[y.jsx(ew,{editor:n,watch:d.script}),y.jsx(pP,{editor:n})]}),y.jsx(Y0,{children:y.jsx(ic,{editorDidMount:o,fontFamily:u.codeEditorFontFamily,fontScale:u.codeEditorFontScale,id:"story-javascript-dialog-code-area",label:h("dialogs.storyJavaScript.editorLabel"),labelHidden:!0,onChangeEditor:o,onChangeText:g,options:{...Z0(u),autofocus:!0,lineWrapping:!0,mode:"javascript",placeholder:h("dialogs.storyJavaScript.explanation")},useCodeMirror:u.useCodeMirror,value:d.script})})]})},YY=e=>{const{formats:t,selectedFormat:r,...n}=e,{t:o}=Ce(),a=t.filter(d=>d.loadState==="loading"),u=gO(t.filter(d=>d.loadState==="loaded"||d.id===r.id)).map(d=>({disabled:!1,label:"".concat(d.name," ").concat(d.version),value:d.id}));return a.length!==0&&u.push({disabled:!0,label:o("components.storyFormatSelect.loadingCount",{loadingCount:a.length}),value:""}),y.jsx(Ui,{...n,options:u,value:r.id})},QY=({children:e,domId:t,percent:r})=>y.jsxs("div",{className:"meter",id:t,role:"meter","aria-labelledby":"".concat(t,"-label"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":r*100,children:[y.jsx("div",{className:"meter-bar",children:y.jsx("span",{className:"filled",style:{width:r*100+"%"}})}),y.jsx("div",{className:"meter-label",id:"".concat(t,"-label"),children:e})]}),GP=({block:e,children:t})=>{const[r,n]=E.useState([]),{dispatch:o,formats:a}=kn();E.useEffect(()=>{const d=a.filter(h=>!r.find(g=>g.name===h.name&&g.version===h.version));d.length>0&&(o(CW(d)),n([...r,...d]))},[o,a,r]);const l=a.find(d=>d.loadState==="loading"),u=a.filter(d=>d.loadState==="loaded").length/a.length;return e&&u<1?y.jsx(QY,{domId:"story-format-loader",percent:u,children:l&&y.jsxs(y.Fragment,{children:["Loading ",l.name," ",l.version]})}):y.jsx(y.Fragment,{children:t})},JY=new Intl.DateTimeFormat([],{dateStyle:"full",timeStyle:"long"}),ZY=e=>{const{story:t}=e,r=DH(t),{t:n}=Ce();return y.jsxs("div",{className:"story-stats",children:[y.jsx("table",{className:"counts",children:y.jsxs("tbody",{children:[y.jsxs("tr",{children:[y.jsx("td",{children:r.characters}),y.jsx("td",{children:n("dialogs.storyDetails.stats.characters")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.words}),y.jsx("td",{children:n("dialogs.storyDetails.stats.words")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.passages}),y.jsx("td",{children:n("dialogs.storyDetails.stats.passages")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.links.length}),y.jsx("td",{children:n("dialogs.storyDetails.stats.links")})]}),y.jsxs("tr",{children:[y.jsx("td",{children:r.brokenLinks.length}),y.jsx("td",{children:n("dialogs.storyDetails.stats.brokenLinks")})]})]})}),y.jsxs("div",{className:"update-and-ifid",children:[y.jsx("p",{children:n("dialogs.storyDetails.stats.lastUpdate",{date:JY.format(t.lastUpdate)})}),y.jsxs("p",{children:[n("dialogs.storyDetails.stats.ifid",{ifid:t.ifid}),"",y.jsx("a",{href:"https://ifdb.org/help-ifid",target:"_blank",rel:"noreferrer",children:n("dialogs.storyDetails.stats.ifidExplanation")})]})]})]})},eQ=e=>{const{storyId:t,...r}=e,{dispatch:n,stories:o}=gt(),{formats:a}=kn(),l=st(o,t),{t:u}=Ce();function d(h){const g=LW(a,h.target.value);n(Nr(o,l,{storyFormat:g.name,storyFormatVersion:g.version}))}return y.jsxs(Tn,{...r,className:"story-details-dialog",fixedSize:!0,headerLabel:l.name,children:[y.jsxs("div",{className:"story-format",children:[y.jsx(GP,{block:!1}),y.jsx(YY,{formats:a,onChange:d,selectedFormat:bn(a,l.storyFormat,l.storyFormatVersion),children:u("common.storyFormat")}),y.jsx("a",{href:"https://twinery.org/2storyformats",target:"_blank",rel:"noreferrer",children:u("dialogs.storyDetails.storyFormatExplanation")})]}),y.jsx(At,{children:y.jsx(Wi,{label:u("dialogs.storyDetails.snapToGrid"),onChange:h=>n(Nr(o,l,{snapToGrid:h})),value:l.snapToGrid})}),y.jsx(fr,{children:!r.collapsed&&y.jsx(ZY,{story:l})})]})};var tQ=yi,rQ=function(){return tQ.Date.now()},nQ=rQ,iQ=/\s/;function oQ(e){for(var t=e.length;t--&&iQ.test(e.charAt(t)););return t}var aQ=oQ,sQ=aQ,lQ=/^\s+/;function uQ(e){return e&&e.slice(0,sQ(e)+1).replace(lQ,"")}var cQ=uQ,fQ=cQ,oC=Aa,dQ=Sc,aC=NaN,hQ=/^[-+]0x[0-9a-f]+$/i,pQ=/^0b[01]+$/i,gQ=/^0o[0-7]+$/i,vQ=parseInt;function mQ(e){if(typeof e=="number")return e;if(dQ(e))return aC;if(oC(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oC(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=fQ(e);var r=pQ.test(e);return r||gQ.test(e)?vQ(e.slice(2),r?2:8):hQ.test(e)?aC:+e}var yQ=mQ,wQ=Aa,cv=nQ,sC=yQ,bQ="Expected a function",xQ=Math.max,SQ=Math.min;function EQ(e,t,r){var n,o,a,l,u,d,h=0,g=!1,m=!1,w=!0;if(typeof e!="function")throw new TypeError(bQ);t=sC(t)||0,wQ(r)&&(g=!!r.leading,m="maxWait"in r,a=m?xQ(sC(r.maxWait)||0,t):a,w="trailing"in r?!!r.trailing:w);function x(D){var $=n,B=o;return n=o=void 0,h=D,l=e.apply(B,$),l}function C(D){return h=D,u=setTimeout(k,t),g?x(D):l}function j(D){var $=D-d,B=D-h,U=t-$;return m?SQ(U,a-B):U}function T(D){var $=D-d,B=D-h;return d===void 0||$>=t||$<0||m&&B>=a}function k(){var D=cv();if(T(D))return P(D);u=setTimeout(k,j(D))}function P(D){return u=void 0,w&&n?x(D):(n=o=void 0,l)}function A(){u!==void 0&&clearTimeout(u),h=0,n=d=o=u=void 0}function L(){return u===void 0?l:P(cv())}function R(){var D=cv(),$=T(D);if(n=arguments,o=this,d=D,$){if(u===void 0)return C(d);if(m)return clearTimeout(u),u=setTimeout(k,t),x(d)}return u===void 0&&(u=setTimeout(k,t)),l}return R.cancel=A,R.flush=L,R}var CQ=EQ;const qP=wt(CQ),lC={Tab:!1,"Shift-Tab":!1},kQ=e=>{var D,$,B;const{find:t,flags:r,replace:n,storyId:o,onClose:a,onChangeProps:l,...u}=e,d=E.useRef(!1),{prefs:h}=lt(),{dispatch:g,stories:m}=fn(),{t:w}=Ce(),x=st(m,o),C=E.useMemo(()=>$H(x.passages,t,r).map(({id:U})=>U),[t,r,x.passages]),j=E.useMemo(()=>qP(g,250,{leading:!1,trailing:!0}),[g]);E.useEffect(()=>{d.current||j(bS(x,C))},[j,C,x]);function T(U){var Y,V,de;l({storyId:o,find:(Y=U.find)!=null?Y:t,flags:(V=U.flags)!=null?V:r,replace:(de=U.replace)!=null?de:n})}function k(){d.current=!0,g(bS(x,[])),a()}function P(U){T({replace:U})}function A(U){T({find:U})}function L(){g(HH(x,t,n,r),"undoChange.replaceAllText")}function R(U){T({flags:{...r,[U]:!r[U]}})}return y.jsxs(Tn,{...u,className:"story-search-dialog",fixedSize:!0,headerLabel:w("dialogs.storySearch.title"),onClose:k,children:[y.jsxs("div",{className:"search-fields",children:[y.jsx(ic,{id:"story-search-dialog-find",label:w("dialogs.storySearch.find"),onChangeText:A,options:{extraKeys:lC,mode:"text"},useCodeMirror:h.useCodeMirror,value:t}),y.jsx(ic,{id:"story-search-dialog-replace-with",label:w("dialogs.storySearch.replaceWith"),onChangeText:P,options:{extraKeys:lC,mode:"text"},useCodeMirror:h.useCodeMirror,value:n})]}),y.jsxs("div",{className:"search-flags",children:[y.jsx(Wi,{label:w("dialogs.storySearch.includePassageNames"),onChange:()=>R("includePassageNames"),value:(D=r.includePassageNames)!=null?D:!1}),y.jsx(Wi,{label:w("dialogs.storySearch.matchCase"),onChange:()=>R("matchCase"),value:($=r.matchCase)!=null?$:!1}),y.jsx(Wi,{label:w("dialogs.storySearch.useRegexes"),onChange:()=>R("useRegexes"),value:(B=r.useRegexes)!=null?B:!1})]}),y.jsxs("div",{className:"search-results",children:[y.jsx(Pe,{disabled:C.length===0,icon:y.jsx(sR,{}),label:w("dialogs.storySearch.replaceAll"),onClick:L,variant:"danger"}),y.jsx("span",{children:t&&(C.length>0?w("dialogs.storySearch.matchCount",{count:C.length}):w("dialogs.storySearch.noMatches"))})]})]})},TQ=e=>{const{storyId:t,...r}=e,[n,o]=E.useState(),{dispatch:a,stories:l}=gt(),{prefs:u}=lt(),d=st(l,t),{t:h}=Ce(),g=m=>{a(Nr(l,d,{stylesheet:m}))};return y.jsxs(Tn,{...r,className:"story-stylesheet-dialog",headerLabel:h("dialogs.storyStylesheet.title"),maximizable:!0,children:[u.useCodeMirror&&y.jsxs(At,{children:[y.jsx(ew,{editor:n,watch:d.script}),y.jsx(pP,{editor:n})]}),y.jsx(Y0,{children:y.jsx(ic,{editorDidMount:o,fontFamily:u.codeEditorFontFamily,fontScale:u.codeEditorFontScale,id:"story-stylesheet-dialog-code-area",label:h("dialogs.storyStylesheet.editorLabel"),labelHidden:!0,onChangeEditor:o,onChangeText:g,options:{...Z0(u),autofocus:!0,lineWrapping:!0,mode:"css",placeholder:h("dialogs.storyStylesheet.explanation")},useCodeMirror:u.useCodeMirror,value:d.stylesheet})})]})},OQ=e=>{const{dispatch:t,stories:r}=fn(),{dispatch:n,prefs:o}=lt(),{t:a}=Ce(),l=g0(r);function u(h,g){n(Ht("storyTagColors",{...o.storyTagColors,[h]:g}))}function d(h,g){t(KH(r,h,g))}return y.jsx(Tn,{className:"story-tags-dialog",fixedSize:!0,headerLabel:a("dialogs.storyTags.title"),...e,children:y.jsx(fr,{children:l.length>0?l.map(h=>y.jsx(DP,{allTags:l,color:o.storyTagColors[h],name:h,onChangeColor:g=>u(h,g),onChangeName:g=>d(h,g)},h)):y.jsx("p",{children:a("dialogs.storyTags.noTags")})})})},PQ=e=>{const{container:t,ignoreEventsOnSelector:r,onSelectRect:n,onTemporarySelectRect:o}=e,[a,l]=E.useState(!1),[u,d]=E.useState(!1),[h,g]=E.useState(),[m,w]=E.useState();E.useEffect(()=>{const C=t.current;let j;function T(L){return{left:L.clientX-j.left+C.scrollLeft,top:L.clientY-j.top+C.scrollTop}}function k(L){C&&(C.releasePointerCapture(L.pointerId),C.removeEventListener("pointermove",P),C.removeEventListener("pointerup",k),d(!1))}function P(L){w(T(L))}function A(L){L.pointerType==="touch"||L.button!==0||!C||r&&L.target.closest(r)||(j=C.getBoundingClientRect(),C.setPointerCapture(L.pointerId),C.addEventListener("pointermove",P),C.addEventListener("pointerup",k),l(!!(L.shiftKey||L.ctrlKey)),d(!0),g(T(L)),w(T(L)))}if(C)return C.addEventListener("pointerdown",A),()=>C.removeEventListener("pointerdown",A)},[t,r]),E.useEffect(()=>{h&&m&&(u?o(Hg(h,m),a):(n(Hg(h,m),a),g(void 0),w(void 0)))},[a,m,u,n,o,h]);const x=E.useMemo(()=>{if(!h||!m)return{};const C=Hg(h,m);return{transform:"translate(".concat(C.left,"px, ").concat(C.top,"px) scale(").concat(C.width/100,", ").concat(C.height/100,")")}},[m,h]);return!h||!m?null:y.jsx("div",{className:"marquee-selection",style:x})},uC=25*Math.sqrt(2),LQ=e=>{const{offset:t,passage:r}=e,n={left:r.left,top:r.top};return r.selected&&(n.left+=t.left,n.top+=t.top),y.jsx("line",{className:"broken-connection",x1:n.left+r.width,y1:n.top+r.height,x2:n.left+r.width+uC,y2:n.top+r.height+uC,style:{markerEnd:"url(#link-broken)"}})};function VP({start:e,end:t,radius:r,largeArc:n,sweep:o,rotation:a}){return"M"+e.left+","+e.top+" A"+r.left+","+r.top+" "+(a!=null?a:"0")+(n?" 1":" 0")+(o?" 1 ":" 0 ")+t.left+","+t.top}const NQ=e=>{const{end:t,offset:r,start:n,variant:o}=e,a=E.useMemo(()=>{let l=n,u=t;n.selected&&(l={...n,left:n.left+r.left,top:n.top+r.top}),t.selected&&(u={...t,left:t.left+r.left,top:t.top+r.top});let d=sS(l),h=sS(u);if(d=lS(l,d,h),!d||(h=lS(u,d,h),!h))return"";const g=r3(d,h);let m=d.left<h.left;d.left===h.left&&d.top<h.top&&(m=!0);const w=t3(d,h);return VP({start:d,end:h,radius:{left:g,top:g*.75},rotation:w,sweep:m})},[t,r.left,r.top,n]);return y.jsx("path",{d:a,className:"passage-connection variant-".concat(o),style:{markerEnd:"url(#link-arrowhead)"}})},jQ=e=>{const{offset:t,passage:r,variant:n}=e,o={left:r.left,top:r.top};r.selected&&(o.left+=t.left,o.top+=t.top);const a=E.useMemo(()=>.4*Math.min(r.width,r.height),[r.height,r.width]),l=E.useMemo(()=>VP({start:{left:o.left,top:o.top+r.height/2},end:{left:o.left,top:o.top},radius:{left:a,top:a},sweep:!0,largeArc:!0}),[r.height,a,o.left,o.top]);return y.jsx("path",{className:"self-connection variant-".concat(n),d:l,style:{markerEnd:"url(#link-arrowhead)"}})},yu=E.memo(e=>{const{broken:t,connections:r,offset:n,self:o,variant:a="link"}=e;return y.jsxs(y.Fragment,{children:[Array.from(r).map(l=>Array.from(l[1]).map(u=>y.jsx(NQ,{end:u,offset:n,start:l[0],variant:a},l[0].name+u.name))),Array.from(o).map(l=>y.jsx(jQ,{offset:n,passage:l,variant:a},l.name)),Array.from(t).map(l=>y.jsx(LQ,{offset:n,passage:l},l.name))]})});yu.displayName="PassageConnectionGroup";const AQ=()=>y.jsxs("defs",{children:[y.jsx("marker",{id:"link-arrowhead",refX:"6",refY:"4",markerWidth:"8",markerHeight:"8",orient:"auto",children:y.jsx("path",{d:"M 1,1 7,4 1,7 Z"})}),y.jsxs("marker",{id:"link-broken",refX:"7.5",refY:"7.5",markerWidth:"15",markerHeight:"15",children:[y.jsx("circle",{cx:"7.5",cy:"7.5",r:"7.5"}),y.jsx("path",{d:"M4.5 7.5h 6z"})]}),y.jsxs("marker",{id:"link-start",markerWidth:"15",markerHeight:"15",refX:"16",refY:"16",viewBox:"0 0 32 32",children:[y.jsx("circle",{cx:"16",cy:"16",r:"16"}),y.jsx("path",{d:"M8 17a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"}),y.jsx("path",{d:"M11 18a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"}),y.jsx("circle",{className:"fill-white",cx:"19",cy:"13",r:"1"})]})]}),XP=E.memo(e=>{const{offset:t,passage:r}=e,n={left:r.left,top:r.top};return r.selected&&(n.left+=t.left,n.top+=t.top),y.jsx("line",{className:"start-connection",x1:n.left-50,y1:n.top+r.height/2,x2:n.left,y2:n.top+r.height/2,style:{markerStart:"url(#link-start)"}})});XP.displayName="StartConnection";const cC=()=>[];function MQ(e,t){var h,g;const{prefs:r}=lt(),{dispatch:n,formats:o}=kn(),a=bn(o,e,t),[l,u]=E.useState(),d=o0(r,e,t);return E.useEffect(()=>{d||(a.loadState==="unloaded"?n(Qu(a)):a.loadState==="loaded"&&u(J0(a,vn().version)))},[n,d,a]),d?cC:(g=(h=l==null?void 0:l.references)==null?void 0:h.parsePassageText)!=null?g:cC}const zf=new Set,fC={left:0,top:0},IQ=e=>{const{formatName:t,formatVersion:r,offset:n,passages:o,startPassageId:a}=e,l=MQ(t,r),{draggable:u,fixed:d}=E.useMemo(()=>wS(o),[o]),{draggable:h,fixed:g}=E.useMemo(()=>wS(o,l),[o,l]),m=E.useMemo(()=>o.find(w=>w.id===a),[o,a]);return y.jsxs("svg",{className:"link-connectors",children:[y.jsx(AQ,{}),m&&y.jsx(XP,{offset:n,passage:m}),y.jsx(yu,{...u,offset:n}),y.jsx(yu,{...d,offset:fC}),y.jsx(yu,{broken:zf,connections:h.connections,offset:n,self:zf,variant:"reference"}),y.jsx(yu,{broken:zf,connections:g.connections,offset:fC,self:zf,variant:"reference"})]})};var En=typeof window<"u"?window:{screen:{},navigator:{}},Ys=(En.matchMedia||function(){return{matches:!1}}).bind(En),RQ={get passive(){return!0}},YP=function(){};En.addEventListener&&En.addEventListener("p",YP,RQ);En.removeEventListener&&En.removeEventListener("p",YP,!1);var cw="ontouchstart"in En,_Q="TouchEvent"in En,$Q=cw||_Q&&Ys("(any-pointer: coarse)").matches,dC=(En.navigator.maxTouchPoints||0)>0||$Q,QP=En.navigator.userAgent||"",DQ=Ys("(pointer: coarse)").matches&&/iPad|Macintosh/.test(QP)&&Math.min(En.screen.width||0,En.screen.height||0)>=768,FQ=(Ys("(pointer: coarse)").matches||!Ys("(pointer: fine)").matches&&cw)&&!/Windows.*Firefox/.test(QP),zQ=Ys("(any-pointer: fine)").matches||Ys("(any-hover: hover)").matches||DQ||!cw,HQ=dC&&(zQ||!FQ)?"hybrid":dC?"touchOnly":"mouseOnly",fw={exports:{}},JP={};function ZP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=ZP(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Qs(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=ZP(e))&&(n&&(n+=" "),n+=t);return n}const BQ=Object.freeze(Object.defineProperty({__proto__:null,clsx:Qs,default:Qs},Symbol.toStringTag,{value:"Module"})),WQ=oy(BQ);var Mt={},wi={};Object.defineProperty(wi,"__esModule",{value:!0});wi.dontSetMe=VQ;wi.findInArray=UQ;wi.int=qQ;wi.isFunction=KQ;wi.isNum=GQ;function UQ(e,t){for(let r=0,n=e.length;r<n;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function KQ(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Function]"}function GQ(e){return typeof e=="number"&&!isNaN(e)}function qQ(e){return parseInt(e,10)}function VQ(e,t,r){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}var $a={};Object.defineProperty($a,"__esModule",{value:!0});$a.browserPrefixToKey=tL;$a.browserPrefixToStyle=XQ;$a.default=void 0;$a.getPrefix=eL;const fv=["Moz","Webkit","O","ms"];function eL(){var e;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const r=(e=window.document)===null||e===void 0||(e=e.documentElement)===null||e===void 0?void 0:e.style;if(!r||t in r)return"";for(let n=0;n<fv.length;n++)if(tL(t,fv[n])in r)return fv[n];return""}function tL(e,t){return t?"".concat(t).concat(YQ(e)):e}function XQ(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function YQ(e){let t="",r=!0;for(let n=0;n<e.length;n++)r?(t+=e[n].toUpperCase(),r=!1):e[n]==="-"?r=!0:t+=e[n];return t}$a.default=eL();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.addClassName=iL;Mt.addEvent=ZQ;Mt.addUserSelectStyles=cJ;Mt.createCSSTransform=aJ;Mt.createSVGTransform=sJ;Mt.getTouch=lJ;Mt.getTouchIdentifier=uJ;Mt.getTranslation=dw;Mt.innerHeight=nJ;Mt.innerWidth=iJ;Mt.matchesSelector=nL;Mt.matchesSelectorAndParentsTo=JQ;Mt.offsetXYFromParent=oJ;Mt.outerHeight=tJ;Mt.outerWidth=rJ;Mt.removeClassName=oL;Mt.removeEvent=eJ;Mt.removeUserSelectStyles=fJ;var on=wi,hC=QQ($a);function rL(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(rL=function(n){return n?r:t})(e)}function QQ(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=rL(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}let Hf="";function nL(e,t){return Hf||(Hf=(0,on.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(r){return(0,on.isFunction)(e[r])})),(0,on.isFunction)(e[Hf])?e[Hf](t):!1}function JQ(e,t,r){let n=e;do{if(nL(n,t))return!0;if(n===r)return!1;n=n.parentNode}while(n);return!1}function ZQ(e,t,r,n){if(!e)return;const o={capture:!0,...n};e.addEventListener?e.addEventListener(t,r,o):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function eJ(e,t,r,n){if(!e)return;const o={capture:!0,...n};e.removeEventListener?e.removeEventListener(t,r,o):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function tJ(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,on.int)(r.borderTopWidth),t+=(0,on.int)(r.borderBottomWidth),t}function rJ(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,on.int)(r.borderLeftWidth),t+=(0,on.int)(r.borderRightWidth),t}function nJ(e){let t=e.clientHeight;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,on.int)(r.paddingTop),t-=(0,on.int)(r.paddingBottom),t}function iJ(e){let t=e.clientWidth;const r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,on.int)(r.paddingLeft),t-=(0,on.int)(r.paddingRight),t}function oJ(e,t,r){const o=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),a=(e.clientX+t.scrollLeft-o.left)/r,l=(e.clientY+t.scrollTop-o.top)/r;return{x:a,y:l}}function aJ(e,t){const r=dw(e,t,"px");return{[(0,hC.browserPrefixToKey)("transform",hC.default)]:r}}function sJ(e,t){return dw(e,t,"")}function dw(e,t,r){let{x:n,y:o}=e,a="translate(".concat(n).concat(r,",").concat(o).concat(r,")");if(t){const l="".concat(typeof t.x=="string"?t.x:t.x+r),u="".concat(typeof t.y=="string"?t.y:t.y+r);a="translate(".concat(l,", ").concat(u,")")+a}return a}function lJ(e,t){return e.targetTouches&&(0,on.findInArray)(e.targetTouches,r=>t===r.identifier)||e.changedTouches&&(0,on.findInArray)(e.changedTouches,r=>t===r.identifier)}function uJ(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier}function cJ(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||(t=e.createElement("style"),t.type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&iL(e.body,"react-draggable-transparent-selection")}function fJ(e){if(e)try{if(e.body&&oL(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{const t=(e.defaultView||window).getSelection();t&&t.type!=="Caret"&&t.removeAllRanges()}}catch{}}function iL(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function oL(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var bi={};Object.defineProperty(bi,"__esModule",{value:!0});bi.canDragX=pJ;bi.canDragY=gJ;bi.createCoreData=mJ;bi.createDraggableData=yJ;bi.getBoundPosition=dJ;bi.getControlPosition=vJ;bi.snapToGrid=hJ;var Yr=wi,Os=Mt;function dJ(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:n}=e.props;n=typeof n=="string"?n:wJ(n);const o=hw(e);if(typeof n=="string"){const{ownerDocument:a}=o,l=a.defaultView;let u;if(n==="parent"?u=o.parentNode:u=a.querySelector(n),!(u instanceof l.HTMLElement))throw new Error('Bounds selector "'+n+'" could not find an element.');const d=u,h=l.getComputedStyle(o),g=l.getComputedStyle(d);n={left:-o.offsetLeft+(0,Yr.int)(g.paddingLeft)+(0,Yr.int)(h.marginLeft),top:-o.offsetTop+(0,Yr.int)(g.paddingTop)+(0,Yr.int)(h.marginTop),right:(0,Os.innerWidth)(d)-(0,Os.outerWidth)(o)-o.offsetLeft+(0,Yr.int)(g.paddingRight)-(0,Yr.int)(h.marginRight),bottom:(0,Os.innerHeight)(d)-(0,Os.outerHeight)(o)-o.offsetTop+(0,Yr.int)(g.paddingBottom)-(0,Yr.int)(h.marginBottom)}}return(0,Yr.isNum)(n.right)&&(t=Math.min(t,n.right)),(0,Yr.isNum)(n.bottom)&&(r=Math.min(r,n.bottom)),(0,Yr.isNum)(n.left)&&(t=Math.max(t,n.left)),(0,Yr.isNum)(n.top)&&(r=Math.max(r,n.top)),[t,r]}function hJ(e,t,r){const n=Math.round(t/e[0])*e[0],o=Math.round(r/e[1])*e[1];return[n,o]}function pJ(e){return e.props.axis==="both"||e.props.axis==="x"}function gJ(e){return e.props.axis==="both"||e.props.axis==="y"}function vJ(e,t,r){const n=typeof t=="number"?(0,Os.getTouch)(e,t):null;if(typeof t=="number"&&!n)return null;const o=hw(r),a=r.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,Os.offsetXYFromParent)(n||e,a,r.props.scale)}function mJ(e,t,r){const n=!(0,Yr.isNum)(e.lastX),o=hw(e);return n?{node:o,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:o,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function yJ(e,t){const r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function wJ(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function hw(e){const t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var vp={},mp={};Object.defineProperty(mp,"__esModule",{value:!0});mp.default=bJ;function bJ(){}Object.defineProperty(vp,"__esModule",{value:!0});vp.default=void 0;var dv=SJ(E),$r=pw(Wh),xJ=pw(tl),vr=Mt,fo=bi,hv=wi,uu=pw(mp);function pw(e){return e&&e.__esModule?e:{default:e}}function aL(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(aL=function(n){return n?r:t})(e)}function SJ(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=aL(t);if(r&&r.has(e))return r.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var l=o?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(n,a,l):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function Lr(e,t,r){return t=EJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EJ(e){var t=CJ(e,"string");return typeof t=="symbol"?t:String(t)}function CJ(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}const Dn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let ho=Dn.mouse,yp=class extends dv.Component{constructor(){super(...arguments),Lr(this,"dragging",!1),Lr(this,"lastX",NaN),Lr(this,"lastY",NaN),Lr(this,"touchIdentifier",null),Lr(this,"mounted",!1),Lr(this,"handleDragStart",t=>{if(this.props.onMouseDown(t),!this.props.allowAnyClick&&typeof t.button=="number"&&t.button!==0)return!1;const r=this.findDOMNode();if(!r||!r.ownerDocument||!r.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:n}=r;if(this.props.disabled||!(t.target instanceof n.defaultView.Node)||this.props.handle&&!(0,vr.matchesSelectorAndParentsTo)(t.target,this.props.handle,r)||this.props.cancel&&(0,vr.matchesSelectorAndParentsTo)(t.target,this.props.cancel,r))return;t.type==="touchstart"&&t.preventDefault();const o=(0,vr.getTouchIdentifier)(t);this.touchIdentifier=o;const a=(0,fo.getControlPosition)(t,o,this);if(a==null)return;const{x:l,y:u}=a,d=(0,fo.createCoreData)(this,l,u);(0,uu.default)("DraggableCore: handleDragStart: %j",d),(0,uu.default)("calling",this.props.onStart),!(this.props.onStart(t,d)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,vr.addUserSelectStyles)(n),this.dragging=!0,this.lastX=l,this.lastY=u,(0,vr.addEvent)(n,ho.move,this.handleDrag),(0,vr.addEvent)(n,ho.stop,this.handleDragStop))}),Lr(this,"handleDrag",t=>{const r=(0,fo.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:o}=r;if(Array.isArray(this.props.grid)){let u=n-this.lastX,d=o-this.lastY;if([u,d]=(0,fo.snapToGrid)(this.props.grid,u,d),!u&&!d)return;n=this.lastX+u,o=this.lastY+d}const a=(0,fo.createCoreData)(this,n,o);if((0,uu.default)("DraggableCore: handleDrag: %j",a),this.props.onDrag(t,a)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(d)}return}this.lastX=n,this.lastY=o}),Lr(this,"handleDragStop",t=>{if(!this.dragging)return;const r=(0,fo.getControlPosition)(t,this.touchIdentifier,this);if(r==null)return;let{x:n,y:o}=r;if(Array.isArray(this.props.grid)){let d=n-this.lastX||0,h=o-this.lastY||0;[d,h]=(0,fo.snapToGrid)(this.props.grid,d,h),n=this.lastX+d,o=this.lastY+h}const a=(0,fo.createCoreData)(this,n,o);if(this.props.onStop(t,a)===!1||this.mounted===!1)return!1;const u=this.findDOMNode();u&&this.props.enableUserSelectHack&&(0,vr.removeUserSelectStyles)(u.ownerDocument),(0,uu.default)("DraggableCore: handleDragStop: %j",a),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,u&&((0,uu.default)("DraggableCore: Removing handlers"),(0,vr.removeEvent)(u.ownerDocument,ho.move,this.handleDrag),(0,vr.removeEvent)(u.ownerDocument,ho.stop,this.handleDragStop))}),Lr(this,"onMouseDown",t=>(ho=Dn.mouse,this.handleDragStart(t))),Lr(this,"onMouseUp",t=>(ho=Dn.mouse,this.handleDragStop(t))),Lr(this,"onTouchStart",t=>(ho=Dn.touch,this.handleDragStart(t))),Lr(this,"onTouchEnd",t=>(ho=Dn.touch,this.handleDragStop(t)))}componentDidMount(){this.mounted=!0;const t=this.findDOMNode();t&&(0,vr.addEvent)(t,Dn.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const t=this.findDOMNode();if(t){const{ownerDocument:r}=t;(0,vr.removeEvent)(r,Dn.mouse.move,this.handleDrag),(0,vr.removeEvent)(r,Dn.touch.move,this.handleDrag),(0,vr.removeEvent)(r,Dn.mouse.stop,this.handleDragStop),(0,vr.removeEvent)(r,Dn.touch.stop,this.handleDragStop),(0,vr.removeEvent)(t,Dn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,vr.removeUserSelectStyles)(r)}}findDOMNode(){var t,r;return(t=this.props)!==null&&t!==void 0&&t.nodeRef?(r=this.props)===null||r===void 0||(r=r.nodeRef)===null||r===void 0?void 0:r.current:xJ.default.findDOMNode(this)}render(){return dv.cloneElement(dv.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};vp.default=yp;Lr(yp,"displayName","DraggableCore");Lr(yp,"propTypes",{allowAnyClick:$r.default.bool,children:$r.default.node.isRequired,disabled:$r.default.bool,enableUserSelectHack:$r.default.bool,offsetParent:function(e,t){if(e[t]&&e[t].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:$r.default.arrayOf($r.default.number),handle:$r.default.string,cancel:$r.default.string,nodeRef:$r.default.object,onStart:$r.default.func,onDrag:$r.default.func,onStop:$r.default.func,onMouseDown:$r.default.func,scale:$r.default.number,className:hv.dontSetMe,style:hv.dontSetMe,transform:hv.dontSetMe});Lr(yp,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return d.default}}),e.default=void 0;var t=w(E),r=g(Wh),n=g(tl),o=g(WQ),a=Mt,l=bi,u=wi,d=g(vp),h=g(mp);function g(P){return P&&P.__esModule?P:{default:P}}function m(P){if(typeof WeakMap!="function")return null;var A=new WeakMap,L=new WeakMap;return(m=function(R){return R?L:A})(P)}function w(P,A){if(P&&P.__esModule)return P;if(P===null||typeof P!="object"&&typeof P!="function")return{default:P};var L=m(A);if(L&&L.has(P))return L.get(P);var R={},D=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in P)if($!=="default"&&Object.prototype.hasOwnProperty.call(P,$)){var B=D?Object.getOwnPropertyDescriptor(P,$):null;B&&(B.get||B.set)?Object.defineProperty(R,$,B):R[$]=P[$]}return R.default=P,L&&L.set(P,R),R}function x(){return x=Object.assign?Object.assign.bind():function(P){for(var A=1;A<arguments.length;A++){var L=arguments[A];for(var R in L)Object.prototype.hasOwnProperty.call(L,R)&&(P[R]=L[R])}return P},x.apply(this,arguments)}function C(P,A,L){return A=j(A),A in P?Object.defineProperty(P,A,{value:L,enumerable:!0,configurable:!0,writable:!0}):P[A]=L,P}function j(P){var A=T(P,"string");return typeof A=="symbol"?A:String(A)}function T(P,A){if(typeof P!="object"||P===null)return P;var L=P[Symbol.toPrimitive];if(L!==void 0){var R=L.call(P,A||"default");if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(P)}class k extends t.Component{static getDerivedStateFromProps(A,L){let{position:R}=A,{prevPropsPosition:D}=L;return R&&(!D||R.x!==D.x||R.y!==D.y)?((0,h.default)("Draggable: getDerivedStateFromProps %j",{position:R,prevPropsPosition:D}),{x:R.x,y:R.y,prevPropsPosition:{...R}}):null}constructor(A){super(A),C(this,"onDragStart",(L,R)=>{if((0,h.default)("Draggable: onDragStart: %j",R),this.props.onStart(L,(0,l.createDraggableData)(this,R))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),C(this,"onDrag",(L,R)=>{if(!this.state.dragging)return!1;(0,h.default)("Draggable: onDrag: %j",R);const D=(0,l.createDraggableData)(this,R),$={x:D.x,y:D.y,slackX:0,slackY:0};if(this.props.bounds){const{x:U,y:Y}=$;$.x+=this.state.slackX,$.y+=this.state.slackY;const[V,de]=(0,l.getBoundPosition)(this,$.x,$.y);$.x=V,$.y=de,$.slackX=this.state.slackX+(U-$.x),$.slackY=this.state.slackY+(Y-$.y),D.x=$.x,D.y=$.y,D.deltaX=$.x-this.state.x,D.deltaY=$.y-this.state.y}if(this.props.onDrag(L,D)===!1)return!1;this.setState($)}),C(this,"onDragStop",(L,R)=>{if(!this.state.dragging||this.props.onStop(L,(0,l.createDraggableData)(this,R))===!1)return!1;(0,h.default)("Draggable: onDragStop: %j",R);const $={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:U,y:Y}=this.props.position;$.x=U,$.y=Y}this.setState($)}),this.state={dragging:!1,dragged:!1,x:A.position?A.position.x:A.defaultPosition.x,y:A.position?A.position.y:A.defaultPosition.y,prevPropsPosition:{...A.position},slackX:0,slackY:0,isElementSVG:!1},A.position&&!(A.onDrag||A.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var A,L;return(A=(L=this.props)===null||L===void 0||(L=L.nodeRef)===null||L===void 0?void 0:L.current)!==null&&A!==void 0?A:n.default.findDOMNode(this)}render(){const{axis:A,bounds:L,children:R,defaultPosition:D,defaultClassName:$,defaultClassNameDragging:B,defaultClassNameDragged:U,position:Y,positionOffset:V,scale:de,...W}=this.props;let _={},M=null;const oe=!!!Y||this.state.dragging,re=Y||D,X={x:(0,l.canDragX)(this)&&oe?this.state.x:re.x,y:(0,l.canDragY)(this)&&oe?this.state.y:re.y};this.state.isElementSVG?M=(0,a.createSVGTransform)(X,V):_=(0,a.createCSSTransform)(X,V);const ie=(0,o.default)(R.props.className||"",$,{[B]:this.state.dragging,[U]:this.state.dragged});return t.createElement(d.default,x({},W,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),t.cloneElement(t.Children.only(R),{className:ie,style:{...R.props.style,..._},transform:M}))}}e.default=k,C(k,"displayName","Draggable"),C(k,"propTypes",{...d.default.propTypes,axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:u.dontSetMe,style:u.dontSetMe,transform:u.dontSetMe}),C(k,"defaultProps",{...d.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(JP);const{default:sL,DraggableCore:kJ}=JP;fw.exports=sL;fw.exports.default=sL;var TJ=fw.exports.DraggableCore=kJ;const lL=e=>{const{label:t,onDoubleClick:r,onSelect:n,selected:o,...a}=e,l=E.useCallback(d=>{d.ctrlKey||d.shiftKey?n(!o,!1):n(!0,!0)},[n,o]),u=E.useCallback(d=>{(d.key===" "||d.key==="Enter")&&(d.preventDefault(),d.ctrlKey||d.shiftKey?n(!o,!1):n(!0,!0))},[n,o]);return y.jsx("div",{className:Wt("selectable-card",{selected:o}),role:"button","aria-label":t,"aria-pressed":o,onClick:l,onDoubleClick:r,onKeyDown:u,tabIndex:0,children:y.jsx($o,{...a})})},OJ=400,uL=E.memo(e=>{const{onDeselect:t,onDrag:r,onDragStart:n,onDragStop:o,onEdit:a,onSelect:l,passage:u,tagColors:d}=e,{t:h}=Ce(),g=E.useMemo(()=>Wt("passage-card",{empty:G2(u),selected:u.selected}),[u]),m=E.useRef(null),w=E.useMemo(()=>u.text.length>0?u.text.substring(0,OJ):y.jsx("span",{className:"placeholder",children:h(HQ==="touchOnly"?"components.passageCard.placeholderTouch":"components.passageCard.placeholderClick")}),[u.text,h]),x=E.useMemo(()=>({height:u.height,left:u.left,top:u.top,width:u.width}),[u.height,u.left,u.top,u.width]),C=E.useCallback(k=>{k.shiftKey||k.ctrlKey?u.selected?t(u):l(u,!1):u.selected||l(u,!0)},[t,l,u]),j=E.useCallback(()=>a(u),[a,u]),T=E.useCallback((k,P)=>{l(u,P)},[l,u]);return y.jsx(TJ,{nodeRef:m,onMouseDown:C,onStart:n,onDrag:r,onStop:o,children:y.jsx("div",{className:g,ref:m,style:x,"data-passage-tags":u.tags.join(" "),children:y.jsxs(lL,{highlighted:u.highlighted,label:u.name,onDoubleClick:j,onSelect:T,selected:u.selected,children:[y.jsx(TP,{tagColors:d,tags:u.tags}),y.jsx("h2",{children:u.name}),y.jsx(fr,{children:w})]})})})});uL.displayName="PassageCard";const cL=E.memo(e=>{const{passages:t}=e,r=E.useMemo(()=>[...t].sort((n,o)=>n.top!==o.top?n.top-o.top:n.left-o.left),[t]);return y.jsx(_a,{component:null,children:r.map(n=>y.jsx(Xn,{classNames:"pop",timeout:200,children:y.jsx(uL,{passage:n,...e})},n.id))})});cL.displayName="PassageCardGroup";function PJ(e,t){switch(t.type){case"start":return{dragging:!0,dragX:t.x,dragY:t.y,startX:t.x,startY:t.y};case"move":return{...e,dragX:t.x,dragY:t.y};case"stop":return Promise.resolve().then(()=>t.callback({left:e.dragX-e.startX,top:e.dragY-e.startY})),{dragging:!1,dragX:0,dragY:0,startX:0,startY:0}}}const pC=.6,LJ=e=>{const{formatName:t,formatVersion:r,onDeselect:n,onDrag:o,onEdit:a,onSelect:l,passages:u,startPassageId:d,tagColors:h,visibleZoom:g,zoom:m}=e,[w,x]=E.useState(g<=pC),C=E.useRef(null),j=E.useMemo(()=>n3([...u,{top:0,left:0,width:0,height:0}]),[u]),T=E.useMemo(()=>({height:"calc(".concat(j.height,"px + max(50vh, ").concat(1e3/g,"px))"),width:"calc(".concat(j.width,"px + max(50vw, ").concat(1e3/g,"px))"),transform:"scale(".concat(g,")")}),[j.height,j.width,g]),[k,P]=E.useReducer(PJ,{dragging:!1,dragX:0,dragY:0,startX:0,startY:0}),A=E.useRef(!1);E.useEffect(()=>{m===g&&x(m<=pC)},[g,m]),E.useEffect(()=>{C.current&&(C.current.style.setProperty("--drag-offset-left","".concat((k.dragX-k.startX)/g,"px")),C.current.style.setProperty("--drag-offset-top","".concat((k.dragY-k.startY)/g,"px")))},[k.dragX,k.dragY,k.startX,k.startY,g]);const L=E.useCallback((B,U)=>{document.body.classList.add("dragging-passages"),P({type:"start",x:U.x,y:U.y})},[]),R=E.useCallback((B,U)=>P({type:"move",x:U.x,y:U.y}),[]),D=E.useCallback(()=>{document.body.classList.remove("dragging-passages"),P({type:"stop",callback:o}),A.current=!0,window.setTimeout(()=>{A.current=!1},0)},[o]),$=E.useCallback((B,U)=>{A.current||l(B,U)},[l]);return y.jsxs("div",{className:Wt("passage-map",{"compact-passage-cards":w}),ref:C,style:T,children:[y.jsx(IQ,{formatName:t,formatVersion:r,offset:{left:(k.dragX-k.startX)/m,top:(k.dragY-k.startY)/m},passages:u,startPassageId:d}),y.jsx(cL,{onDeselect:n,onDragStart:L,onDrag:R,onDragStop:D,onEdit:a,onSelect:$,passages:u,tagColors:h})]})},NJ=e=>{const{container:t,onSelectRect:r,...n}=e,[o,a]=E.useState(),[l,u]=E.useState(),d=E.useMemo(()=>o?e.passages.map(m=>{if(l&&m.selected)return m;const w=Nh(o,m);return w===m.selected?m:{...m,selected:w}}):e.passages,[e.passages,l,o]),h=E.useCallback((m,w)=>{a({height:m.height/e.zoom,left:m.left/e.zoom,top:m.top/e.zoom,width:m.width/e.zoom}),u(w)},[e.zoom]),g=E.useCallback((m,w)=>{a(void 0),u(void 0),r(m,w)},[r]);return y.jsxs(y.Fragment,{children:[y.jsx(PQ,{container:t,ignoreEventsOnSelector:".passage-card, .fuzzy-finder, .zoom-buttons",onSelectRect:g,onTemporarySelectRect:h}),y.jsx(LJ,{...n,passages:d})]})};var pv=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function gv(e,t,r,n){e.addEventListener?e.addEventListener(t,r,n):e.attachEvent&&e.attachEvent("on".concat(t),function(){r(window.event)})}function fL(e,t){for(var r=t.slice(0,t.length-1),n=0;n<r.length;n++)r[n]=e[r[n].toLowerCase()];return r}function dL(e){typeof e!="string"&&(e=""),e=e.replace(/\s/g,"");for(var t=e.split(","),r=t.lastIndexOf("");r>=0;)t[r-1]+=",",t.splice(r,1),r=t.lastIndexOf("");return t}function jJ(e,t){for(var r=e.length>=t.length?e:t,n=e.length>=t.length?t:e,o=!0,a=0;a<r.length;a++)n.indexOf(r[a])===-1&&(o=!1);return o}var gw={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":pv?173:189,"=":pv?61:187,";":pv?59:186,"'":222,"[":219,"]":221,"\\":220},Io={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},Qm={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},cr={16:!1,18:!1,17:!1,91:!1},Bt={};for(var Bf=1;Bf<20;Bf++)gw["f".concat(Bf)]=111+Bf;var xt=[],gC=!1,hL="all",pL=[],wp=function(t){return gw[t.toLowerCase()]||Io[t.toLowerCase()]||t.toUpperCase().charCodeAt(0)};function gL(e){hL=e||"all"}function oc(){return hL||"all"}function AJ(){return xt.slice(0)}function MJ(e){var t=e.target||e.srcElement,r=t.tagName,n=!0;return(t.isContentEditable||(r==="INPUT"||r==="TEXTAREA"||r==="SELECT")&&!t.readOnly)&&(n=!1),n}function IJ(e){return typeof e=="string"&&(e=wp(e)),xt.indexOf(e)!==-1}function RJ(e,t){var r,n;e||(e=oc());for(var o in Bt)if(Object.prototype.hasOwnProperty.call(Bt,o))for(r=Bt[o],n=0;n<r.length;)r[n].scope===e?r.splice(n,1):n++;oc()===e&&gL(t||"all")}function _J(e){var t=e.keyCode||e.which||e.charCode,r=xt.indexOf(t);if(r>=0&&xt.splice(r,1),e.key&&e.key.toLowerCase()==="meta"&&xt.splice(0,xt.length),(t===93||t===224)&&(t=91),t in cr){cr[t]=!1;for(var n in Io)Io[n]===t&&(en[n]=!1)}}function $J(e){if(typeof e>"u")Object.keys(Bt).forEach(function(l){return delete Bt[l]});else if(Array.isArray(e))e.forEach(function(l){l.key&&vv(l)});else if(typeof e=="object")e.key&&vv(e);else if(typeof e=="string"){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r[0],a=r[1];typeof o=="function"&&(a=o,o=""),vv({key:e,scope:o,method:a,splitKey:"+"})}}var vv=function(t){var r=t.key,n=t.scope,o=t.method,a=t.splitKey,l=a===void 0?"+":a,u=dL(r);u.forEach(function(d){var h=d.split(l),g=h.length,m=h[g-1],w=m==="*"?"*":wp(m);if(Bt[w]){n||(n=oc());var x=g>1?fL(Io,h):[];Bt[w]=Bt[w].filter(function(C){var j=o?C.method===o:!0;return!(j&&C.scope===n&&jJ(C.mods,x))})}})};function vC(e,t,r,n){if(t.element===n){var o;if(t.scope===r||t.scope==="all"){o=t.mods.length>0;for(var a in cr)Object.prototype.hasOwnProperty.call(cr,a)&&(!cr[a]&&t.mods.indexOf(+a)>-1||cr[a]&&t.mods.indexOf(+a)===-1)&&(o=!1);(t.mods.length===0&&!cr[16]&&!cr[18]&&!cr[17]&&!cr[91]||o||t.shortcut==="*")&&t.method(e,t)===!1&&(e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation&&e.stopPropagation(),e.cancelBubble&&(e.cancelBubble=!0))}}}function mC(e,t){var r=Bt["*"],n=e.keyCode||e.which||e.charCode;if(en.filter.call(this,e)){if((n===93||n===224)&&(n=91),xt.indexOf(n)===-1&&n!==229&&xt.push(n),["ctrlKey","altKey","shiftKey","metaKey"].forEach(function(C){var j=Qm[C];e[C]&&xt.indexOf(j)===-1?xt.push(j):!e[C]&&xt.indexOf(j)>-1?xt.splice(xt.indexOf(j),1):C==="metaKey"&&e[C]&&xt.length===3&&(e.ctrlKey||e.shiftKey||e.altKey||(xt=xt.slice(xt.indexOf(j))))}),n in cr){cr[n]=!0;for(var o in Io)Io[o]===n&&(en[o]=!0);if(!r)return}for(var a in cr)Object.prototype.hasOwnProperty.call(cr,a)&&(cr[a]=e[Qm[a]]);e.getModifierState&&!(e.altKey&&!e.ctrlKey)&&e.getModifierState("AltGraph")&&(xt.indexOf(17)===-1&&xt.push(17),xt.indexOf(18)===-1&&xt.push(18),cr[17]=!0,cr[18]=!0);var l=oc();if(r)for(var u=0;u<r.length;u++)r[u].scope===l&&(e.type==="keydown"&&r[u].keydown||e.type==="keyup"&&r[u].keyup)&&vC(e,r[u],l,t);if(n in Bt){for(var d=0;d<Bt[n].length;d++)if((e.type==="keydown"&&Bt[n][d].keydown||e.type==="keyup"&&Bt[n][d].keyup)&&Bt[n][d].key){for(var h=Bt[n][d],g=h.splitKey,m=h.key.split(g),w=[],x=0;x<m.length;x++)w.push(wp(m[x]));w.sort().join("")===xt.sort().join("")&&vC(e,h,l,t)}}}}function DJ(e){return pL.indexOf(e)>-1}function en(e,t,r){xt=[];var n=dL(e),o=[],a="all",l=document,u=0,d=!1,h=!0,g="+",m=!1;for(r===void 0&&typeof t=="function"&&(r=t),Object.prototype.toString.call(t)==="[object Object]"&&(t.scope&&(a=t.scope),t.element&&(l=t.element),t.keyup&&(d=t.keyup),t.keydown!==void 0&&(h=t.keydown),t.capture!==void 0&&(m=t.capture),typeof t.splitKey=="string"&&(g=t.splitKey)),typeof t=="string"&&(a=t);u<n.length;u++)e=n[u].split(g),o=[],e.length>1&&(o=fL(Io,e)),e=e[e.length-1],e=e==="*"?"*":wp(e),e in Bt||(Bt[e]=[]),Bt[e].push({keyup:d,keydown:h,scope:a,mods:o,shortcut:n[u],method:r,key:n[u],splitKey:g,element:l});typeof l<"u"&&!DJ(l)&&window&&(pL.push(l),gv(l,"keydown",function(w){mC(w,l)},m),gC||(gC=!0,gv(window,"focus",function(){xt=[]},m)),gv(l,"keyup",function(w){mC(w,l),_J(w)},m))}function FJ(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Bt).forEach(function(r){var n=Bt[r].find(function(o){return o.scope===t&&o.shortcut===e});n&&n.method&&n.method()})}var mv={setScope:gL,getScope:oc,deleteScope:RJ,getPressedKeyCodes:AJ,isPressed:IJ,filter:MJ,trigger:FJ,unbind:$J,keyMap:gw,modifier:Io,modifierMap:Qm};for(var yv in mv)Object.prototype.hasOwnProperty.call(mv,yv)&&(en[yv]=mv[yv]);if(typeof window<"u"){var zJ=window.hotkeys;en.noConflict=function(e){return e&&window.hotkeys===en&&(window.hotkeys=zJ),en},window.hotkeys=en}en.filter=function(){return!0};var vL=function(t,r){var n=t.target,o=n&&n.tagName;return!!(o&&r&&r.includes(o))},HJ=function(t){return vL(t,["INPUT","TEXTAREA","SELECT"])};function bo(e,t,r,n){r instanceof Array&&(n=r,r=void 0);var o=r||{},a=o.enableOnTags,l=o.filter,u=o.keyup,d=o.keydown,h=o.filterPreventDefault,g=h===void 0?!0:h,m=o.enabled,w=m===void 0?!0:m,x=o.enableOnContentEditable,C=x===void 0?!1:x,j=E.useRef(null),T=E.useCallback(function(k,P){var A,L;return l&&!l(k)?!g:HJ(k)&&!vL(k,a)||(A=k.target)!=null&&A.isContentEditable&&!C?!0:j.current===null||document.activeElement===j.current||(L=j.current)!=null&&L.contains(document.activeElement)?(t(k,P),!0):!1},n?[j,a,l].concat(n):[j,a,l]);return E.useEffect(function(){if(!w){en.unbind(e,T);return}return u&&d!==!0&&(r.keydown=!1),en(e,r||{},T),function(){return en.unbind(e,T)}},[T,e,w]),j}en.isPressed;const BJ=e=>{const{detail:t,heading:r,onClick:n,selected:o}=e;return y.jsxs("button",{className:Wt("fuzzy-finder-result",{selected:o}),onClick:n,children:[y.jsx(yI,{}),y.jsx("span",{className:"heading",children:r}),y.jsx("span",{className:"detail",children:t})]})};function Wf(e){return!!(e&&document.activeElement===e)}const WJ=e=>{const{noResultsText:t,onChangeSearch:r,onClose:n,onSelectResult:o,prompt:a,search:l,results:u}=e,[d,h]=E.useState(0),g=E.useRef(null),m=E.useRef(null);return bo("escape",n,{enableOnTags:["INPUT"],filter:()=>Wf(m.current)},[n]),bo("return",()=>o(d),{enableOnTags:["INPUT"],filter:()=>Wf(m.current)},[o,d]),bo("up",()=>h(w=>w===0?u.length-1:w-1),{enableOnTags:["INPUT"],filter:()=>Wf(m.current)},[o,d]),bo("down",()=>h(w=>w===u.length-1?0:w+1),{enableOnTags:["INPUT"],filter:()=>Wf(m.current)},[o,d]),E.useEffect(()=>{const w=window.setTimeout(()=>{var x;g.current&&((x=g.current.querySelector("input"))==null||x.focus())},0);return()=>window.clearTimeout(w)},[]),y.jsx("div",{className:"fuzzy-finder",ref:g,children:y.jsxs($o,{children:[y.jsxs("div",{className:"search",children:[y.jsx(tc,{onChange:w=>r(w.target.value),ref:m,value:l,children:a}),y.jsx(Pe,{icon:y.jsx(zn,{}),iconOnly:!0,label:"Close",onClick:n,tooltipPosition:"bottom"})]}),y.jsxs("div",{className:Wt("results",{"has-results":u.length>0}),children:[l.length>0&&u.length===0&&y.jsx("div",{className:"no-results",children:t}),l.length>0&&u.length>0&&y.jsx("ol",{children:u.map((w,x)=>y.jsx("li",{children:y.jsx(BJ,{...w,onClick:()=>o(x),selected:x===d})},w.heading))})]})]})})},UJ=e=>{const{onClose:t,onOpen:r,open:n,setCenter:o,story:a}=e,{dispatch:l}=gt(),[u,d]=E.useState(""),[h,g]=E.useState(""),m=E.useMemo(()=>qP(k=>{g(k)},100,{leading:!0,trailing:!0}),[]),w=E.useMemo(()=>_H(a.passages,h),[h,a.passages]),x=E.useMemo(()=>w.map(({name:k,text:P})=>({heading:k,detail:P})),[w]);bo("p",r);const{t:C}=Ce();function j(k){d(k),m(k)}function T(k){o(w[k]),l(q2(a,w[k],!0)),d(""),t()}return y.jsx(Xn,{classNames:"pop",mountOnEnter:!0,timeout:200,unmountOnExit:!0,in:n,children:y.jsx(WJ,{noResultsText:C("components.passageFuzzyFinder.noResults"),onClose:t,onChangeSearch:j,onSelectResult:T,prompt:C("components.passageFuzzyFinder.prompt"),search:u,results:x})})};function vw(e){return function(t){return!!t.type&&t.type.tabsRole===e}}var bp=vw("Tab"),mw=vw("TabList"),yw=vw("TabPanel");function Jm(){return Jm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jm.apply(this,arguments)}function KJ(e){return bp(e)||mw(e)||yw(e)}function Zm(e,t){return E.Children.map(e,function(r){return r===null?null:KJ(r)?t(r):r.props&&r.props.children&&typeof r.props.children=="object"?E.cloneElement(r,Jm({},r.props,{children:Zm(r.props.children,t)})):r})}function mL(e,t){return E.Children.forEach(e,function(r){r!==null&&(bp(r)||yw(r)?t(r):r.props&&r.props.children&&typeof r.props.children=="object"&&(mw(r)&&t(r),mL(r.props.children,t)))})}var GJ=0;function yC(){return"react-tabs-"+GJ++}function yL(e){var t=0;return mL(e,function(r){bp(r)&&t++}),t}var qJ=["children","className","disabledTabClassName","domRef","focus","forceRenderTabPanel","onSelect","selectedIndex","selectedTabClassName","selectedTabPanelClassName","environment","disableUpDownKeys"];function ey(){return ey=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ey.apply(this,arguments)}function VJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function wL(e){return e&&"getAttribute"in e}function wC(e){return wL(e)&&e.getAttribute("data-rttab")}function Jo(e){return wL(e)&&e.getAttribute("aria-disabled")==="true"}var fh;function XJ(e){var t=e||(typeof window<"u"?window:void 0);try{fh=!!(typeof t<"u"&&t.document&&t.document.activeElement)}catch{fh=!1}}var YJ={className:"react-tabs",focus:!1},ww=function(t){var r=E.useRef([]),n=E.useRef([]),o=E.useRef([]),a=E.useRef();function l(L,R){if(!(L<0||L>=m())){var D=t.onSelect,$=t.selectedIndex;D(L,$,R)}}function u(L){for(var R=m(),D=L+1;D<R;D++)if(!Jo(w(D)))return D;for(var $=0;$<L;$++)if(!Jo(w($)))return $;return L}function d(L){for(var R=L;R--;)if(!Jo(w(R)))return R;for(R=m();R-- >L;)if(!Jo(w(R)))return R;return L}function h(){for(var L=m(),R=0;R<L;R++)if(!Jo(w(R)))return R;return null}function g(){for(var L=m();L--;)if(!Jo(w(L)))return L;return null}function m(){var L=t.children;return yL(L)}function w(L){return r.current["tabs-"+L]}function x(){var L=0,R=t.children,D=t.disabledTabClassName,$=t.focus,B=t.forceRenderTabPanel,U=t.selectedIndex,Y=t.selectedTabClassName,V=t.selectedTabPanelClassName,de=t.environment;n.current=n.current||[],o.current=o.current||[];for(var W=n.current.length-m();W++<0;)n.current.push(yC()),o.current.push(yC());return Zm(R,function(_){var M=_;if(mw(_)){var Q=0,oe=!1;fh==null&&XJ(de);var re=de||(typeof window<"u"?window:void 0);fh&&re&&(oe=_e.Children.toArray(_.props.children).filter(bp).some(function(ie,ue){return re.document.activeElement===w(ue)})),M=E.cloneElement(_,{children:Zm(_.props.children,function(ie){var ue="tabs-"+Q,he=U===Q,Se={tabRef:function(ae){r.current[ue]=ae},id:n.current[Q],panelId:o.current[Q],selected:he,focus:he&&($||oe)};return Y&&(Se.selectedClassName=Y),D&&(Se.disabledClassName=D),Q++,E.cloneElement(ie,Se)})})}else if(yw(_)){var X={id:o.current[L],tabId:n.current[L],selected:U===L};B&&(X.forceRender=B),V&&(X.selectedClassName=V),L++,M=E.cloneElement(_,X)}return M})}function C(L){var R=t.direction,D=t.disableUpDownKeys;if(T(L.target)){var $=t.selectedIndex,B=!1,U=!1;(L.code==="Space"||L.keyCode===32||L.code==="Enter"||L.keyCode===13)&&(B=!0,U=!1,j(L)),L.code==="ArrowLeft"||L.keyCode===37||!D&&(L.keyCode===38||L.code==="ArrowUp")?(R==="rtl"?$=u($):$=d($),B=!0,U=!0):L.code==="ArrowRight"||L.keyCode===39||!D&&(L.keyCode===40||L.code==="ArrowDown")?(R==="rtl"?$=d($):$=u($),B=!0,U=!0):L.keyCode===35||L.code==="End"?($=g(),B=!0,U=!0):(L.keyCode===36||L.code==="Home")&&($=h(),B=!0,U=!0),B&&L.preventDefault(),U&&l($,L)}}function j(L){var R=L.target;do if(T(R)){if(Jo(R))return;var D=[].slice.call(R.parentNode.children).filter(wC).indexOf(R);l(D,L);return}while((R=R.parentNode)!=null)}function T(L){if(!wC(L))return!1;var R=L.parentElement;do{if(R===a.current)return!0;if(R.getAttribute("data-rttabs"))break;R=R.parentElement}while(R);return!1}t.children;var k=t.className;t.disabledTabClassName;var P=t.domRef;t.focus,t.forceRenderTabPanel,t.onSelect,t.selectedIndex,t.selectedTabClassName,t.selectedTabPanelClassName,t.environment,t.disableUpDownKeys;var A=VJ(t,qJ);return _e.createElement("div",ey({},A,{className:Qs(k),onClick:j,onKeyDown:C,ref:function(R){a.current=R,P&&P(R)},"data-rttabs":!0}),x())};ww.defaultProps=YJ;ww.propTypes={};function ty(){return ty=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ty.apply(this,arguments)}var QJ=0,hd=1,JJ={defaultFocus:!1,focusTabOnClick:!0,forceRenderTabPanel:!1,selectedIndex:null,defaultIndex:null,environment:null,disableUpDownKeys:!1},ZJ=function(t){return t.selectedIndex===null?hd:QJ},xp=function(t){var r=t.children,n=t.defaultFocus,o=t.defaultIndex,a=t.focusTabOnClick,l=t.onSelect,u=E.useState(n),d=u[0],h=u[1],g=E.useState(ZJ(t)),m=g[0],w=E.useState(m===hd?o||0:null),x=w[0],C=w[1];if(E.useEffect(function(){h(!1)},[]),m===hd){var j=yL(r);E.useEffect(function(){if(x!=null){var P=Math.max(0,j-1);C(Math.min(x,P))}},[j])}var T=function(A,L,R){typeof l=="function"&&l(A,L,R)===!1||(a&&h(!0),m===hd&&C(A))},k=ty({},t);return k.focus=d,k.onSelect=T,x!=null&&(k.selectedIndex=x),delete k.defaultFocus,delete k.defaultIndex,delete k.focusTabOnClick,_e.createElement(ww,k,r)};xp.propTypes={};xp.defaultProps=JJ;xp.tabsRole="Tabs";var eZ=["children","className"];function ry(){return ry=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ry.apply(this,arguments)}function tZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var rZ={className:"react-tabs__tab-list"},Sp=function(t){var r=t.children,n=t.className,o=tZ(t,eZ);return _e.createElement("ul",ry({},o,{className:Qs(n),role:"tablist"}),r)};Sp.tabsRole="TabList";Sp.propTypes={};Sp.defaultProps=rZ;var nZ=["children","className","disabled","disabledClassName","focus","id","panelId","selected","selectedClassName","tabIndex","tabRef"];function ny(){return ny=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ny.apply(this,arguments)}function iZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var wv="react-tabs__tab",oZ={className:wv,disabledClassName:wv+"--disabled",focus:!1,id:null,panelId:null,selected:!1,selectedClassName:wv+"--selected"},Ep=function(t){var r,n=E.useRef(),o=t.children,a=t.className,l=t.disabled,u=t.disabledClassName,d=t.focus,h=t.id,g=t.panelId,m=t.selected,w=t.selectedClassName,x=t.tabIndex,C=t.tabRef,j=iZ(t,nZ);return E.useEffect(function(){m&&d&&n.current.focus()},[m,d]),_e.createElement("li",ny({},j,{className:Qs(a,(r={},r[w]=m,r[u]=l,r)),ref:function(k){n.current=k,C&&C(k)},role:"tab",id:h,"aria-selected":m?"true":"false","aria-disabled":l?"true":"false","aria-controls":g,tabIndex:x||(m?"0":null),"data-rttab":!0}),o)};Ep.propTypes={};Ep.tabsRole="Tab";Ep.defaultProps=oZ;var aZ=["children","className","forceRender","id","selected","selectedClassName","tabId"];function iy(){return iy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},iy.apply(this,arguments)}function sZ(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,a;for(a=0;a<n.length;a++)o=n[a],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var bC="react-tabs__tab-panel",lZ={className:bC,forceRender:!1,selectedClassName:bC+"--selected"},Cp=function(t){var r,n=t.children,o=t.className,a=t.forceRender,l=t.id,u=t.selected,d=t.selectedClassName,h=t.tabId,g=sZ(t,aZ);return _e.createElement("div",iy({},g,{className:Qs(o,(r={},r[d]=u,r)),role:"tabpanel",id:l,"aria-labelledby":h}),a||u?n:null)};Cp.tabsRole="TabPanel";Cp.propTypes={};Cp.defaultProps=lZ;const uZ=()=>{const e=cl(),{t}=Ce();return["/","/stories"].includes(e.location.pathname)?null:y.jsx(Pe,{icon:y.jsx(JM,{}),variant:"primary",label:e.length>1?t("common.back"):t("routes.storyList.titleGeneric"),onClick:()=>e.length>1?e.goBack():e.push("/")})},bL=e=>{const{helpUrl:t="https://twinery.org/2guide",pinnedControls:r,tabs:n}=e,{t:o}=Ce();return y.jsx("div",{className:"route-toolbar",children:y.jsxs(xp,{selectedTabClassName:"selected",children:[y.jsxs("div",{className:"route-toolbar-top",children:[y.jsx(uZ,{}),y.jsx(Sp,{className:"route-toolbar-tablist",children:Object.keys(n).map(a=>y.jsx(Ep,{className:"route-toolbar-tab",children:a},a))}),y.jsxs("div",{className:"route-toolbar-pinned-controls",children:[r,y.jsx(Pe,{icon:y.jsx(qT,{}),label:o("common.help"),onClick:()=>window.open(t,"_blank")})]})]}),y.jsx("div",{children:Object.entries(n).map(([a,l])=>y.jsx(Cp,{children:l},a))})]})})};var xL={exports:{}};(function(e,t){(function(r,n){n()})(tr,function(){function r(h,g){return typeof g>"u"?g={autoBom:!1}:typeof g!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),g={autoBom:!g}),g.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h}function n(h,g,m){var w=new XMLHttpRequest;w.open("GET",h),w.responseType="blob",w.onload=function(){d(w.response,g,m)},w.onerror=function(){console.error("could not download file")},w.send()}function o(h){var g=new XMLHttpRequest;g.open("HEAD",h,!1);try{g.send()}catch{}return 200<=g.status&&299>=g.status}function a(h){try{h.dispatchEvent(new MouseEvent("click"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),h.dispatchEvent(g)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof tr=="object"&&tr.global===tr?tr:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(h,g,m){var w=l.URL||l.webkitURL,x=document.createElement("a");g=g||h.name||"download",x.download=g,x.rel="noopener",typeof h=="string"?(x.href=h,x.origin===location.origin?a(x):o(x.href)?n(h,g,m):a(x,x.target="_blank")):(x.href=w.createObjectURL(h),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){a(x)},0))}:"msSaveOrOpenBlob"in navigator?function(h,g,m){if(g=g||h.name||"download",typeof h!="string")navigator.msSaveOrOpenBlob(r(h,m),g);else if(o(h))n(h,g,m);else{var w=document.createElement("a");w.href=h,w.target="_blank",setTimeout(function(){a(w)})}}:function(h,g,m,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof h=="string")return n(h,g,m);var x=h.type==="application/octet-stream",C=/constructor/i.test(l.HTMLElement)||l.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||x&&C||u)&&typeof FileReader<"u"){var T=new FileReader;T.onloadend=function(){var A=T.result;A=j?A:A.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=A:location=A,w=null},T.readAsDataURL(h)}else{var k=l.URL||l.webkitURL,P=k.createObjectURL(h);w?w.location=P:location.href=P,w=null,setTimeout(function(){k.revokeObjectURL(P)},4e4)}});l.saveAs=d.saveAs=d,e.exports=d})})(xL);var SL=xL.exports;function EL(e,t){const r=new Blob([e],{type:"text/html;charset=utf-8"});SL.saveAs(r,t)}function cZ(e,t){const r=new Blob([e],{type:"text/plain;charset=utf-8"});SL.saveAs(r,t)}const CL=({story:e})=>{var L,R,D,$;const{publishStory:t}=Oc(),[r,n]=E.useState(),[o,a]=E.useState(),[l,u]=E.useState(),[d,h]=E.useState(),{playStory:g,proofStory:m,testStory:w}=OP(),{t:x}=Ce();function C(){n(void 0),a(void 0),u(void 0),h(void 0)}async function j(){if(!e)throw new Error("No story provided to publish");C();try{await g(e.id)}catch(B){n(B)}}async function T(){if(!e)throw new Error("No story provided to publish");C();try{await m(e.id)}catch(B){a(B)}}async function k(){if(!e)throw new Error("No story provided to publish");C();try{EL(await t(e.id),Fr(e))}catch(B){u(B)}}async function P(){if(!e)throw new Error("No story provided to publish");C();try{await w(e.id)}catch(B){h(B)}}function A(){if(!e)throw new Error("No story provided to export");cZ(UY(e),Fr(e,".twee"))}return y.jsxs(At,{children:[y.jsx(ha,{ariaLabel:(L=d==null?void 0:d.message)!=null?L:"",disabled:!e,icon:y.jsx(QT,{}),label:x("routeActions.build.test"),onChangeOpen:()=>h(void 0),onClick:P,open:!!d,children:y.jsxs(fr,{children:[y.jsx("p",{children:d==null?void 0:d.message}),y.jsx(Pe,{icon:y.jsx(zn,{}),label:x("common.close"),onClick:()=>h(void 0),variant:"primary"})]})}),y.jsx(ha,{ariaLabel:(R=r==null?void 0:r.message)!=null?R:"",disabled:!e,icon:y.jsx(iR,{}),label:x("routeActions.build.play"),onChangeOpen:()=>n(void 0),onClick:j,open:!!r,children:y.jsxs(fr,{children:[y.jsx("p",{children:r==null?void 0:r.message}),y.jsx(Pe,{icon:y.jsx(zn,{}),label:x("common.close"),onClick:()=>n(void 0),variant:"primary"})]})}),y.jsx(ha,{ariaLabel:(D=o==null?void 0:o.message)!=null?D:"",disabled:!e,icon:y.jsx(PI,{}),label:x("routeActions.build.proof"),onChangeOpen:()=>a(void 0),onClick:T,open:!!o,children:y.jsxs(fr,{children:[y.jsx("p",{children:o==null?void 0:o.message}),y.jsx(Pe,{icon:y.jsx(zn,{}),label:x("common.close"),onClick:()=>a(void 0),variant:"primary"})]})}),y.jsx(ha,{ariaLabel:($=l==null?void 0:l.message)!=null?$:"",disabled:!e,icon:y.jsx(MI,{}),label:x("routeActions.build.publishToFile"),onChangeOpen:()=>u(void 0),onClick:k,open:!!l,children:y.jsxs(fr,{children:[y.jsx("p",{children:l==null?void 0:l.message}),y.jsx(Pe,{icon:y.jsx(zn,{}),label:x("common.close"),onClick:()=>u(void 0),variant:"primary"})]})}),y.jsx(Pe,{disabled:!e,icon:y.jsx(r_,{}),label:x("routeActions.build.exportAsTwee"),onClick:A})]})},Uf=({label:e})=>y.jsx("span",{className:"badge",children:e}),fZ=({format:e})=>{const{t}=Ce();return e.loadState==="unloaded"||e.loadState==="loading"?y.jsx("div",{className:"story-format-details",children:y.jsx("p",{children:t("components.storyFormatItem.loadingFormat")})}):e.loadState==="error"?y.jsx("div",{className:"story-format-details",children:y.jsx("p",{children:t("components.storyFormatItem.loadError",{errorMessage:e.loadError.message})})}):y.jsxs("div",{className:"story-format-details",children:[e.properties.author&&y.jsx("p",{className:"story-format-author",dangerouslySetInnerHTML:{__html:t("components.storyFormatItem.author",{author:e.properties.author})}}),e.properties.description&&y.jsx("div",{className:"story-format-description",dangerouslySetInnerHTML:{__html:e.properties.description}}),e.properties.license&&y.jsx("p",{className:"story-format-license",children:t("components.storyFormatItem.license",{license:e.properties.license})})]})},dZ=e=>{const{defaultFormat:t,editorExtensionsDisabled:r,format:n,onChangeEditorExtensionsDisabled:o,onDelete:a,onUseAsDefault:l,onUseAsProofing:u,proofingFormat:d}=e,{t:h}=Ce();let g=y.jsx(y.Fragment,{});n.loadState==="error"?g=y.jsx(GM,{}):n.loadState==="unloaded"||n.loadState==="loading"?g=y.jsx(t2,{}):n.loadState==="loaded"&&n.properties.image&&(g=y.jsx("img",{src:PW(n),alt:""}));let m=y.jsx(y.Fragment,{});return n.loadState==="loaded"&&(n.properties.proofing?m=y.jsx(Pe,{disabled:d,icon:y.jsx(Nx,{}),label:h("components.storyFormatItem.useProofingFormat"),onClick:u,variant:"primary"}):m=y.jsx(Pe,{disabled:t,label:h("components.storyFormatItem.useFormat"),onClick:l,icon:y.jsx(Nx,{}),variant:"primary"})),y.jsxs("div",{className:Wt("story-format-item",{highlighted:t||d}),children:[y.jsx("div",{className:"story-format-image",children:g}),y.jsxs("div",{className:"story-format-text",children:[y.jsxs("div",{className:"story-format-name",children:[y.jsx("h3",{children:h("components.storyFormatItem.name",{name:n.name,version:n.version})}),!n.userAdded&&y.jsx(Uf,{label:h("components.storyFormatItem.builtIn")}),n.loadState==="loaded"&&n.properties.proofing&&y.jsx(Uf,{label:h("components.storyFormatItem.proofing")}),t&&y.jsx(Uf,{label:h("components.storyFormatItem.defaultFormat")}),d&&y.jsx(Uf,{label:h("components.storyFormatItem.proofingFormat")})]}),y.jsx(fZ,{format:n})]}),y.jsxs("div",{className:"actions",children:[m,n.userAdded&&y.jsx(Pe,{label:h("common.delete"),icon:y.jsx(Hd,{}),onClick:a}),n.loadState==="loaded"&&!n.properties.proofing&&y.jsx(Wi,{label:h("components.storyFormatItem.useEditorExtensions"),onChange:w=>o(!w),value:!r})]})]})};function hZ(e){try{return new URL(e),!0}catch{}return!1}const pZ=()=>{const{dispatch:e,formats:t}=kn(),[r,n]=E.useState(""),{t:o}=Ce();async function a(){e(SW(r,await Jd(r)))}const l=async()=>{if(r.trim()==="")return{valid:!1};if(!hZ(r))return{message:o("dialogs.storyFormats.addStoryFormatButton.invalidUrl"),valid:!1};try{const u=await Jd(r);return t.some(d=>d.name===u.name&&d.version===u.version)?{message:o("dialogs.storyFormats.addStoryFormatButton.alreadyAdded",{storyFormatName:u.name,storyFormatVersion:u.version}),valid:!1}:{message:o("dialogs.storyFormats.addStoryFormatButton.addPreview",{storyFormatName:u.name,storyFormatVersion:u.version}),valid:!0}}catch(u){return{message:o("dialogs.storyFormats.addStoryFormatButton.fetchError",{errorMessage:u.message}),valid:!1}}};return y.jsx("span",{className:"add-format-button",children:y.jsx(Tc,{icon:y.jsx(Bs,{}),label:o("common.add"),onChange:u=>n(u.target.value),onSubmit:a,prompt:o("dialogs.storyFormats.addStoryFormatButton.prompt"),submitIcon:y.jsx(Bs,{}),submitLabel:o("common.add"),submitVariant:"create",validate:l,validateOn:"submit",value:r})})},gZ=()=>{const{dispatch:e,prefs:t}=lt(),{t:r}=Ce();function n(o){e(Ht("storyFormatListFilter",o))}return y.jsx(dl,{items:[{checked:t.storyFormatListFilter==="current",checkable:!0,label:r("dialogs.storyFormats.filterButton.current"),onClick:()=>n("current")},{checked:t.storyFormatListFilter==="user",checkable:!0,label:r("dialogs.storyFormats.filterButton.user"),onClick:()=>n("user")},{checked:t.storyFormatListFilter==="all",checkable:!0,label:r("dialogs.storyFormats.filterButton.all"),onClick:()=>n("all")}],icon:y.jsx(RI,{}),label:r("dialogs.storyFormats.filterButton.".concat(t.storyFormatListFilter))})},vZ=e=>{const{dispatch:t,formats:r}=kn(),{dispatch:n,prefs:o}=lt(),{t:a}=Ce(),l=gO(OW(r,o.storyFormatListFilter));function u(m,w){n(w?Ht("disabledStoryFormatEditorExtensions",[...o.disabledStoryFormatEditorExtensions,{name:m.name,version:m.version}]):Ht("disabledStoryFormatEditorExtensions",o.disabledStoryFormatEditorExtensions.filter(x=>x.name!==m.name||x.version!==m.version)))}function d(m){t(EW(m))}function h(m){n({type:"update",name:"storyFormat",value:{name:m.name,version:m.version}})}function g(m){n({type:"update",name:"proofingFormat",value:{name:m.name,version:m.version}})}return y.jsx(GP,{children:y.jsxs(Tn,{...e,className:"story-formats-dialog",headerLabel:a("dialogs.storyFormats.title"),children:[y.jsxs(At,{children:[y.jsx(pZ,{}),y.jsx(gZ,{})]}),y.jsxs(fr,{children:[l.length===0&&y.jsx("p",{children:a("dialogs.storyFormats.noneVisible")}),l.map(m=>y.jsx(dZ,{defaultFormat:m.name===o.storyFormat.name&&m.version===o.storyFormat.version,editorExtensionsDisabled:o.disabledStoryFormatEditorExtensions.some(w=>m.name===w.name&&m.version===w.version),onChangeEditorExtensionsDisabled:w=>u(m,w),onDelete:()=>d(m),onUseAsDefault:()=>h(m),onUseAsProofing:()=>g(m),proofingFormat:m.name===o.proofingFormat.name&&m.version===o.proofingFormat.version,format:m},m.id))]})]})})},kL=()=>{const{dispatch:e}=Gr(),t=cl(),{t:r}=Ce();return y.jsxs(At,{children:[y.jsx(Pe,{icon:y.jsx(gR,{}),label:r("routeActions.app.preferences"),onClick:()=>e({type:"addDialog",component:S9})}),y.jsx(Pe,{disabled:t.location.pathname==="/story-formats",icon:y.jsx(NI,{}),label:r("routeActions.app.storyFormats"),onClick:()=>e({type:"addDialog",component:vZ})}),y.jsx(Pe,{icon:y.jsx(lI,{}),label:r("routeActions.app.aboutApp"),onClick:()=>e({type:"addDialog",component:w9})}),y.jsx(Pe,{icon:y.jsx(dI,{}),label:r("routeActions.app.reportBug"),onClick:()=>window.open("https://twinery.org/2bugs","_blank")})]})},mZ=e=>{const{getCenter:t,story:r}=e,{dispatch:n}=fn(),o=E.useCallback(()=>{const{left:l,top:u}=t();n(L2(r,l,u),"undoChange.newPassage")},[n,t,r]),{t:a}=Ce();return y.jsx(Pe,{icon:y.jsx(Bs,{}),label:a("common.new"),onClick:o})},yZ=e=>{const{passages:t,story:r}=e,{dispatch:n}=fn(),{t:o}=Ce(),a=E.useMemo(()=>t.length===0?!0:t.some(u=>r.startPassage===u.id),[t,r.startPassage]),l=E.useCallback(()=>{t.length!==0&&n(Nz(r,t),t.length>1?"undoChange.deletePassages":"undoChange.deletePassage")},[n,t,r]);return bo("Backspace,Delete",l,[l]),y.jsx(Pe,{disabled:a,icon:y.jsx(Hd,{}),label:!a&&t.length>1?o("common.deleteCount",{count:t.length}):o("common.delete"),onClick:l})},wZ=e=>{const{passages:t,story:r}=e,{dispatch:n}=Gr(),{t:o}=Ce();function a(){n(nw(r.id,t.map(({id:l})=>l)))}return y.jsx(Pe,{disabled:t.length===0,icon:y.jsx(UT,{}),label:t.length>1?o("common.editCount",{count:t.length}):o("common.edit"),onClick:a})},bZ=e=>{const{onOpenFuzzyFinder:t}=e,{t:r}=Ce();return y.jsx(Pe,{icon:y.jsx($I,{}),label:r("routes.storyEdit.toolbar.goTo"),onClick:t})},xZ=e=>{const{story:t}=e,{dispatch:r}=gt(),{t:n}=Ce();return y.jsx(Pe,{icon:y.jsx(JI,{}),label:n("common.selectAll"),onClick:()=>r(qH(t))})},SZ=e=>{const{passage:t,story:r}=e,{dispatch:n,stories:o}=gt(),{t:a}=Ce();function l(){if(!t)throw new Error("No passage set");n(Nr(o,r,{startPassage:t.id}))}return y.jsx(Pe,{disabled:!t||t.id===r.startPassage,icon:y.jsx(fR,{}),label:a("routes.storyEdit.toolbar.startStoryHere"),onClick:l})},EZ=e=>{const{getCenter:t,onOpenFuzzyFinder:r,story:n}=e,{dispatch:o}=gt(),a=E.useMemo(()=>n.passages.filter(d=>d.selected),[n.passages]),l=E.useMemo(()=>a.length===1?a[0]:void 0,[a]);function u(d,h){if(!h)throw new Error("Passage is unset");o(Mo(n,h,{name:d},{dontUpdateOthers:!0}))}return y.jsxs(At,{children:[y.jsx(mZ,{getCenter:t,story:n}),y.jsx(wZ,{passages:a,story:n}),y.jsx(EP,{onRename:d=>u(d,l),passage:l,story:n}),y.jsx(yZ,{passages:a,story:n}),y.jsx(PP,{passage:l,story:n}),y.jsx(SZ,{passage:l,story:n}),y.jsx(bZ,{onOpenFuzzyFinder:r}),y.jsx(xZ,{story:n})]})},CZ=()=>{const{t:e}=Ce();return y.jsx(Pe,{disabled:!0,icon:y.jsx(vc,{}),label:e("common.rename")})},kZ=e=>{const{existingStories:t,onRename:r,story:n}=e,[o,a]=E.useState(n.name),{t:l}=Ce();E.useEffect(()=>a(n.name),[n]);function u(d){return d.trim()===""?{message:l("components.renameStoryButton.emptyName"),valid:!1}:t.some(h=>h.id!==n.id&&Fr(h)===Fr({...n,name:d}))?{message:l("components.renameStoryButton.nameAlreadyUsed"),valid:!1}:{valid:!0}}return y.jsx(Tc,{icon:y.jsx(vc,{}),label:l("common.rename"),onChange:d=>a(d.target.value),onSubmit:r,prompt:l("common.renamePrompt",{name:n.name}),validate:u,value:o})},TL=e=>e.story?y.jsx(kZ,{...e}):y.jsx(CZ,{}),TZ=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ce();return y.jsx(Pe,{icon:y.jsx(dm,{}),label:n("common.details"),onClick:()=>r({type:"addDialog",component:eQ,props:{storyId:t.id}})})},OZ=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ce();return y.jsx(Pe,{icon:y.jsx(hR,{}),label:n("routes.storyEdit.toolbar.findAndReplace"),onClick:()=>r({type:"addDialog",component:kQ,props:{find:"",flags:{includePassageNames:!0,matchCase:!1,useRegexes:!1},replace:"",storyId:t.id}})})},PZ=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ce();return y.jsx(Pe,{icon:y.jsx(cI,{}),label:n("routes.storyEdit.toolbar.javaScript"),onClick:()=>r({type:"addDialog",component:XY,props:{storyId:t.id}})})},LZ=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ce();return y.jsx(Pe,{icon:y.jsx(YT,{}),label:n("routes.storyEdit.toolbar.passageTags"),onClick:()=>r({type:"addDialog",component:aV,props:{storyId:t.id}})})},NZ=e=>{const{story:t}=e,{dispatch:r}=Gr(),{t:n}=Ce();return y.jsx(Pe,{icon:y.jsx(HI,{}),label:n("routes.storyEdit.toolbar.stylesheet"),onClick:()=>r({type:"addDialog",component:TQ,props:{storyId:t.id}})})},jZ=e=>{const{dispatch:t,stories:r}=gt(),{story:n}=e;return y.jsxs(At,{children:[y.jsx(OZ,{story:n}),y.jsx(TL,{existingStories:r,onRename:o=>t(Nr(r,n,{name:o})),story:n}),y.jsx(TZ,{story:n}),y.jsx(LZ,{story:n}),y.jsx(PZ,{story:n}),y.jsx(NZ,{story:n})]})},AZ=()=>{const{redo:e,redoLabel:t,undo:r,undoLabel:n}=fn(),{t:o}=Ce();return y.jsxs(y.Fragment,{children:[y.jsx(Pe,{disabled:!r,icon:y.jsx(HT,{}),label:n!=null?n:o("common.undo"),onClick:r}),y.jsx(Pe,{disabled:!e,icon:y.jsx(BT,{}),label:t!=null?t:o("common.redo"),onClick:e})]})},OL=E.memo(({story:e})=>{const{dispatch:t,stories:r}=gt(),{t:n}=Ce(),o=E.useCallback(a=>{t(Nr(r,e,{zoom:a}))},[t,r,e]);return y.jsxs("div",{className:"zoom-buttons",children:[y.jsx("span",{className:"legend",children:n("routes.storyEdit.zoomButtons.legend")}),y.jsx(Pe,{icon:y.jsx(VT,{}),iconOnly:!0,label:n("routes.storyEdit.zoomButtons.passageNamesAndExcerpts"),onClick:()=>o(1),selectable:!0,selected:e.zoom===1}),y.jsx(Pe,{icon:y.jsx(YI,{}),iconOnly:!0,label:n("routes.storyEdit.zoomButtons.passageNames"),onClick:()=>o(.6),selectable:!0,selected:e.zoom===.6}),y.jsx(Pe,{icon:y.jsx(FI,{}),iconOnly:!0,label:n("routes.storyEdit.zoomButtons.storyStructure"),onClick:()=>o(.3),selectable:!0,selected:e.zoom===.3})]})});OL.displayName="ZoomButtons";const MZ=e=>{const{getCenter:t,onOpenFuzzyFinder:r,story:n}=e,{t:o}=Ce();return y.jsx(bL,{pinnedControls:y.jsxs(y.Fragment,{children:[y.jsx(OL,{story:n}),y.jsx(AZ,{})]}),tabs:{[o("common.passage")]:y.jsx(EZ,{getCenter:t,onOpenFuzzyFinder:r,story:n}),[o("common.story")]:y.jsx(jZ,{story:n}),[o("common.build")]:y.jsx(CL,{story:n}),[o("common.appName")]:y.jsx(kL,{})}})};function IZ(e,t){const{dispatch:r}=fn(),[n,o]=E.useState(!1);E.useEffect(()=>{if(!n&&(o(!0),e.passages.length===0)){const a=t();r(L2(e,a.left,a.top))}},[r,t,n,e])}function RZ(e){const t=E.useMemo(()=>e.passages.filter(h=>h.selected),[e.passages]),{dispatch:r}=fn(),{dispatch:n}=Gr(),o=E.useCallback(h=>r(GH(e,h)),[e,r]),a=E.useCallback(h=>{Math.abs(h.left)<1&&Math.abs(h.top)<1||r(WH(e,e.passages.reduce((g,m)=>m.selected?[...g,m.id]:g,[]),h.left/e.zoom,h.top/e.zoom),(t.length>1,"undoChange.movePassages"))},[t.length,e,r]),l=E.useCallback(h=>n(nw(e.id,[h.id])),[n,e.id]),u=E.useCallback((h,g)=>r(q2(e,h,g)),[e,r]),d=E.useCallback((h,g)=>{const m={height:h.height/e.zoom,left:h.left/e.zoom,top:h.top/e.zoom,width:h.width/e.zoom};r(VH(e,m,g?t.map(w=>w.id):[]))},[t,e,r]);return{handleDeselectPassage:o,handleDragPassages:a,handleEditPassage:l,handleSelectPassage:u,handleSelectRect:d}}function _Z(e,t){const{dialogs:r}=Gr(),{prefs:n}=lt(),o=E.useCallback(()=>{if(!t.current)throw new Error("Asked for the center of an element, but it does not exist in the DOM yet");return{left:(t.current.scrollLeft+t.current.clientWidth/2)/e.zoom,top:(t.current.scrollTop+t.current.clientHeight/2)/e.zoom}},[t,e.zoom]),a=E.useCallback(({left:l,top:u})=>{if(!t.current)throw new Error("Asked to set the center of an element, but it does not exist in the DOM yet");const{height:d,width:h}=t.current.getBoundingClientRect(),g={left:(l-h/e.zoom/2)*e.zoom,top:(u-d/e.zoom/2)*e.zoom};r.length>0&&(g.left+=n.dialogWidth/2),t.current.scrollTo(g)},[r.length,t,n.dialogWidth,e.zoom]);return{getCenter:o,setCenter:a}}function $Z(e){const{dispatch:t,stories:r}=gt();bo("-",()=>{switch(e.zoom){case 1:t(Nr(r,e,{zoom:.6}));break;case .6:t(Nr(r,e,{zoom:.3}));break}},{keydown:!1,keyup:!0},[t,r,e]),bo("=",()=>{switch(e.zoom){case .3:t(Nr(r,e,{zoom:.6}));break;case .6:t(Nr(r,e,{zoom:1}));break}},{keydown:!1,keyup:!0},[t,r,e])}function DZ(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}var FZ=DZ;function zZ(e){var t=1.70158;return e*e*((t+1)*e-t)}var HZ=zZ;function BZ(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}var WZ=BZ;function UZ(e){var t=.36363636363636365,r=8/11,n=9/10,o=4356/361,a=35442/1805,l=16061/1805,u=e*e;return e<t?7.5625*u:e<r?9.075*u-9.9*e+3.4:e<n?o*u-a*e+l:10.8*e*e-20.52*e+10.72}var bw=UZ,xC=bw;function KZ(e){return e<.5?.5*(1-xC(1-e*2)):.5*xC(e*2-1)+.5}var GZ=KZ,qZ=bw;function VZ(e){return 1-qZ(1-e)}var XZ=VZ;function YZ(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}var QZ=YZ;function JZ(e){return 1-Math.sqrt(1-e*e)}var ZZ=JZ;function eee(e){return Math.sqrt(1- --e*e)}var tee=eee;function ree(e){return e<.5?4*e*e*e:.5*Math.pow(2*e-2,3)+1}var nee=ree;function iee(e){return e*e*e}var oee=iee;function aee(e){var t=e-1;return t*t*t+1}var see=aee;function lee(e){return e<.5?.5*Math.sin(13*Math.PI/2*2*e)*Math.pow(2,10*(2*e-1)):.5*Math.sin(-13*Math.PI/2*(2*e-1+1))*Math.pow(2,-10*(2*e-1))+1}var uee=lee;function cee(e){return Math.sin(13*e*Math.PI/2)*Math.pow(2,10*(e-1))}var fee=cee;function dee(e){return Math.sin(-13*(e+1)*Math.PI/2)*Math.pow(2,-10*e)+1}var hee=dee;function pee(e){return e===0||e===1?e:e<.5?.5*Math.pow(2,20*e-10):-.5*Math.pow(2,10-e*20)+1}var gee=pee;function vee(e){return e===0?e:Math.pow(2,10*(e-1))}var mee=vee;function yee(e){return e===1?e:1-Math.pow(2,-10*e)}var wee=yee;function bee(e){return e}var xee=bee;function See(e){return e/=.5,e<1?.5*e*e:(e--,-.5*(e*(e-2)-1))}var Eee=See;function Cee(e){return e*e}var kee=Cee;function Tee(e){return-e*(e-2)}var Oee=Tee;function Pee(e){return e<.5?8*Math.pow(e,4):-8*Math.pow(e-1,4)+1}var Lee=Pee;function Nee(e){return Math.pow(e,4)}var jee=Nee;function Aee(e){return Math.pow(e-1,3)*(1-e)+1}var Mee=Aee;function Iee(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}var Ree=Iee;function _ee(e){return e*e*e*e*e}var $ee=_ee;function Dee(e){return--e*e*e*e*e+1}var Fee=Dee;function zee(e){return-.5*(Math.cos(Math.PI*e)-1)}var Hee=zee;function Bee(e){var t=Math.cos(e*Math.PI*.5);return Math.abs(t)<1e-14?1:1-t}var Wee=Bee;function Uee(e){return Math.sin(e*Math.PI/2)}var Kee=Uee,Gee={backInOut:FZ,backIn:HZ,backOut:WZ,bounceInOut:GZ,bounceIn:XZ,bounceOut:bw,circInOut:QZ,circIn:ZZ,circOut:tee,cubicInOut:nee,cubicIn:oee,cubicOut:see,elasticInOut:uee,elasticIn:fee,elasticOut:hee,expoInOut:gee,expoIn:mee,expoOut:wee,linear:xee,quadInOut:Eee,quadIn:kee,quadOut:Oee,quartInOut:Lee,quartIn:jee,quartOut:Mee,quintInOut:Ree,quintIn:$ee,quintOut:Fee,sineInOut:Hee,sineIn:Wee,sineOut:Kee};function qee(e,t,r,n){let o;if(n<1)return o=t+r*Gee.quadOut(n),e(o),o;e(t+r)}function Vee(e,t){const[r,n]=E.useState(e),o=E.useRef(),a=E.useCallback(()=>{o.current&&window.requestAnimationFrame(l=>{const u=o.current;if(u.lastTimestamp){u.elapsed+=(l-u.lastTimestamp)/500,u.lastTimestamp=l;const d=qee(n,u.zoom.start,u.zoom.change,u.elapsed);if(d){const h=u.scrollNormalizedCenter.left*d-u.scrollCenter.width,g=u.scrollNormalizedCenter.top*d-u.scrollCenter.height;h>=0&&g>=0&&(u.scrollTarget.scrollLeft=h,u.scrollTarget.scrollTop=g),a()}else o.current=void 0}else u.lastTimestamp=l,a()})},[]);return E.useEffect(()=>{!o.current&&r!==e&&t&&(o.current={scrollTarget:t,elapsed:0,scrollNormalizedCenter:{left:(t.scrollLeft+t.clientWidth/2)/r,top:(t.scrollTop+t.clientHeight/2)/r},scrollCenter:{height:t.clientHeight/2,width:t.clientWidth/2},zoom:{start:r,change:e-r}},window.requestAnimationFrame(a))},[r,t,a,e]),r}const Xee=()=>{const{storyId:e}=fp(),{stories:t}=fn(),r=st(t,e),[n,o]=E.useState(!1),a=E.useRef(null),{getCenter:l,setCenter:u}=_Z(r,a),{handleDeselectPassage:d,handleDragPassages:h,handleEditPassage:g,handleSelectPassage:m,handleSelectRect:w}=RZ(r),x=Vee(r.zoom,a.current);return $Z(r),IZ(r,l),y.jsxs("div",{className:"story-edit-route",children:[y.jsx(YO,{title:r.name}),y.jsx(MZ,{getCenter:l,onOpenFuzzyFinder:()=>o(!0),story:r}),y.jsxs(QO,{grabbable:!0,padded:!1,ref:a,children:[y.jsx(NJ,{container:a,formatName:r.storyFormat,formatVersion:r.storyFormatVersion,onDeselect:d,onDrag:h,onEdit:g,onSelect:m,onSelectRect:w,passages:r.passages,startPassageId:r.startPassage,tagColors:r.tagColors,visibleZoom:x,zoom:r.zoom}),y.jsx(UJ,{onClose:()=>o(!1),onOpen:()=>o(!0),open:n,setCenter:u,story:r})]})]})},Yee=()=>y.jsx(cP,{children:y.jsx($P,{children:y.jsx(Xee,{})})});var Qee=KP,SC=Gn;function Jee(e,t,r,n){return e==null?[]:(SC(t)||(t=t==null?[]:[t]),r=n?void 0:r,SC(r)||(r=r==null?[]:[r]),Qee(e,t,r))}var Zee=Jee;const EC=wt(Zee),ete=1e3*60*60*24*14;function tte(){const{prefs:e}=lt();return{shouldShowDonationPrompt:E.useCallback(()=>e.donateShown?!1:Date.now()>e.firstRunTime+ete,[e.donateShown,e.firstRunTime])}}const rte=e=>{var g;const{watch:t}=e,[r,n]=E.useState(),[o,a]=E.useState(!1),[l,u]=E.useState(),{t:d}=Ce(),h=Ia()||!((g=navigator.storage)!=null&&g.estimate);return E.useEffect(()=>{async function m(){a(!0);const{quota:w,usage:x}=await navigator.storage.estimate();w!==void 0&&x!==void 0&&u(((1-x/w)*100).toFixed(0)),n(t),a(!1)}!h&&!o&&r!==t&&m()},[h,r,t,o]),h?null:y.jsx("span",{className:"storage-quota",children:l&&d("components.storageQuota.freeSpace",{percent:l})})},nte=()=>{const{stories:e}=gt(),{t}=Ce();return y.jsx(Pe,{icon:y.jsx(rR,{}),label:t("routes.storyList.toolbar.archive"),onClick:()=>EL(yO(e,vn()),qW())})},ite=()=>{const{dispatch:e}=Gr(),{t}=Ce();return y.jsx(Pe,{icon:y.jsx(KT,{}),label:t("common.import"),onClick:()=>e({type:"addDialog",component:VY})})},ote=()=>{const{dispatch:e}=Gr(),{t}=Ce();return y.jsx(Pe,{icon:y.jsx(YT,{}),label:t("routes.storyList.toolbar.storyTags"),onClick:()=>{e({type:"addDialog",component:OQ})}})},ate=()=>y.jsxs(At,{children:[y.jsx(ote,{}),y.jsx(ite,{}),y.jsx(nte,{})]}),ste=()=>{const{dispatch:e,stories:t}=gt(),[r,n]=E.useState(Ku(rl().name,t.map(h=>h.name))),o=cl(),{prefs:a}=lt(),{t:l}=Ce();function u(h){return h.trim()===""?{valid:!1,message:l("routes.storyList.toolbar.createStoryButton.emptyName")}:t.some(g=>g.name.toLowerCase()===h.toLowerCase())?{valid:!1,message:l("routes.storyList.toolbar.createStoryButton.nameConflict")}:{valid:!0}}function d(){const h=Lz(t,a,{name:r})(e,()=>t);o.push("/stories/".concat(h))}return y.jsx(Tc,{icon:y.jsx(Bs,{}),label:l("common.new"),submitLabel:l("common.create"),submitVariant:"create",onChange:h=>n(h.target.value),onSubmit:d,prompt:l("routes.storyList.toolbar.createStoryButton.prompt"),validate:u,value:r})},lte=e=>{const{cancelIcon:t,cancelLabel:r,confirmIcon:n,confirmLabel:o,confirmVariant:a,onConfirm:l,prompt:u,...d}=e,[h,g]=E.useState(!1),{t:m}=Ce();function w(){g(!1),l()}return y.jsx("span",{className:"confirm-button",children:y.jsx(ha,{ariaLabel:u,onChangeOpen:g,open:h,...d,children:y.jsxs("div",{children:[y.jsx(fr,{children:u}),y.jsxs(At,{children:[y.jsx(Pe,{icon:n!=null?n:y.jsx(n0,{}),label:o!=null?o:m("common.ok"),onClick:w,variant:a!=null?a:"primary"}),y.jsx(Pe,{icon:t!=null?t:y.jsx(zn,{}),label:r!=null?r:m("common.cancel"),onClick:()=>g(!1)})]})]})})})},ute=({story:e})=>{const[t,r]=E.useState(e==null?void 0:e.name),{dispatch:n}=gt(),{t:o}=Ce();return E.useEffect(()=>{e!=null&&e.name&&r(e.name)},[e==null?void 0:e.name]),y.jsx(lte,{confirmIcon:y.jsx(Hd,{}),confirmLabel:o("common.delete"),confirmVariant:"danger",disabled:!e,icon:y.jsx(Hd,{}),label:o("common.delete"),onConfirm:e?()=>n(jz(e)):()=>{},prompt:o("routes.storyList.toolbar.deleteStoryButton.warning.".concat(Ia()?"electron":"web"),{storyName:t})})},cte=({story:e})=>{const{dispatch:t,stories:r}=gt(),{t:n}=Ce();function o(){if(!e)throw new Error("No story set");t(Az(e,r))}return y.jsx(Pe,{disabled:!e,icon:y.jsx(CI,{}),label:n("common.duplicate"),onClick:o})},fte=({story:e})=>{const t=cl(),{t:r}=Ce();return y.jsx(Pe,{disabled:!e,icon:y.jsx(UT,{}),label:r("common.edit"),onClick:()=>t.push("/stories/".concat(e==null?void 0:e.id))})},dte=e=>{var u;const{story:t}=e,{dispatch:r,prefs:n}=lt(),{dispatch:o,stories:a}=gt();function l(d,h){if(!t)throw new Error("Story is unset");o(Nr(a,t,{tags:t.tags?[...t.tags,d]:[d]})),h&&r(Ht("storyTagColors",{...n.storyTagColors,[d]:h}))}return y.jsx(CP,{assignedTags:(u=t==null?void 0:t.tags)!=null?u:[],disabled:!t,existingTags:g0(a),icon:y.jsx(XT,{}),onAdd:l})},hte=e=>{const{selectedStory:t}=e,{dispatch:r,stories:n}=gt();return y.jsxs(At,{children:[y.jsx(ste,{}),y.jsx(fte,{story:t}),y.jsx(dte,{story:t}),y.jsx(TL,{existingStories:n,onRename:o=>r(Nr(n,t,{name:o})),story:t}),y.jsx(cte,{story:t}),y.jsx(ute,{story:t})]})},pte=()=>{const{t:e}=Ce(),{dispatch:t,prefs:r}=lt();return y.jsx(dl,{icon:y.jsx(aI,{}),items:[{checkable:!0,checked:r.storyListSort==="date",label:e("routes.storyList.toolbar.sortByDate"),onClick:()=>t(Ht("storyListSort","date"))},{checkable:!0,checked:r.storyListSort==="name",label:e("routes.storyList.toolbar.sortByName"),onClick:()=>t(Ht("storyListSort","name"))}],label:e("routes.storyList.toolbar.sort")})},gte=e=>{const{dispatch:t,prefs:r}=lt(),{t:n}=Ce();return y.jsx(dl,{disabled:e.tags.length===0,icon:y.jsx(XT,{}),items:[{checkable:!0,checked:r.storyListTagFilter.length===0,label:n("routes.storyList.toolbar.showAllStories"),onClick:()=>t({type:"update",name:"storyListTagFilter",value:[]})},{separator:!0},...e.tags.map(o=>({checkable:!0,checked:r.storyListTagFilter.includes(o),label:o,onClick:()=>t({type:"update",name:"storyListTagFilter",value:r.storyListTagFilter.includes(o)?r.storyListTagFilter.filter(a=>a!==o):[...r.storyListTagFilter,o]})}))],label:n("routes.storyList.toolbar.showTags")})},vte=()=>{const{stories:e}=gt();return y.jsxs(At,{children:[y.jsx(pte,{}),y.jsx(gte,{tags:g0(e)})]})},mte=e=>{const{selectedStories:t}=e,{stories:r}=gt(),{t:n}=Ce(),o=t.length===1?t[0]:void 0;return y.jsx(bL,{pinnedControls:y.jsx(rte,{watch:r}),tabs:{[n("common.story")]:y.jsx(hte,{selectedStory:o}),[n("routes.storyList.library")]:y.jsx(ate,{}),[n("common.build")]:y.jsx(CL,{story:o}),[n("common.view")]:y.jsx(vte,{}),[n("common.appName")]:y.jsx(kL,{})}})},yte=e=>{var r;const t={gridTemplateColumns:"columnWidth"in e?"repeat(auto-fit, ".concat(typeof e.columnWidth=="number"?e.columnWidth+"px":e.columnWidth,")"):"repeat(".concat(e.columns,", 1fr)"),maxWidth:(r=e.maxWidth)!=null?r:"auto"};return y.jsx("div",{className:"card-group",style:t,children:e.children})};function wte(e){let t=0;for(let r=0;r<e.length;r++)t+=e.charCodeAt(r);return t%360}const PL=E.memo(e=>{const{story:t}=e,r=[wte(t.name)];r.push((r[0]+15)%360),r.push((r[0]-15)%360),r.push((r[0]+30)%360),r.push((r[0]-30)%360),r.push((r[0]+60)%360);let n=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const d=t.passages.map(g=>({key:g.name,x:g.left+g.width/2,y:g.top+g.height/2,radius:Math.max(g.width,g.height)})).reduce((g,m,w)=>{const x=m.radius+200;return n=Math.min(n,m.x-x),o=Math.min(o,m.y-x),a=Math.max(a,m.x+x),l=Math.max(l,m.y+x),g[0].push(y.jsx("circle",{cx:m.x,cy:m.y,r:x,style:{fill:"hsl(".concat(r[w%r.length],", 80%, 80%)")}},"".concat(m.key,"-bg"))),g[1].push(y.jsx("circle",{cx:m.x,cy:m.y,r:m.radius,style:{fill:"hsl(".concat(r[w%r.length],", 80%, 60%)")}},"".concat(m.key,"-fg"))),g},[[],[]]).map((g,m)=>y.jsx("g",{className:"story-preview-".concat(m===0?"bg":"fg"),children:g},m)),h="".concat(n," ").concat(o," ").concat(a-n," ").concat(l-o);return y.jsx("svg",{className:"story-preview",viewBox:h,xmlns:"http://www.w3.org/2000/svg",children:d})});PL.displayName="StoryPreview";const bte=new Intl.DateTimeFormat([]),xte=e=>{const{onChangeTagColor:t,onEdit:r,onRemoveTag:n,onSelect:o,story:a,storyTagColors:l,...u}=e,{t:d}=Ce();return y.jsx("div",{className:"story-card",children:y.jsx(lL,{...u,label:a.name,onDoubleClick:r,onSelect:o,selected:a.selected,children:y.jsxs(fr,{children:[y.jsxs("div",{className:"story-card-summary",children:[y.jsx("div",{className:"story-card-summary-preview",children:y.jsx(PL,{story:a})}),y.jsxs("div",{className:"story-card-summary-text",children:[y.jsx("h2",{children:a.name}),y.jsxs("p",{children:[d("components.storyCard.lastUpdated",{date:bte.format(a.lastUpdate)}),y.jsx("br",{}),d("components.storyCard.passageCount",{count:a.passages.length})]})]})]}),a.tags&&y.jsx("div",{className:"tags",children:a.tags.map(h=>y.jsx(kP,{color:l[h],name:h,onChangeColor:g=>t(h,g),onRemove:()=>n(h)},h))})]})})})},Ste="360px",Ete=e=>{const{onSelectStory:t,stories:r}=e,{dispatch:n,prefs:o}=lt(),{dispatch:a}=fn(),l=cl();function u(h,g){n(Ht("storyTagColors",{...o.storyTagColors,[h]:g}))}function d(h,g){a(Nr(r,h,{tags:h.tags.filter(m=>m!==g)}))}return y.jsx(y.Fragment,{children:y.jsx(yte,{columnWidth:Ste,children:y.jsx(_a,{component:null,children:r.map(h=>y.jsx(Xn,{classNames:"pop",timeout:200,children:y.jsx(xte,{onChangeTagColor:u,onEdit:()=>l.push("/stories/".concat(h.id)),onRemoveTag:g=>d(h,g),onSelect:()=>t(h),story:h,storyTagColors:o.storyTagColors})},h.id))})})})},Cte=e=>{const{children:t,ignoreSelector:r,onClickAway:n}=e,o=a=>{var l;r&&(l=a.target)!=null&&l.closest(r)||n()};return y.jsx("div",{onClick:o,children:t})},kte=()=>{const{dispatch:e}=Gr(),{dispatch:t,stories:r}=gt(),{prefs:n}=lt(),{shouldShowDonationPrompt:o}=tte(),{t:a}=Ce(),l=E.useMemo(()=>r.filter(d=>d.selected),[r]),u=E.useMemo(()=>{const d=n.storyListTagFilter.length>0?r.filter(h=>h.tags.some(g=>n.storyListTagFilter.includes(g))):r;switch(n.storyListSort){case"date":return EC(d,["lastUpdate"],["desc"]);case"name":return EC(d,"name")}},[n.storyListSort,n.storyListTagFilter,r]);return E.useEffect(()=>{for(const d of l)d.selected&&!u.includes(d)&&t(XH(d))},[l,r,t,u]),E.useEffect(()=>{o()&&e({type:"addDialog",component:b9})},[e,o]),y.jsxs("div",{className:"story-list-route",children:[y.jsx(mte,{selectedStories:l}),y.jsx(Cte,{ignoreSelector:".story-card",onClickAway:()=>t(YH()),children:y.jsxs(QO,{title:a(n.storyListTagFilter.length>0?"routes.storyList.taggedTitleCount":"routes.storyList.titleCount",{count:u.length}),children:[y.jsx(t_,{}),y.jsx("div",{className:"stories",children:r.length===0?y.jsx("p",{children:a("routes.storyList.noStories")}):y.jsx(Ete,{onSelectStory:d=>t(QH(d)),stories:u})})]})})]})},CC=()=>y.jsx(cP,{children:y.jsx($P,{children:y.jsx(kte,{})})});function xw(e){delete window.CodeMirror,delete window.SVG,delete window.Store,delete window.StoryFormat,delete window.amdDefine,delete window.app,delete window.jQuery,document.open(),document.write(e),document.close()}const Tte=()=>{const[e,t]=E.useState(),[r,n]=E.useState(!1),{storyId:o}=fp(),{publishStory:a}=Oc();return E.useEffect(()=>{async function l(){try{xw(await a(o))}catch(u){t(u)}}r||(n(!0),l())},[r,a,o]),e?y.jsx(_o,{children:e.message}):null},Ote=()=>{const[e,t]=E.useState(),[r,n]=E.useState(!1),{storyId:o}=fp(),{proofStory:a}=Oc();return E.useEffect(()=>{async function l(){try{xw(await a(o))}catch(u){t(u)}}r||(n(!0),l())},[r,a,o]),e?y.jsx(_o,{children:e.message}):null},kC=()=>{const[e,t]=E.useState(),[r,n]=E.useState(!1),{passageId:o,storyId:a}=fp(),{publishStory:l}=Oc();return E.useEffect(()=>{async function u(){try{xw(await l(a,{formatOptions:"debug",startId:o}))}catch(d){t(d)}}r||(n(!0),u())},[r,o,l,a]),e?y.jsx(_o,{children:e.message}):null};var Pte=new Error("Element already at target scroll position"),Lte=new Error("Scroll cancelled"),Nte=Math.min,TC=Date.now,jte={left:OC("scrollLeft"),top:OC("scrollTop")};function OC(e){return function(r,n,o,a){o=o||{},typeof o=="function"&&(a=o,o={}),typeof a!="function"&&(a=Mte);var l=TC(),u=r[e],d=o.ease||Ate,h=isNaN(o.duration)?350:+o.duration,g=!1;return u===n?a(Pte,r[e]):requestAnimationFrame(w),m;function m(){g=!0}function w(x){if(g)return a(Lte,r[e]);var C=TC(),j=Nte(1,(C-l)/h),T=d(j);r[e]=T*(n-u)+u,j<1?requestAnimationFrame(w):requestAnimationFrame(function(){a(null,r[e])})}}}function Ate(e){return .5*(1-Math.cos(Math.PI*e))}function Mte(){}const Ite=wt(jte),Rte=e=>{const{children:t,image:r,nextLabel:n,onNext:o,onSkip:a,showSkip:l,title:u,...d}=e,{t:h}=Ce();return y.jsx("div",{className:"welcome-card",children:y.jsxs($o,{...d,children:[y.jsx("div",{className:"welcome-card-image",children:r}),y.jsxs(fr,{children:[y.jsx("h2",{children:u}),t]}),y.jsxs(At,{children:[y.jsx(Pe,{icon:y.jsx(eI,{}),variant:"primary",onClick:o,label:n}),l&&y.jsx(Pe,{icon:y.jsx(XM,{}),label:h("common.skip"),onClick:a})]})]})})},_te=()=>[{html:"routes.welcome.greeting",image:y.jsx(n_,{}),nextLabel:"routes.welcome.tellMeMore",title:"routes.welcome.greetingTitle"},{html:"routes.welcome.help",image:y.jsx(qT,{}),title:"routes.welcome.helpTitle"},Ia()?{html:"routes.welcome.autosave",image:y.jsx(Px,{}),title:"routes.welcome.autosaveTitle"}:{html:"routes.welcome.browserStorage",image:y.jsx(Px,{}),title:"routes.welcome.browserStorageTitle"},{html:"routes.welcome.done",image:y.jsx(eR,{}),nextLabel:"routes.welcome.gotoStoryList",title:"routes.welcome.doneTitle"}],PC=()=>{const e=E.useRef(null),{dispatch:t}=lt(),r=cl(),[n,o]=E.useState(1),a=E.useMemo(_te,[]),l=E.useMemo(()=>a.slice(0,n),[a,n]),{t:u}=Ce();E.useEffect(()=>{var g;if(e.current){const m=e.current.querySelector(".welcome-card:last-of-type");m&&Ite.top((g=document.documentElement)!=null?g:document.body,m.offsetTop,{duration:400})}},[n]);const d=()=>{t(Ht("welcomeSeen",!0)),r.push("/")},h=()=>o(g=>g+1);return y.jsxs("div",{className:"welcome-route",ref:e,children:[y.jsx(nh,{children:y.jsx("title",{children:u("routes.welcome.greetingTitle")})}),y.jsx("div",{className:"cards",children:y.jsx(_a,{component:null,children:l.map((g,m)=>y.jsx(Xn,{classNames:"pop",timeout:200,children:y.jsx(Rte,{image:g.image,nextLabel:g.nextLabel?u(g.nextLabel):u("common.next"),onNext:m===a.length-1?d:h,onSkip:d,showSkip:m===0,title:u(g.title),children:y.jsx("div",{dangerouslySetInnerHTML:{__html:u(g.html)}})})},g.title))})})]})},$te=()=>{const{prefs:e}=lt();return y.jsx(d8,{children:e.welcomeSeen?y.jsxs(t8,{children:[y.jsx(co,{exact:!0,path:"/",children:y.jsx(CC,{})}),y.jsx(co,{path:"/welcome",children:y.jsx(PC,{})}),y.jsx(co,{path:"/stories/:storyId/play",children:y.jsx(Tte,{})}),y.jsx(co,{path:"/stories/:storyId/proof",children:y.jsx(Ote,{})}),y.jsx(co,{path:"/stories/:storyId/test/:passageId",children:y.jsx(kC,{})}),y.jsx(co,{path:"/stories/:storyId/test",children:y.jsx(kC,{})}),y.jsx(co,{path:"/stories/:storyId",children:y.jsx(Yee,{})}),y.jsx(co,{path:"*",render:t=>(console.warn('No route for path "'.concat(t.location.pathname,'", rendering story list')),y.jsx(CC,{}))})]}):y.jsx(PC,{})})},Dte=({children:e})=>{const[t,r]=E.useState(!1),[n,o]=E.useState(!1),[a,l]=E.useState(!1),[u,d]=E.useState(!1),[h,g]=E.useState(!1),{dispatch:m,prefs:w}=lt(),{dispatch:x}=gt(),{dispatch:C,formats:j}=kn(),T=FP(),{prefs:k,stories:P,storyFormats:A}=Bh();return E.useEffect(()=>{async function L(){if(!t){const R=await A.load(),D=await k.load(),$=await P.load();C({type:"init",state:R}),m({type:"init",state:D}),x({type:"init",state:$}),o(!0)}}L(),r(!0)},[C,n,t,k,m,P,x,A]),E.useEffect(()=>{n&&!u&&(C({type:"repair"}),d(!0))},[C,u,n]),E.useEffect(()=>{n&&u&&!a&&(m({type:"repair",allFormats:j}),l(!0))},[u,j,n,m,a]),E.useEffect(()=>{n&&u&&a&&!h&&(T(),g(!0))},[C,u,j,n,m,a,w.storyFormat.name,w.storyFormat.version,T,P,x,h]),n&&u&&a&&h?y.jsx(y.Fragment,{children:e}):y.jsx(r2,{})};function Fte(){const e=LP();return E.useEffect(()=>{document.body.dataset.appTheme=e},[e]),null}const zte=()=>y.jsx(LR,{children:y.jsxs(cU,{children:[y.jsx(fU,{}),y.jsx(Fte,{}),y.jsx(AW,{children:y.jsx(MW,{children:y.jsx(Dte,{children:y.jsx(E.Suspense,{fallback:y.jsx(r2,{}),children:y.jsx($te,{})})})})})]})});tl.render(y.jsx(E.StrictMode,{children:y.jsx(zte,{})}),document.getElementById("root"));
